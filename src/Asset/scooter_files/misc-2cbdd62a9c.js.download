var BMS={},__TEST__=void 0!==__TEST__,merchTransactionURLs={"in-sit.bms.bz":"https://in-sit.bms.bz/api/store/transaction/","in-preprod.bms.bz":"https://in-preprod.bms.bz/api/fanhood/transaction/","in.bookmyshow.com":"https://in.bookmyshow.com/api/fanhood/transaction/",localhost:"https://in-sit.bms.bz/api/store/transaction/"};$.extend(!0,global,{strContentUrl:"//in.bmscdn.com",strSocketUrl:"https://inbox-in.bookmyshow.com",fnBImgPath:"//in.bmscdn.com/bmsin/v2/Web-v2/d-combo/",fnBNewImgPath:"//in.bmscdn.com/fnb/v3/xxhdpi/",fbAppId:"165665113451029",strWltAppCode:"WEBWLT2",defImageURL:"",defFirstName:"Guest",strCurrencyCode:"Rs.",strOneCurrencyCode:"Re.",getDataUrl:"/serv/getData",reqRgnArr:["home","movies"],notReqRgnArr:["static","box-office-listing","box-office","404","best-of-the-year"],RgnCallBack:[],SignInCallBack:[],SignOutCallBack:[],merchTransactionURL:merchTransactionURLs[window.location.host]},global),BMS={Region:{},Storage:{},Misc:{},SignIn:{},Validate:{},Notifications:{},Header:{},Giftcard:{},Modal:{},Experiences:{},Events:{},Ratings:{},Analytics:{}},"function"!=typeof Object.assign&&(Object.assign=function(e,t){"use strict";if(null===e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),i=1;i<arguments.length;i++){var a=arguments[i];if(null!==a)for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n});var XD=(function(){var e,i,a,o=1,s=this;return{postMessage:function(e,t,n){t&&(n=n||parent,s.postMessage?n.postMessage(e,t.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):t&&(n.location=t.replace(/#.*$/,"")+"#"+ +new Date+o+++"&"+e))},receiveMessage:function(n,t){s.postMessage?(n&&(a=function(e){if("string"==typeof t&&e.origin!==t||"[object Function]"===Object.prototype.toString(t)&&!1===t(e.origin))return!1;n&&n(e),n=!1}),s.addEventListener?s[n?"addEventListener":"removeEventListener"]("message",a,!1):s[n?"attachEvent":"detachEvent"]("onmessage",a)):(e&&clearInterval(e),e=null,n&&(e=setInterval((function(){var e=document.location.hash,t=/^#?\d+&/;e!==i&&t.test(e)&&n({data:(i=e).replace(t,"")})}),100)))}}})();"object"!=typeof JSON&&(JSON={}),(function(){"use strict";function f(e){return e<10?"0"+e:e}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,(function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function str(e,t){var n,i,a,o,s,r=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),typeof(l="function"==typeof rep?rep.call(t,e,l):l)){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(l)){for(o=l.length,n=0;n<o;n+=1)s[n]=str(n,l)||"null";return a=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+r+"]":"["+s.join(",")+"]",gap=r,a}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;n<o;n+=1)"string"==typeof rep[n]&&(a=str(i=rep[n],l))&&s.push(quote(i)+(gap?": ":":")+a);else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(a=str(i,l))&&s.push(quote(i)+(gap?": ":":")+a);return a=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+r+"}":"{"+s.join(",")+"}",gap=r,a}}"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var i;if(indent=gap="","number"==typeof n)for(i=0;i<n;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if((rep=t)&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(e,t){var n,i,a=e[t];if(a&&"object"==typeof a)for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(void 0!==(i=walk(a,n))?a[n]=i:delete a[n]);return reviver.call(e,t,a)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,(function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})})(),BMS.SignIn.CallBackArray={};var OTPScreen="",timerId;function signInModalRestore(){var n;n=window.open,window.open=function(){var e=(window.open=n).apply(this,arguments),t=setInterval((function(){e.closed&&(clearInterval(t),BMS.Misc.fnBusy(!1,BMS.Modal.currentModal))}),3e3);return e}}function hideSignInOnUserLoginPage(){"user-login"==pageName&&$("#navbar #preSignIn, #navbar #withoutLogIn, #navbar #preSignup").removeAttr("data-modal"),global.blnIsTouchScreen&&$(".user-login ._signin-signup-popover").addClass("_touch")}function preProcessString(e,t){if(t)try{var n=window.CryptoJS,i=n.enc.Base64.parse(e),a=n.enc.Utf8.parse(global.seatLayoutEncryptionKey),o=n.lib.WordArray.create(0,128),e=n.AES.decrypt({ciphertext:i},a,{mode:n.mode.CBC,iv:o}).toString(n.enc.Utf8)}catch(e){BMS.Misc.fnErr({fnName:"preProcessString",fnParams:t,err:e})}return e}BMS.SignIn.getGoogleSignInSDKUrl=function(){return"https://apis.google.com/js/platform.js"},BMS.SignIn.fnRegUser=function(){try{if($("#signUpIntiate div").hasClass("disable"))return!1;$("#signUpIntiate div").addClass("disable");var e=$("#iRegUserEmail");$("#iRegPwd"),$("#iRegCnfPwd");if(isSignUp=!0,""==e.val())return BMS.Misc.ErrDisplay("dSignUpErrorEmail","Please enter a mobile number","e"),e.addClass("_error").focus(),$("#iResendConfMobile").focus(),void BMS.SignIn.fnValErrorCheck("iSignUpParent","iRegUserEmail","iRegPwd","dSignUpErrorEmail","iRegCnfPwd");if(!BMS.Validate.mob(e.val()))return BMS.Misc.ErrDisplay("dSignUpErrorEmail","Please enter a valid mobile number","e"),e.addClass("_error").focus(),$("#iResendConfMobile").focus(),void BMS.SignIn.fnValErrorCheck("iSignUpParent","iRegUserEmail","iRegPwd","dSignUpErrorEmail","iRegCnfPwd");if(e.val().length<10)return BMS.Misc.ErrDisplay("dSignUpErrorEmail","Please enter a valid mobile number","e"),e.addClass("_error").focus(),$("#iResendConfMobile").focus(),void BMS.SignIn.fnValErrorCheck("iSignUpParent","iRegUserEmail","iRegPwd","dSignUpErrorEmail","iRegCnfPwd");BMS.Misc.fnBtnLoading("signUp-load",!0,"Continue"),BMS.SignIn.fnFBKit("OTPAPP",e.val())}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnRegUser",err:e})}},BMS.SignIn.fnFBKit=function(e,t,n){try{var i=t||n;BMS.Storage.set({name:"_temp_usr",value:i,storage:"C"});var a=t?"number":"email";appType=e,dispMob=t,dispEmail=n,otpSendOn=t?"+91 "+i:i,$(".otp-info").html("Enter OTP sent to <span> "+otpSendOn+"</span>"),$(".otpHeader").html("Verify your "+a),BMS.Misc.fnCallOtpApi({cmd:"send",AppC:global.strAppCode,blnSupp:!0},{fnCC:function(e){BMS.SignIn.fnSMSLogin(e),BMS.Misc.fnBtnLoading("login-loading-state",!1,"Continue"),BMS.Misc.fnBtnLoading("email-loading-state",!1,"Continue"),BMS.Misc.fnBtnLoading("signUp-load",!1,"Continue")},fnEC:function(e){if(BMS.Misc.fnBtnLoading("login-loading-state",!1,"Continue"),BMS.Misc.fnBtnLoading("email-loading-state",!1,"Continue"),BMS.Misc.fnBtnLoading("signUp-load",!1,"Continue"),BMS.Misc.modal("signinPopup",!1),BMS.Misc.modal("enterOTP",!0),BMS.Misc.fnSCusErrDisplay("otp-error",e.message,"e"),"400"==e.statusCode)return BMS.SignIn.fnShowOtpBadReq(e.message),!1}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnFBKit",err:e})}},BMS.SignIn.fnSMSLogin=function(e){try{var t=$("#iUserName");BMS.Misc.fnBtnLoading("login-loading-state",!1,"Continue"),BMS.Misc.modal("signinPopup",!1),BMS.Misc.fnSCusErrDisplay("otp-error","","e"),$('input[name^="otp"]').removeAttr("disabled"),BMS.Misc.modal("enterOTP",!0),BMS.SignIn.fireMobileClick(),BMS.SignIn.fireOTPView(),$("#submit-otp").addClass("disable"),$("#spnResendOtp, #spnReqNewdOtp ").hide(),$("#spnTimer").show(),$(".otpMobile").text(t.val()),$("#submit-otp").removeClass("block-submit"),intOtpTimer=e.resend.timeout,sendToken=e.id,BMS.SignIn.fnStartTimer(),BMS.SignIn.fnValOtp()}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnSMSLogin",err:e})}},BMS.SignIn.fireMobileClick=function(){try{BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"gtmstdevent",tvc_userid:BMS.Storage.get({name:"ld",key:"MEMBERID"}),bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),product:"login",region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",screenName:"login",eventCategory:"send_otp_button_clicked",eventAction:"click",eventLabel:"",pagetype:"login",pageurl:window.location.href,user_mode:"guest",app_code:"web",experiment:"",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",error_message:"",login_type:"mobile_OTP_login"})}catch(e){}},BMS.SignIn.fireOTPView=function(){try{BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"tvc_allpage",tvc_userid:BMS.Storage.get({name:"ld",key:"MEMBERID"}),bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),product:"login",region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",pagetype:"submit_otp",pageurl:window.location.href,user_mode:"guest",app_code:"web",experiment:"",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",error_message:""})}catch(e){BMS.Misc.fnErr({fnName:"fireOTPView",err:e})}},BMS.SignIn.fnValOtp=function(){try{$("input[name^='otp']").unbind().on("paste",(function(e){var t;0===$(this).prev('input[name^="otp"]').length&&(t=e.originalEvent.clipboardData.getData("text"),/^\d*$/.test(t)&&(t=t.split(""),$('input[name^="otp"]').each((function(e){return t.length>e?($(this).val(t[e]).data("previousValue","").blur(),void(5===e&&BMS.SignIn.fnEnableOtp(!0))):($(this).val("").data("previousValue","").focus(),!1)}))))})).keyup((function(e){switch(e.key){case"Backspace":case"Delete":$(this).data("previousValue")&&0<$(this).data("previousValue").length?$(this).val("").data("previousValue",""):$(this).prev('input[name^="otp"]').focus(),BMS.SignIn.fnEnableOtp(!1);break;default:"Unidentified"!==e.key&&(/^\d*$/.test(e.key)?($(this).val(e.key).data("previousValue",e.key),$(this).next('input[name^="otp"]').length?($(this).next('input[name^="otp"]').focus(),BMS.SignIn.fnEnableOtp()):($(this).blur(),BMS.SignIn.fnEnableOtp(!0))):$(this).val("").data("previousValue","").focus())}})).focus((function(){1===$(this).val().length&&$(this).next('input[name^="otp"]').length&&0===$(this).next('input[name^="otp"]').val().length||1===$(this).val().length&&0===$(this).next('input[name^="otp"]').length||0===$(this).val().length&&$(this).prev('input[name^="otp"]').length&&1===$(this).prev('input[name^="otp"]').val().length||0===$(this).val().length&&0===$(this).prev('input[name^="otp"]').length||$(this).blur()}))}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnValOtp",fnParams:arguments,err:e})}},isEnterPressed=!1,BMS.SignIn.fnEnableOtp=function(e){try{intOtp="",$('input[name^="otp"]').each((function(){""!=this.value&&(intOtp+=this.value)})),6==intOtp.length?($("#submit-otp").hasClass("block-submit")||$("#submit-otp").removeClass("disable"),$("#submit-otp").unbind().click((function(){BMS.SignIn.fnCallOTPUpdate(intOtp)})),!$("#submit-otp").hasClass("disable")&&e&&$("#submit-otp").trigger("click")):$("#submit-otp").addClass("disable")}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnEnableOtp",fnParams:arguments,err:e})}},BMS.SignIn.OnOTPSubmission=function(){var e="Email"===OTPScreen?"submit_email_otp":"submit_mobile_otp";try{BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"gtm_std_event",member_id:BMS.Storage.get({name:"ld",key:"MEMBERID"}),bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),product:"login",region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",screen_name:e,event_name:"submit_otp_button_clicked",event_type:"click",pagetype:e,source:"",advertiser_id:"",user_mode:"guest",app_code:"WEB",experiment:""})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.OnOTPSubmission",err:e})}},BMS.SignIn.fnCallOTPUpdate=function(e){try{"OTPAPP"==appType?BMS.SignIn.fnLoginOTP(e):"updateMobile"==appType||"VerifyMobileNumber"==appType?BMS.SignIn.fnUpdateMobile(e,appType):location.reload()}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnEnableOtp",fnParams:arguments,err:e})}},BMS.SignIn.fnStartTimer=function(){try{0<=intOtpTimer&&(BMS.SignIn.fnDispTimer(intOtpTimer),intOtpTimer-=1,clearTimeout(BMS.SignIn.fnStartTimer.objTimer),BMS.SignIn.fnStartTimer.objTimer=setTimeout(0<intOtpTimer?BMS.SignIn.fnStartTimer:BMS.SignIn.fnStopTimer,1e3))}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnStartTimer",fnParams:arguments,err:e})}},BMS.SignIn.fnDispTimer=function(e){try{$(".timer").html(e)}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnDispTimer",fnParams:arguments,err:e})}},BMS.SignIn.fnStopTimer=function(){try{$(".timer").html("0"),$("#spnTimer , #spnReqNewdOtp").hide(),$("#spnResendOtp").show(),$("#spnResendOtp a").unbind().click((function(){BMS.SignIn.fnResendOTP()})),clearTimeout(BMS.SignIn.fnStartTimer.objTimer)}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnStopTimer",fnParams:arguments,err:e})}},BMS.SignIn.fnResendOTP=function(){try{"Email"===OTPScreen&&BMS.SignIn.ResendOTPAnalytics("Email"),"Mobile"===OTPScreen&&BMS.SignIn.ResendOTPAnalytics("Mobile"),BMS.Misc.fnCallOtpApi({cmd:"resend",AppC:global.strAppCode,id:sendToken,blnSupp:!0},{fnCC:function(e){$(".otp-info").html("Enter OTP resent to <span> "+otpSendOn+"</span>"),BMS.Misc.fnSCusErrDisplay("otp-error","","e"),$('input[name^="otp"]').val(""),$("#spnResendOtp , #spnReqNewdOtp").hide(),$("#spnTimer").show(),$("#spnReqNewdOtp a").unbind(),intOtpTimer=e.resend.timeout,sendToken=e.id,BMS.SignIn.fnStartTimer(),BMS.SignIn.fireResendOTP()},fnEC:function(e){if(BMS.Misc.fnSCusErrDisplay("otp-error",e.message,"e"),void 0!==e.statusCode&&"400"==e.statusCode)return BMS.SignIn.fnShowOtpBadReq(e.message),!1;void 0===e.statusCode||"429"!=e.statusCode&&"419"!=e.statusCode?BMS.SignIn.fireErrorOTPEvents("resend_otp_button_clicked",e):BMS.SignIn.fnShowReqOtp(e)}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnResendOTP",err:e})}},BMS.SignIn.fnShowOtpBadReq=function(t){try{$("#submit-otp").addClass("disable"),$("#spnTimer , #spnResendOtp, #spnReqNewdOtp").hide(),$('input[name^="otp"]').val(""),$('input[name^="otp"]').attr("disabled","disabled"),clearTimeout(BMS.SignIn.fnStartTimer.objTimer),BMS.SignIn.fireErrorOTPEvents("resend_otp_button_clicked",t)}catch(t){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnShowOtpBadReq",err:e})}},BMS.SignIn.fnShowReqOtp=function(t){try{$("#submit-otp").removeClass("disable"),"419"!=t.statusCode&&"410"!=t.statusCode||($("#submit-otp").addClass("disable block-submit"),$('input[name^="otp"]').val("")),$("#spnReqNewdOtp").show(),$("#spnResendOtp , #spnTimer").hide(),clearTimeout(BMS.SignIn.fnStartTimer.objTimer),$("#spnReqNewdOtp a").unbind().click((function(){$("#spnReqNewdOtp").hide(),BMS.SignIn.fnFBKit("OTPAPP",dispMob,dispEmail),BMS.SignIn.fireErrorOTPEvents("send_otp_button_clicked",t.message)}))}catch(t){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnResendOTP",err:e})}},BMS.SignIn.fireErrorOTPEvents=function(t,n){try{BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"gtmstdevent",tvc_userid:BMS.Storage.get({name:"ld",key:"MEMBERID"}),bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),product:"login",region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",screenName:"submit_otp",tvc_ga_category:t,tvc_ga_action:"click",tvc_ga_label:"",pagetype:"login",pageurl:window.location.href,user_mode:"guest",app_code:"web",experiment:"",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",error_message:n,login_type:"mobile_OTP_login"})}catch(t){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnResendOTP",err:e})}},BMS.SignIn.fireResendOTP=function(){try{BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"gtmstdevent",tvc_userid:BMS.Storage.get({name:"ld",key:"MEMBERID"}),bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),product:"login",region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",screenName:"submit_otp",eventCategory:"resend_otp_button_clicked",eventAction:"click",eventLabel:"",pagetype:"login",pageurl:window.location.href,user_mode:"guest",app_code:"web",experiment:"",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",error_message:"",login_type:"mobile_OTP_login"})}catch(t){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnResendOTP",err:e})}},BMS.SignIn.fnUpdateMobile=function(e,t){try{blnUpdate=!1,"updateMobile"==t&&(blnUpdate=!0),"undefined"!=typeof pageName&&"myprofile"==pageName&&(BMS.Misc.fnBtnLoading("submit-otp",!0,""),$("#submit-otp").addClass("disable")),BMS.Misc.fnCallOtpApi({cmd:"verifymobile",otpReferenceId:sendToken,otp:e,update:blnUpdate,blnSupp:!0},{fnCC:function(e){var t,n;null!=e&&""!=e&&(resUpdateMob=e.profile.contact.phoneNumbers[0],t=resUpdateMob.verified?"Y":"N",n=resUpdateMob.value,e=new Date(BMS.Storage.get({name:"ld",key:"EXPIRY"})),BMS.Storage.set({name:"ld",key:"OTPMOBVERIFIED",value:t,storage:"C",expires:e}),BMS.Storage.set({name:"ld",key:"MOBILE",value:n,storage:"C",expires:e}),BMS.Misc.modal("enterOTP",!1),BMS.SignIn.OnOTPSubmission(),$("#listVerifiedMobile").hide(),"undefined"!=typeof pageName&&"myprofile"==pageName&&(BMS.Misc.fnBtnLoading("submit-otp",!1,"Continue"),$("#submit-otp").removeClass("disable")),isEnterPressed=!1)},fnEC:function(e){isEnterPressed=!1,BMS.Misc.fnSCusErrDisplay("otp-error",e.message,"e"),"undefined"!=typeof pageName&&"myprofile"==pageName&&(BMS.Misc.fnBtnLoading("submit-otp",!1,"Continue"),$("#submit-otp").removeClass("disable")),void 0===e.statusCode||"429"!=e.statusCode&&"419"!=e.statusCode&&"410"!=e.statusCode||BMS.SignIn.fnShowReqOtp(e)}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnUpdateMobile",err:e})}},BMS.SignIn.fnLoginOTP=function(e){try{BMS.Misc.fnBtnLoading("submit-otp",!0,""),$("#submit-otp").addClass("disable"),BMS.Misc.fnSCusErrDisplay("otp-error","","e"),BMS.Misc.fnCallOtpApi({cmd:"login",otpReferenceId:sendToken,otp:e,blnSupp:!0},{fnCC:function(e){ldData=e;e=BMS.SignIn.getSessionLD(ldData)+BMS.SignIn.getProfileLD(ldData.profile)+BMS.SignIn.getNotificationLD(ldData)+BMS.SignIn.getLinkingLD(ldData.linking)+BMS.SignIn.getLoyaltyLD(ldData.superstar)+BMS.SignIn.getWalletLD();BMS.SignIn.fnAfterAuth(e),BMS.SignIn.OnOTPSubmission(),BMS.SignIn.fireOtpSubmitted(),BMS.Misc.fnBtnLoading("submit-otp",!1,"Continue")},fnEC:function(e){if(isEnterPressed=!1,$("#submit-otp").removeClass("disable"),BMS.Misc.fnBtnLoading("submit-otp",!1,"Continue"),BMS.Misc.fnSCusErrDisplay("otp-error",e.message,"e"),void 0!==e.statusCode&&"400"==e.statusCode)return BMS.SignIn.fnShowOtpBadReq(e.message),!1;void 0===e.statusCode||"429"!=e.statusCode&&"419"!=e.statusCode&&"410"!=e.statusCode||BMS.SignIn.fnShowReqOtp(e),BMS.SignIn.fireOtpSubmitted(e)}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnLoginOTP",err:e})}},BMS.SignIn.getSessionLD=function(e){try{intLSID=strLdExPairy="",strFavVen=[],0<e.sessions.length&&(intLSID=e.sessions[0].id,strLdExPairy=BMS.SignIn.gerLdExpairy(e.sessions[0].expiresAt)),null!=e.favourites&&e.favourites.movies&&null!=e.favourites.movies.venues&&0<e.favourites.movies.venues.length&&(strFavVen=e.favourites.movies.venues.toString());var t={active:"A",deactivated:"I",suspended:"S",duplicate:"D",removed:"R",blocked:"B"};return strStaus=null!=t[e.status]?t[e.status]:"",ldSessionData="|MEMBERID="+e.id+"|STATUS="+strStaus+"|LSID="+intLSID+"|SEQUENCE="+ldData.sessions[0].sequence+"|EXPIRY="+strLdExPairy+"|MEMBER_VERSION_ID="+ldData.version+"|SESSION_VERSION_ID="+ldData.sessions[0].version+"|FAV="+strFavVen}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.getSessionLD",err:e})}},BMS.SignIn.gerLdExpairy=function(e){try{var t=new Date(e),n=t.getMonth()+1,i=t.getDate(),a=t.getFullYear(),o=t.getHours(),s=o%12||12,r=t.getMinutes(),l=t.getSeconds();return intExpairy=n+"/"+i+"/"+a+" "+s+":"+r+":"+l+" "+(12<=o?"PM":"AM")}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.gerLdExpairy",err:e})}},BMS.SignIn.getProfileLD=function(e){try{return strFName=e.name.hasOwnProperty("first")&&null!=e.name.first?e.name.first:"",strLName=e.name.hasOwnProperty("last")&&null!=e.name.first?e.name.last:"",strGen=""!=e.gender&&"male"==e.gender?"M":"female"==e.gender?"F":"",isFBLogin=isGPLogin="N",strUserEmail=strEmailVR="",intMobile=strMobVR="",intBirthDate="",null!=e.contact.emailAddresses&&0<e.contact.emailAddresses.length&&(strUserEmail=e.contact.emailAddresses[0].hasOwnProperty("value")?e.contact.emailAddresses[0].value:"",strEmailVR=e.contact.emailAddresses[0].hasOwnProperty("verified")&&e.contact.emailAddresses[0].verified?"Y":""),null!=e.contact.phoneNumbers&&0<e.contact.phoneNumbers.length&&(intMobile=e.contact.phoneNumbers[0].hasOwnProperty("value")?e.contact.phoneNumbers[0].value:"",strMobVR=e.contact.phoneNumbers[0].hasOwnProperty("verified")&&e.contact.phoneNumbers[0].verified?"Y":""),null!=e.contact.social&&(isFBLogin=null!=e.contact.social.facebook?"Y":"N",isGPLogin=null!=e.contact.social.google?"Y":"N"),null!=e.relationship&&(isMarried=e.hasOwnProperty("relationship")&&"married"==e.relationship.status?"Y":"N"),null!=e.birth&&(intMonth=null!=e.birth.date.month?e.birth.date.month<10?"0"+e.birth.date.month+"/":e.birth.date.month+"/":"",intDay=null!=e.birth.date.day?e.birth.date.day<10?"0"+e.birth.date.day+"/":e.birth.date.day+"/":"",intYear=null!=e.birth.date.year?e.birth.date.year:"",intBirthDate=intMonth+intDay+intYear),strProfile="|MEMBEREMAIL="+strUserEmail+"|EMAILVERIFIED="+strEmailVR+"|MOBILE="+intMobile+"|OTPMOBVERIFIED="+strMobVR+"|NAME="+strFName+"|FIRSTNAME="+strFName+"|LASTNAME="+strLName+"|ISFCONNECTLOGIN="+isFBLogin+"|ISPLUSLOGIN="+isGPLogin+"|GENDER="+strGen+"|MARITIALSTATUS="+isMarried+"|DOB="+intBirthDate}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.getProfileLD",err:e})}},BMS.SignIn.getLoyaltyLD=function(e){try{return blnLoyaltyVID=e.hasOwnProperty("legacyVersion")?e.legacyVersion:"",blnLoyaltySB=e.hasOwnProperty("status")&&e.status?"Y":"N",ldLoyaltyData="|LOYALTYVARIANTID="+blnLoyaltyVID+"|LOYALTYISSUBSCRIBED="+blnLoyaltySB+"|LOYALTYISTARGETTED="+blnLoyaltySB}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.getLoyaltyLD",err:e})}},BMS.SignIn.getNotificationLD=function(e){try{return isEmailSub=isMobileSub="N",null!=e.notificationChannels&&0<e.notificationChannels.length&&e.notificationChannels.forEach((function(e){isMobileSub=e.hasOwnProperty("medium")&&"sms"==e.medium?"Y":"N",isEmailSub=e.hasOwnProperty("medium")&&"email"==e.medium?"Y":"N"})),ldNotifyData="|EMAILSUBSCRIPTION="+isEmailSub+"|MOBILESUBSCRIPTION="+isMobileSub}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.getNotificationLD",err:e})}},BMS.SignIn.getLinkingLD=function(e){try{return blnShowLink=e.hasOwnProperty("prompt")&&e.prompt.display?"Y":"",blnIsAccLink=e.hasOwnProperty("status")&&e.prompt.status?"Y":"NA",ldLinkingData="|ACCOUNTLINKED="+blnIsAccLink+"|SHOWLINKINGSCREEN="+blnShowLink+"|SUSPENDEDINFO="}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.getLinkingLD",err:e})}},BMS.SignIn.getWalletLD=function(){try{return ldWalletData="|ISWALLETELIGIBLE=|WALLETSTATUS=|WALLETLASTNAME=|WALLETFIRSTNAME=|WALLETEMAILID=|WALLETMOBILENO=|WALLETAUTOREFUNDMODE=|"}catch(t){BMS.Misc.fnErr({fnName:"BMS.SignIn.getWalletLD",err:e})}},BMS.SignIn.fireOtpSubmitted=function(e){try{strerror=void 0!==e?e.message:"",BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"gtmstdevent",tvc_userid:BMS.Storage.get({name:"ld",key:"MEMBERID"}),bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),product:"login",region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",screenName:"submit_otp",eventCategory:"submit_otp_button_clicked",eventAction:"click",eventLabel:"undefined"!=typeof intOtpTimer?intOtpTimer:"",pagetype:"login",pageurl:window.location.href,user_mode:""!=strerror?"logged_in":"guest",app_code:"web",experiment:"",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",error_message:strerror,login_type:"mobile_OTP_login"})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fireOtpSubmitted",err:e})}},BMS.SignIn.fnCloseOTP=function(){try{BMS.Misc.modal("enterOTP",!1),"undefined"==typeof appType||"VerifyMobileNumber"!=appType&&"updateMobile"!=appType?(BMS.Misc.modal("signinPopup",!0),BMS.SignIn.toggleLoginSubmitButton(),$("#login-loading-state").addClass("disable"),$("#email-loading-state").addClass("disable")):(BMS.Misc.fnBtnLoading("loading-user",!1,"Continue"),$("#loading-user").addClass("disable"))}catch(t){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnCloseOTP",err:e})}},BMS.SignIn.ResendOTPAnalytics=function(){try{BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"gtm_std_event",member_id:BMS.Storage.get({name:"ld",key:"MEMBERID"}),bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),product:"login",region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",screen_name:"Email"===OTPScreen?"submit_email_otp":"submit_mobile_otp",event_name:"resend_otp_button_clicked",event_type:"click",pagetype:"Email"===OTPScreen?"submit_email_otp":"submit_mobile_otp",source:"",advertiser_id:"",user_mode:"guest",app_code:"WEB",experiment:""})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.ResendOTPAnalytics",err:e})}},BMS.SignIn.OnMobileNumberFocusEvent=function(){try{BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"gtm_std_event",member_id:BMS.Storage.get({name:"ld",key:"MEMBERID"}),bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),product:"login",region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",screen_name:"login",event_name:"login_clicked",event_type:"click",pagetype:"Login",login_type:"mobile_OTP_login",source:"",advertiser_id:"",user_mode:"guest",app_code:"WEB",experiment:""})}catch(t){BMS.Misc.fnErr({fnName:"BMS.SignIn.OnMobileNumberFocusEvent",err:e})}},BMS.SignIn.toggleLoginSubmitButton=function(){$("#iUserName").is(":focus")&&BMS.SignIn.OnMobileNumberFocusEvent(),$("#iUserName").is(":focus")||0<$("#iUserName").val().length?($("#tncContainer").hide(),$("#loginIntiate").show()):($("#loginIntiate").hide(),$("#tncContainer").show())},BMS.SignIn.debounceFunction=function(e,t){clearTimeout(timerId),timerId=setTimeout(e,t)},BMS.SignIn.clearErrorState=function(){$(".emailInputWrapper").addClass("noerror"),$(".invalidEmail").addClass("hide"),$(".clearIcon").addClass("hide")},BMS.SignIn.validateUserEmailInput=function(){try{var e=$("#iForgotEmail");if(BMS.Validate.email(e.val()))return $("#iForgotEmailParent .submit-form").removeClass("disable"),$(".invalidEmail").addClass("hide"),$(".clearIcon").addClass("hide"),void $(".emailInputWrapper").addClass("noerror");if(""===e.val())return $(".emailInputWrapper").addClass("noerror"),$("#iForgotEmailParent .submit-form").addClass("disable"),$(".invalidEmail").addClass("hide"),void $(".clearIcon").addClass("hide");$("#iForgotEmailParent .submit-form").addClass("disable"),$(".invalidEmail").removeClass("hide"),$(".clearIcon").removeClass("hide"),$(".emailInputWrapper").removeClass("noerror")}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.validateUserEmailInput",err:e})}},BMS.SignIn.clearInput=function(){var e=$("#iForgotEmail");""!==e.val()&&(e.val(""),e.focus(),$(".invalidEmail").addClass("hide"),$(".emailInputWrapper").addClass("noerror"),$("#iForgotEmailParent .submit-form").addClass("disable"),$(".clearIcon").addClass("hide"))},BMS.SignIn.validateUserLoginInput=function(){try{var e=$("#iUserName");if(e.val()&&!/^\d+$/.test(e.val()))return $("#iUserNameParent .submit-form").addClass("disable"),iUserNameParent,void(e.data("previousValue")?e.val(e.data("previousValue")):e.val(""));if(e.data("previousValue",e.val()),!BMS.Validate.mob(e.val()))return void $("#iUserNameParent .submit-form").addClass("disable");$("#iUserNameParent .submit-form").removeClass("disable")}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.validateUserLoginInput",err:e})}},BMS.SignIn.validateUserSignUpInput=function(){try{if($("#dSignUpErrorPassword").text("").hide(),!BMS.Validate.mob($("#iRegUserEmail").val()))return void $("#signUpIntiate div").addClass("disable");$("#signUpIntiate div").removeClass("disable")}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.validateUserSignUpInput",err:e})}},BMS.SignIn.fnVerifyMobileNumber=function(){try{var e=BMS.Storage.get({name:"ld",key:"MOBILE"});BMS.SignIn.fnFBKit("VerifyMobileNumber",e),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"tvc_gtmstdevent",eventCategory:"verify_mobile_number",eventAction:"click",eventLabel:"",event_type:"click",user_id:BMS.Storage.get({name:"ld",key:"MEMBERID"}),pagetype:"verify_mobile_number",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"text",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",product:"otp_login",event_level:"major",experiement:"",model_tags:"",pageurl:"undefined"!=typeof pageName?pageName:"",user_mode:"guest",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web"})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnVerifyMobileNumber",err:e})}},BMS.SignIn.fnValErrorCheck=function(e,t,n,i,a){var e=$("#"+e),o=e.find("#"+t),s=e.find("#"+n),r=$("#"+i),l=void 0;return void 0!==a&&(l=$("#"+a)),$(document).keyup((function(e){27==e.keyCode&&(r.hide(),s.val="",o.val="",s.removeClass("_error"),o.removeClass("_error"),void 0!==l&&(l.val="",l.removeClass("_error")))})),"block"==r.css("display")&&(s.is(":focus")?(s.keypress((function(){r.hide(),s.removeClass("_error")})),o.bind("focus",(function(){r.hide(),s.removeClass("_error"),o.unbind("focus")})),void 0!==l&&l.bind("focus",(function(){r.hide(),s.removeClass("_error"),l.unbind("focus")}))):o.is(":focus")?(o.keypress((function(){r.hide(),o.removeClass("_error")})),s.bind("focus",(function(){r.hide(),o.removeClass("_error"),s.unbind("focus")})),void 0!==l&&l.bind("focus",(function(){r.hide(),o.removeClass("_error"),l.unbind("focus")}))):void 0!==l&&l.is(":focus")&&(l.keypress((function(){r.hide(),l.removeClass("_error")})),s.bind("focus",(function(){r.hide(),l.removeClass("_error"),s.unbind("focus")})),o.bind("focus",(function(){r.hide(),l.removeClass("_error"),o.unbind("focus")})))),!1},BMS.SignIn.OnOTPContinueClick=function(){var e="Email"===OTPScreen?"enter_email":"enter_mobile",t="Email"===OTPScreen?"submit_email_button_clicked":"submit_mobile_button_clicked";try{BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"gtm_std_event",member_id:BMS.Storage.get({name:"ld",key:"MEMBERID"}),bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),product:"login",region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",screen_name:e||"",pagetype:e||"",event_name:t||"",event_type:"click",source:"",advertiser_id:"",user_mode:"guest",app_code:"WEB",experiment:""});var n=new Date,i={member_id:BMS.Storage.get({name:"ld",key:"MEMBERID"}),bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),product:"login",region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",screen_name:e||"",event_name:t||"",event_type:"click",source:"",user_mode:"guest",app_code:"WEB",experiment:"",timestamp:n.toISOString(),schema_version:3};$.extend({},i,BMS.Analytics.commonClickStreamParams())}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.OnOTPContinueClick",err:e})}},BMS.SignIn.fnValLogIn=function(e){try{if($("#iUserNameParent .submit-form").hasClass("disable")&&0<$("#iUserName").val().length)return!0;var t={username:"iUserName",password:"iPwd",usernameParent:"iUserNameParent",errorEmail:"dSignInErrorEmail",errorPassword:"dSignInErrorPassword",OTPEmail:"iForgotEmail"};$.extend(t,e);var n=$("#"+t.username),i=$("#"+t.password),a=$("#"+t.OTPEmail);if(isSignUp=!1,-1!=a.val().indexOf("@")){if(!BMS.Validate.email(a.val()))return void BMS.SignIn.validateUserEmailInput();OTPScreen="Email",BMS.SignIn.OnOTPContinueClick()}else{if(!BMS.Validate.mob(n.val()))return void n.focus();OTPScreen="Mobile",BMS.SignIn.OnOTPContinueClick()}"user-login"!=pageName?(BMS.Misc.fnBtnLoading("login-loading-state",!0,"Continue"),BMS.Misc.fnBtnLoading("email-loading-state",!0,"Continue")):BMS.Misc.fnBtnLoading("loading-user",!0,"Continue"),BMS.Misc.fnGATracker({location:"SignInBox",action:"SignIn"}),setTimeout((function(){BMS.SignIn.fnAuthUser({id:n.val(),email:a.val(),pwd:i.val(),type:"logIn"})}),1e3)}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnValLogIn",err:e})}},BMS.SignIn.fnValPaymentLogIn=function(e){try{var t={username:"iUserName",password:"iPwd",usernameParent:"iUserNameParent",errorEmail:"dSignInErrorEmail",errorPassword:"dSignInErrorPassword"};$.extend(t,e);var n=$("#"+t.username),i=$("#"+t.password);if(""==$.trim(n.val())||"Email"==n.val())return BMS.Misc.fnSCusErrDisplay("dSignInErrorEmail","Please enter an email address","e"),n.addClass("_error").focus(),void BMS.SignIn.fnValErrorCheck(t.usernameParent,t.username,t.password,t.errorEmail);if(!BMS.Validate.email(n.val()))return BMS.Misc.fnSCusErrDisplay("dSignInErrorEmail","Please enter a valid email address","e"),n.addClass("_error").focus(),void BMS.SignIn.fnValErrorCheck(t.usernameParent,t.username,t.password,t.errorEmail);if(""==$.trim(i.val())||"Password"==i.val())return BMS.Misc.fnSCusErrDisplay("dSignInErrorPassword","Please enter a password","e"),i.addClass("_error").focus(),void BMS.SignIn.fnValErrorCheck(t.usernameParent,t.username,t.password,t.errorPassword);"user-login"!=pageName&&BMS.Misc.fnBusy(!0,BMS.Modal.currentModal),BMS.Misc.fnGATracker({location:"SignInBox",action:"SignIn"}),BMS.SignIn.fnAuthUser({id:n.val(),pwd:i.val(),type:"logIn"})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnValPaymentLogIn",err:e})}},BMS.SignIn.fnAuthUser=function(t){try{return void BMS.SignIn.fnFBKit("OTPAPP",t.id,t.email)}catch(e){BMS.Misc.fnErr({fnName:"BMS.Signin.fnAuthUser",fnParams:t,err:e})}},BMS.SignIn.fireLoginView=function(){try{BMS.SignIn.toggleLoginSubmitButton(),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"tvc_allpage",tvc_userid:BMS.Storage.get({name:"ld",key:"MEMBERID"}),bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),product:"login",region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",pagetype:"login",pageurl:window.location.href,user_mode:"guest",app_code:"web",experiment:"",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",error_message:"",login_type:"mobile_OTP_login"}),-1<window.navigator.userAgent.indexOf("Edge/")&&$("#lblPlaceHolder").hide()}catch(e){BMS.Misc.fnErr({fnName:"fireLoginView",err:e})}},BMS.SignIn.fnAfterAuth=function(t){try{var e=e||[];e.push(["uid",BMS.Misc.fnGVal({key:"MEMBERID",data:t})]),e.push(["email",BMS.Misc.fnGVal({key:"MEMBEREMAIL",data:t})]),"undefined"!=typeof wzrk_push&&wzrk_push(e),"undefined"!=typeof _kmq&&_kmq.push(["identify",BMS.Misc.fnGVal({key:"MEMBEREMAIL",data:t})]),BMS.Storage.set({name:"kmqIdentity",value:BMS.Misc.fnGVal({key:"MEMBEREMAIL",data:t}),sess:!1,expires:"Thu, 31 Dec 2099 23:59:59 GMT",storage:"C"}),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"loggedin",tvc_userid:BMS.Misc.fnGVal({key:"MEMBERID",data:t})}),t=unescape(t);var n=BMS.Misc.fnGVal({key:"MEMBEREMAIL",data:t}),i=BMS.Misc.fnGVal({key:"EXPIRY",data:t}),a=BMS.Misc.fnGVal({key:"SHOWLINKINGSCREEN",data:t}),o=BMS.Misc.fnGVal({key:"STATUS",data:t});"in-preprod.bms.bz"==location.host||"in.bookmyshow.com"==location.host?(BMS.Storage.set({name:"ld",value:t,storage:"C",secure:!0,sess:!1,expires:new Date(i).toGMTString()}),BMS.Storage.set({name:"userCine",value:BMS.Misc.fnGVal({key:"FAV",data:t}),key:"fav",storage:"C",secure:!0}),BMS.Storage.set({name:"ld",value:BMS.Misc.fnGVal({key:"NAME",data:t}),key:"FIRSTNAME",storage:"C",secure:!0}),BMS.Storage.set({name:"ld",key:"LASTLOGIN",value:(new Date).toISOString(),storage:"C",secure:!0,sess:!1,expires:new Date(i).toGMTString()})):(BMS.Storage.set({name:"le",value:n,storage:"C",sess:!1,expires:new Date(i).toGMTString()}),BMS.Storage.set({name:"ld",value:t,storage:"C",sess:!1,expires:new Date(i).toGMTString()}),BMS.Storage.set({name:"userCine",value:BMS.Misc.fnGVal({key:"FAV",data:t}),key:"fav",storage:"C"}),BMS.Storage.set({name:"ld",value:BMS.Misc.fnGVal({key:"NAME",data:t}),key:"FIRSTNAME",storage:"C"}),BMS.Storage.set({name:"ld",key:"LASTLOGIN",value:(new Date).toISOString(),storage:"C",sess:!1,expires:new Date(i).toGMTString()})),$("#emailVerified").hide(),$("#mobileVerified").hide(),$("#signInUName .__email").hide(),$("#signInUName .__mobile").hide(),BMS.SignIn.fnGUserImage(),BMS.SignIn.fnLoginPushCT(),BMS.Misc.fnBusy(!1,BMS.Modal.currentModal),BMS.Modal.currentModal&&BMS.Modal.currentModal.hasClass("_signin-signup-popover-fixed")?($("body").css("top","auto"),$(document).scrollTop(0),$("#signinPopupFixed").hide(),$(".modal.popovers-modal .__overlay-scroll-signin").fadeOut()):$("#signinPopupFixed").is(":visible")&&global.blnIsTouchScreen&&($("#signinPopupFixed").hide(),$(".modal.popovers-modal .__overlay-scroll-signin").fadeOut()),BMS.Misc.modal("signinPopup",!1);var s=""!=BMS.Misc.fnGVal({key:"NAME",data:BMS.Storage.get({name:"ld"})})?BMS.Misc.fnGVal({key:"NAME",data:BMS.Storage.get({name:"ld"})}):"Guest";$("#dAfterSignInSuccess #spnUName").html(s),$("#profileNameId, .profile-user-name").text(s),setTimeout((function(){if(BMS.SignIn.fnClose({callBack:!0}),"Y"==a&&BMS.SignIn.fnShowRelProfile(),"S"==o){if("undefined"!=typeof pageName&&"payment"!=pageName){BMS.Misc.modal("verifyAcc",!0),$(".social-links div").addClass("disable"),info=$.parseJSON(BMS.Misc.fnGVal({key:"SUSPENDEDINFO",data:t}).replace(/\\/g,"")),liInfo="";for(var e=0;e<info.length;e++)liInfo+="<li>"+info[e].q+"</li>",liInfo+="<li>"+info[e].a+"</li>";$("#SusInfo").html(liInfo)}BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event_type:"page_view",pageurl:window.location.href,tvc_userid:BMS.Storage.get({name:"ld",key:"MEMBERID"}),user_mode:"logged_in",region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"text",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",source:"",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),experiment:"",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web",product:"otp_login",pagetype:"reverify_mobile_number"})}}),1e3),-1==location.pathname.search("mami")&&"/api/fb-chatbot/signup.bms"!=location.pathname||location.reload(),BMS.Header.fnProfileUB()}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnAfterAuth",err:e})}},BMS.SignIn.fnSetUserProfileState=function(){try{BMS.SignIn.fnHideGuestProfileState(),BMS.SignIn.fnShowNormalProfileState(),BMS.SignIn.fnUnlockMenuItems(),BMS.Misc.fnAjax({url:"/serv/getData",data:{cmd:"UAPIPROFILE",date:Date.now()},success:function(e){if(!(null!=e&&""!=e&&0<Object.keys(e).length))throw e;var t;null!=e.profile&&0<Object.keys(e.profile).length&&(t=e.profile.FIRSTNAME+" "+e.profile.LASTNAME,$("#profileNameId, .profile-user-name").text(" "!=t?t:"Guest"),t=e.profile.COHORTS,BMS.Storage.set({name:"cohorts",value:t,storage:"C"})),null!=e.superstar&&0<Object.keys(e.superstar).length&&e.superstar.showSuperstarWidget&&(BMS.SignIn.fnRenderBenefitsLabel(e.superstar.superstarBenefitsLabel,e.superstar.url),e.superstar.showSuperStarProgress?BMS.SignIn.fnGenerateProgressBar(e.superstar):e.superstar.isSuperstar&&BMS.SignIn.fnShowSuperstarState(e.superstar.superstarHeader,e.superstar.totalTransactions),BMS.SignIn.fnShowProfileWidget())},error:function(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnSetUserProfileState",fnParams:"",err:e})}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnSetUserProfileState",fnParams:"",err:e})}},BMS.SignIn.fnGenerateProgressBar=function(e){try{for(var t=e.transactionsNeeded,n=e.transactionsDone,i=1/t-.01,a="",o=BMS.SignIn.fnGenerateMessage(e.message),s=$("#progress-bar-template").html(),r=0;r<t;r++){var l=r<n?!0:!1;a+=BMS.Misc.Helpers.render(s,{flexValue:i,activeClass:l?"active":""})}$(".profile-progress-bar").html(a),$(".profile-progress-information").html(o),BMS.SignIn.fnShowProfileProgressBar()}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnGenerateProgressBar",fnParams:"",err:e})}},BMS.SignIn.fnGenerateMessage=function(e){try{var t="";return e.forEach((function(e){t+="<div class='message-paragraph'>",e.items.forEach((function(e){"IMAGE"==e.type?t+="<img class='message-image' src='"+e.image.url+"'/>":"TEXT"==e.type&&(t+="<div class='message-text' style='color:"+e.text.fontColor+"; background-color:"+e.text.bgColor+"'>"+e.text.content+"</div>")})),t+="</div>"})),t}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnGenerateMessage",fnParams:"",err:e})}},BMS.SignIn.fnRenderBenefitsLabel=function(e,t){try{var n=BMS.SignIn.fnGenerateMessage(e);$(".profile-extra-info").click((function(){BMS.SignIn.fnNavigateToUrl(t)})),$(".profile-extra-text").html(n)}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnRenderBenefitsLabel",fnParams:"",err:e})}},BMS.SignIn.fnHideGuestProfileState=function(){$(".profile-guest").hide()},BMS.SignIn.fnShowGuestProfileState=function(){$(".profile-guest").css("display","flex")},BMS.SignIn.fnHideNormalProfileState=function(){$(".profile-user").hide()},BMS.SignIn.fnShowNormalProfileState=function(){$(".profile-user").css("display","flex")},BMS.SignIn.fnShowProfileWidget=function(){$(".profile-progress-wrapper").css("display","flex")},BMS.SignIn.fnHideProfileWidget=function(){$(".profile-progress-wrapper").hide()},BMS.SignIn.fnShowProfileProgressBar=function(){$(".profile-progress-container").css("display","flex")},BMS.SignIn.fnHideProfileProgressBar=function(){$(".profile-progress-container").hide()},BMS.SignIn.fnNavigateToUrl=function(e){window.location.href=e},BMS.SignIn.fnUnlockMenuItems=function(){$(".list-element.locked").removeClass("locked")},BMS.SignIn.fnLockMenuItems=function(){$("[user-login-locked]").addClass("locked")},BMS.SignIn.fnCalculateMenuItemsHeight=function(){var e=$(".profile-sidebar-wrapper").height()+$(".sign-out-btn").height()+32;$("#sidebar-menu-items").css("height","100%").css("height","-="+e)},BMS.SignIn.fnShowSuperstarState=function(e,t){e=BMS.SignIn.fnGenerateMessage(e),t=BMS.SignIn.fnGenerateMessage(t);$(".profile-superstar-header").html(e),$(".profile-superstar-body").html(t),$(".profile-superstar-container").show(),$(".profile-badge").show(),$(".profile-user-text").addClass("superstar"),$(".profile-details-wrapper").css("background-image","url(//in.bmscdn.com/webin/movies/superstar/profile_superstar_bg.png)"),BMS.SignIn.fnCalculateMenuItemsHeight()},BMS.SignIn.fnResetProfileState=function(){BMS.SignIn.fnHideNormalProfileState(),BMS.SignIn.fnShowGuestProfileState(),BMS.SignIn.fnLockMenuItems(),BMS.SignIn.fnHideProfileWidget(),$(".profile-badge").hide(),$(".profile-superstar-container").hide(),$(".profile-user-text").removeClass("superstar"),$(".profile-details-wrapper").css("background-image",""),BMS.SignIn.fnCalculateMenuItemsHeight(),BMS.Notifications.fnCalculateNotificationWrapperHeight()},BMS.SignIn.fnClose=function(t){try{if(t&&1==t.callBack&&null!=global.SignInCallBack&&0<global.SignInCallBack.length)for(var e=0;e<global.SignInCallBack.length;e++)global.SignInCallBack[e].apply();BMS.SignIn.fnApplyCallbacks(),BMS.Misc.fnGATracker({location:"SignInBox",action:"NoThanks"}),"undefined"!=typeof pageName&&"events"!==pageName&&"plays"!==pageName&&"sports"!==pageName&&"movieclub"!==pageName&&"home"!==pageName&&"movies"!==pageName&&(null!=global.SignInCallBack&&global.SignInCallBack.splice(global.SignInCallBack.length-1,1),null!=global.SignOutCallBack&&global.SignOutCallBack.splice(global.SignOutCallBack.length-1,1))}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnClose",fnParams:t,err:e})}},BMS.SignIn.fnLogOut=function(){try{""!=BMS.Storage.get({name:"fbsr_"+global.fbAppId})&&BMS.Storage.del({name:"fbsr_"+global.fbAppId}),BMS.Misc.fnBusy(!0),BMS.Misc.fnAjax({url:"/serv/getData",data:{cmd:"LOGOUT",date:Date.now()},success:function(e){if("undefined"!=typeof global&&void 0!==global.auth2&&global.auth2.signOut(),BMS.Storage.del({name:"ld"}),BMS.Storage.del({name:"le"}),BMS.Storage.del({name:"lm"}),BMS.Storage.del({name:"wd"}),BMS.Storage.del({name:"isOtpGenerated"}),BMS.Storage.del({name:"PLUSIMAGEURL"}),BMS.Storage.set({name:"userCine",key:"RL",value:"",sess:!1,storage:"C"}),""!=BMS.Storage.get({name:"MEMBERHIS"})&&BMS.Storage.del({name:"MEMBERHIS"}),BMS.Storage.del({name:"orderID"}),BMS.Storage.del({name:"notifyMe"}),null!=global.SignOutCallBack&&0<global.SignOutCallBack.length)for(var t=0;t<global.SignOutCallBack.length;t++)global.SignOutCallBack[t].apply();"undefined"!=typeof _kmq&&_kmq.push(["clearIdentity"]),BMS.Storage.del({name:"kmqIdentity"}),BMS.Misc.fnBusy(!1),$(".select-overlay").click(),-1!=location.pathname.search("mami")&&location.reload()},error:function(e){if(BMS.Misc.fnErr({fnName:"BMS.SignIn.fnLogOut",err:e}),"undefined"!=typeof gapi&&void 0!==gapi.auth&&gapi.auth.signOut(),BMS.Storage.del({name:"ld"}),BMS.Storage.del({name:"wd"}),BMS.Storage.del({name:"isOtpGenerated"}),BMS.Storage.del({name:"PLUSIMAGEURL"}),BMS.Storage.del({name:"PROFILEIMAGEURL"}),BMS.Storage.del({name:"orderID"}),BMS.Storage.del({name:"notifyMe"}),BMS.Storage.set({name:"userCine",key:"RL",value:"",sess:!1,storage:"C"}),""!=BMS.Storage.get({name:"MEMBERHIS"})&&BMS.Storage.del({name:"MEMBERHIS"}),null!=global.SignOutCallBack&&0<global.SignOutCallBack.length)for(var t=0;t<global.SignOutCallBack.length;t++)global.SignOutCallBack[t].apply();"undefined"!=typeof _kmq&&_kmq.push(["clearIdentity"]),BMS.Storage.del({name:"kmqIdentity"}),BMS.Misc.fnBusy(!1),$(".select-overlay").click(),-1!=location.pathname.search("mami")&&location.reload()}}),$("#loggedInImg, #loggedInImgProfile").attr("src",""),$("#signInUName strong").html(""),$("#preSignIn").parent().removeClass("_logged"),$("#postSignIn, #myWallet, #signOut, #post-Memberinfo, #postProfileImg").hide(),$("#myProfile").attr("data-id","preLogin"),$("#preSignIn, #preLogin, #pre-Memberinfo, #preProfileImg").show(),$("#iUserName").val(""),$("#iPwd").val(""),$("#iRegUserEmail").val(""),"payment"!=pageName&&$("#iPwd").hide(),$("#eyeViewer").hide(),$("#listVerifiedMobile").hide(),BMS.SignIn.fnResetProfileState()}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnLogOut",fnParams:arguments,err:e})}},BMS.SignIn.fnResetPwd=function(){try{var e=$("#iForgotEmail");if(!BMS.Validate.email(e.val()))return void BMS.SignIn.validateUserEmailInput();BMS.Misc.fnBusy(!0,BMS.Modal.currentModal),BMS.Misc.fnDoSecureTrans({cmd:"SENDRESETPASSWORDURL",p1:e.val(),blnSupp:!0,fnCC:function(){BMS.Misc.fnBusy(!1,BMS.Modal.currentModal),$("#iForgotEmailParent").hide(),$("#recoverAccountSuccess").show(),$("#userEmail").text(e.val())},fnEC:function(e){BMS.Misc.fnBusy(!1,BMS.Modal.currentModal),$("#recoverAccountInfo").hide(),$("#dForgotError").text(e),$("#dForgotError").show()}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnResetPwd",err:e})}},BMS.SignIn.handleRecoverAccountBackClick=function(){$("#recoverAccountSuccess").hide(),$("#iForgotEmailParent").show(),$("#iForgotEmailParent .submit-form").addClass("disable"),$("#dForgotError").hide(),$("#recoverAccountInfo").show(),BMS.Misc.modal("signinPopup",!0),BMS.SignIn.toggleLoginSubmitButton(),$("#login-loading-state").addClass("disable")},BMS.SignIn.fnLoginClickedAnalytics=function(e){try{BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"gtm_std_event",member_id:BMS.Storage.get({name:"ld",key:"MEMBERID"}),bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),product:"login",region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",screen_name:"Login",event_name:"login_clicked",event_type:"click",pagetype:"Login",login_type:e,source:"",advertiser_id:"",user_mode:"guest",app_code:"WEB",experiment:""})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnLoginClickedAnalytics",err:e})}},BMS.SignIn.fnFbWrapper=function(){try{return BMS.Misc.fnBusy(!0,BMS.Modal.currentModal),BMS.SignIn.fnFbLogin(),BMS.SignIn.fnLoginClickedAnalytics("social_connect_fb"),void(null!=BMS.Modal.currentModal&&"signinPopup"==BMS.Modal.currentModal[0].id?BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"tvc_gtmstdevent",eventCategory:"login_clicked",eventAction:"click",eventLabel:"",event_type:"click",user_id:BMS.Storage.get({name:"ld",key:"MEMBERID"}),pagetype:"login",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",product:"otp_login",event_level:"major",experiement:"",model_tags:"",login_type:"social_connect_fb",pageurl:window.location.href,user_mode:"guest",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web"}):null!=BMS.Modal.currentModal&&"signupPopup"==BMS.Modal.currentModal[0].id&&BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"tvc_gtmstdevent",eventCategory:"signup",eventAction:"click",eventLabel:"",event_type:"click",user_id:BMS.Storage.get({name:"ld",key:"MEMBERID"}),pagetype:"signup",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",product:"otp_login",event_level:"major",experiement:"",model_tags:"",login_type:"social_connect_fb",pageurl:window.location.href,user_mode:"guest",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web"}))}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnFbWrapper",fnParams:arguments,err:e})}},BMS.SignIn.fnGPlusWrapper=function(){try{signInModalRestore(),BMS.Misc.fnBusy(!0,BMS.Modal.currentModal),BMS.SignIn.fnGoogleSignIn(),BMS.SignIn.fnLoginClickedAnalytics("social_connect_g+"),null!=BMS.Modal.currentModal&&"signinPopup"==BMS.Modal.currentModal[0].id?BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"tvc_gtmstdevent",eventCategory:"login_clicked",eventAction:"click",eventLabel:"",event_type:"click",user_id:BMS.Storage.get({name:"ld",key:"MEMBERID"}),pagetype:"login",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",product:"otp_login",event_level:"major",experiement:"",model_tags:"",login_type:"social_connect_g+",pageurl:window.location.href,user_mode:"guest",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web"}):null!=BMS.Modal.currentModal&&"signupPopup"==BMS.Modal.currentModal[0].id&&BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"tvc_gtmstdevent",eventCategory:"signup",eventAction:"click",eventLabel:"",event_type:"click",user_id:BMS.Storage.get({name:"ld",key:"MEMBERID"}),pagetype:"signup",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",product:"otp_login",event_level:"major",experiement:"",model_tags:"",login_type:"social_connect_g+",pageurl:window.location.href,user_mode:"guest",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web"})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnGPlusLogin",err:e})}},BMS.SignIn.fnValRes=function(){try{var e=$("#iResendConfEmail"),t=$("#iResendConfMobile");if(""==e.val())return BMS.Misc.ErrDisplay("errDivFRGEmail","Please enter an email address","e"),e.addClass("_error").focus(),$("#iResendConfEmail").focus(),void BMS.SignIn.fnValErrorCheck("errDivFRGParent","iResendConfEmail","iResendConfMobile","errDivFRGEmail");if(!BMS.Validate.email(e.val()))return BMS.Misc.ErrDisplay("errDivFRGEmail","Please enter a valid email address","e"),e.addClass("_error").focus(),$("#iResendConfEmail").focus(),void BMS.SignIn.fnValErrorCheck("errDivFRGParent","iResendConfEmail","iResendConfMobile","errDivFRGEmail");if(""==t.val())return BMS.Misc.ErrDisplay("errDivFRGMobile","Please enter a mobile number","e"),t.addClass("_error").focus(),$("#iResendConfMobile").focus(),void BMS.SignIn.fnValErrorCheck("errDivFRGParent","iResendConfEmail","iResendConfMobile","errDivFRGMobile");if(!BMS.Validate.mob(t.val()))return BMS.Misc.ErrDisplay("errDivFRGMobile","Please enter a valid mobile number","e"),t.addClass("_error").focus(),$("#iResendConfMobile").focus(),void BMS.SignIn.fnValErrorCheck("errDivFRGParent","iResendConfEmail","iResendConfMobile","errDivFRGMobile");if(t.val().length<10)return BMS.Misc.ErrDisplay("errDivFRGMobile","Please enter a valid mobile number","e"),t.addClass("_error").focus(),$("#iResendConfMobile").focus(),void BMS.SignIn.fnValErrorCheck("errDivFRGParent","iResendConfEmail","iResendConfMobile","errDivFRGMobile");$("#iResendConfEmail, #iResendConfMobile").attr("disabled","disabled"),$("#btnRes").hide(),$("#btndisab").show(),BMS.Misc.fnDoTrans({cmd:"RESENDCONFIRMATIONMAIL",p2:e.val(),p3:t.val(),fnCC:BMS.SignIn.fnResendSuc,fnEC:BMS.SignIn.fnResendFail,blnSupp:!0})}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnValRes",err:e})}},BMS.SignIn.fnResendSuc=function(t){try{$("#btnRes").show(),$("#btndisab").hide(),$("iResendConfEmail").val(""),$("iResendConfMobile").val(""),$("#iResendConfEmail, #iResendConfMobile").removeAttr("disabled"),$("#errDivFRG").addClass("_success"),$("#resendCofirmationPopup").show(),$("#iResendConfEmail,#iResendConfMobile").val(""),$("#resendCofirmationPopup").addClass("animateTop"),$(".popup-overlay").fadeIn(200),$(".main").addClass("make-blur"),$("body").addClass("_fixed"),BMS.Misc.ErrDisplay("errDivFRGMobile","Confirmation sent successfully!","")}catch(e){fnErr({fnName:"BMS.SignIn.fnResendSuc",fnParams:t,err:e})}},BMS.SignIn.fnResendFail=function(t){try{$("#btnRes").show(),$("#btndisab").hide(),$("#iResendConfEmail, #iResendConfMobile").removeAttr("disabled"),$("#resendCofirmationPopup").show(),$("#iResendConfEmail,#iResendConfMobile").val(""),$("#resendCofirmationPopup").addClass("animateTop"),$(".popup-overlay").fadeIn(200),$(".main").addClass("make-blur"),$("body").addClass("_fixed"),""!=t&&null!=t?BMS.Misc.ErrDisplay("errDivFRGMobile",t,"e"):BMS.Misc.ErrDisplay("errDivFRGMobile","Sorry, something went wrong here. Try again after some time! .","e")}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnResendFail",fnParams:t,err:e})}},BMS.SignIn.fnDoSubMailErrorCheck=function(e,t,n){var i=$("#"+e).find("#"+t),a=$("#"+n);"block"==a.css("display")&&i.is(":focus")&&(i.keypress((function(){a.hide(),i.removeClass("_error")})),$(document).keyup((function(e){27==e.keyCode&&(a.hide(),i.removeClass("_error"),i.val="")})))},BMS.SignIn.fnDoSubMail=function(){try{var t=$("#subEmailmob"),e="",n="";if(""==t.val())return BMS.Misc.ErrDisplay("errDivSUB","Please enter a valid mobile number or email address","e"),t.addClass("_error").focus(),void BMS.SignIn.fnDoSubMailErrorCheck("subEmailmobParent","subEmailmob","errDivSUB");if(t.val($.trim(t.val()).replace(/[ ]+/gi,"")),isNaN(t.val())){if(e="|EMAIL="+t.val()+"|",!BMS.Validate.email(t.val()))return BMS.Misc.ErrDisplay("errDivSUB","Please enter a valid email address","e"),t.addClass("_error").focus(),void BMS.SignIn.fnDoSubMailErrorCheck("subEmailmobParent","subEmailmob","errDivSUB");n="EMAIL"}else{if(e="|MOBILENO="+t.val()+"|",!BMS.Validate.mob(t.val()))return BMS.Misc.ErrDisplay("errDivSUB","Please enter a valid mobile number","e"),t.addClass("_error").focus(),void BMS.SignIn.fnDoSubMailErrorCheck("subEmailmobParent","subEmailmob","errDivSUB");n="MOBILE"}BMS.Misc.fnBusy(!0),BMS.Misc.fnDoTrans({cmd:"SETPROFILE",p1:"NEWSLETTER",p2:"0",p10:e,fnCC:function(e){BMS.Misc.modal("subscribeNewsletters",!1),$("#popover-rating-msg").html("Thank you for registering. Look forward to your weekly alerts!"),BMS.Misc.modal("review-rating-response",!0),"EMAIL"==n?BMS.Storage.set({name:"EMAILSUBSCRIPTION",value:"Y",storage:"C"}):"MOBILE"==n&&0<$("#MOBSUBY").length&&t.val()==$("#acntDtls #mobile").val()&&BMS.Storage.set({name:"MOBILESUBSCRIPTION",value:"Y",storage:"C"}),t.val(""),BMS.Misc.fnBusy(!1)},fnEC:function(e){BMS.Misc.fnBusy(!1)}})}catch(e){BMS.Misc.fnErr({fnName:"fnDoSubMail",fnParams:arguments,err:e})}},BMS.Misc.ErrDisplay=function(t,n,i){try{$("#"+t).text(n),$("#"+t).show()}catch(e){BMS.Misc.fnErr({fnName:"BMs.Misc.fnSCusErrDisplay",fnParams:t+", "+n+", "+i,err:e})}},BMS.SignIn.fnGUserImage=function(){try{var e,t,r;BMS.Storage.isset({name:"ld"})&&(e="Y"==BMS.Storage.get({name:"ld",key:"ISFCONNECTLOGIN"}),t="Y"==BMS.Storage.get({name:"ld",key:"ISPLUSLOGIN"}),r={},r=e?{SOCIALID:"FB"}:t?{SOCIALID:"PLUS"}:{SOCIALID:"EMAIL"},BMS.Misc.fnGetUserImage(r,(function(e,t){try{var n=BMS.Storage.get({name:"ld",key:"FIRSTNAME"}),i=BMS.Storage.get({name:"ld",key:"LASTNAME"}),a=BMS.Storage.get({name:"ld",key:"MEMBEREMAIL"}),o=BMS.Storage.get({name:"ld",key:"MOBILE"}),s=""!=(s=n+" "+i).trim()?s:"Guest";$("#loggedInImg, #loggedInImgProfile").attr("src",e),$("#signInUName strong").text(s),$(".__mobile").contents().filter((function(){return 3===this.nodeType})).remove(),$(".__email").contents().filter((function(){return 3===this.nodeType})).remove(),""!=a&&(13<a.substring(0,a.indexOf("@")).length&&(a=a.substring(0,14),a+="...."),$("#signInUName .__email span").before(a),$("#signInUName .__email").show()),""!=o&&($("#signInUName .__mobile span").before(o),$("#signInUName .__mobile").show()),"Y"==BMS.Storage.get({name:"ld",key:"EMAILVERIFIED"})&&$("#emailVerified").css("display","inline-block"),"Y"==BMS.Storage.get({name:"ld",key:"OTPMOBVERIFIED"})&&""!=BMS.Storage.get({name:"ld",key:"MOBILE"})?($("#mobileVerified").css("display","inline-block"),$("#listVerifiedMobile").hide()):"N"==BMS.Storage.get({name:"ld",key:"OTPMOBVERIFIED"})&&""!=BMS.Storage.get({name:"ld",key:"MOBILE"})&&$("#listVerifiedMobile").show(),"undefined"!=typeof pageName&&-1!=["myprofile","booking-history","myexperinces","rewards"].indexOf(pageName)&&(BMS.SignIn.UserInfo={strLoginType:r.SOCIALID,strImageURL:e,canDelete:t},profile.fnFillMemberDetails()),$("#preSignIn").is(":visible")&&BMS.Storage.isset({name:"ld"})&&($("#preSignIn").parent().addClass("_logged"),$("#preSignIn, #preLogin, #pre-Memberinfo, #preProfileImg").hide(),$("#myProfile").attr("data-id","postSignIn"),$("#postSignIn").css("display","block"),$("#myWallet, #post-Memberinfo, #postProfileImg").show(),$("#signOut").css("display","flex"))}catch(e){void 0}})),BMS.SignIn.fnSetUserProfileState())}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnCheckLogin",fnParams:strData,err:e})}},BMS.SignIn.fnSignIn=function(t){try{t?(""!=$("#dSignInErrorEmail").text()&&$("#dSignInErrorEmail").text("").hide(),""!=$("#dSignInErrorPassword").text()&&$("#dSignInErrorPassword").text("").hide(),BMS.Misc.modal("signinPopup",!0)):BMS.Misc.modal("signinPopup",!1)}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnSignIn",fnParams:t,err:e})}},BMS.SignIn.fnRegister=function(t,e){try{BMS.SignIn.CallBackArray[t]=e}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnRegister",fnParams:t,err:e})}},BMS.SignIn.fnUnregister=function(t){try{-1!=Object.keys(BMS.SignIn.CallBackArray).indexOf(t)&&delete BMS.SignIn.CallBackArray[t]}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnRegister",fnParams:t,err:e})}},BMS.SignIn.fnApplyCallbacks=function(){try{0<Object.keys(BMS.SignIn.CallBackArray).length&&$.each(BMS.SignIn.CallBackArray,(function(e,t){t.apply()}))}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnApplyCallbacks",err:e})}},BMS.SignIn.fnReloadBookingFlowsAfterAuth=function(){try{!pageName||"bookticket"!=pageName&&"cinema"!=pageName&&"buytickets"!=pageName||(BMS.Misc.fnBusy(!0),location.reload())}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnReloadBookingFlowsAfterAuth",err:e})}},BMS.SignIn.fnResetPassword=function(){try{var e=$.trim($("#npwd").val()),t=$.trim($("#cnpwd").val());if(""==e)return BMS.Misc.fnSCusErrDisplay("RP_Err","Please Enter a Password.","e"),void $("#npwd").focus();if(e.toLowerCase()==$.trim($("#npwd").attr("placeholder")).toLowerCase())return BMS.Misc.fnSCusErrDisplay("RP_Err","Please Enter a valid Password.","e"),void $("#npwd").focus();if(""==t)return BMS.Misc.fnSCusErrDisplay("RP_Err","Please Enter a Confirm Password.","e"),void $("#cnpwd").focus();if(t.toLowerCase()==$.trim($("#cnpwd").attr("placeholder")).toLowerCase())return BMS.Misc.fnSCusErrDisplay("RP_Err","Please Enter a valid Confirm Password.","e"),void $("#cnpwd").focus();if($.trim(e.toLowerCase())!=$.trim(t.toLowerCase()))return void BMS.Misc.fnSCusErrDisplay("RP_Err","New Password and Confirm New Password doesn't match.","e");BMS.Misc.fnBusy(!0,$resendTabs),BMS.Misc.fnDoSecureTrans({cmd:"RESETPASSWORD",p1:rstPwdData,p2:e,p3:"|AUTOLOGIN="+autoLogin+"|",blnSupp:!0,fnCC:function(e){BMS.Misc.fnBusy(!1,$resendTabs),$("#npwd").val(""),$("#cnpwd").val(""),"Y"==autoLogin?(BMS.SignIn.fnAfterAuth(e),BMS.Misc.fnSCusErrDisplay("RP_Err","Your password has been successfully updated and you have been logged in.",""),window.location.href="/myprofile/"):BMS.Misc.fnSCusErrDisplay("RP_Err","Your password has been successfully updated.","")},fnEC:function(e){BMS.Misc.fnBusy(!1,$resendTabs),$("#npwd").val(""),$("#cnpwd").val(""),BMS.Misc.fnSCusErrDisplay("RP_Err",unescape(e),"e")}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnResetPassword",err:e})}},BMS.SignIn.fnDeactivateAccnt=function(){try{BMS.Misc.fnBusy(!0);var e=BMS.Storage.get({name:"ld",key:"MEMBEREMAIL"}),t=BMS.Storage.get({name:"ld",key:"MEMBERID"}),n=BMS.Storage.get({name:"ld",key:"LSID"});BMS.Misc.fnDoSecureTrans({cmd:"DEACTIVATEMEMBER",p1:t,p2:e,p3:n,blnSupp:!0,fnCC:function(){if(BMS.Storage.del({name:"ld"}),null!=global.SignOutCallBack&&0<global.SignOutCallBack.length)for(var e=0;e<global.SignOutCallBack.length;e++)global.SignOutCallBack[e].apply()},fnEC:function(){if(BMS.Storage.del({name:"ld"}),null!=global.SignOutCallBack&&0<global.SignOutCallBack.length)for(var e=0;e<global.SignOutCallBack.length;e++)global.SignOutCallBack[e].apply()}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnDeactivateAccnt",err:e})}},$(document).ready((function(){BMS.SignIn.fnGUserImage(),$("#iUserName, #iPwd").doEnter({callback:BMS.SignIn.fnValLogIn}),$("#iRegCnfPwd, #iRegUserEmail, #iRegPwd").doEnter({callback:BMS.SignIn.fnRegUser}),$("#iForgotEmail").doEnter({callback:BMS.SignIn.fnValLogIn}),$("#linkPwd,#iPwdsuperstart").doEnter({callback:BMS.SignIn.fnLinkAuthUser}),$("#susProfileLink").doEnter({callback:BMS.SignIn.fnVerifyAcc}),$("#upWalletInput").doEnter({callback:BMS.SignIn.fnSuspendedUpdateMobile}),hideSignInOnUserLoginPage(),BMS.Misc.fnGetSocialKeys(),BMS.Storage.isset({name:"ld"})&&BMS.Header.fnProfileUB(),BMS.Storage.isset({name:"ld"})&&"undefined"!=typeof pageName&&"payment"!=pageName&&"Y"==BMS.Storage.get({name:"superstarProfile"})&&"Y"!=BMS.Storage.get({name:"ld",key:"ACCOUNTLINKED"})&&(BMS.SignIn.fnLogOut(),BMS.Storage.del({name:"ld"}),$("#preSignIn").show(),$("#postSignIn").hide(),BMS.Storage.del({name:"superstarProfile"})),"S"==BMS.Storage.get({name:"ld",key:"STATUS"})&&(BMS.SignIn.fnLogOut(),BMS.Storage.del({name:"IsSusPendedStatus"}),BMS.Storage.del({name:"ld"}),$("#preSignIn").show(),$("#postSignIn").hide()),"undefined"!=typeof pageName&&"payment"!=pageName&&($("#iUserName").on("keyup input change paste",(function(){BMS.SignIn.validateUserLoginInput()})),$("#iPwd").on("keyup input change paste",(function(){BMS.SignIn.validateUserLoginInput()})),$("#iRegUserEmail").on("keyup input change paste",(function(){BMS.SignIn.validateUserSignUpInput()}))),"undefined"!=typeof global&&(global.SignOutCallBack.push(BMS.SignIn.fnReloadBookingFlowsAfterAuth),global.SignInCallBack.push(BMS.SignIn.fnReloadBookingFlowsAfterAuth))})),BMS.SignIn.fnLoginPushCT=function(){try{var e=""!=BMS.Misc.fnGVal({key:"NAME",data:BMS.Storage.get({name:"ld"})})?BMS.Misc.fnGVal({key:"NAME",data:BMS.Storage.get({name:"ld"})}):"",t=""!=BMS.Misc.fnGVal({key:"MEMBERID",data:BMS.Storage.get({name:"ld"})})?BMS.Misc.fnGVal({key:"MEMBERID",data:BMS.Storage.get({name:"ld"})}):"",n=""!=BMS.Misc.fnGVal({key:"MEMBEREMAIL",data:BMS.Storage.get({name:"ld"})})?BMS.Misc.fnGVal({key:"MEMBEREMAIL",data:BMS.Storage.get({name:"ld"})}):"",i=""!=BMS.Misc.fnGVal({key:"MOBILE",data:BMS.Storage.get({name:"ld"})})?BMS.Misc.fnGVal({key:"MOBILE",data:BMS.Storage.get({name:"ld"})}):"",a=""!=BMS.Misc.fnGVal({key:"GENDER",data:BMS.Storage.get({name:"ld"})})?BMS.Misc.fnGVal({key:"GENDER",data:BMS.Storage.get({name:"ld"})}):"",o=""!=BMS.Misc.fnGVal({key:"MARITALSTATUS",data:BMS.Storage.get({name:"ld"})})?BMS.Misc.fnGVal({key:"MARITALSTATUS",data:BMS.Storage.get({name:"ld"})}):"",s=new Date(""!=BMS.Misc.fnGVal({key:"DOB",data:BMS.Storage.get({name:"ld"})})?BMS.Misc.fnGVal({key:"DOB",data:BMS.Storage.get({name:"ld"})}):"");BMS.Misc.fnPushLoginAnalytics({Name:e,Identity:t,Email:n,Phone:"+91"+i,Gender:a,Married:o,DOB:s})}catch(e){void 0}},BMS.Misc.fnPushLoginAnalytics=function(e){try{clevertap.onUserLogin.push({Site:e})}catch(e){BMS.Misc.fnErr({fnName:"signin.js - fnPushLoginAnalytics",fnParams:arguments,err:e})}},BMS.SignIn.fnShowRelProfile=function(){try{BMS.Misc.fnBusy(!0);var e=BMS.Storage.get({name:"ld",key:"LSID",defVal:""}),t=BMS.Storage.get({name:"ld",key:"MOBILE",defVal:""}),n=BMS.Storage.get({name:"ld",key:"MEMBERID",defVal:""});StrShowRelParam='{"PhoneNo":"'+t+'","LSID":"'+e+'","MemberId":"'+n+'"}',BMS.Misc.fnDoSecureTrans({cmd:"SHOWSERVICES",p1:StrShowRelParam,blnSupp:!0,fnCC:function(e){0==e.length&&"myprofile"==pageName&&location.reload(),BMS.Misc.fnBusy(!1),StrShowRelResponce=$.parseJSON(e),StrShowRelResponce.showSkippedButton?(BMS.Misc.modal("linkPopup",!0),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event_type:"page_view",pageurl:"undefined"!=typeof pageName?pageName:"",tvc_userid:BMS.Storage.get({name:"ld",key:"MEMBERID"}),user_mode:"logged_in",region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",source:"",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),experiment:"",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web",product:"otp_login",pagetype:"merge_profile_confirmation"})):(cnt=3,BMS.Misc.modal("superstarSigninPopup",!0),StrShowRelResponce.hasFBEmail||(cnt--,$(".LinkFBSoc").hide()),StrShowRelResponce.hasPlusEmail||(cnt--,$(".LinkGPSoc").hide()),$("#iPwdsuperstart").val(""),StrShowRelResponce.hasBMSEmail||$(".forgot-password,#iPwdsuperstart,.LinkBMSProf,.or-divider,#SupViewer").hide(),1==cnt&&$(".or-divider").hide(),BMS.Storage.set({name:"superstarProfile",value:"Y",storage:"C"}),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event_type:"page_view",pageurl:window.location.href,tvc_userid:BMS.Storage.get({name:"ld",key:"MEMBERID"}),user_mode:"logged_in",region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",source:"",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),experiment:"",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web",product:"otp_login",pagetype:"merge_profile_validation"})),$(".linkEmail").text(StrShowRelResponce.emailId),$(".linkMobile").text(StrShowRelResponce.mobileNo),info=$.parseJSON(StrShowRelResponce.showServicesInfo.replace(/\\/g,"")),liInfo="";for(var t=0;t<info.length;t++)liInfo+="<li class='que'>"+info[t].q+"</li>",liInfo+="<li class='ans'>"+info[t].a+"</li></br>";$(".userInfo").html(liInfo)},fnEC:function(e){BMS.Misc.fnBusy(!1),BMS.Misc.fnGlobalErr({eMess:e,eRFn:"function: BMS.SignIn.fnShowRelProfile"})}}),"undefined"!=typeof pageName&&"myprofile"==pageName&&BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"tvc_gtmstdevent",eventCategory:"merge_profile_initiated","event_action ":"linkclick_yes",eventLabel:"",event_type:"click",user_id:BMS.Storage.get({name:"ld",key:"MEMBERID"}),event_name:"merge_profile_initiated",pagetype:"user_profile",eventAction:"click",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"text",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",product:"otp_login",event_level:"major",experiment:"",model_tags:"",user_mode:"logged_in",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web"})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnShowRelProfile",fnParams:arguments,err:e})}},BMS.SignIn.fnLinkForgotPass=function(t){try{BMS.Misc.fnBusy(!0,BMS.Modal.currentModal),(t?$("#dSignSupInErrorPassword .__text"):$("#dLinkSignInErrorPassword .__text")).text("");var e=BMS.Storage.get({name:"ld",key:"LSID",defVal:""}),n=BMS.Storage.get({name:"ld",key:"MEMBERID",defVal:""});StrResetPass='{"EmailId":"'+StrShowRelResponce.emailId+'","OTPLSID":"'+e+'","OTPMEMBERID":"'+n+'"}',BMS.Misc.fnDoSecureTrans({cmd:"SENDRESETPASSWORDURL",p1:StrResetPass,blnSupp:!0,fnCC:function(){BMS.Misc.fnBusy(!1,BMS.Modal.currentModal),t?(BMS.Misc.fnSCusErrDisplay("dSignSupInErrorPassword","Password reset link is emailed successfully","s"),setTimeout((function(){BMS.Misc.modal("superstarSigninPopup",!1)}),2e3)):(BMS.Misc.fnSCusErrDisplay("dLinkSignInErrorPassword","Password reset link is emailed successfully","s"),setTimeout((function(){BMS.Misc.modal("linkSigninPopup",!1)}),2e3)),BMS.Storage.del({name:"ld"}),$("#preSignIn").show(),$("#postSignIn").hide()},fnEC:function(e){BMS.Misc.fnBusy(!1,BMS.Modal.currentModal),t?BMS.Misc.fnSCusErrDisplay("dSignSupInErrorPassword",e,"e"):BMS.Misc.fnSCusErrDisplay("dLinkSignInErrorPassword",e,"e")}})}catch(e){void 0}},BMS.SignIn.fnLinkAuthUser=function(){try{var e=StrShowRelResponce.showSkippedButton?$("#linkPwd"):$("#iPwdsuperstart"),t=StrShowRelResponce.showSkippedButton?"dLinkSignInErrorPassword":"dSignSupInErrorPassword";if(""==$.trim(e.val())||"Password"==e.val())return BMS.Misc.fnSCusErrDisplay(t,"Please enter a password","e"),e.addClass("_error").focus(),void setTimeout((function(){$("#"+t).fadeOut()}),2e3);BMS.Misc.fnBusy(!0,BMS.Modal.currentModal),strParam8="|OTPMEMBERID="+BMS.Storage.get({name:"ld",key:"MEMBERID"})+"|OTPLSID="+BMS.Storage.get({name:"ld",key:"LSID"})+"|",BMS.Misc.fnDoSecureTrans({cmd:"SIGNIN",p1:StrShowRelResponce.emailId,p2:e.val(),p8:strParam8,blnSupp:!0,fnCC:function(e){BMS.Misc.modal("skipLinkSuccPopup",!0),BMS.Misc.fnBusy(!1,BMS.Modal.currentModal),setTimeout((function(){BMS.SignIn.fnAfterAuth(e)}),2e3)},fnEC:function(e){BMS.Misc.fnBusy(!1,BMS.Modal.currentModal),StrShowRelResponce.showSkippedButton?BMS.Misc.fnSCusErrDisplay("dLinkSignInErrorPassword",e,"e"):BMS.Misc.fnSCusErrDisplay("dSignSupInErrorPassword",e,"e")}})}catch(e){void 0}},BMS.SignIn.fnSkipLink=function(t){try{if("N"==t)return BMS.Misc.modal("linkPopup",!0),void BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"tvc_gtmstdevent",eventCategory:"merge_profile_skipped",eventAction:"click",eventLabel:"",event_type:"click",user_id:BMS.Storage.get({name:"ld",key:"MEMBERID"}),event_name:"merge_profile_skipped",event_action:"no",pagetype:"merge_profile_skip",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"text",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",product:"otp_login",event_level:"major",experiment:"",model_tags:"",tvc_userid:BMS.Storage.get({name:"ld",key:"MEMBERID"}),user_mode:"guest",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web"});BMS.Misc.fnBusy(!0);var e=BMS.Storage.get({name:"ld",key:"LSID",defVal:""}),n=BMS.Storage.get({name:"ld",key:"MEMBERID",defVal:""});t=1==$("#chkLinkCondn").prop("checked")&&"Y"==t?"Y":"N",StrShowRelParam='{"memberId":"'+n+'", "LSID":"'+e+'","skipForever":"'+t+'" }',BMS.Misc.fnDoSecureTrans({cmd:"SKIPOTPLINKING",p1:StrShowRelParam,blnSupp:!0,fnCC:function(e){BMS.Misc.fnBusy(!1),"undefined"!=typeof pageName&&"user-login"==pageName?window.location.href="/myprofile/edit":BMS.Misc.modal("skipLinkPopup",!1)},fnEC:function(e){BMS.Misc.fnBusy(!1),BMS.Misc.fnGlobalErr({eMess:e,eRFn:"function: BMS.SignIn.fnLinkAuthUser"})}}),GASkipValue="Y"==t?"skip_forever":"yes",BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"tvc_gtmstdevent",eventCategory:"merge_profile_skipped",eventAction:"click",eventLabel:"",event_type:"click",user_id:BMS.Storage.get({name:"ld",key:"MEMBERID"}),event_name:"merge_profile_skipped",eventLabel:"",event_action:GASkipValue,pagetype:"merge_profile_skip",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"text",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",product:"otp_login",event_level:"major",experiment:"",model_tags:"",Date_time:"",user_mode:"guest",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web"})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnClose",fnParams:t,err:e})}},BMS.SignIn.fnShowlinkPopup=function(e){try{if(e){$("#dLinkSignInErrorPassword").hide(),cnt=3,BMS.Misc.modal("linkSigninPopup",!0),StrShowRelResponce.hasFBEmail||(cnt--,$(".LinkFBSoc").hide()),StrShowRelResponce.hasPlusEmail||(cnt--,$(".LinkGPSoc").hide()),StrShowRelResponce.hasBMSEmail||$(".forgot-password,#linkPwd,.LinkBMSProf,.or-divider,#LinkViewer").hide(),1==cnt&&$(".or-divider").hide(),info=$.parseJSON(StrShowRelResponce.showServicesInfo.replace(/\\/g,"")),liInfo="";for(var t=0;t<info.length;t++)liInfo+="<li class='que'>"+info[t].q+"</li>",liInfo+="<liclass='ans'>"+info[t].a+"</li></br>";$(".userInfo").html(liInfo),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event_type:"page_view",pageurl:window.location.href,tvc_userid:BMS.Storage.get({name:"ld",key:"MEMBERID"}),user_mode:"logged_in",region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",source:"",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),experiment:"",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web",product:"otp_login",pagetype:"merge_profile_validation"}),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"tvc_gtmstdevent",eventCategory:"merge_profile",eventAction:"click",eventLabel:" ",event_type:"click",user_id:BMS.Storage.get({name:"ld",key:"MEMBERID"}),pagetype:"merge_profile_confirmation",event_action:"yes",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:" ",product:"otp_login",event_level:"major",experiement:" ",model_tags:" ",pageurl:window.location.href,user_mode:"logged_in",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web"})}else BMS.Misc.modal("skipLinkPopup",!0),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event_type:"page_view",pageurl:window.location.href,tvc_userid:BMS.Storage.get({name:"ld",key:"MEMBERID"}),user_mode:"logged_in",region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",source:"",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),experiment:"",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web",product:"otp_login",pagetype:"merge_profile_skip"}),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"tvc_gtmstdevent",eventCategory:"merge_profile",eventAction:"click",eventLabel:" ",event_type:"click",user_id:BMS.Storage.get({name:"ld",key:"MEMBERID"}),pagetype:"merge_profile_confirmation",event_action:"no",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:" ",product:"otp_login",event_level:"major",experiement:" ",model_tags:" ",pageurl:window.location.href,user_mode:"logged_in",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web"})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnShowlinkPopup",fnParams:arguments,err:e})}},BMS.SignIn.fnSocialWrapper=function(e){try{"FB"==e?(BMS.Misc.fnBusy(!0,BMS.Modal.currentModal),BMS.SignIn.fnFbLogin(),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"tvc_gtmstdevent",eventCategory:"existing_profile_validated",eventAction:"click",eventLabel:"",event_type:"click",user_id:BMS.Storage.get({name:"ld",key:"MEMBERID"}),pagetype:"merge_profile_validation",login_type:"social_connect_fb",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",product:"otp_login",event_level:"major",experiement:"",model_tags:"",pageurl:window.location.href,user_mode:"guest",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web"})):(signInModalRestore(),BMS.Misc.fnBusy(!0,BMS.Modal.currentModal),BMS.SignIn.fnGoogleSignIn(),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"tvc_gtmstdevent",eventCategory:"existing_profile_validated",eventAction:"click",eventLabel:"",event_type:"click",user_id:BMS.Storage.get({name:"ld",key:"MEMBERID"}),pagetype:"merge_profile_validation",Login_type:"social_connect_g+",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"text",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",product:"otp_login",event_level:"major",experiement:"",model_tags:"",pageurl:window.location.href,user_mode:"guest",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web"})),BMS.Storage.set({name:"SINGINLINK",value:"Y",storage:"C"})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnFbWrapper",fnParams:arguments,err:e})}},BMS.SignIn.validateVerifyAcc=function(e){try{if(-1!==$.inArray(e.keyCode,[46,8,9,27,110,190])||65===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||35<=e.keyCode&&e.keyCode<=40)return void $(".social-links div").addClass("disable");(e.shiftKey||e.keyCode<48||57<e.keyCode)&&(e.keyCode<96||105<e.keyCode)&&e.preventDefault();return/^[6789]\d{8}$/.test($("#susProfileLink").val())?void $(".social-links div").removeClass("disable"):(13==e.keyCode&&BMS.SignIn.fnVerifyAcc(),!0)}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.validateVerifyAcc",err:e})}},BMS.SignIn.fnVerifyAcc=function(){try{if(SusoendedmobNo=$("#susProfileLink"),$(".social-links div").hasClass("disable"))return!1;if(BMS.Storage.set({name:"IsSusPendedStatus",value:"N",storage:"S"}),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"tvc_gtmstdevent",eventCategory:"mobile_number_updated",eventAction:"click",event_type:"click",eventLabel:"",pagetype:"reverify_mobile_number",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"text",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",product:"otp_login",event_level:"major",experiment:"",model_tags:"",user_mode:"guest",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web"}),SusoendedmobNo.val()==BMS.Storage.get({name:"ld",key:"WALLETMOBILENO"}))return void BMS.SignIn.fnCallFBKIT(SusoendedmobNo.val());"N"==BMS.Storage.get({name:"ld",key:"OTPMOBVERIFIED"})&&"A"==BMS.Storage.get({name:"ld",key:"WALLETSTATUS"})?BMS.SignIn.fnSuspendedCreateWalletOtp(SusoendedmobNo.val()):BMS.Misc.fnDoSecureTrans({cmd:"WALLETEXISTS",p1:SusoendedmobNo.val(),blnSupp:!1,fnCC:function(e){IsWalletExt=$.parseJSON(e),"N"==IsWalletExt.wallet?BMS.SignIn.fnCallFBKIT(SusoendedmobNo.val()):BMS.Misc.fnSCusErrDisplay("errDivVerMobile","Another account already exists with this mobile number.","e")},fnEC:function(e){void 0}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnVerifyAcc",fnParams:arguments,err:e})}},BMS.SignIn.fnCallFBKIT=function(t){try{BMS.Misc.fnBusy(!0,BMS.Modal.currentModal),BMS.Misc.fnAjax({url:"/serv/getData",data:{cmd:"APPDETAILS",app:"FBACKIT"},success:function(e){BMS.SignIn.fnFBKit("OTPAPP",t),BMS.Storage.set({name:"IsSusPendedStatus",value:"Y",storage:"S"})},error:function(e){BMS.Misc.fnBusy(!1,BMS.Modal.currentModal),BMS.Misc.fnErr({fnName:"BMS.SignIn.fnRegUser",err:e})}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnCallFBKIT",fnParams:param,err:e})}},BMS.SignIn.validateOTPSus=function(e){try{return-1!==$.inArray(e.keyCode,[46,8,9,27,110,190])||65===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||35<=e.keyCode&&e.keyCode<=40?void $(".social-links div").addClass("disable"):((e.shiftKey||e.keyCode<48||57<e.keyCode)&&(e.keyCode<96||105<e.keyCode)&&e.preventDefault(),/^[0-9]{5}$/.test($("#upWalletInput").val())?void $(".social-links div").removeClass("disable"):(13==e.keyCode&&BMS.SignIn.fnSuspendedUpdateMobile(),!0))}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.validateOTPSus",err:e})}},BMS.SignIn.fnSuspendedCreateWalletOtp=function(e){try{setTimeout((function(){BMS.Misc.fnBusy(!0,BMS.Modal.currentModal),BMS.Storage.set({name:"SusNewMobile",value:e,storage:"S"}),BMS.Misc.fnDoSecureTrans({AppC:global.strWltAppCode,cmd:"CREATEWALLETOTP",p1:BMS.Storage.get({name:"ld",key:"MEMBERID",defVal:""}),p2:BMS.Storage.get({name:"ld",key:"LSID",defVal:""}),p3:e,p4:"EDITCUSTOMER",retType:"json",blnSupp:!0,fnCC:function(e){BMS.Misc.modal("updateWallet",!0),$(".social-links div").addClass("disable")},fnEC:function(e){BMS.Misc.fnBusy(!1,BMS.Modal.currentModal),BMS.Misc.fnSCusErrDisplay("errDivVerMobile",e,"e")}})}),2e3)}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnSuspendedCreateWalletOtp",fnParams:param,err:e})}},BMS.SignIn.fnSuspendedUpdateMobile=function(){try{var e,t,n,i,a,o,s,r=$("#upWalletInput").val();/^[0-9]{6}$/.test(r)?(e=BMS.Storage.get({name:"ld",key:"MEMBERID",defVal:""}),t=BMS.Storage.get({name:"ld",key:"LSID",defVal:""}),n=BMS.Storage.get({name:"ld",key:"MEMBEREMAIL",defVal:""}),i=BMS.Storage.get({name:"ld",key:"MOBILE",defVal:""}),a=BMS.Storage.get({name:"SusNewMobile"}),o=BMS.Storage.get({name:"ld",key:"FIRSTNAME",defVal:""}),s=BMS.Storage.get({name:"ld",key:"LASTNAME",defVal:""}),BMS.Misc.fnBusy(!0,BMS.Modal.currentModal),BMS.Misc.fnDoSecureTrans({AppC:global.strWltAppCode,cmd:"UPDATEWALLET",p1:e,p2:e,p3:t,p4:n,p5:i,p6:a,p7:o,p8:s,p9:r,blnSupp:!0,fnCC:function(e){BMS.Misc.fnBusy(!1,BMS.Modal.currentModal),BMS.SignIn.fnCallFBKIT(a)},fnEC:function(e){BMS.Misc.fnBusy(!1,BMS.Modal.currentModal),BMS.Misc.fnSCusErrDisplay("errDivUpWalletMobile",e,"e")}})):BMS.Misc.fnSCusErrDisplay("errDivUpWalletMobile","Please enter a valid otp ","e")}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnSuspendedUpdateMobile",err:e})}},BMS.SignIn.LinkeyeViewer=function(){try{$(".password-field").hasClass("show-password")?($(".password-input").attr("type","text"),$(".password-field").removeClass("show-password")):($(".password-input").attr("type","password"),$(".password-field").addClass("show-password"))}catch(e){BMS.Misc.fnErr({fnName:"LinkeyeViewer",err:e})}},BMS.SignIn.pushLoginTypeGA=function(e){try{BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"tvc_gtmstdevent",eventCategory:"login_clicked",eventAction:"click",eventLabel:"",event_type:"click",pagetype:"login",user_id:BMS.Storage.get({name:"ld",key:"MEMBERID"}),bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",product:"otp_login",event_level:"major",experiement:"",model_tags:e,login_type:"bms_login",pageurl:window.location.href,user_mode:"guest",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web"})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.pushLoginTypeLotame",err:e})}},BMS.SignIn.fnFbInit=function(){try{"undefined"==typeof FB&&$.getScript("//connect.facebook.net/en_US/sdk.js",(function(){FB.init({appId:global.fbAppId,status:!1,xfbml:!0,version:"v2.9"})}))}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnFbInit",err:e})}},BMS.SignIn.fnFbGetLoginStatus=function(){try{FB.getLoginStatus((function(e){"connected"===e.status&&(global.lngFBAT=e.authResponse.accessToken,global.strFBProfileURL=e.authResponse.userID,BMS.SignIn.fnFbGetMemberDetails())}))}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnFbGetLoginStatus",err:e})}},BMS.SignIn.fnFbLogin=function(){try{navigator.userAgent.match("CriOS")?(BMS.Storage.set({name:"fbLogin",value:"1",storage:"C"}),window.open("https://www.facebook.com/dialog/oauth?client_id="+global.fbAppId+"&redirect_uri="+document.location.href+"&scope="+global.FBPriviledges,"",null)):FB.login((function(e){e.authResponse?(global.lngFBAT=e.authResponse.accessToken,global.strFBProfileURL=e.authResponse.userID,BMS.SignIn.fnFbGetMemberDetails(),BMS.Misc.fnPushEventDataToAnalytics(["WR","KM","WN"],"Sign up",{Mode:"Facebook",Appcode:global.strAppCode})):(BMS.Storage.del({name:"SINGINLINK"}),void 0,BMS.Misc.fnBusy(!1,BMS.Modal.currentModal))}),{scope:global.FBPriviledges,return_scopes:!0})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnFbLogin",err:e})}},BMS.SignIn.fnFbGetMemberDetails=function(){try{FB.api("/me",(function(e){var t="",n="";void 0!==BMS.SignIn.SocialConnect&&"FB"==BMS.SignIn.SocialConnect&&(t="|MEMBEREMAIL="+BMS.Storage.get({name:"ld",key:"MEMBEREMAIL"})+"|LSID="+BMS.Storage.get({name:"ld",key:"LSID"})+"|"),"Y"==BMS.Storage.get({name:"SINGINLINK"})&&(n="|OTPMEMBERID="+BMS.Storage.get({name:"ld",key:"MEMBERID"})+"|OTPLSID="+BMS.Storage.get({name:"ld",key:"LSID"})+"|",t=""),BMS.Misc.fnDoSecureTrans({cmd:"SAVEUSERSOCIALMEDIADETAILS",p1:"FB",p2:"|FBAT="+global.lngFBAT+"|",p3:t,p8:n,blnSupp:!1,fnCC:function(e){BMS.SignIn.fnAfterAuth(e),BMS.Storage.del({name:"SINGINLINK"}),$(".modal .popover._signin-signup-popover-fixed").trigger("signinsignuptracking",["fb"]),"undefined"!=typeof pageName&&"twoStepAuth"==pageName&&BMS.SignIn.fnSuccReset()},fnEC:function(e){"undefined"!=typeof pageName&&"twoStepAuth"==pageName&&BMS.SignIn.fnSuccReset(),BMS.Misc.fnBusy(!1)}})}))}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnFbGetMemberDetails",err:e})}},$(document).ready((function(){navigator.userAgent.match("CriOS")&&"1"==BMS.Storage.get({name:"fbLogin",storage:"C"})&&(BMS.Misc.fnBusy(!0),setTimeout((function(){BMS.SignIn.fnFbGetLoginStatus(),BMS.Storage.del({name:"fbLogin",storage:"C"})}),2e3)),BMS.SignIn.fnFbInit()})),window.___gcfg={lang:"en-US",parsetags:"explicit"},BMS.SignIn.fnGoogleSDKinit=function(){try{BMS.Misc.loadScript(document,"script","google-platform",BMS.SignIn.getGoogleSignInSDKUrl(),(function(){gapi.load("auth2",(function(){var e=gapi.auth2.init({client_id:global.plusAppId,scope:global.plusPrivileges});global.auth2=e}))}))}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnGoogleSDKinit",err:e})}},BMS.SignIn.fnGoogleSignIn=function(){try{global.auth2.signIn().then((function(e){var t={lngGPlusAT:e.getAuthResponse().access_token,imgUrl:""};BMS.Storage.set({name:"PLUSIMAGEURL",value:e.getBasicProfile().getImageUrl(),storage:"C"}),BMS.SignIn.fnGetSocialDetailsFromIS(t)}),(function(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnGoogleSignIn",err:e})}))}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnGoogleSignIn",err:e})}},BMS.SignIn.fnGPlusSignIn=function(){try{gapi.auth.authorize({client_id:global.plusAppId,scope:global.plusPrivileges,immediate:!1,authuser:-1},(function(e){var t;e.status.signed_in&&(t=e.access_token,BMS.SignIn.fnGetGPlusUserDetails((function(e){e.lngGPlusAT=t,BMS.SignIn.fnGetSocialDetailsFromIS(e),BMS.Misc.fnPushEventDataToAnalytics(["WR","KM","WN"],"Sign up",{Mode:"Google Plus",Appcode:global.strAppCode})})))}))}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnGPlusSignIn",err:e})}},BMS.SignIn.fnGetGPlusUserDetails=function(t){try{gapi.client.load("plus","v1",(function(){gapi.client.plus.people.get({userId:"me",key:""}).execute((function(e){e={imgUrl:void 0!==e&&void 0!==e.image?e.image.url:""};t(e)}))}))}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnGetGPlusUserDetails",err:e})}},BMS.SignIn.fnCallToGetGPlusUserDetails=function(i){try{BMS.Misc.fnAjax({url:"https://www.googleapis.com/plus/v1/people/me",data:"access_token="+BMS.Misc.fnGVal({key:"PLUSACCESSTOKEN",data:BMS.Storage.get({name:"ld"})}),type:"GET",success:function(e){""!=e.image.url?i(e):i(null)},error:function(e,t,n){i(null)}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnCallToGetGPlusUserDetails",err:e})}},BMS.SignIn.fnGetSocialDetailsFromIS=function(e){try{var t="",n="";void 0!==BMS.SignIn.SocialConnect&&"PLUS"==BMS.SignIn.SocialConnect&&(t="|MEMBEREMAIL="+BMS.Storage.get({name:"ld",key:"MEMBEREMAIL"})+"|LSID="+BMS.Storage.get({name:"ld",key:"LSID"})+"|"),"Y"==BMS.Storage.get({name:"SINGINLINK"})&&(n="|OTPMEMBERID="+BMS.Storage.get({name:"ld",key:"MEMBERID"})+"|OTPLSID="+BMS.Storage.get({name:"ld",key:"LSID"})+"|",t=""),BMS.Misc.fnDoSecureTrans({cmd:"SAVEUSERSOCIALMEDIADETAILS",p1:"GOOGLELOGIN",p2:"|GOOGLELOGINAT="+e.lngGPlusAT+"|",p3:t,p8:n,blnSupp:!1,fnCC:function(e){BMS.SignIn.fnAfterAuth(e),$(".modal .popover._signin-signup-popover-fixed").trigger("signinsignuptracking",["gplus"]),BMS.Storage.del({name:"SINGINLINK"}),"undefined"!=typeof pageName&&"twoStepAuth"==pageName&&BMS.SignIn.fnSuccReset()},fnEC:function(e){BMS.Misc.fnBusy(!1),BMS.Storage.del({name:"SINGINLINK"}),"undefined"!=typeof pageName&&"twoStepAuth"==pageName&&BMS.SignIn.fnSuccReset()}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnGetSocialDetailsFromIS",err:e})}},BMS.Storage={_defaults:{name:"",key:"",value:"",storage:"L",sess:!0,path:"/",defVal:"",expires:"Tue, 31 Dec 2030 23:59:59 GMT",secure:!1}},BMS.Storage.get=function(t){try{(null!=t&&null!=t.name&&""!=t.name?t:BMS.Storage._defaults).name;var e,n,i,a,o,s=(null!=t&&null!=t.defVal&&""!=t.defVal?t:BMS.Storage._defaults).defVal,r=t.name,l=t.name+"=",c=document.cookie,d="";return"undefined"!=typeof localStorage&&null!=localStorage.getItem(r)?d=localStorage.getItem(r):0<c.length&&-1!=c.indexOf(l)?(e="(^| )"+r+"=([^;]+)",(n=c.match(new RegExp(e)))&&(d=n[2]),"le="==$.trim(l)&&(i=c.match(/ le=/).index,a=c.substring(i),-1!=(o=$.trim(a.substring(0,a.indexOf(";")))).indexOf("=")&&(d=o.split("=")[1]))):"undefined"!=typeof sessionStorage&&null!=sessionStorage.getItem(r)&&(d=sessionStorage.getItem(r)),d=decodeURIComponent(d),d=void 0!==t&&""!=t.key&&void 0!==t.key?BMS.Misc.fnGVal({key:t.key,data:d,defVal:s}):d}catch(e){BMS.Misc.fnErr({fnName:"BMS.Storage.get",fnParams:t,err:e})}},BMS.Storage.set=function(t){try{var e=(null!=t.name&&""!=t.name?t:BMS.Storage._defaults).name,n=(null!=t.key&&""!=t.key?t:BMS.Storage._defaults).key,i=(null!=t.value&&""!=t.value?t:BMS.Storage._defaults).value,a=(null!=t.storage&&""!=t.storage?t:BMS.Storage._defaults).storage,o=(null!=t.sess?t:BMS.Storage._defaults).sess,s=(null!=t.expires&&""!=t.expires?t:BMS.Storage._defaults).expires,r=(null!=t.path&&""!=t.path?t:BMS.Storage._defaults).path,l=(null!=t.secure?t:BMS.Storage._defaults).secure;if(-1!=$.inArray(e,["userCine","preferredLanguages","le"])&&"dev"!=global.Tier&&(l=!0),a=a.toUpperCase(),""!=n){for(var c,d=BMS.Storage.get({name:e}).split("|"),u=new Array,p=0;p<d.length;p++)""!=d[p]&&(c=d[p].split("="))[0]!=n&&u.push(new Array(c[0],c[1]));var f="";f+="|"+n+"="+i;for(var g=0;g<u.length;g++)f+="|"+u[g][0]+"="+u[g][1];i=f+="|"}i=encodeURIComponent(i),""==a||"L"==a?"undefined"!=typeof localStorage?localStorage.setItem(e,i):document.cookie=escape(e)+"="+i+(o?"":"; expires="+s)+"; path="+r+(l?";secure;":""):"C"==a?document.cookie=escape(e)+"="+i+(o?"":"; expires="+s)+"; path="+r+(l?";secure;":""):"S"==a&&("undefined"!=typeof sessionStorage?sessionStorage.setItem(e,i):document.cookie=escape(e)+"="+i+(o?"":"; expires="+s)+"; path="+r+(l?";secure;":""))}catch(e){BMS.Misc.fnErr({fnName:"BMS.Storage.set",fnParams:t,err:e})}},BMS.Storage.isset=function(t){try{var e=(void 0!==t.name&&""!=t.name?t:BMS.Storage._defaults).name,n=(void 0!==t.key&&""!=t.key?t:BMS.Storage._defaults).key;if(""==BMS.Storage.get({name:e}))return!1;if(""==n)return!0;var i=BMS.Storage.get({name:e});return""!=BMS.Misc.fnGVal({key:n,data:i})}catch(e){BMS.Misc.fnErr({fnName:"BMS.Storage.isset",fnParams:t,err:e})}},BMS.Storage.del=function(t){try{var e=(void 0!==t.name&&""!=t.name?t:BMS.Storage._defaults).name,n=(void 0!==t.path&&""!=t.path?t:BMS.Storage._defaults).path,i=document.cookie;"undefined"!=typeof localStorage&&null!=localStorage.getItem(e)?localStorage.removeItem(e):-1!=i.indexOf(e+"=")?document.cookie=escape(e)+"=; expires=Thu, 01 Jan 2012 00:00:01 GMT; path="+n:"undefined"!=typeof sessionStorage&&null!=sessionStorage.getItem(e)&&sessionStorage.removeItem(e)}catch(e){BMS.Misc.fnErr({fnName:"BMS.Storage.del",fnParams:t,err:e})}},BMS.Storage.filterLDData=function(t){try{var e=["MEMBERID","MEMBEREMAIL","STATUS","LSID","FIRSTNAME","LASTNAME","MOBILE","SEQUENCE","EXPIRY","EMAILSUBSCRIPTION","MOBILESUBSCRIPTION","EMAILVERIFIED","OTPMOBVERIFIED","ACCOUNTLINKED","MARITALSTATUS","PROFILEIMAGEURL","WALLETSTATUS","WALLETLASTNAME","WALLETFIRSTNAME","WALLETEMAILID","WALLETMOBILENO","WALLETAUTOREFUNDMODE","LOYALTYVARIANTID","LOYALTYISSUBSCRIBED","LOYALTYISTARGETTED","ISWALLETELIGIBLE","LASTLOGIN","NAME","ISFCONNECTLOGIN","ISPLUSLOGIN"],n=t.ldvalue.split("|");value="";for(var i=0;i<n.length;i++){var a=n[i].split("=");-1<$.inArray(a[0],e)&&""!=a[0]&&(value+=a[0]+"="+a[1]+"|")}value="|"+value,document.cookie=escape(t.ldname)+"="+encodeURIComponent(value)+(t.ldsess?"":"; expires="+t.ldexpires)+"; path="+t.ldpath+(t.ldsecure?";secure;":"")}catch(e){BMS.Misc.fnErr({fnName:"BMS.Storage.filterLDData",fnParams:t,err:e})}},BMS.Misc.fnAjax=function(t){try{var e=null==t.async||""==t.async||t.async,n=null!=t.beforeSend&&""!=t.beforeSend?t.beforeSend:"",i=null==t.cache||""==t.cache||t.cache,a=null!=t.contentType&&""!=t.contentType?t.contentType:"application/x-www-form-urlencoded; charset=UTF-8",o=null!=t.data&&""!=t.data?t.data:"",s=null!=t.dataType&&""!=t.dataType?t.dataType:"",r=null!=t.error&&""!=t.error&&t.error,l=(null!=t.suppress&&""!=t.suppress&&t.suppress,{"Content-Type":"application/x-www-form-urlencoded","Cache-Control":"no-store"}),l=null!=t.headers&&""!=t.headers?$.extend(l,t.headers):l,c=null!=t.success&&""!=t.success&&t.success,d=null!=t.timeout&&""!=t.timeout?t.timeout:3e5,u=null!=t.type&&""!=t.type?t.type:"GET",p=t.url;$.support.cors=!0,$("#glErrDiv").is(":visible")&&"CANCELTRANS"!=o.c&&$("#glErrDiv").hide(),$.ajax({async:e,beforesend:n,cache:i,contentType:a,data:o,dataType:s,error:function(e,t,n){0==e.status&&"timeout"==!t||r(e,t,n)},headers:l,success:function(e,t,n){c&&c(e,n)},timeout:d,type:u,url:p})}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnAjax1",fnParams:t,err:e})}},BMS.Misc.fnGetSeatlayout=function(t){try{var e=void 0!==t.AppC&&""!==t.AppC?t.AppC:global.strAppCode,n=void 0!==t.venCode&&""!==t.venCode?t.venCode:"",i=void 0!==t.transId&&""!==t.transId?t.transId:0,a=void 0!==t.cmd&&""!==t.cmd?t.cmd:"",o=void 0!==t.p1&&""!==t.p1?t.p1:"",s=void 0!==t.p2&&""!==t.p2?t.p2:"",r=void 0!==t.p3&&""!==t.p3?t.p3:"",l=void 0!==t.p4&&""!==t.p4?t.p4:"",c=void 0!==t.p5&&""!==t.p5?t.p5:"",d=void 0!==t.p6&&""!==t.p6?t.p6:"",u=void 0!==t.p7&&""!==t.p7?t.p7:"",p=void 0!==t.p8&&""!==t.p8?t.p8:"",f=void 0!==t.p9&&""!==t.p9?t.p9:"",g=void 0!==t.p10&&""!==t.p10?t.p10:"",h=void 0!==t.fnCC&&t.fnCC,m=void 0!==t.fnEC&&t.fnEC,v=void 0!==t.blnSupp&&t.blnSupp,S="Could not fetch the seat layout information. Please try again.",y="strCommand: "+a+", strAppCode: "+e+", strVenueCode:"+n+", lngTransId:"+i+", strParam1: "+o+", strParam2: "+s+", strParam3: "+r+", strParam4:"+l+", strParam5:"+c+", strParam6:"+d+", strParam7:"+u+", strParam8:"+p+", strParam9: "+f+", strParam10: "+g,M={strCommand:a,strAppCode:e,strVenueCode:n,lngTransactionIdentifier:i,strParam1:o,strParam2:s,strParam3:r,strParam4:l,strParam5:c,strParam6:d,strParam7:u,strParam8:p,strParam9:f,strParam10:g,strFormat:"json"},b={url:global.strClientDoTrans,timeout:62e3,type:"POST",suppress:v,data:M,headers:$.extend({"x-app-code":global.strAppCode,"x-tp-client-id":global.deviceDetailsNotif.ip,"true-client-ip":global.deviceDetailsNotif.ip},t.headers),error:function(e,t,n){var i="timeout"===t?S:"It seems like we are encountering some issues at our side. Please try again.";"timeout"===t&&(BMS.Misc.fnBusy(!1),BMS.Misc.fnGlobalErr({eMess:i,eCode:e.status,eCmd:y,eRFn:"function: BMS.Misc.fnGetSeatlayout"})),void 0!==m&&"function"==typeof m&&m(n)},success:function(e,t){e=e.BookMyShow;void 0!==e&&"true"===e.blnSuccess?(t="Y"===t.getResponseHeader("x-seatlayout-encryption"),h(t?preProcessString(e.strData,t):e.strData)):(v||(BMS.Misc.fnBusy(!1),BMS.Misc.fnGlobalErr({eMess:e.strException,eCode:e.intExceptionEx,eCmd:y,eRFn:"function: BMS.Misc.fnGetSeatlayout"})),m&&m(e.strException))}};BMS.Misc.fnAjax(b)}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnGetSeatlayout",fnParams:t,err:e})}},BMS.Misc.fnDoTrans=function(t){try{var e,n=null!=t.AppC&&""!=t.AppC?t.AppC:global.strAppCode,i=null!=t.venCode&&""!=t.venCode?t.venCode:"",a=null!=t.transId&&""!=t.transId?t.transId:0,r=null!=t.cmd&&""!=t.cmd?t.cmd:"",o=null!=t.p1&&""!=t.p1?t.p1:"",s=null!=t.p2&&""!=t.p2?t.p2:"",l=null!=t.p3&&""!=t.p3?t.p3:"",c=null!=t.p4&&""!=t.p4?t.p4:"",d=null!=t.p5&&""!=t.p5?t.p5:"",u=null!=t.p6&&""!=t.p6?t.p6:"",p=null!=t.p7&&""!=t.p7?t.p7:"",f=null!=t.p8&&""!=t.p8?t.p8:"",g=null!=t.p9&&""!=t.p9?t.p9:"",h=null!=t.p10&&""!=t.p10?t.p10:"",m=null!=t.fnCC&&t.fnCC,v=null!=t.fnEC&&t.fnEC,S=null!=t.ccObj&&t.ccObj,y=null!=t.ecObj&&t.ecObj,M=null!=t.blnSupp&&t.blnSupp,b=void 0,w=void 0,B="strCommand: "+r+", strAppCode: "+n+", strVenueCode:"+i+", lngTransId:"+a+", strParam1: "+o+", strParam2: "+s+", strParam3: "+l+", strParam4:"+c+", strParam5:"+d+", strParam6:"+u+", strParam7:"+p+", strParam8:"+f+", strParam9: "+g+", strParam10: "+h+", blnSuppress: "+M;switch($("#glErrDiv").is(":visible")&&"CANCELTRANS"!=r&&$("#glErrDiv").hide(),"CANCELTRANS"==r&&(s=e=-1!=(e=BMS.Storage.get({name:"secCanTransCookie",storage:"C"})||BMS.Storage.get({name:"UID",storage:"C"})).indexOf('"')?e.replace(/"/g,""):e,BMS.Storage.del({name:"secCanTransCookie"})),r){case"COMMITTRANS":b=122e3;break;case"SETSELECTEDSEATS":b=32e3,w="We are experiencing some performance issue with our cinema partner. Please try again.";break;case"GETSEATLAYOUT":b=62e3,w="Could not fetch the seat layout information. Please try again.";break;default:b=32e3,w="We are experiencing some unexpected issues. Please try again."}BMS.Misc.fnAjax({data:{a:n,v:i,t:a,c:r,p1:o,p2:s,p3:l,p4:c,p5:d,p6:u,p7:p,p8:f,p9:g,p10:h,customHeaders:t.customHeaders||""},headers:t.headers||"",dataType:"xml",error:function(e,t,n){var i="timeout"==t&&w?w:"It seems like we are encountering some issues at our side. Please try again.";M&&"timeout"!=t||(BMS.Misc.fnBusy(!1),"COMMITTRANS"==r?BMS.Misc.showCommitTransErrorModal({cmd:r}):BMS.Misc.fnGlobalErr({eMess:i,eCode:e.status,eCmd:B,eRFn:"function: BMS.Misc.fnDoTrans"})),void 0!==v&&"function"==typeof v&&v(n)},success:function(e,t){for(var n,i={},a=$(e).find("objExecuteResult").children().length,o=0;o<a;o++){var s=$(e).find("objExecuteResult").children().eq(o);i[s.get(0).nodeName]=s.text()}"true"==i.blnSuccess?m&&("INITTRANS"==r&&(n=BMS.Misc.fnGVal({key:"UID",data:unescape(i.strData)}),BMS.Storage.set({name:"secCanTransCookie",value:n,storage:"C"})),S?m(i):"GETSEATLAYOUT"===r?(t="Y"===t.getResponseHeader("x-seatlayout-encryption"),m(preProcessString(i.strData,t))):m(i.strData)):(M||(BMS.Misc.fnBusy(!1),BMS.Misc.fnGlobalErr({eMess:i.strException,eCode:i.intExceptionEx,eCmd:B,eRFn:"function: BMS.Misc.fnDoTrans"})),v&&v(y?i:i.strException))},timeout:b,suppress:M,type:"POST",url:"https:"==location.protocol||1==t.secure?"/serv/doSecureTrans.bms":"/serv/doTrans.bms"})}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnDoTrans",fnParams:t,err:e})}},BMS.Misc.fnDoSecureTrans=function(t){try{var e=null!=t.AppC&&""!=t.AppC?t.AppC:global.strAppCode,n=null!=t.venCode&&""!=t.venCode?t.venCode:"",i=null!=t.transId&&""!=t.transId?t.transId:0,s=null!=t.cmd&&""!=t.cmd?t.cmd:"",a=null!=t.p1&&""!=t.p1?t.p1:"",o=null!=t.p2&&""!=t.p2?t.p2:"",r=null!=t.p3&&""!=t.p3?t.p3:"",l=null!=t.p4&&""!=t.p4?t.p4:"",c=null!=t.p5&&""!=t.p5?t.p5:"",d=null!=t.p6&&""!=t.p6?t.p6:"",u=null!=t.p7&&""!=t.p7?t.p7:"",p=null!=t.p8&&""!=t.p8?t.p8:"",f=null!=t.p9&&""!=t.p9?t.p9:"",g=null!=t.p10&&""!=t.p10?t.p10:"",h=(null!=t.type&&""!=t.type&&t.type,null!=t.fnCC&&t.fnCC),m=null!=t.fnEC&&t.fnEC,v=null!=t.ccObj&&t.ccObj,S=null!=t.ecObj&&t.ecObj,y=null!=t.blnSupp&&t.blnSupp,M="strCommand: "+s+", strAppCode: "+e+", strVenueCode:"+n+", lngTransId:"+i+", strParam1:"+a+", strParam2: "+o+", strParam3: "+r+", strParam4:"+l+", strParam5:"+c+", strParam6:"+d+", strParam7:"+u+", strParam8:"+p+", strParam9: "+f+", strParam10: "+g+", blnSuppress: "+y,b="https://"+location.host;"dev"==global.Tier&&(b=location.protocol+"//"+location.host),"CANCELTRANS"==s&&(o=BMS.Storage.get({name:"secCanTransCookie",storage:"C"}),BMS.Storage.del({name:"secCanTransCookie"}));var w,B,C,_="a="+encodeURIComponent(e)+"&v="+encodeURIComponent(n)+"&t="+encodeURIComponent(i)+"&c="+encodeURIComponent(s)+"&p1="+encodeURIComponent(a)+"&p2="+encodeURIComponent(o)+"&p3="+encodeURIComponent(r)+"&p4="+encodeURIComponent(l)+"&p5="+encodeURIComponent(c)+"&p6="+encodeURIComponent(d)+"&p7="+encodeURIComponent(u)+"&p8="+encodeURIComponent(p)+"&p9="+encodeURIComponent(f)+"&p10="+encodeURIComponent(g),k=b+"/serv/doSecureTrans.bms";function E(e){return e=(e=e.toString().replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"")).toString().replace(/(onload|onerror|onclick|onhover|onmouse)/gi,"")}BMS.Misc.fnBrowsVer()<8?(k=k+"?"+_,fnData=function(e){var t=$.parseXML(e.response),n=$(t).find("strData").text();"true"==$(t).find("blnSuccess").text()?h&&("INITTRANS"==s&&(e=BMS.Misc.fnGVal({key:"UID",data:unescape(n.strData)}),BMS.Storage.set({name:"secCanTransCookie",value:e,storage:"C"})),h(n)):(y||($(t).find("strException").text(),$(t).find("intExceptionEx").text(),BMS.Misc.fnBusy(!1),BMS.Misc.fnGlobalErr({eMess:n.strException,eCode:n.intExceptionEx,eCmd:M,eRFn:"function: BMS.Misc.fnDoSecureTrans"})),m&&m(S?n:$(t).find("strException").text()))},$.getScript(k+"&type=jsonp&callback=fnData")):(0==(w=$("#xd_form")).length&&(w=$("<form style='display:none;' id='xd_form' action='"+k+"?type=iframe#"+encodeURIComponent(document.location.href)+"' method='POST' enctype='multipart/form-data' target='xd_frame'></form>"),$("body").append(w)),w.html(""),B="<input type='hidden' name='a' value='"+E(e)+"' />",B+="<input type='hidden' name='v' value='"+E(n)+"' />",B+="<input type='hidden' name='t' value='"+E(i)+"' />",B+="<input type='hidden' name='c' value='"+E(s)+"' />",B+="<input type='hidden' name='p1' value='"+E(a)+"' />",B+="<input type='hidden' name='p2' value='"+E(o)+"' />",B+="<input type='hidden' name='p3' value='"+E(r)+"' />",B+="<input type='hidden' name='p4' value='"+E(l)+"' />",B+="<input type='hidden' name='p5' value='"+E(c)+"' />",B+="<input type='hidden' name='p6' value='"+E(d)+"' />",B+="<input type='hidden' name='p7' value='"+E(u)+"' />",B+="<input type='hidden' name='p8' value='"+E(p)+"' />",B+="<input type='hidden' name='p9' value='"+E(f)+"' />",B+="<input type='hidden' name='p10' value='"+E(g)+"' />",w.html(B),0==(C=$("#xd_frame")).length&&(C=$('<iframe id="xd_frame" name="xd_frame" style="display:none;"></iframe>'),$("body").append(C)),w.submit(),XD.receiveMessage((function(e){for(var t=$.parseXML($.parseJSON(e.data).response),n={},i=$(t).find("objExecuteResult").children().length,a=0;a<i;a++){var o=$(t).find("objExecuteResult").children().eq(a);n[o.get(0).nodeName]=o.text()}"true"==n.blnSuccess?h&&("INITTRANS"==s&&(e=BMS.Misc.fnGVal({key:"UID",data:unescape(n.strData)}),BMS.Storage.set({name:"secCanTransCookie",value:e,storage:"C"})),h(v?n:n.strData)):(y||(n.strException,n.intExceptionEx,BMS.Misc.fnBusy(!1),BMS.Misc.fnGlobalErr({eMess:n.strException,eCode:n.intExceptionEx,eCmd:M,eRFn:"function: BMS.Misc.fnDoSecureTrans"})),m&&m(S?n:n.strException))}),b))}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnDoSecureTrans",fnParams:t,err:e})}},BMS.Misc.fnWsData=function(i){try{var e=null!=i.AppC&&""!=i.AppC?i.AppC:global.strAppCode,t=null!=i.venCode&&""!=i.venCode?i.venCode:"",n=null!=i.transId&&""!=i.transId?i.transId:0,a=null!=i.cmd&&""!=i.cmd?i.cmd:"",o=null!=i.eventType&&""!=i.eventType?i.eventType:"",s=null!=i.evtCode&&""!=i.evtCode?i.evtCode:"",r=null!=i.srCode&&""!=i.srCode?i.srCode:"",l=null!=i.sessDet&&""!=i.sessDet?i.sessDet:"",c=null!=i.sessId&&""!=i.sessId?i.sessId:"",d=null!=i.email&&""!=i.email?i.email:"",u=null!=i.lsid&&""!=i.lsid?i.lsid:"",p=null!=i.compCode&&""!=i.compCode?i.compCode:"",f=null!=i.producer&&""!=i.producer?i.producer:"",g=null!=i.data&&""!=i.data?i.data:"",h=null!=i.retType&&""!=i.retType?i.retType:"js",m=!(null==i.fnCC||!i.fnCC)&&i.fnCC,v=!(null==i.fnEC||!i.fnEC)&&i.fnEC,S=null!=i.blnSupp&&i.blnSupp,y="strCommand: "+a+", strAppCode: "+e+", strVenueCode:"+t+", lngTransId"+n+", strEvent"+o+", strEventCodes: "+s+", strSRCode: "+r+", strSessDet:"+l+", lngSessId:"+c+", strEmail:"+d+", strLSID:"+u+", strCompCode:"+p+", strProducer: "+f+", strData: "+g+", strRetType: "+h;$("#glErrDiv").is(":visible")&&$("#glErrDiv").hide(),BMS.Misc.fnAjax({data:{strApp:e,strVC:t,lngTrans:n,strCmd:a,strET:o,strEC:s,strSRC:r,strSD:l,strSID:c,strLE:d,strLSID:u,strComp:p,strProducer:f,strData:unescape(g),strCase:h},headers:i.headers||"",dataType:"xml",error:function(e,t,n){BMS.Misc.fnErr({fnName:"wsData",fnParams:i})},success:function(e){var t=escape($(e).find("json"==h?"strGetDataForJSONResult":"strGetDataForJavaScriptResult").eq(0).text());""!=t?m&&m(t):S||(v?v(t):(BMS.Misc.fnBusy(!1),e.split("-"),BMS.Misc.fnGlobalErr({eMess:"There seems to be a connectivity problem with the cinema. Please try after some time.",eCmd:y,eRFn:"function: BMS.Misc.fnWsData"})))},type:"post",url:"/serv/wsData.bms"})}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnWsData",fnParams:i,err:e})}},BMS.Misc.fnWsSecureTrans=function(t){try{var e=null!=t.AppC&&""!=t.AppC?t.AppC:global.strAppCode,n=null!=t.venCode&&""!=t.venCode?t.venCode:"",i=null!=t.transId&&""!=t.transId?t.transId:0,a=null!=t.cmd&&""!=t.cmd?t.cmd:"",o=null!=t.p1&&""!=t.p1?t.p1:"",s=null!=t.p2&&""!=t.p2?t.p2:"",r=null!=t.p3&&""!=t.p3?t.p3:"",l=null!=t.p4&&""!=t.p4?t.p4:"",c=null!=t.p5&&""!=t.p5?t.p5:"",d=null!=t.p6&&""!=t.p6?t.p6:"",u=null!=t.p7&&""!=t.p7?t.p7:"",p=null!=t.p8&&""!=t.p8?t.p8:"",f=null!=t.p9&&""!=t.p9?t.p9:"",g=null!=t.p10&&""!=t.p10?t.p10:"",h=null!=t.fnCC&&t.fnCC,m=null!=t.fnEC&&t.fnEC,v=(null!=t.ccObj&&t.ccObj,null!=t.ecObj&&t.ecObj,null!=t.blnSupp&&t.blnSupp),S="strCommand: "+a+", lngTransId:"+i+", strParam1: "+o+", strParam2: "+s+", strParam3: "+r+", strParam4:"+l+", strParam5:"+c+", strParam6:"+d+", strParam7:"+u+", strParam8:"+p+", strParam9: "+f+", strParam10: "+g+", blnSuppress: "+v;BMS.Misc.fnAjax({data:{a:e,v:n,t:i,c:a,p1:o,p2:s,p3:r,p4:l,p5:c,p6:d,p7:u,p8:p,p9:f,p10:g},dataType:"xml",error:function(e,t,n){v||(BMS.Misc.fnBusy(!1),BMS.Misc.fnGlobalErr({eMess:"There is a problem with the internet connection. Please try after some time.",eCode:e.status,eCmd:S,eRFn:"function: BMS.Misc.fnDoTrans"})),void 0!==m&&"function"==typeof m&&m(n)},success:function(e){for(var t={},n=$(e).find("objExecuteResult").children().length,i=0;i<n;i++){var a=$(e).find("objExecuteResult").children().eq(i);t[a.get(0).nodeName]=a.text()}"true"==t.blnSuccess?h(t):m&&m(t)},suppress:v,type:"POST",url:"/serv/wsSecureTrans.bms"})}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnWsSecureTrans",fnParams:t,err:e})}},BMS.Misc.fnDoBooking=function(t,e){try{var n=null!=e.fnCC&&e.fnCC,i=null!=e.fnEC&&e.fnEC,a=(null!=t.blnSupp&&t.blnSupp,location.origin+"/serv/doBooking.bms");BMS.Misc.fnAjax({data:{params:t},dataType:"json",type:"post",url:a,success:function(e){void 0!==e.message&&i?i():n?n(e):BMS.Misc.fnGlobalErr({})},error:function(e,t,n){i()}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnDoBooking",fnParams:t,err:e})}},BMS.Misc.fnGVal=function(e){try{for(var t=e.key,n=e.data,i=null!=e.splitA&&""!=e.splitA?e.splitA:"|",a=null!=e.splitB&&""!=e.splitB?e.splitB:"=",o=null!=e.defVal&&""!=e.defVal?e.defVal:"",s=n.split(i),r="",l=0;l<s.length;l++){var c=s[l].split(a);if(c[0].toUpperCase()==t.toUpperCase()){r=c[1];break}}return""!=r?r:o}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnGVal",fnParams:arguments,err:e})}},BMS.Misc.fnGPipeDelimitedString=function(t){try{var e,n=[];for(e in t)t.hasOwnProperty(e)&&n.push(e+"="+t[e]);return n=0==n.length?"":"|"+n.join("|")+"|"}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnGPipeDelimitedString",fnParams:t,err:e})}},BMS.Misc.fnUrlName=function(t){try{return t=(t=(t=t.replace(/[^a-zA-Z 0-9]+/g,"")).replace(new RegExp(" ","gi"),"-")).replace(/-+/gi,"-")}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnUrlName",fnParams:t,err:e})}},BMS.Misc.fnGATracker=function(e){try{var t=location.pathname.replace(/\//g,""),n=(""==t?"home":t)+(""!=e.location?"-"+e.location:"")+(""!=e.action?"-"+e.action:"");"undefined"!=typeof ga&&ga("send","pageview",n),"undefined"!=typeof wzrk_pushSiteEvent&&wzrk_pushSiteEvent(n)}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnGATracker",fnParams:arguments,err:e})}},BMS.Misc.fnBrowsVer=function(){try{var e;return rv=-1,"Microsoft Internet Explorer"==navigator.appName?(e=navigator.userAgent,null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(e)&&(rv=parseFloat(RegExp.$1))):rv=999,rv}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnBrowsVer",err:e})}},BMS.Misc.fnCapitalName=function(e){try{for(var t=$.trim(e).split(" "),n="",i=0;i<t.length;i++)""!=t[i]&&(n+=t[i].substr(0,1).toUpperCase()+t[i].substr(1,t[i].length)+" ");return n}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnCapitalName",err:e})}},BMS.Misc.fnGetUserImage=function(e,n){try{var t,i=e.SOCIALID,a=global.strContentUrl+"/webin/movies/superstar/profile_avatar.png";BMS.Storage.isset({name:"ld"})&&""!=BMS.Storage.get({name:"PROFILEIMAGEURL"})?(t=BMS.Storage.get({name:"PROFILEIMAGEURL"}),n(t.url,t.canDelete)):BMS.Misc.fnDoSecureTrans({AppC:global.strAppCode,cmd:"GETPROFILE",p1:"GETPROFILE",p2:BMS.Storage.get({name:"ld",key:"MEMBERID"}),p3:BMS.Storage.get({name:"ld",key:"LSID"}),blnSupp:!0,fnCC:function(e){var t=BMS.Misc.fnGVal({key:"PROFILEIMAGEURL",data:e}),e=BMS.Misc.fnGetCloudiaryURL(t);""!==t?(BMS.Storage.set({name:"PROFILEIMAGEURL",value:t,storage:"C"}),n(e.url,e.canDelete)):"FB"==i?BMS.Misc.getFBProfileImage(n):"PLUS"==i?BMS.Misc.getPlusProfileImage(n):n(a)},fnEC:function(){n(a)}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnGetUserImage",err:e})}},BMS.Misc.getFBProfileImage=function(e){try{var t="https://graph.facebook.com/"+BMS.Misc.fnGVal({key:"FBID",data:BMS.Storage.get({name:"ld"})})+"/picture?width=100&height=100";e&&e(t)}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.getFBProfileImage",err:e})}},BMS.Misc.getPlusProfileImage=function(e){try{var t=global.strContentUrl+"/webin/movies/superstar/profile_avatar.png";""==BMS.Storage.isset({name:"PLUSIMAGEURL"})?e(t):e(BMS.Storage.get({name:"PLUSIMAGEURL"}))}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.getPlusProfileImage",err:e})}},BMS.Misc.fnGetCloudiaryURL=function(e){try{return""==e?{url:"//in.bmscdn.com/webin/movies/superstar/profile_avatar.png",canDelete:!1}:{url:("in.bookmyshow.com"==location.hostname?"https://res.cloudinary.com/bookmyshow/image/upload/":(location.hostname,"https://res.cloudinary.com/sit-bookmyshow/image/upload/"))+e,canDelete:!0}}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnGetCloudiaryURL",err:e})}},BMS.Misc.fnGetSocialKeys=function(){try{if(""!==BMS.Storage.get({name:"APPDETAILS_ALL",storage:"C"})){var e=$.parseJSON(BMS.Storage.get({name:"APPDETAILS_ALL",storage:"C"}));return global.fbAppId=BMS.Misc.fnGVal({key:"FB_APPID",data:e.FB}),global.FBPriviledges=BMS.Misc.fnGVal({key:"FB_PRIVILEGES",data:e.FB}),global.plusAppId=BMS.Misc.fnGVal({key:"GOOGLELOGIN_CLIENTID",data:e.PLUS}),global.plusPrivileges=BMS.Misc.fnGVal({key:"GOOGLELOGIN_PRIVILEGES",data:e.PLUS}).split("&nbsp;").join(" "),void("undefined"!=typeof FB?FB.init({appId:global.fbAppId,status:!1,xfbml:!0,version:"v2.9"}):$.getScript(socialJS,(function(){FB.init({appId:global.fbAppId,status:!1,xfbml:!0,version:"v2.9"})})))}BMS.Misc.fnAjax({url:global.getDataUrl,data:{cmd:"APPDETAILS",app:"ALL"},type:"GET",dataType:"json",success:function(e){BMS.Storage.set({name:"APPDETAILS_ALL",value:JSON.stringify(e),storage:"C",sess:!1,expires:new Date((new Date).getTime()+9e5).toGMTString()}),global.fbAppId=BMS.Misc.fnGVal({key:"FB_APPID",data:e.FB}),global.FBPriviledges=BMS.Misc.fnGVal({key:"FB_PRIVILEGES",data:e.FB}),global.plusAppId=BMS.Misc.fnGVal({key:"GOOGLELOGIN_CLIENTID",data:e.PLUS}),global.plusPrivileges=BMS.Misc.fnGVal({key:"GOOGLELOGIN_PRIVILEGES",data:e.PLUS}).split("&nbsp;").join(" "),"undefined"!=typeof FB?FB.init({appId:global.fbAppId,status:!1,xfbml:!0,version:"v2.9"}):$.getScript(socialJS,(function(){FB.init({appId:global.fbAppId,status:!1,xfbml:!0,version:"v2.9"})}))},error:function(e){}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnGetSocialKeys",err:e})}},BMS.Misc.modal=function(t,n){try{$(document).scrollTop(),$(".modal .__overlay"),$(".main-body-wrapper"),$(".select-overlay");n?(BMS.Modal.fnShowModal(t),"sessionTime"==t&&"undefined"!=typeof pay&&void 0!==pay.objTransOSData.SessionOrder&&0!=pay.objTransOSData.SessionOrder.length&&BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"timed_out_payment_8",venue_id:pay.objTransOSData.SessionOrder[0].Venue_strCode,venue_name:pay.objTransOSData.SessionOrder[0].Venue_strName})):BMS.Modal.fnHideModal()}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.modal",fnParams:t+" "+n,err:e})}},BMS.Misc.fnShowSuccessModal=function(t,n){try{$("#popover-rating-msg").html(n),BMS.Modal.fnShowModal(t),setTimeout((function(){BMS.Modal.fnHideModal()}),2500)}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnShowSuccessModal",fnParams:t+""+n,err:e})}},BMS.Misc.fnBtnProcessing=function(t,n){try{n?$("#"+t).addClass("_processing"):$("#"+t).removeClass("_processing")}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnBtnProcessing",fnParams:t+" "+n,err:e})}},BMS.Misc.fnBtnLoading=function(t,n,e){try{n?(strloadHtml="<div class='loading-div'>\t\t\t\t\t\t\t<h2 class='dot one'></h2>\t\t\t\t\t\t\t<h2 class='dot two'></h2>\t\t\t\t\t\t\t<h2 class='dot three'></h2>\t\t\t\t\t\t\t</div>",$("#"+t+" .loading").text(""),$("#"+t).append(strloadHtml),$("#"+t).addClass("loading-state")):($(".loading-div").remove(),$("#"+t+" .loading").text(e),$("#"+t).removeClass("loading-state"))}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnBtnLoading",fnParams:t+" "+n,err:e})}},BMS.Misc.fnDoFloat=function(){try{if(void 0===BMS.Modal.currentModal||null==BMS.Modal.currentModal)return void clearTimeout(BMS.Misc.fnDoFloat.objTimer);if(!global.blnIsTouchScreen){var e=parseInt(BMS.Modal.currentModal.css("padding-top").replace("px",""))+parseInt(BMS.Modal.currentModal.css("margin-top").replace("px",""))+parseInt(BMS.Modal.currentModal.css("border-top-width").replace("px","")),t=parseInt(BMS.Modal.currentModal.css("padding-left").replace("px",""))+parseInt(BMS.Modal.currentModal.css("margin-left").replace("px",""))+parseInt(BMS.Modal.currentModal.css("border-left-width").replace("px","")),n={top:($(window).height()-BMS.Modal.currentModal.height())/2-e,left:($(window).width()-BMS.Modal.currentModal.width())/2-t};return BMS.Modal.currentModal.css({top:n.top}),clearTimeout(BMS.Misc.fnDoFloat.objTimer),BMS.Misc.fnDoFloat.objTimer=setTimeout((function(){}),5e4),BMS.Modal.currentModal}var i=BMS.Modal.currentModal.height(),a=$(window).height(),o=0,o=i<a?parseInt((a-i)/2)+window.pageYOffset:10+window.pageYOffset;BMS.Modal.currentModal.css({top:o})}catch(e){void 0}},BMS.Misc.showCommitTransErrorModal=function(t){try{$(".errormsg").find("p.msg").html("<span>Sorry!</span> Its taking time to display the status of your transaction."),$("#globalErrMsg").html("Please wait for sms/email or check in Profile > Your Orders after sometime").show();var e=$(".errormsg").find("p.errbtns a");e.html("OK"),e.attr("href","javascript:;").click((function(e){BMS.Modal.fnHideModal(),window.location.href="/"})),BMS.Misc.modal("error-div",!0)}catch(e){BMS.Misc.fnDispErr({fnName:"BMS.Misc.showCommitTransErrorModal",fnParams:t,err:e})}},BMS.Misc.fnGlobalErr=function(t){try{var e=null!=t.eMess&&""!=t.eMess?t.eMess:"Whoa there! Something went wrong with our script. Please refresh the page and try again",n=null!=t.eCode&&""!=t.eCode?t.eCode:"GEN";null!=t.eCmd&&""!=t.eCmd&&t.eCmd,null!=t.eRFn&&""!=t.eRFn&&t.eRFn,null!=t.blnSucc&&""!=t.blnSucc&&t.blnSucc;"-21059"==n&&(blnActiveTrans="True"),""!=n?$("#globalErrMsg").html(e).show():$("#globalErrMsg").html(t).hide(),$("#dActualErrorMsg").html(JSON.stringify(t)),BMS.Misc.modal("error-div",!0)}catch(e){BMS.Misc.fnDispErr({fnName:"BMS.Misc.fnGlobalErr",fnParams:t,err:e})}},BMS.Misc.fnGlobalSportsErr=function(t){try{var e=null!=t.eMess&&""!=t.eMess?t.eMess:"Whoa there! Something went wrong with our script. Please refresh the page and try again",n=null!=t.eCode&&""!=t.eCode?t.eCode:"GEN";null!=t.eCmd&&""!=t.eCmd&&t.eCmd,null!=t.eRFn&&""!=t.eRFn&&t.eRFn,null!=t.blnSucc&&""!=t.blnSucc&&t.blnSucc;""!=n?$("#globalSportsErrMsg").html(e).show():$("#globalSportsErrMsg").html(t).hide(),$("#dActualSportsErrorMsg").html(JSON.stringify(t)),BMS.Misc.modal("error-sports-div",!0)}catch(e){BMS.Misc.fnDispErr({fnName:"BMS.Misc.fnGlobalSportsErr",fnParams:t,err:e})}},BMS.Misc.fnDispErr=function(e){return void 0,!1},BMS.Misc.fnErr=function(e){var t=null==e.supp||e.supp;null!=e.fnParams&&""!=e.fnParams&&e.fnParams;void 0,$("#globalErrMsg").html("Error : "+e.fnName+" Error is "+e.err),t||BMS.Modal.currentModal||BMS.Misc.modal("error-div",!0)},BMS.Misc.fnSCusErrDisplay=function(t,n,i){try{$("#"+t).clearQueue();var e="";"e"==i?(e+='<span class="__text">'+n+"</span>",$("#"+t).removeClass("_success").addClass("_error").html(e).show()):"w"==i?(e+='<span class="__icon"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">;<use xlink:href="/icons/common-icons.svg#icon-warning"></use></svg></span>',e+='<span class="__text">'+n+"</span>",$("#"+t).removeClass("_error").addClass("_warning").html(e).animate({height:"toggle",opacity:"show"},{queue:!1},"slow").delay(5e3).animate({height:"toggle",opacity:"hide"},"fast",(function(e){$(this).hide()}))):"w-nt"==i?(e+='<span class="__icon"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">;<use xlink:href="/icons/common-icons.svg#icon-warning"></use></svg></span>',e+='<span class="__text">'+n+"</span>",$("#"+t).removeClass("_error").addClass("_warning").html(e).show()):"i"==i?(e+='<span class="__icon"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">;<use xlink:href="/icons/common-icons.svg#icon-info"></use></svg></span>',e+='<span class="__text">'+n+"</span>",$("#"+t).removeClass("_error").addClass("_info").html(e).animate({height:"toggle",opacity:"show"},{queue:!1},"slow").delay(5e3).animate({height:"toggle",opacity:"hide"},"fast",(function(e){$(this).hide()}))):"s"==i&&(e+='<span class="__icon"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">;<use xlink:href="/icons/common-icons.svg#icon-success"></use></svg></span>',e+='<span class="__text">'+n+"</span>",$("#"+t).removeClass("_error").addClass("_success").html(e).show())}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnSCusErrDisplay",fnParams:t+", "+n+", "+i,err:e})}},BMS.Misc.fnChangeUrl=function(t){try{var e=void 0!==t.URL?t.URL:"",n=void 0!==t.event?t.event:"",i=void 0!==t.state?t.state:null;window.history.pushState(i,null,e),""!=n&&n.preventDefault()}catch(e){BMS.Misc.fnErr({fnName:"misc.js - BMS.Misc.fnChangeUrl",fnParams:t,err:e})}},BMS.Misc.fnBusy=function(e,t,n){try{var i,a;e?t?(i='<div class="qb-loader-wrapper">',i+=n||'<div class="qb-loader">\t\t\t\t\t<span class="reel __roll1">\t\t\t\t\t\t<span class="mini-circle"></span>\t\t\t\t\t\t<span class="mini-circle __center"></span>\t\t\t\t\t\t<span class="mini-circle __left"></span>\t\t\t\t\t\t<span class="mini-circle __right"></span>\t\t\t\t\t\t<span class="mini-circle __bottom"></span>\t\t\t\t\t</span></div>',i+="</div>",t.addClass("_add-movie-spinner"),setTimeout((function(){t.prepend(i)}),200)):(handlePopups.freezeDocument(),$("#dBusy").show(),$(".__busy-div-overlay").show()):t?((a=t.find(".qb-loader-wrapper")).addClass("_fade-out"),setTimeout((function(){a.remove(),t.removeClass("_add-movie-spinner")}),300)):(handlePopups.releaseDocument(),$("#dBusy").hide(),$(".__busy-div-overlay").hide())}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnBusy",err:e})}};var adsArr=[];BMS.Misc.initializeAd=function(e,t,n){try{"undefined"!=typeof googletag&&void 0===adsArr[n]&&googletag.cmd.push((function(){adsArr[n]=googletag.defineSlot(e,t,n).addService(googletag.pubads()),googletag.pubads().collapseEmptyDivs(!0),googletag.enableServices()}))}catch(e){BMS.Misc.fnErr({fnName:"initializeAd",err:e})}},BMS.Misc.refreshAd=function(e){try{"undefined"!=typeof googletag&&void 0!==e&&googletag.cmd.push((function(){googletag.pubads().refresh([e])}))}catch(e){BMS.Misc.fnErr({fnName:"refreshAd",err:e})}},BMS.Misc.fnCover=function(e){try{void 0}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnCover",err:e})}},BMS.Misc.fnGoTo=function(e){try{setTimeout("window.location.href='"+e+"'",0)}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnGoTo",fnParams:arguments,err:e})}},BMS.Misc.IsValidDate=function(t,n,i){try{var e=new Date(n+"/"+t+"/"+i);return e.getDate()!=t?!1:e.getMonth()==n-1&&e.getFullYear()==i}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.IsValidDate",fnParams:t+" "+n+" "+i,err:e})}},BMS.Misc.fnGQS=function(e,t){try{for(var t=null!=t?t:"",n=window.location.search.substring(1).split("&"),i=0;i<n.length;i++){var a=n[i].split("=");if(a[0]==e)return a[1]}return t}catch(e){BMS.Misc.fnErr({fnName:"misc.js - BMS.Misc.fnGQS",fnParams:arguments,err:e})}},BMS.Misc.fnPushEventDataToAnalytics=function(e,t,n,i){try{var a=$.extend(!0,{audience:BMS.Storage.get({name:"cohorts",storage:"C"})},n),o=($.extend(!0,{},n),$.extend(!0,{audience:BMS.Storage.get({name:"cohorts",storage:"C"})},i));$.extend(!0,{},n);-1!=$.inArray("WR",e)&&"undefined"!=typeof clevertap&&void 0!==clevertap.event&&clevertap.event.push(t,a),(-1!=$.inArray("GA",e)||-1!=$.inArray("GTM",e)&&"undefined"!=typeof dataLayer)&&dataLayer.push(o),-1!=$.inArray("CC",e)&&void 0}catch(e){BMS.Misc.fnErr({fnName:"misc.js - BMS.Misc.fnPushEventDataToAnalytics",fnParams:arguments,err:e})}},BMS.Misc.fnPushNotificationsFromClevertap=function(e,t,n,i,a){try{e=e||"Get Personalized Updates",t=t||"Get notified when we find something interesting that you'll love!",n=n||"OK",i=i||"Not Now",a=a||"#c02c3a","undefined"!=typeof clevertap&&void 0!==clevertap.notifications&&clevertap.notifications.push(e,t,n,i,a)}catch(e){void 0}},Array.prototype.indexOf||(Array.prototype.indexOf=function(e){return $.inArray(e,this)});var handlePopups={scrollPos:null,initialScrollPos:null,freezeDocument:function(e){this.scrollPos=$(document).scrollTop(),this.scrollPos<=0?this.initialScrollPos=Math.abs(parseInt($("body").css("margin-top"))):this.initialScrollPos=this.scrollPos,e&&($showCaseCarousel=$("#showcase-primary .showcase-carousel"),$showCaseCarousel.hasClass("slick-initialized")&&$showCaseCarousel.slick("slickPause"),pausePrimaryShowcase=!0),$("body").css("margin-top",-this.initialScrollPos),$("body").addClass("_fixed")},releaseDocument:function(){$("body").removeClass("_fixed"),$("body").css("margin-top",0),$(document).scrollTop(this.initialScrollPos),$("#showcase-primary .showcase-carousel").slick("slickPlay")}};BMS.Misc.fnPopup=function(e){try{var t=e.url,n=(null!=e.modal&&""!=e.modal&&e.modal,null!=e.height&&""!=e.height?e.height:552),i="width="+(null!=e.width&&""!=e.width?e.width:800)+"px, height="+n+"px, center=yes, status=no, toolbar=no, location=no, menubar=no, scrollbars=yes, resizable=no, position=absolute, left= 200px; top=135px;";return window.open(t,"_blank",i)}catch(e){BMS.Misc.fnErr({fnName:"misc.js - BMS.Misc.fnPopup",fnParams:arguments,err:e})}},BMS.Misc.fnSvgAsset=function(e){try{var t=e.split("/"),n=t[2],i="";return""==(i=global.svgManifest&&global.svgManifest.hasOwnProperty(n)?"/"+t[1]+"/"+global.svgManifest[n]:i)?e:i}catch(e){BMS.Misc.fnErr({fnName:"misc.js - BMS.Misc.fnSvgAsset",fnParams:arguments,err:e})}},BMS.Misc.Router=(function(){var o={},s={},a=!0,r="";return window.addEventListener("hashchange",(function(e){var t,n,i;a?(void 0!==(n=(t=(void 0!==e.newURL?e.newURL:window.location.hash).split("#"))[1])&&(n=n.substr(1)),void 0!==(e=(i=(void 0!==e.oldURL?e.oldURL:r).split("#"))[1])&&(e=e.substr(1)),i.length<t.length?o.hasOwnProperty(n)&&o[n].forEach((function(e){e.callback.call()})):i.length===t.length?(s.hasOwnProperty(e)&&s[e].forEach((function(e){e.callback.call()})),o.hasOwnProperty(n)&&o[n].forEach((function(e){e.callback.call()}))):s.hasOwnProperty(e)&&s[e].forEach((function(e){e.callback.call()})),r=window.location.hash):a=!0})),{registerRoute:function(e,t,n,i){n&&"function"==typeof n&&(o.hasOwnProperty(e)||(o[e]=[]),o[e].push({key:t,callback:n})),i&&"function"==typeof i&&(s.hasOwnProperty(e)||(s[e]=[]),s[e].push({key:t,callback:i}))},unregisterRoute:function(e,n){var i,a;!$.isEmptyObject(o)&&o.hasOwnProperty(e)&&(i=null,o[e].forEach((function(e,t){if(e.key===n)return i=t,!1})),null!==i&&o[e].splice(i,1)),!$.isEmptyObject(s)&&s.hasOwnProperty(e)&&(a=null,s[e].forEach((function(e,t){if(e.key===n)return a=t,!1})),null!==a&&s[e].splice(a,1))},triggerRoute:function(e,t){!1===(a=!!(t=void 0===t?!0:t))&&setTimeout((function(){a=!0}),100),""===e||null==e?window.history.back():window.location.hash="!"+e}}})(),BMS.Misc.fnToMoneyFormat=function(t){try{x=(t+="").split("."),x1=x[0],x2=1<x.length?"."+x[1]:"";for(var e=/(\d+)(\d{3})/,n=0,i=String(x1).length,a=parseInt(i/2-1);e.test(x1)&&(0<n?x1=x1.replace(e,"$1,$2"):(x1=x1.replace(e,"$1,$2"),e=/(\d+)(\d{2})/),n++,0!=--a););return x1+x2}catch(e){return t}},BMS.Misc.fnIsUserSuperStar=function(){return BMS.Storage.get({name:"ld",key:"LOYALTYISSUBSCRIBED"})||"N"},BMS.Misc.fnIsUserTargetted=function(){return BMS.Storage.get({name:"ld",key:"LOYALTYISTARGETTED"})||"N"},$(document).ready((function(){var e;$(window).resize((function(){BMS.Modal.currentModal&&BMS.Misc.fnDoFloat()})),$("#app-install-wrap .__cancel-icon").click((function(){$("#app-install-wrap").slideUp(300),BMS.Storage.set({name:"appInstallWrapper",value:"set",storage:"C",sess:!0})})),0<$(".social-share-links").length&&($("[data-share-button]").click((function(){var e=$(".social-share-links");e.is(":visible")?e.slideUp():e.slideDown()})),e=!1,"undefined"!=typeof isTouchScreen?e=isTouchScreen:void 0!==global.blnIsTouchScreen&&(e=global.blnIsTouchScreen),e?$(".social-share-links").socialSharer({buttons:["facebook","twitter","whatsapp"],config:{showCount:!1}}):$(".social-share-links").socialSharer({buttons:["facebook","twitter"],config:{showCount:!1}})),$("[data-hidden-html-target]").each((function(){var e=$(this),t=e.attr("id"),n=e.attr("data-hidden-html-target"),e=$("#"+t).html();$(n).html($(n).html()+e),$("#"+t).remove()}))})),BMS.Misc.fnSendGAandRedirect=function(e,t){BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},e),BMS.Misc.fnGoTo(t)},BMS.Misc.fnTriggerQuickbook=function(){try{""!=window.location.hash&&window.history.pushState("",window.document.title,window.location.pathname),BMS.Misc.Router.triggerRoute("quickbook",!0),$("#quickbook-wrapper").fadeIn()}catch(e){void 0}},BMS.Misc.fnGetLang=function(e){try{switch(e){case"eng":strLan="English";break;case"hin":strLan="Hindi";break;case"mar":strLan="Marathi";break;case"guj":strLan="Gujarati";break;case"tam":strLan="Tamil";break;case"tel":strLan="Telugu";break;case"kan":strLan="Kannada";break;case"mal":strLan="Malayalam";break;case"pun":strLan="Punjabi";break;default:strLan=""}return strLan}catch(e){void 0}},BMS.Misc.fnGetEventProductType=function(e){try{if(null==e)return"";var t="";switch(e){case"MT":t="movies";break;case"CT":case"ET":t="events";break;case"PL":t="plays";break;case"SP":t="sports";break;default:t="movies"}return t}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnGetEventProductType",fnParams:"",err:e})}},BMS.Misc.fnGetPriceRange=function(t){try{var e=_.find([{min:0,max:500},{min:501,max:1e3},{min:1001,max:1500},{min:1501,max:2e3},{min:2001,max:4e3},{min:4001,max:1e4}],(function(e){if(t>=e.min&&t<=e.max)return e}));return e=void 0===e?"10000+":e.min+"-"+e.max}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnGetPriceRange",err:e})}},BMS.Misc.fnCallOtpApi=function(t,e){try{var n=null!=e.fnCC&&e.fnCC,i=null!=e.fnEC&&e.fnEC,a=(null!=t.blnSupp&&t.blnSupp,location.origin+"/serv/otpLogin.bms");BMS.Misc.fnAjax({data:{params:t},dataType:"json",type:"post",url:a,success:function(e){void 0!==e.statusCode&&200==e.statusCode?n(e):void 0===e.statusCode||""==e.statusCode?i(e={statusCode:"api-down",message:"Something not right here. Please try again after a while."}):i(e)},error:function(e,t,n){response={statusCode:"api-down",message:"Something not right here. Please try again after a while."},i(response)}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnCallOtpApi",fnParams:t,err:e})}},BMS.Misc.loadScript=function(e,t,n,i,a){try{if(e.getElementById(n))return;var o=e.getElementsByTagName(t)[0],s=e.createElement(t);s.id=n,s.src=i,o.parentNode.insertBefore(s,o),s.onload=a}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.loadScript",err:e})}},BMS.Misc.serveAd=function(e,t,n,i,a){try{if(!window.BMSSDK)return;window.BMSSDK.cmd.push((function(){window.BMSSDK.serveAd(e,t,n,i,a)}))}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.serveAd",err:e})}},BMS.Misc.closeWebViewHandler=function(){try{if(""!=BMS.Storage.get({name:"platform"})){var e=BMS.Storage.get({name:"platform"});JSON.parse(decodeURIComponent(e));if(window.AppInterface)return void window.AppInterface.callBack(JSON.stringify({action:"closeWebView"}));if(BMS.Misc.Helpers.getIn(window,["webkit","messageHandlers","AppInterface","postMessage"]))return void window.webkit.messageHandlers.AppInterface.postMessage(JSON.stringify({action:"closeWebView"}));if(BMS.Misc.Helpers.getIn(window,["webkit","messageHandlers","didReceiveCallback","postMessage"]))return void window.webkit.messageHandlers.didReceiveCallback.postMessage({redirectionUrl:homePageURL});if(window.Android)return void window.Android.callBack(JSON.stringify({url:"goBack"}));if(window.BMS_ANDROID)return void BMS_ANDROID.handleWebViewFlowDialog("goBack")}}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.closeWebViewHandler",err:e})}},BMS.Misc.showHeaderForWebView=function(){try{var e;""!=BMS.Storage.get({name:"platform"})&&(e=BMS.Storage.get({name:"platform"}),e=JSON.parse(decodeURIComponent(e)),window.AppInterface&&window.AppInterface.callBack(JSON.stringify({action:"setConfig",config:{showHeader:!0}})),BMS.Misc.Helpers.getIn(window,["webkit","messageHandlers","AppInterface","postMessage"])&&webkit.messageHandlers.AppInterface.postMessage(JSON.stringify({action:"setConfig",config:{showHeader:!0}})))}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.showHeaderForWebView",err:e})}},BMS.Misc.redirectToHomepageNativeHandler=function(){try{var e=window.location.origin||"/";BMS.Misc.Helpers.getIn(window,["webkit","messageHandlers","didReceiveCallback","postMessage"])?window.webkit.messageHandlers.didReceiveCallback.postMessage({redirectionUrl:e}):void 0!==window.Android?window.Android.callBack(JSON.stringify({url:e})):window.location.href=e}catch(e){BMS.Misc.redirectToHomepageNativeHandler({fnName:"BMS.Misc.redirectToHomepageNativeHandler",err:e})}},(function(r){r.fn.modal=function(){BMS.Modal.currentModal=null;var n=r(".modal .__overlay"),i=r(".main-body-wrapper"),a=(r(".modal .popover"),"_animateTop"),o="_make-blur",s=r(".select-overlay");r("[data-modal]").tap((function(){var e=r(this).attr("data-modal");BMS.Modal.fnShowModal(e)})),r(".__dismiss").tap((function(){BMS.Modal.fnHideModal()})),n.tap((function(){r.inArray(r(BMS.Modal.currentModal).attr("id")),-1<["qty-sel","lottery-form","oneClickWalletPop","coupon-confirmation","skipLinkPopup","linkSigninPopup","superstarSigninPopup"]&&BMS.Modal.fnHideModal()})),BMS.Modal.fnShowModal=function(e){var t;r(document).scrollTop();null!=BMS.Modal.currentModal&&(BMS.Modal.storedModal=BMS.Modal.currentModal,BMS.Modal.currentModal.removeClass(a),BMS.Modal.currentModal.hide(),--handlePopups.activeModals),s.is(":visible")&&s.click(),"signinPopup"==e&&(BMS.SignIn.fnGoogleSDKinit(),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event_type:"page_view",pageurl:window.location.href,tvc_userid:BMS.Storage.get({name:"ld",key:"MEMBERID"}),user_mode:"guest",region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",source:"",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),experiment:"",product:"otp_login",pagetype:"login",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web"})),"signupPopup"==e&&(BMS.SignIn.fnGoogleSDKinit(),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event_type:"page_view",pageurl:window.location.href,tvc_userid:BMS.Storage.get({name:"ld",key:"MEMBERID"}),user_mode:"guest",region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",source:"",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),experiment:"",product:"otp_login",pagetype:"signup",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web"})),BMS.Modal.currentModal=r("#"+e),n.css("opacity",0).show(),n.transition({opacity:1},200).show(),i.addClass(o),handlePopups.freezeDocument(!0),BMS.Misc.fnDoFloat(),setTimeout("BMS.Misc.fnDoFloat()",50),"dRatConf"!=e&&"signupPopup"!=e&&"rblCallout"!=e&&r(BMS.Modal.currentModal).find("input").val(""),BMS.Modal.currentModal.show(),"locationPopup"==e&&global.blnIsTouchScreen&&(t=r(window).height()-(r(".location-header","#locationPopup").outerHeight()+20),r(".location-container","#locationPopup").css({"max-height":t}),BMS.Misc.fnDoFloat()),$focusElem=r(BMS.Modal.currentModal).find('input[type=text],input[type=email],input[type=number],textarea,select,input[name^="otp"]').filter(":visible:first"),""!=$focusElem&&setTimeout((function(){"signinPopup"==e&&global.blnIsTouchScreen||"locationPopup"==e&&global.blnIsTouchScreen||$focusElem.focus()}),200)},BMS.Modal.fnHideModal=function(){window.closeModal&&delete window.closeModal;var e=window.location.href.split("/")[4];"plays"!=e&&"plays_v1"!=e||(r(".stars").find("use").css({fill:"#e0e0e0"}),r(".rate-o-meter").text("0.0"));e=BMS.Storage.get({name:"lngTransId"});if(!_.isEmpty(r(".js-merc-link").attr("data-merc")))if(_.isEmpty(e))r(".js-merc-link").attr("data-merc",!1),void 0!==BMS.Modal.currentModal&&null!=BMS.Modal.currentModal&&(BMS.Misc.fnBusy(!1,BMS.Modal.currentModal),BMS.Modal.currentModal.hide(),handlePopups.releaseDocument(),i.removeClass(o),BMS.Modal.currentModal.removeClass(a),BMS.Modal.currentModal=null);else{if(!confirm("Closing the Merchandise Store will cancel the transaction, Do you wish to proceed?"))return;Checkout.cancelMerchandiseTransaction(),BMS.Storage.del({name:"lngTransId"}),r(".js-merc-link").attr("data-merc",!1),n.transition({opacity:0},200).hide(),void 0!==BMS.Modal.currentModal&&null!=BMS.Modal.currentModal&&(BMS.Misc.fnBusy(!1,BMS.Modal.currentModal),BMS.Modal.currentModal.hide(),handlePopups.releaseDocument(),i.removeClass(o),BMS.Modal.currentModal.removeClass(a),BMS.Modal.currentModal=null,location.reload())}n.transition({opacity:1},200).hide(),void 0!==BMS.Modal.currentModal&&null!=BMS.Modal.currentModal&&(BMS.Misc.fnBusy(!1,BMS.Modal.currentModal),BMS.Modal.currentModal.hide(),handlePopups.releaseDocument(),i.removeClass(o),BMS.Modal.currentModal.removeClass(a),BMS.Modal.currentModal=null,r("html").removeClass("no-scroll"))}}})(jQuery),$(document).ready((function(){$("body").modal()})),BMS.Validate.address=function(t){try{if(t&&t.length<5)return!1;return/^[a-zA-Z0-9 \\\/;:.,-]+$/g.test(t)}catch(e){BMS.Misc.fnErr({fnName:"fnVal.address",fnParams:t,err:e})}},BMS.Validate.chkName=function(t){try{return t=$.trim(t),pattern=/^([a-zA-Z\s]+)$/,-1<t.indexOf("`")?!1:pattern.test(t)}catch(e){BMS.Misc.fnErr({fnName:"fnVal.name",fnParams:t,err:e})}},BMS.Validate.email=function(t){try{return-1<t.indexOf(",")?!1:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/i.test(t)}catch(e){BMS.Misc.fnErr({fnName:"fnVal.email",fnParams:t,err:e})}},BMS.Validate.date=function(e,t){try{if("string"!=typeof t||"u"!==t.charAt(0).toLowerCase())return!0;var n=parseInt(t.slice(1));if(isNaN(n))return!1;if(1<(i=new Date(e)).getFullYear()/1e4)return!1;var i=i.getTime(),a=(a=new Date("01-09-2017")).getTime();return n>=Math.round((a-i)/31536e6)}catch(e){BMS.Misc.fnErr({fnName:"fnVal.date",fnParams:strEmail,err:e})}},BMS.Validate.mob=function(t){try{return/^[^0]\d{9}$/.test(t)}catch(e){BMS.Misc.fnErr({fnName:"fnVal.mob",fnParams:t,err:e})}},BMS.Validate.pancard=function(t){try{return/^([a-zA-Z]{5})(\d{4})([a-zA-Z]{1})$/.test(t)}catch(e){BMS.Misc.fnErr({fnName:"BMS.Validate.pancard",fnParams:t,err:e})}},BMS.Validate.ifsc=function(t){try{return/^[a-zA-Z0-9]+$/.test(t)}catch(e){BMS.Misc.fnErr({fnName:"BMS.Validate.ifsc",fnParams:t,err:e})}},BMS.Validate.number=function(t){try{return/^\d+$/.test(t)}catch(e){BMS.Misc.fnErr({fnName:"fnVal.address",fnParams:t,err:e})}},BMS.Validate.rblpancard=function(t){try{return/^([a-zA-Z]{3})([P,p]{1})([a-zA-Z]{1})(\d{4})([a-zA-Z]{1})$/.test(t)}catch(e){BMS.Misc.fnErr({fnName:"BMS.Validate.pancard",fnParams:t,err:e})}},BMS.Validate.pincode=function(t){try{return/^[0-9]{6}$/.test(t)}catch(e){BMS.Misc.fnErr({fnName:"BMS.Validate.pincode",fnParams:t,err:e})}},BMS.Validate.otp=function(t){try{if(t&&t.length<6)return!1;return/^\d+$/.test(t)}catch(e){BMS.Misc.fnErr({fnName:"fnVal.otp",fnParams:t,err:e})}},BMS.Validate.intlNum=function(t){try{return/^[\s()+-]*([0-9][\s()+-]*){6,20}$/.test(t)}catch(e){BMS.Misc.fnErr({fnName:"fnVal.intlNum",fnParams:t,err:e})}};var primaryShowcase=$("#showcase-primary .showcase-carousel"),pausePrimaryShowcase=!1,handlePopups={scrollPos:null,initialScrollPos:null,activeModals:0,escKeyHandler:function(e){27!=e.keyCode&&27!=e.which||(null!==BMS.Modal.currentModal?BMS.Modal.fnHideModal():$(".select-overlay").click())},freezeDocument:function(e){try{if(e=$.extend({},e),this.activeModals++,1<this.activeModals)return!1;$(document).bind("keyup",this.escKeyHandler),this.scrollPos=$(document).scrollTop(),this.scrollPos<=0?this.initialScrollPos=Math.abs(parseInt($("body").css("margin-top"))):this.initialScrollPos=this.scrollPos,primaryShowcase&&primaryShowcase.length&&primaryShowcase.hasClass("slick-initialized")&&primaryShowcase.slick("slickPause"),pausePrimaryShowcase=!0,global.blnIsTouchScreen&&!e.popover||($("body").css("margin-top",-this.initialScrollPos),$("body").addClass("_fixed"),primaryShowcase&&primaryShowcase.length&&primaryShowcase.hasClass("slick-initialized")&&primaryShowcase.slick("slickPause"))}catch(e){BMS.Misc.fnErr({fnName:"handlePopups.freezeDocument",err:e})}},releaseDocument:function(e){try{this.activeModals--,this.activeModals<1&&($("body").hasClass("_fixed")&&($("body").removeClass("_fixed"),$("body").css("margin-top",0),$(document).scrollTop(this.initialScrollPos)),primaryShowcase&&primaryShowcase.length&&primaryShowcase.hasClass("slick-initialized")&&primaryShowcase.slick("slickPlay"),$(document).unbind("keyup",this.escKeyHandler),this.activeModals=0)}catch(e){BMS.Misc.fnErr({fnName:"handlePopups.releaseDocument",err:e})}}},onPrimaryShowcaseInit=function(e,t){pausePrimaryShowcase&&$("#showcase-primary .showcase-carousel").slick("slickPause")},initCarousel={banner:function(){$("#showcase-primary .showcase-carousel").on("init",(function(e,t){_.delay(onPrimaryShowcaseInit,500,e,t)})),$("#showcase-primary .showcase-carousel").slick({centerMode:!0,slidesToShow:1,arrows:!0,dots:!0,speed:1e3,autoplay:!0,pauseOnHover:!0,adaptiveHeight:!1,variableWidth:!0})},handpick:function(){$("#handpick-carousel .showcase-carousel")[0]&&$("#handpick-carousel .showcase-carousel").slick({centerMode:!0,slidesToShow:1,arrows:!0,dots:!1,speed:1e3,autoplay:!1,pauseOnHover:!1,adaptiveHeight:!1,variableWidth:!0})}},initializeWOW,initializeWOW;initializeWOW=global.blnIsTouchScreen?function(){window.wow=new WOW({boxClass:"wow",animateClass:"touch_animated",offset:-50,live:!0,lazyLoad:!0,lazyLoadOffset:-100}),wow.init()}:function(){window.wow=new WOW({boxClass:"wow",animateClass:"animated",offset:-50,live:!0,lazyLoad:!0,lazyLoadOffset:-100}),wow.init()};var triggerWOWScroll=function(){window.stopWowLoad=!1,setTimeout((function(){"undefined"!=typeof wow&&(wow.scrolled=!0,wow.scrollCallback())}),5)},bannerInit=function(){var e,t,n;function i(e){var t=(function(e){if(!_.isUndefined(e)&&!_.isEmpty(e))return e.find(".slick-current").find("img").attr("src")})(e);if(!_.isUndefined(t)&&t.length){var t=t.toLowerCase(),n=$(".dilwale-countdown"),i=new Date,a=i.getMonth()+1,e=i.getDate(),e=i.getFullYear()+"/"+a+"/"+e,o="2016/11/18"!=e&&"2016/11/19"!=e?[]:["pets-web","tum_bin"];!window.netflixShowCaseItemLoaded&&-1<t.indexOf("netflix")&&"undefined"!=typeof fnTrackNetflixShowcaseItem&&(-1<t.indexOf("netflix_dd")?fnTrackNetflixShowcaseItem("DD","view"):-1<t.indexOf("netflix_hoc")&&fnTrackNetflixShowcaseItem("HOC","view"),window.netflixShowCaseItemLoaded=!0);for(var s=!1,r=0;r<o.length;r++)-1<t.indexOf(o[r].toLowerCase())&&(s=!0);!(s&&n.length||"true"!=n.attr("data-checkQBFixed"))?n.addClass("_active"):n.removeClass("_active")}}$("#showcase-primary .showcase-carousel").find(".showcase-card").eq(0).find("img")[0]?(window.stopWowLoad=!0,$(".bannerLoadCover").remove(),$("#showcase-primary .showcase-carousel").removeClass("_none"),$("#showcase-primary").find(".banner-container").length<2&&$("#showcase-primary").find(".banner-container").eq(0).clone().appendTo($("#showcase-primary").find(".showcase-carousel")),$("#showcase-primary .showcase-carousel").on("init",(function(){i($(this))})),$("#showcase-primary .showcase-carousel").slick({centerMode:!0,slidesToShow:1,arrows:!0,dots:!0,speed:1e3,autoplay:!0,pauseOnHover:!0,adaptiveHeight:!1,variableWidth:!0}),t=(e=new Date).getMonth()+1,n=e.getDate(),e.getFullYear(),$("#showcase-primary .showcase-carousel").on("afterChange",(function(){i($(this))})),triggerWOWScroll()):$("#showcase-primary").css("height","0")},isOverlayInitialized=!1,showcaseOverlay={isDismissed:!1,init:function(e){var t;1!=isOverlayInitialized&&(isOverlayInitialized=!0,(t=$("#showcase-primary .showcase-overlay").find(".overlay-card").eq(0).find("img"))[0]?(window.stopWowLoad=!0,$(".home-wrapper").one("click",(function(){showcaseOverlay.dismiss()})),$(".__dismiss","#showcase-primary").removeClass("_none").one("click",(function(){showcaseOverlay.dismiss(),window.location.hash=""})),$("#showcase-primary .showcase-overlay").find(".__bg").css({"background-image":"url("+t.attr("src")+")"}),$(".bannerLoadCover").remove(),triggerWOWScroll(),(t=$(".overlay-card","#showcase-primary")).hasClass("_video")&&t.find(".__play").one("click",(function(){setTimeout((function(){showcaseOverlay.dismiss()}),100)})),setTimeout((function(){showcaseOverlay.dismiss()}),1e4),(t=$("#showcase-primary .showcase-carousel").find("img").eq(0)).attr("src",t.data("lazy")).removeAttr("data-lazy")):e())},dismiss:function(){this.isDismissed||(this.isDismissed=!0,$("#showcase-primary .showcase-overlay").addClass("puff-reverse"),$(".top-banner-wrapper").removeClass("_overlay"),setTimeout((function(){BMS.Storage.isset({name:"Rgn"})&&$("body").removeClass("_fixed"),global.blnIsTouchScreen||$("#quickbook-wrapper").removeClass("_curtain"),$(".home-wrapper").transition({opacity:1},300),$("#navbar").removeClass("none")}),305),bannerInit())}};function firstLoad(){void 0,showcaseOverlay.init((function(){bannerInit()}))}"undefined"!=typeof WOW&&initializeWOW(),"undefined"!=typeof showCaseHandler&&showCaseHandler.registerCallback({key:"firstLoad",callback:firstLoad}),$(document).ready((function(){$("#mob-toggle-menu ul");$(".navbar-toggle").on("click",(function(){})),isOverlayInitialized||window.isReactShowcase||showcaseOverlay.init((function(){bannerInit()})),"undefined"!=typeof WOW&&void 0===window.wow&&initializeWOW(),global.blnIsTouchScreen&&$("body").addClass("_touch");var n=$(".primary"),i=$(".secondary"),a=window.pageYOffset,o=(i.height(),$("#quickbook-wrapper")),s=0,r=!1,l=!1;o.length&&1!==o.data("always-fixed")&&(s=o.find(".search-container").offset().top-o.find(".search-box-container").height()-51);var c=null;$(document);global.blnIsTouchScreen||$(window).on("scroll",(function(e){var t;$("#quickbook-wrapper").hasClass("_fixed")?($(".dilwale-countdown").removeClass("_active"),$(".dilwale-countdown").attr("data-checkQBFixed","false")):($(".dilwale-countdown").addClass("_active"),$(".dilwale-countdown").attr("data-checkQBFixed","true")),BMS.ddOpen||(t=window.pageYOffset,c&&a+30<t&&clearTimeout(c),0!==s&&(window.pageYOffset>=s?r||(r=!0,o.addClass("_fixed")):r&&(r=!1,o.removeClass("_fixed"))),s<t?a+30<t?c=setTimeout((function(){l||(n.addClass("scroll-animation"),l=!0,i.addClass("scroll-animation"),o.addClass("_fixed _primary-hidden _animated"))}),200):t<a-40&&(c=setTimeout((function(){l&&(n.removeClass("scroll-animation"),l=!1,i.removeClass("scroll-animation"),c=null,o.removeClass("_primary-hidden"))}),300)):t<a&&(c&&clearTimeout(c),c=setTimeout((function(){n.removeClass("scroll-animation"),l=!1,i.removeClass("scroll-animation"),c=null,0==s?o.removeClass("_primary-hidden"):o.removeClass("_primary-hidden _fixed _animated")}),200)),a=t)})),"home"!=pageName&&initCarousel.handpick(),$(".universal-search-toggle").click((function(){$("#search-keywords").val("").focus(),$(this).is(":checked")?$(".__right").transition({opacity:0}):$(".__right").transition({opacity:1})})),$("#showcase-primary .showcase-carousel").on("mouseenter",'.banner-container[aria-hidden="false"]',(function(){$("#showcase-primary .showcase-carousel").slick("slickPause")})),$("#showcase-primary .showcase-carousel").on("mouseleave",'.banner-container[aria-hidden="false"]',(function(){$("#showcase-primary .showcase-carousel").slick("slickPlay")})),$(".play-trailer > svg").on("mouseenter",(function(){$(this).closest(".showcase-card").find(".__hover-overlay").addClass("scale-up")})),$(".play-trailer > svg").on("mouseleave",(function(){$(this).closest(".showcase-card").find(".__hover-overlay").removeClass("scale-up")})),$(".play-trailer > svg").click((function(){$(window).height(),$(window).width();var e=$(this);$(".main").css({"-webkit-filter":"blur(10px)"}),$(".popup-overlay").append(e.parent(".play-trailer").siblings(".__bg").data("url")).fadeIn(),$(".popup-overlay").css({background:"rgba(0, 0, 0, 0.7)"}),$(".popup-overlay iframe").css({position:"absolute",left:0,right:0,margin:"auto",top:0,bottom:0})})),$(".popup-overlay").click((function(){$(".main").css({"-webkit-filter":"blur(0px)"}),$(".popup-overlay iframe").remove(),$(this).hide()})),$(".select-overlay").click((function(){BMS.Header.fnHideSelectOverlay()})),$(".__dismiss",".mobile-menu").click((function(){BMS.Header.fnHideSelectOverlay()})),$(".dd-tab-list").on("mouseenter",".tab-toggle",(function(){var e=$(this).closest(".dd-tab");e.find(".dd-tab-list").find(".tab-toggle._active").removeClass("_active"),e.find(".dd-tab-content").find(".tab-content._active").removeClass("_active"),$(this).addClass("_active"),e=$(this).attr("data-toggle"),$(this).closest(".dd-tab").find("#"+e).addClass("_active"),wow&&setTimeout((function(){wow.scrolled=!0,wow.scrollHandler()}),100)})),$("#loyaltyHeaderLogo").click((function(e){e.preventDefault();var t="Y"==BMS.Storage.get({name:"ld",key:"LOYALTYISTARGETTED"}),n="Y"==BMS.Storage.get({name:"ld",key:"LOYALTYISSUBSCRIBED"}),e={event:"MyProfileSSLogoClick_common_page_11",pagesection:"undefined"!=typeof pageName?pageName:"",pagetype:"superstar",app_code:"web"};BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},e),t&&!n?(BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"SSOnboardinglanding_subscriptions_loyaltyrewards_1",Onboard_options:"ss_onboarding",pagetype:"superstar",pagesection:"ss_onboarding",app_code:"web"}),BMS.Misc.fnSendGAandRedirect({event:"SSLogolandingjourney_common_page_12",landing_options:"dashboard",pagesection:"ss_dashboard",pagetype:"superstar",source:"myprofile_logo",app_code:"web"},"/subscriptions/loyalty-rewards")):BMS.Misc.fnSendGAandRedirect({event:"SSLogolandingjourney_common_page_12",landing_options:"dashboard",pagesection:"ss_dashboard",pagetype:"superstar",source:"myprofile_logo",app_code:"web"},"/loyalty-program/superstar-user/dashboard")}));var t=function(){try{var e=(new Date).getHours();return 0<=e&&e<12?"Monring":12<=e&&e<17?"Afternoon":17<=e&&e<21?"Evening":"Night"}catch(e){void 0}},d=function(){try{return BMS.Storage.get({name:"ld",key:"MEMBERID",storage:"C"})?"Logged IN":"Guest Mode"}catch(e){void 0}},u=function(){try{return visitorId=0<ga.getAll().length?ga.getAll()[0].get("clientId"):""}catch(e){void 0}},p=function(){try{return"undefined"!=typeof byWhat?"ET"==byWhat?"buytickets-movies":"buytickets-cinema":pageName}catch(e){void 0}};$("a.nav-link, a.right-nav-link").on("click",(function(){$this=$(this),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"nav_left_common_page_1",session_daypart:t(),domain:"bms_web",visitor_id:u(),user_mode:d(),pagetype:p(),product_type:$this.text().toUpperCase()})})),$("[data-nav-menu]").on("click",(function(){$this=$(this),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"nav_left_common_page_1",session_daypart:t(),domain:"bms_web",visitor_id:u(),user_mode:d(),pagetype:p(),product_type:$this.attr("data-nav-menu")})})),$(".navbar-toggle").on("tap",(function(e){BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"nav_left_common_page_1",session_daypart:t(),domain:"bms_web",visitor_id:u(),user_mode:d(),pagetype:p(),product_type:"Mobile Naigation"})})),$("#preSignIn").on("tap",(function(){void 0,BMS.SignIn.fireLoginView(),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"nav_left_common_page_1",session_daypart:t(),domain:"bms_web",visitor_id:u(),user_mode:d(),pagetype:p(),product_type:"SIGN IN"})})),$(".wallet-header .wallet-link, .wallet-header .__wallet-header-btn a").off(".walletClick").on("tap.walletClick",BMS.Header.fnPushWalletClickToAnalytics),$(".notification-strip").click(BMS.Notifications.fnCalculateNotificationWrapperHeight)})),BMS.Header.fnGetWalletBalance=function(){try{var e,t;"A"==BMS.Storage.get({name:"ld",key:"WALLETSTATUS",storage:"C"})?window.walBalance?BMS.Header.fnGetWalletBalanceSuccess():(e=BMS.Storage.get({name:"ld",key:"MEMBERID",storage:"C"}),t=BMS.Storage.get({name:"ld",key:"LSID",storage:"C"}),BMS.Header.fnShowHideWalletBalance(!1),BMS.Misc.fnWsData({AppC:global.strAppCode,transId:0,cmd:"GETWALLETBALANCE",retType:"json",lsid:t,data:escape("|WALLETID="+e+"|MEMBERID="+e+"|LSID="+t+"|")+"GETWALLETDETAILS=Y|",fnCC:BMS.Header.fnGetWalletBalanceSuccess,supp:!0,fnEC:BMS.Header.fnGetWalletBalanceError}),global.SignOutCallBack.push((function(){BMS.Header.fnShowHideWalletBalance(!0,"",!1),window.walBalance&&(window.walBalance=null)}))):BMS.Header.fnShowHideWalletBalance(!0,"",!1)}catch(e){BMS.Misc.fnErr({fnName:"BMS.Header.fnGetWalletBalance",fnParams:arguments,err:e})}},BMS.Header.fnGetWalletBalanceSuccess=function(e){var t=e?$.parseJSON(unescape(e)):{},t=e&&t.BookMyShow&&t.BookMyShow.TotalBalance?parseFloat(t.BookMyShow.TotalBalance).toFixed(2):window.walBalance;e&&(window.walBalance=t),BMS.Header.fnShowHideWalletBalance(!0,t?global.strCurrencyCode+" "+t:"",!0)},BMS.Header.fnGetWalletBalanceError=function(e){BMS.Header.fnShowHideWalletBalance(!0,"",!1)},BMS.Header.fnShowHideWalletBalance=function(e,t,n){var i=$(".wallet-header .__wallet-header-btn a");e?($(".wallet-header .__wallet-reel .mini").removeClass("__start-anim"),$(".wallet-header .__wallet-reel").hide(),t&&n?($(".wallet-header .__wallet-balance").html(t).show(),t.split("Rs.")):n||($(".wallet-header .__wallet-balance").html("").hide(),$(".wallet-header .__wallet-header-btn").show()),i.text(i.data("wallet-activate"))):($(".wallet-header .__wallet-reel .mini").addClass("__start-anim"),$(".wallet-header .__wallet-reel").show(),$(".wallet-header .__wallet-balance").html("").hide(),$(".wallet-header .__wallet-header-btn").hide()),"C"!=BMS.Storage.get({name:"ld",key:"WALLETSTATUS"})&&"B"!=BMS.Storage.get({name:"ld",key:"WALLETSTATUS"})||$(".wallet-header").hide()},BMS.Header.fnPushWalletClickToAnalytics=function(e){e.stopPropagation();var t=$(".__wallet-balance").text(),e=pageName||location.pathname,t=t?t.split("Rs.")[1]:null;"buytickets"===pageName&&(e="ET"==byWhat?"buytickets-movies":"buytickets-cinema"),t=t?t.trim():"",BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"profilewalletclick_common_page_9",pagetype:e,wallet_label:$(this).text().trim(),user_wallet_balance:t})},BMS.Header.fnProfileUB=function(){try{BMS.Misc.fnAjax({type:"GET",url:"/serv/getData",data:{cmd:"POSTPURCHASEHISTORY",format:"json"},success:function(e){var t=e.data.transHistory||[],e=[];!(function(e){if(e&&0!==e.length){var t=BMS.Storage.get({name:"ld",key:"FIRSTNAME",storage:"C"})||"",n=BMS.Storage.get({name:"ld",key:"LASTNAME",storage:"C"})||"",i=t?t+" "+n:"Guest";for(var a="",o=0;o<e.length;o++){var s=(function(e){var t=parseInt(e.slice(6,8),10),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][parseInt(e.slice(4,6),10)-1],i=12<=(a=parseInt(e.slice(8,10),10))?"PM":"AM",a=(a%=12)||12,e=(e=parseInt(e.slice(10,12),10))<10?"0"+e:e;return t+(function(e){if(3<e&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}})(t)+" "+n+", "+a+":"+e+" "+i})(e[o].ShowDateTime),r="PTM"===e[o].redirectionType?"/booking-details?bookingID="+e[o].BookingId+"&transactionID="+e[o].TransId:"/myprofile/booking-history/",l=strContentUrl+"/events/moviecard/"+e[o].Event_strCode+".jpg";a+='<a href="'+r+'" class="upcoming-booking-card-wrapper">',a+='<div class="upcoming-booking-card-container">',a+='<div class="upcoming-booking-section">',a+='<div class="poster-section">',a+='<div class="poster">',a+='<img alt="Movie Poster" width="35px" height="52px" class="Image" style="object-fit: fill;" src="'+l+'" onerror="this.src=\''+strContentUrl+"/m6/images/common/placeholder.png'\">",a+="</div>",a+='<div class="upcoming-booking-content">',a+='<div class="profile-name">Hi '+i+",</div>",a+='<div class="upcoming-booking-title">'+e[o].upcomingBookingTitle+"</div>",a+='<div class="upcoming-booking-subtitle">'+e[o].upcomingBookingSubtitle+"</div>",a+="</div>",a+="</div>",a+='<div class="circle-wrapper">',a+='<div class="circle-left"></div>',a+='<div class="border"></div>',a+='<div class="circle-right"></div>',a+="</div>",a+="</div>",a+='<div class="upcoming-booking-details-section">',a+='<div class="show-date-time-section">',a+='<div class="show-date-time-header">Show time</div>',a+='<div class="show-date-time">'+s+"</div>",a+="</div>",a+='<div class="venue-name-container">',a+='<div class="venue-name">'+e[o].Cinema_strName+"</div>",a+="</div>",a+="</div>",a+="</div>",a+="</a>"}n='<div class="profile-ticket-info-widget" style="display:'+(0!==e.length?"flex":"none")+'; ">\t\t\t\t\t\t\t\t<div class="arrow-wrapper"><div class="left-upcoming-booking-card-arrow hide-arrow" onclick="BMS.Header.fnOnclickArrow();">\t\t\t\t\t\t\t\t\t\t<svg viewBox="0 0 10 18" fill="none" xmlns="http://www.w3.org/2000/svg">\t\t\t\t\t\t\t\t\t\t\t<path\t\t\t\t\t\t\t\t\t\t\t\tfillRule="evenodd"\t\t\t\t\t\t\t\t\t\t\t\tclipRule="evenodd"\t\t\t\t\t\t\t\t\t\t\t\td="M9.53769 0.477136C9.82646 0.774095 9.81982 1.24892 9.52286 1.53769L1.84894 9L9.52286 16.4623C9.81982 16.7511 9.82646 17.2259 9.53769 17.5229C9.24892 17.8198 8.77409 17.8265 8.47713 17.5377L0.638259 9.91498C0.638212 9.91493 0.638165 9.91488 0.638117 9.91484C0.638029 9.91475 0.63794 9.91467 0.637851 9.91458C0.3921 9.67576 0.250001 9.3472 0.250001 9C0.250001 8.6528 0.3921 8.32424 0.637851 8.08542C0.637988 8.08529 0.638123 8.08516 0.63826 8.08502L8.47713 0.462309C8.77409 0.173538 9.24892 0.180177 9.53769 0.477136ZM1.68317 8.8388C1.68331 8.83893 1.68345 8.83906 1.68358 8.8392L1.68317 8.8388Z"\t\t\t\t\t\t\t\t\t\t\t\tfill="#FFF"\t\t\t\t\t\t\t\t\t\t\t/>\t\t\t\t\t\t\t\t\t\t</svg>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t<div class="right-upcoming-booking-card-arrow"  onclick="BMS.Header.fnOnclickArrow();">\t\t\t\t\t\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" viewBox="-1 -1 21 35">\t\t\t\t\t\t\t\t\t\t\t<g fill="#FFF" fillRule="evenodd">\t\t\t\t\t\t\t\t\t\t\t\t<path d="M1.276 31.647a1.543 1.543 0 01.033-2.17l14.59-14.09a1.531 1.531 0 012.171.043c.59.61.566 1.592-.033 2.17L3.447 31.69a1.531 1.531 0 01-2.17-.043z" />\t\t\t\t\t\t\t\t\t\t\t\t<path d="M1.276 1.43A1.543 1.543 0 001.31 3.6L15.9 17.69a1.531 1.531 0 002.171-.043 1.543 1.543 0 00-.033-2.17L3.447 1.387a1.531 1.531 0 00-2.17.043z" />\t\t\t\t\t\t\t\t\t\t\t</g>\t\t\t\t\t\t\t\t\t\t</svg>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t<div class="card-scroll-wrapper"  style="justify-content:'+(1===e.length?"center":"flex-start")+'; ">\t\t\t\t\t\t\t\t\t'+a+"\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</div>";$("#profile-ticket-info-widget-html").css("display","block"),$("#profile-ticket-info-widget-html").html(n)}})(e=t.length?(t.map((function(e){return e.ticket})).flat()||[]).filter((function(e){return"P"===e.TransStatus})):e)},error:function(e){BMS.Misc.fnErr({fnName:"BMS.Header.fnProfileUB",err:e})}}),BMS.Header.fnOnclickArrow()}catch(e){BMS.Misc.fnErr({fnName:"BMS.Header.fnProfileUB",err:e})}},BMS.Header.fnOnclickArrow=function(){try{function n(){return $(".card-scroll-wrapper").scrollLeft()}var i=document.getElementsByClassName("left-upcoming-booking-card-arrow"),a=document.getElementsByClassName("right-upcoming-booking-card-arrow"),e=$(".upcoming-booking-card-wrapper").length,t=$(".upcoming-booking-card-wrapper").outerWidth(!0),o=$(".card-scroll-wrapper").outerWidth(),s=e*t,r=s-o;n();$(".card-scroll-wrapper").on("scroll",(function(){r=s-o;var e=n(),t=+r;e<=0?($(i).addClass("hide-arrow"),$(a).removeClass("hide-arrow")):e<t?($(i).removeClass("hide-arrow"),$(a).removeClass("hide-arrow")):t<=e&&($(i).removeClass("hide-arrow"),$(a).addClass("hide-arrow"))})),$(a).on("click",(function(){var e=n();e<r&&$(".card-scroll-wrapper").animate({scrollLeft:e+t},0)})),$(i).on("click",(function(){var e=n();0<e&&$(".card-scroll-wrapper").animate({scrollLeft:e-t},0)}))}catch(e){BMS.Misc.fnErr({fnName:"BMS.Header.fnOnclickArrow",err:e})}},BMS.Header.fnHeaderDD=function(e,t){try{function n(){$(".textAreaContent","#notification").readmore({moreLink:'<a class="read-more" href="#" ><span class="see_more_dots">...</span> See More</a>',lessLink:'<a class="show_less" href="#" >See Less</a>',collapsedHeight:75})}var i,a,o;"toggle"==t&&(i=$(e).attr("id"),a="",$("[data-role=dHeaderDD]").each((function(){$(this).is(":visible")&&(a=$(this).attr("data-id"))})),$("[data-role=dHeaderDD]").hide(),""!=a&&i!=a&&handlePopups.releaseDocument({popover:!0}),i==a?("dTopRgnDD"==i?$("#"+i).removeClass("_active"):"dNotifDD"==i&&$(".notification-dropdown-wrapper").hide(),BMS.Header.fnHideSelectOverlay(),$("#quickbook-wrapper").removeClass("_inactive"),$("[data-id='"+i+"']").hide()):($(".notification-dropdown-wrapper").hide(),$(".select-overlay").show(),$("#quickbook-wrapper").addClass("_inactive"),handlePopups.freezeDocument({popover:!0}),$("[data-id='"+i+"']").show(),"dTopRgnDD"==i?$("#"+i).addClass("_active"):"dNotifDD"==i&&($(".notification-dropdown-wrapper").show(),void 0===$(".textAreaContent","#notification").readmore&&"undefined"!=typeof notifReadMoreUrl?$.getScript(notifReadMoreUrl,(function(){n()})):"undefined"!=typeof notifReadMoreUrl&&n())),"dTopRgnDD"==i&&(global.blnIsTouchScreen?(o=$(window).height()-$(".primary",".mobile-menu").height())&&$(".location-search-container").css({"max-height":o}):$("[data-id='"+i+"'] #inp_RegionSearch_top").focus()),"preLogin"==i&&$("#myProfile").css({transition:"all 0.5s ease",right:"0"}),"postSignIn"==i&&$("#myProfile").css({transition:"all 0.5s ease",right:"0"}),"dNotifDD"==i&&global.blnIsTouchScreen&&(o=$(window).height()-$(".primary",".mobile-menu").height())&&$("#notification").css({"max-height":o})),BMS.SignIn.fnCalculateMenuItemsHeight()}catch(e){BMS.Misc.fnErr({fnName:"BMS.Header.fnHeaderDD",err:e})}},window.loop=0,BMS.Header.fnHideSelectOverlay=function(){try{window.loop++,$("[data-role=dHeaderDD]").hide(),$("#quickbook-wrapper").removeClass("_inactive"),$("#dTopRgnDD").removeClass("_active"),$(".notification-dropdown-wrapper").hide(),$("#myProfile").removeAttr("style"),handlePopups.releaseDocument(),$(".select-overlay").hide()}catch(e){BMS.Misc.fnErr({fnName:"BMS.Header.fnHideSelectOverlay",err:e})}},BMS.Header.fnChangeLang=function(e){var t=BMS.Storage.get({name:"lang",storage:"C"}),n=e.attr("data-val"),t=$("li[data-val ='"+t+"']").attr("data-name"),e=e.attr("data-name");t!=e&&(""==n||"eng"==n?BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"multilingual_lswitch_back",current_language:null!=t?t:"English",switchedback_language:e,appcode:global.strAppCode}):BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"multilingual_lang_change",previous_language:null!=t?t:"English",current_language:e,appcode:global.strAppCode})),BMS.Analytics.pushLanguageSelectionLotame(e),BMS.Storage.set({name:"lang",value:n,storage:"C",sess:!1}),BMS.Misc.fnBusy(!0),location.reload(!0)};var socketReciever=null;$(document).ready((function(){""!=BMS.Storage.get({name:"Rgn",storage:"C"})&&"|Code=ALL|"!=BMS.Storage.get({name:"Rgn",storage:"C"})&&(BMS.Storage.get({name:"lang",storage:"C"}),$(".navbar-toggle, #main-body-wrapper-overlay, .mob-brand").on("tap",(function(e){BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"nav_SPL_page_2"}),e.stopPropagation(),e.preventDefault(),toggleMobileNavigation($(this).data("navigationis"))})))}));var _scrollPos=0;function fnCheckLoyaltyStatus(){var e,t,n,i;BMS.Storage.isset({name:"ld"})?(e="Y"==BMS.Storage.get({name:"ld",key:"LOYALTYISTARGETTED"}),t="Y"==BMS.Storage.get({name:"ld",key:"LOYALTYISSUBSCRIBED"}),n=$("#loyaltyHeaderLogo, #loyaltyFooterLogo"),i=$("#loyaltyFooterSeparator"),e||t?(n.show(),i.show()):(n.hide(),i.hide()),e||t?(BMS.Storage.get({name:"ld",key:"LOYALTYVARIANTID"}),BMS.Storage.get({name:"ld",key:"MEMBEREMAIL"}),n.find("a").attr("href","/subscriptions/loyalty-rewards"),"undefined"!=typeof pageName&&"home"==pageName&&window.loadVariantsData&&window.loadVariantsData(loyaltyBannerApi)):n.find("a").attr("href","/loyalty-program/superstar-user/dashboard")):(n=$("#loyaltyHeaderLogo, #loyaltyFooterLogo"),i=$("#loyaltyFooterSeparator"),n.hide(),i.hide(),"undefined"!=typeof pageName&&"home"===pageName&&removeLoyaltyBanner())}function loyaltyBannerApi(e){try{var t;0===$("#loyaltyId").length&&loyalty&&loyalty.fnIsTargetted()&&(primaryShowcase.slick("unslick"),e.message&&"success"===e.message.toLowerCase()&&window.generateLoyaltyBanner&&generateLoyaltyBanner(e)),loyalty&&loyalty.fnIsSubscribed()&&window.initBadges&&e.data&&((t=e.data.ssEventsDetails)&&0<t.length&&window.initBadges(t))}catch(e){BMS.Misc.fnErr({fnName:"loyaltyBannerApi",err:e})}}function removeLoyaltyBanner(){primaryShowcase&&primaryShowcase.length&&primaryShowcase.hasClass("slick-initialized")&&(primaryShowcase.slick("unslick"),primaryShowcase.find(".banner-container").each((function(){"/subscriptions/loyalty-rewards"==$(this).find("a").attr("href")&&$(this).remove()})),bannerInit())}function generateLoyaltyBanner(e){var t=e.data.imageUrl,e="";primaryShowcase.prepend(e+='<div id="loyaltyId" class="banner-container slick-current slick-active slick-center" style="" aria-hidden="false">\t\t\t\t\t\t    <div class="showcase-card is-loading">\t\t\t\t\t\t        <a href="/subscriptions/loyalty-rewards"target="_self"><img src="'+t+'" onload="" data-lazy="'+t+'" alt="" class="__bg"></a>\t\t\t\t\t\t        <div class="__overlay"></div>\t\t\t\t\t\t    </div>\t\t\t\t\t\t</div>'),bannerInit()}function showLoyaltyLeadIn(){try{var e="Y"==BMS.Storage.get({name:"ld",key:"LOYALTYISTARGETTED"}),t="Y"==BMS.Storage.get({name:"ld",key:"LOYALTYISSUBSCRIBED"}),n=$("#loyaltyHeaderLogo, #loyaltyFooterLogo, #loyaltyFooterSeparator")||"";if(""==n)return!1;e||t?n.show():n.hide(),(e||t)&&pageName&&"home"==pageName&&window.loadVariantsData&&window.loadVariantsData(loyaltyBannerApi)}catch(e){void 0}}function toggleMobileNavigation(e){"active"==e?($("body").removeClass("transform-body"),setTimeout((function(){$(".navbar-toggle, #main-body-wrapper-overlay, .mob-brand").data("navigationis","inactive"),$("body").removeClass("open-mobile-menu"),$(".main-body-wrapper").css({marginTop:0}),window.scrollTo(0,-_scrollPos)}),300)):"inactive"==e&&(_scrollPos=-window.pageYOffset,$(".navbar-toggle, #main-body-wrapper-overlay, .mob-brand").data("navigationis","active"),$("body").addClass("open-mobile-menu"),$("body").addClass("transform-body"),$(".main-body-wrapper").css({marginTop:_scrollPos}))}var loyalty={isTargetted:BMS.Storage.get({name:"ld",key:"LOYALTYISTARGETTED",storage:"C"}),isSubscribed:BMS.Storage.get({name:"ld",key:"LOYALTYISSUBSCRIBED",storage:"C"}),config:{LOGO_COOKIE:"loyaltyLogoBadges",PROFILE_COOKIE:"loyaltyProfileBadges",DASHBOARD_EVENTS_COOKIE:"loyaltyDashboardBadges",EVENTS_DATA:"loyaltyBadges",DASHBOARD_PREMIERE_EVENTS_COOKIE:"loyaltyPremiereBadges"},fnLoyaltyRedirection:function(){try{BMS.Storage.isset({name:"ld"})?"Y"===this.isTargetted&&"Y"!==this.isSubscribed?BMS.Misc.fnGoTo("/subscriptions/loyalty-rewards"):"Y"!==this.isTargetted&&"Y"!==this.isSubscribed?BMS.Misc.fnGoTo("/"):"Y"==this.isSubscribed&&(siteGlobal.memberSuperstar=!0):BMS.Misc.fnGoTo("/secure/user-login?u="+location.pathname)}catch(e){void 0}},fnIsTargetted:function(){try{return BMS.Storage.isset({name:"ld"})&&"Y"===this.isTargetted&&"N"===this.isSubscribed?!0:!1}catch(e){BMS.Misc.fnErr({fnName:"loyalty.fnIsTargetted",err:e})}},fnIsSubscribed:function(){try{return BMS.Storage.isset({name:"ld"})&&"Y"===this.isTargetted&&"Y"===this.isSubscribed?!0:!1}catch(e){BMS.Misc.fnErr({fnName:"loyalty.fnIsSubscribed",err:e})}}},recaptcha1;BMS.Header.handleProfileOption=function(e,t,n){"account_and_settings"!=t?n&&(window.location.href=n):$(".sub-menu-wrapper").slideToggle()},ContentReport={init:function(){"undefined"==typeof blnReCaptchaScriptLoaded&&(void 0,$.ajax({async:!0,url:"//www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit",dataType:"script"})),$("#categorySelectfooter").SumoSelect({csvDispCount:5,placeholder:"--Select one category--"}),$("#report-abuse-footer").on("click","#btnSubmitfooter",this.fnReportSubmit),BMS.Storage.isset({name:"ld"})&&$("#iemailfooter").attr("value",BMS.Misc.fnGVal({key:"MEMBEREMAIL",data:BMS.Storage.get({name:"ld"})})),$(".error-popup-message").on("click","#reportScreenfail",this.fnClearReport),$(".success-message").on("click","#reportScreensuc",this.fnClearReport),$(".__report-content-close").on("click",this.reportPopupClose),$("#categorySelectfooter").on("change",this.categoryChangeListener),$("#fnamefooter").change(this.nameChangeListener),$("#lnamefooter").change(this.lnameChangeListener),$("#iassociationfooter").change(this.associationChangeListener),$("#iemailfooter").change(this.emailChangeListener),$("#iphonenumberfooter").change(this.phoneChangeListener),$("#ipr-housefooter").change(this.prChangeListener),$("#sm-description").change(this.descriptionChangeListener),blnReCaptchaScriptLoaded=!0},categoryChangeListener:function(e){"null"!=$(this).val()&&$(".input-container.category").removeClass("_error")},nameChangeListener:function(e){0<$(this).val().length&&$(".input-container.fname").removeClass("_error")},lnameChangeListener:function(e){0<$(this).val().length&&$(".input-container.lname").removeClass("_error")},associationChangeListener:function(e){0<$(this).val().length&&$(".input-container.association").removeClass("_error")},emailChangeListener:function(e){var t=$(this).val();BMS.Validate.email(t)&&$(".input-container.email").removeClass("_error")},phoneChangeListener:function(e){$(this).val().match(/^\d{10}$/)&&$(".input-container.phno").removeClass("_error")},prChangeListener:function(e){0<$(this).val().length&&$(".input-container.pr-house").removeClass("_error")},descriptionChangeListener:function(e){0<$(this).val().length&&$(".input-container.mv-social-links").removeClass("_error")},reportPopupClose:function(e){$("body").removeClass("_fixed"),BMS.Modal.fnHideModal(),ContentReport.fnClearReport()},reportButtonClickListener:function(){ContentReport.init(),BMS.Modal.fnShowModal("report-abuse-footer",!0),$("body").removeClass("_fixed"),$("body").css("margin-top","0"),grecaptcha.render("recaptcha1",{sitekey:"6LcDIycTAAAAAJuYsBa4m4DcRopeXcQVOiWpDd3p"}),ContentReport.resetInputValue(),ContentReport.fnClearReport(),BMS.Storage.isset({name:"ld"})&&(void 0,$("#iemailfooter").val(BMS.Misc.fnGVal({key:"MEMBEREMAIL",data:BMS.Storage.get({name:"ld"})})))},fnClearReport:function(){$(".report-form").removeClass("_hide"),$(".policy-container").css("display","block"),$(".success-message").addClass("_hide"),$(".error-popup-message").addClass("_hide"),$(".input-container").removeClass("_error")},fnReportSubmit:function(){var e=$("#iemailfooter"),t=$("#categorySelectfooter"),n=$("#idetailsfooter"),i=$("#fnamefooter"),a=$("#lnamefooter"),o=$("#iassociationfooter"),s=$("#iphonenumberfooter"),r=$("#ipr-housefooter"),l=$("#sm-description"),c=$("#report-tnc"),d=$("#sm-linksfooter");captcha=$("#recaptcha1").find("textarea").val();captcha.length;if(null==t.val())return t.focus(),$(".input-container.category").addClass("_error"),!1;if(!BMS.Validate.chkName(i.val()))return i.focus(),$(".input-container.fname").addClass("_error"),!1;if(!BMS.Validate.chkName(a.val()))return a.focus(),$(".input-container.lname").addClass("_error"),!1;if(!BMS.Validate.chkName(o.val()))return o.focus(),$(".input-container.association").addClass("_error"),!1;if(!BMS.Validate.email(e.val()))return e.focus(),$(".input-container.email").addClass("_error"),!1;if(!s.val().match(/^\d{10}$/))return s.focus(),$(".input-container.phno").addClass("_error"),!1;if(0==r.val().length)return r.focus(),$(".input-container.pr-house").addClass("_error"),!1;if(0==l.val().length)return l.focus(),$(".input-container.mv-social-links").addClass("_error"),!1;if(!$(c).is(":checked"))return $(".report-abuse-terms").css("background-color","#f2dede"),!1;if(0==captcha.length)return $(".input-container.captcha-container").addClass("_error"),!1;l={txtName:""!=i.val()?i.val():"",txtLname:""!=a.val()?a.val():"",txtAssociation:""!=o.val()?o.val():"",txtPhoneNo:""!=s.val()?s.val():"",txtPRHouse:""!=r.val()?r.val():"",txtSocialLinks:""!=d.val()?d.val():"",txtEmail:""!=e.val()?e.val():"",txtCategory:""!=t.val()?t.val():"",txtCategoryString:""!=$("#categorySelectfooter option:selected").text()?$("#categorySelectfooter option:selected").text():"",txtDetails:""!=n.val()?n.val():"",txtDescription:""!=l.val()?l.val():"",txtCaptcha:""!=captcha?captcha:"",txtPageUrl:window.location.href};ContentReport.submitForm(l,(function(e,t){"invalid_captcha"==e?($("#iCaptcha").attr("src",""),$("#iCaptcha").attr("src","/captcha/captcha2?"+(new Date).getTime()).one("load",(function(){$(".input-container.captcha-container").addClass("_error"),captcha.val("")}))):("error"!=e&&_.isEmpty(e)?($(".report-form").addClass("_hide"),$(".report-abuse-terms").css("display","none"),$(".policy-container").css("display","none"),$(".error-popup-message").addClass("_hide"),$(".success-message").removeClass("_hide")):($(".input-container").removeClass("_error"),$(".report-form").addClass("_hide"),$(".report-abuse-terms").css("display","none"),$(".policy-container").css("display","none"),$(".success-message").addClass("_hide"),$(".error-popup-message").removeClass("_hide")),ContentReport.resetInputValue())}))},resetInputValue:function(){$("#categorySelectfooter").val("null"),$("#categorySelectfooter")[0].sumo.reload(),$("#idetailsfooter").val(""),BMS.Storage.isset({name:"ld"})?(void 0,$("#iemailfooter").val(BMS.Misc.fnGVal({key:"MEMBEREMAIL",data:BMS.Storage.get({name:"ld"})}))):$("#iemailfooter").val(""),$("#captcha").val(""),$("#fnamefooter").val(""),$("#iassociationfooter").val(""),$("#iphonenumberfooter").val(""),$("#ipr-housefooter").val(""),$("#sm-linksfooter").val(""),$("#iCaptcha").attr("src",""),$("#iCaptcha").attr("src","/captcha/captcha2?"+(new Date).getTime()),$(".input-container").find("input").removeClass("_error"),$(".input-container").removeClass("_error")},submitForm:function(e,i){try{var t=("undefined"!==e.txtName&&e.txtName,e.txtName),n=("undefined"!==e.txtLname&&e.txtLname,e.txtLname),a=("undefined"!==e.txtAssociation&&e.txtAssociation,e.txtAssociation),o=("undefined"!==e.txtPhoneNo&&e.txtPhoneNo,e.txtPhoneNo),s=("undefined"!==e.txtPRHouse&&e.txtPRHouse,e.txtPRHouse),r=("undefined"!==e.txtSocialLinks&&e.txtSocialLinks,e.txtSocialLinks),l=("undefined"!==e.categorySelect&&e.categorySelect,e.categorySelect),c=("undefined"!==e.txtDetails&&e.txtDetails,e.txtDetails),d=("undefined"!==e.txtEmail&&e.txtEmail,e.txtEmail),u=("undefined"!==e.txtPageUrl&&e.txtPageUrl,e.txtPageUrl),p=("undefined"!==e.txtCategoryString&&e.txtCategoryString,e.txtCategoryString),f=("undefined"!==e.txtDescription&&e.txtDescription,e.txtDescription),g=("undefined"!==e.txtCaptcha&&e.txtCaptcha,e.txtCaptcha);void 0,BMS.Misc.fnAjax({url:global.getDataUrl+"?cmd=REPORTCONTENT",data:{txtName:t,txtLname:n,txtAssociation:a,txtPhoneNo:o,txtPRHouse:s,txtSocialLinks:r,txtEmail:d,categorySelect:l,categorySelectString:p,txtDetails:c,txtDescription:f,resptext:g,pageUrl:u},type:"POST",success:function(e){void 0,"success"==e?i(null,e):i("invalid_captcha"==e?"invalid_captcha":"error",null)},error:function(e,t,n){i(n,null)}})}catch(e){BMS.Misc.fnErr({fnName:"ContentReport.submitForm",err:e})}}};var onloadCallback=function(){recaptcha1=grecaptcha.render("recaptcha1",{sitekey:"6LcDIycTAAAAAJuYsBa4m4DcRopeXcQVOiWpDd3p",theme:"light"})},use,use;function fnBookNow(e,o,s,r,l,c,d,u){BMS.Misc.fnBusy(!0),byWhat="ET";var p={},f={},g={},h=[],m=[],v=[];sessions=[];var t={seatlayoutjs:evtName="",seatlayouthtml:""};t.seatlayoutjs=$.getScript(getSeatScript,(function(e,t,n){})),t.seatlayouthtml=$.ajax({type:"GET",url:"/serv/getData.bms",data:{cmd:"SEATHTML"}}),$.when(t.seatlayoutjs,t.seatlayouthtml).then((function(e,t){for(var n in blnCallSeatHtml||($("body").append(t[0]),blnCallSeatHtml=!0),SeatData)if(strVenName=SeatData[n].VenueName,r==SeatData[n].EventCode){for(var i in SeatData[n].Dates)for(var a in SeatData[n].Dates[i])i==c&&void 0!==SeatData[n].Dates[i][a].SessionId&&(g[SeatData[n].Dates[i][a].SessionId]={id:SeatData[n].Dates[i][a].SessionId,time:SeatData[n].Dates[i][a].DisplayShowTime,dateTime:SeatData[n].Dates[i][a].DisplayShowDate,isAvailable:"Y",isAtmosEnabled:!1},v.push(g[SeatData[n].Dates[i][a].SessionId]));sessions.push(v),eventTitle=SeatData[n].EventTitle,evtName=1<eventTitle.indexOf("(U/A)")?eventTitle.replace("(U/A)",""):-1!=eventTitle.indexOf("(U)")?eventTitle.replace("(U)",""):-1!=eventTitle.indexOf("(A)")?eventTitle.replace("(A)",""):eventTitle,evtName=evtName.trim(),blnRecoVistaCine="Y"==SeatData[n].IsFullLayout,p[SeatData[n].EventCode]={title:evtName,dimension:"",eventCode:SeatData[n].EventCode,language:SeatData[n].EventLang,isAtmosEnabled:SeatData[n].IsAtmosEnabled,censor:SeatData[n].EventCensor},f[o]={code:o,eventCode:r,name:SeatData[n].VenueName,appType:SeatData[n].VenueApp,isFullSeatLayout:blnRecoVistaCine,message:{type:SeatData[n].MessageType,title:SeatData[n].MessageTitle,body:SeatData[n].Message},sessions:v},h.push(p[SeatData[n].EventCode]),m.push(f[o])}t={selected:{time:l,date:d,ssid:s,venueCode:o},event:h,venue:m};BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"Clicked recommendation",{ProductID:r,"Event Type":"MT","Event Name":evtName,"Venue Name":strVenName,"Event Day":d,"Show time":l,"Event Date":d,Appcode:global.strAppCode}),"Y"==u?(BMS.Misc.fnBusy(!1),fnPopupSelSh("",o,s,r,l,t)):(BMS.Misc.fnBusy(!1),fnSelSh("",o,s,r,l,t));try{BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"Selected showtime",{ProductID:r,"Event Type":"MT","Event Name":evtName,"Venue Name":strVenName,"Venue group":o,Genre:"",Language:"","Is Logged in":""!=BMS.Storage.get({name:"ld"})?"Yes":"No",Appcode:global.strAppCode,Page:"home",Showtime:l})}catch(e){}}))}function ratingFuncDesktop(){$(".rating-stars").on("mouseenter",(function(e){var t=$(this).attr("data-review-id");void 0===t||""==t?(e.preventDefault(),e.stopPropagation(),$(".js-ratingSpan svg").on("mouseenter",(function(e){var t,n=$(this).parents(".rating-stars").attr("data-review-id");void 0===n||""==n?(e.preventDefault(),e.stopPropagation(),n=(t=$(this)).parents(".rating-stars"),e=t.parents(".js-ratingSpan"),(t=t.parents(".stars")).nextAll().find(".js-ratingSpan").removeClass("active"),e.nextAll().removeClass("active"),t.prevAll().find(".js-ratingSpan").addClass("active"),e.prevAll().andSelf().addClass("active"),n.find(".js-ratingSpan").not("active").find(use).css({fill:"#e0e0e0"}),$(".__fivestar").length,n.find(".js-ratingSpan.active").find(use).css({fill:"#c9363c"}),e=e.data("value"),n.siblings(".rate-o-meter").html(e),n.siblings(".rate-o-meter").attr("data-value",e)):$(document).off("mouseleave",$(this))})),$(".js-ratingSpan svg").on("click",(function(e){var t,n=$(this).parents(".rating-stars").attr("data-review-id");void 0!==n&&""!=n||(e.preventDefault(),n=(t=$(this)).parents(".rating-stars"),e=t.parents(".js-ratingSpan"),(t=t.parents(".stars")).nextAll().find(".js-ratingSpan").removeClass("selected"),e.nextAll().removeClass("selected"),n.find(".js-ratingSpan").not("selected").find(use).css({fill:"#e0e0e0"}),$(".__fivestar").length,t.prevAll().find(".js-ratingSpan").addClass("selected").find(use).css({fill:"#c9363c"}),e.prevAll().andSelf().addClass("selected").find(use).css({fill:"#c9363c"}),e=e.data("value"),n.siblings(".rate-o-meter").html(e),n.siblings(".rate-o-meter").attr("data-value",e),$(this).parents(".show-more-info").removeClass("showRating"))}))):$(document).off("mouseleave",$(this))})),$(".rating-stars").on("mouseleave",(function(e){var t=$(this).attr("data-review-id");void 0===t||""==t?(e.preventDefault(),e.stopPropagation(),e=(t=$(this)).find(".js-ratingSpan.selected"),t.find(".js-ratingSpan").not("selected").removeClass("active").find(use).css({fill:"#e0e0e0"}),$(".__fivestar").length,t.find(".js-ratingSpan.selected").find(use).css({fill:"#c9363c"}),void 0!==(e=$(e[e.length-1]).data("value"))?(t.siblings(".rate-o-meter").html(e),t.siblings(".rate-o-meter").attr("data-value",e)):(t.siblings(".rate-o-meter").attr("data-value",0),t.siblings(".rate-o-meter").html("0.0"))):$(document).off("mouseenter",$(this))}))}function ratingFuncMobile(){$(".rating-stars .js-ratingSpan svg").on("click",(function(e){var t,n,i=$(this).parents(".rating-stars").attr("data-review-id");void 0!==i&&""!=i||(e.preventDefault(),n=(t=$(this)).parents(".rating-stars"),i=t.parents(".js-ratingSpan"),(e=t.parents(".stars")).nextAll().find(".js-ratingSpan").removeClass("selected"),i.nextAll().removeClass("selected"),n.find(".js-ratingSpan").not("selected").find(use).css({fill:"#e0e0e0"}),0<$(".__fivestar").length?(t.find(".js-ratingSpan.selected").find(use).css({fill:"#cc3333"}),e.prevAll().find(".js-ratingSpan").addClass("selected").find(use).css({fill:"#cc3333"}),i.prevAll().andSelf().addClass("selected").find(use).css({fill:"#cc3333"})):(e.prevAll().find(".js-ratingSpan").addClass("selected").find(use).css({fill:"#f3c600"}),i.prevAll().andSelf().addClass("selected").find(use).css({fill:"#f3c600"})),i=i.data("value"),n.siblings(".rate-o-meter").html(i),n.siblings(".rate-o-meter").attr("data-value",i),$(this).parents(".movie-card").find(".show-more-info-overlay").trigger("tap"))}))}!(function(i){var a={sanitize:{date:function(e){return new Date(e.substr(0,4)+" "+e.substr(4,2)+" "+e.substr(6,2)+" "+e.substr(8,2)+":"+e.substr(10,2))},time:function(e){var t=e.getHours(),n=e.getMinutes(),e=!1;return 12<t?(t-=12,e=!0):12===t?e=!0:0===t&&(t=12),t+":"+(n=n<10?"0"+n:n)+" "+(e=e?"pm":"am")},boolean:function(n){return"string"==typeof n?"Y"==n?n=!0:"N"==n?n=!1:n:("object"!=typeof n&&"array"!=typeof n||_.each(n,(function(e,t){n[t]=a.sanitize.boolean(e)})),n)}},venueName:function(e){return e.replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"").replace(/\s/g,"-").toLowerCase()+"/cinema"},lpad:function(e,t,n){for(;e.length<n;)e=t+e;return e},render:function(e,s,t){e=e.split("\n").join("");var n,r,i,a=/([$\^\\\/()|?+*\[\]{}.\-])/g;return t=t||{},n=(i="{{}}").length,r=Math.ceil(n/2),t=i.substr(0,r).replace(a,"\\$1"),a=i.substr(r,n).replace(a,"\\$1")||t,a=new RegExp(t+"[^"+t+a+"]+"+a,"g"),e.replace(a,(function(e){var t,n=e.slice(r,-r),i=n.split("."),a=0,o=i.length;if(n in s)t=s[n];else for(t=s;a<o;a++){if(!(i[a]in t))return e;t=t[i[a]]}return t}))},difference:function(e){for(var t=[],n=e.length-1,i=0;i<e.length-1;i++)if(i!=n)return parseInt(e[i])>parseInt(e[i+1])?t.push(parseInt(e[i])-parseInt(e[i+1])):t.push(parseInt(e[i+1])-parseInt(e[i]))},getLatLongDistance:function(e,t){var n=e.lat,i=t.lat,a=e.lng,o=t.lng,e=function(e){return e*(Math.PI/180)},t=e(i-n),a=e(o-a),a=Math.sin(t/2)*Math.sin(t/2)+Math.cos(e(n))*Math.cos(e(i))*Math.sin(a/2)*Math.sin(a/2);return(6371*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))).toFixed(2)},between:function(e,t){var n=Math.min.apply(Math,[e,t]),t=Math.max.apply(Math,[e,t]);return n<this&&this<t},getCatAvailability:function(e){(e=parseInt(e))<0&&(e=0);for(var t,n=0;n<availSeatRange.length;n++)if(t=void 0,t=availSeatRange[n].range.split("-"),e>=parseInt(t[0])&&e<=parseInt(t[1]))return availSeatRange[n]},generateTooltip:function(){$tooltipObjects=i("[data-tooltip]"),$tooltipObjects.each((function(e,t){var n=(t=i(t)).attr("data-tooltip");t.append('<div class="__toolBlock">                               <span class="__tooltip">'+n+'</span>                               <span class="__arrow"></span>                             </div>')}))},getIn:function(e,t){if(Array.isArray(t)||void 0,null!=e){for(var n=e,i=0;i<t.length;i++){var a=t[i];if(void 0===(n=null!=n?n[a]:void 0))return n}return n}}};BMS.Misc=BMS.Misc||{},BMS.Misc.Helpers=a})(jQuery),BMS.Region.fnPgLd=function(){try{"undefined"!=typeof pageName&&-1!=global.notReqRgnArr.indexOf(pageName)?BMS.Region.fnChkRgn(!1):BMS.Region.fnChkRgn(!0),$("#locationPopup .__icon-back").on("click",(function(){$("#spnRgnHeadTxt").removeClass("applyMarginLeft"),$("#spnRgnHeadTxt").addClass("removeMarginLeft"),$("#spnRgnHeadTxt").html("PICK YOUR STATE"),$("#div_States").fadeIn(),$(".city-list").fadeOut(),$(this).fadeOut()})),$("#inp_RegionSearch").on("blur",(function(){$("[data-id=inp_RegionSearch]").hide()})),$("#inp_RegionSearch_top").on("blur",(function(){$("[data-id=inp_RegionSearch_top]").hide()}))}catch(e){BMS.Misc.fnErr({fnName:"BMS.Region.fnPgLd",err:e})}},BMS.Region.fnChkRgn=function(e){try{if(0!=$("#locationPopup").length){if(!e)return;var t,n,i,a=BMS.Storage.get({name:"Rgn",key:"Code"});BMS.Storage.get({name:"Rgn",key:"text"});""==a||"ALL"==a?($("#spnSelectedRegion").removeClass("__region"),$("#spnSelectedRegion").html("SELECT A REGION"),BMS.Region.fnChkRegRequired((function(e){e?($("#dTopRgnDD").click(),$("#quickbook-wrapper").addClass("_inactive"),$(".select-overlay").unbind("click"),$("[data-group=top-nav]").removeAttr("onclick")):($("#dTopRgnDD").click(),$("#quickbook-wrapper").addClass("_inactive"))}))):(t=BMS.Storage.get({name:"Rgn",key:"text"}),i=""!=(n=BMS.Storage.get({name:"Rgn",key:"subregionDetails"}))?JSON.parse(n):"",$("#spnSelectedRegion").addClass("__region"),i?$("#spnSelectedRegion").html(i.SubRegionName):$("#spnSelectedRegion").html(t))}}catch(e){BMS.Misc.fnErr({fnName:"BMS.Region.fnChkRgn",err:e})}},BMS.Region.fnChkRegRequired=function(e){try{e(!0)}catch(e){BMS.Misc.fnErr({fnName:"BMS.Region.fnChkRegRequired",err:e})}},BMS.Region.fnRegionFilter=function(e){try{for(var t=e.which||e.keyCode,n=[8,13,46,37,38,39,40,9],i=65;i<=90;i++)n.push(i);for(i=97;i<=122;i++)n.push(i);if($.inArray(t,n)<0)return!1;$("#uRgnLst_top > li.active");if(38==t){var a=$("[data-id=inp_RegionSearch_top] ul").children().first(),o=$("[data-id=inp_RegionSearch_top] ul .active").prev(),s=$(o).find("a").text();return void(o!=a?($(o).next().removeClass("active"),$(o).addClass("active"),$("#inp_RegionSearch_top").val(s)):$("#inp_RegionSearch_top").val($(a).find("a").text()))}if(40==t){var r=$("[data-id=inp_RegionSearch_top] ul").children().last(),o=$("[data-id=inp_RegionSearch_top] ul .active").next(),s=$(o).find("a").text();return void(o!=r?($(o).prev().removeClass("active"),$(o).addClass("active"),$("#inp_RegionSearch_top").val(s)):$("#inp_RegionSearch_top").val($(r).find("a").text()))}if(37==t||39==t)return;var l=e.target.value,c=e.target.id;if(""==l)return void $("#div_RegResponse").hide();var d=new RegExp("\\b"+l.toUpperCase()+"\\w*\\b","gi"),u=["Mumbai","Mumbai : Western","Mumbai : South Central","Navi Mumbai","Kalyan","Ulhasnagar","Delhi","Faridabad","Ghaziabad","Gurgaon","Noida","National Capital Region (NCR)"],p=new Array;$.each(regionlst,(function(e,t){$.each(t,(function(e,t){(d=new RegExp("\\b"+l.toUpperCase()+"\\w*\\b","gi")).test(t.alias.toUpperCase())&&-1==$.inArray(t.alias,u)&&p.push(new Array(t.code,t.alias))}))}));for(var f=0;f<regionalias.length;f++){for(var g=!1,h=0;h<regionalias[f].Alias.length;h++)if(d.test(regionalias[f].Alias[h].toUpperCase())){g=!0;break}g&&p.push(new Array(regionalias[f].code,regionalias[f].name))}(d.test("BOMBAY")||d.test("MUMBAI")||d.test("MUMBAI WESTERN")||d.test("Mumbai South Central")||d.test("NAVI MUMBAI")||d.test("KALYAN")||d.test("ULHASNAGAR"))&&p.push(new Array("MUMBAI","Mumbai")),(d.test("NATIONAL CAPITAL REGION")||d.test("NCR")||d.test("DELHI")||d.test("FARIDABAD")||d.test("GHAZIABAD")||d.test("GURGAON")||d.test("NOIDA"))&&p.push(new Array("NCR","National Capital Region (NCR)"));for(var m=[],v="",h=0,S=0;S<p.length;S++)-1==$.inArray(p[S][1],m)&&h<6&&(v+=""==v?'<li class="active" data-pos="1" style="width: 100%;" id="'+p[S][0]+'"><a href="javascript:BMS.Region.fnSTopReg('+p[S]+');">'+p[S][1]+"</a></li>":'<li style="width: 100%;" id="'+p[S][0]+'"><a href="javascript:BMS.Region.fnSTopReg('+p[S]+');">'+p[S][1]+"</a></li>",h++),m.push(p[S][1]);return""!=v?($("[data-id="+c+"] ul").html(v),$("[data-id="+c+"]").show()):$("[data-id="+c+"]").hide(),""==l&&$("[data-id="+c+"]").hide(),!0}catch(e){BMS.Misc.fnErr({fnName:"BMS.Region.fnRegionFilter",err:e})}},BMS.Region.fnSwStates=function(t){try{var e,n,i,a,o="",s="";$("#div_States").children().each((function(){$(this).removeClass("_active")})),""==t.trim()?($.each(statelist,(function(e,t){o+='<div class="location-pills" onClick="BMS.Region.fnSwStates(\''+t.alias.trim()+'\')" data-name="'+BMS.Misc.fnUrlName(t.alias.trim()).toLowerCase()+'">',o+='<span class="location-icon"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">  <use xlink:href="/icons/regions-icons.svg#icon-'+BMS.Misc.fnUrlName(t.alias.trim()).toLowerCase()+'"></use> </svg></span>',o+='<div class="location-name">'+t.name.toUpperCase()+"</div>",o+="</div>",0})),$("#div_States").html(o),$(".city-list").hide(),$("#locationPopup .__icon-back").fadeOut(),$("#div_States").show(),$("#spnRgnHeadTxt").html("PICK YOUR STATE"),BMS.Misc.modal("locationPopup",!0)):(e='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">  <use xlink:href="/icons/regions-icons.svg#icon-'+BMS.Misc.fnUrlName(t.trim()).toLowerCase()+'"></use> </svg>',n=_.filter(statelist,(function(e){return e.alias===t}))[0].name,i="",i+='<img src="'+global.strContentUrl+"/webin/common/region-banners/"+BMS.Misc.fnUrlName(t.trim()).toLowerCase()+'.jpg" alt="">',i+='<div class="overlay">',i+='<span class="location-icon"></span>',i+='<div class="location-name">'+n.trim()+"</div>",i+="</div>",a=""!=t?t:Object.keys(regionlst)[0],s="",regionlst.hasOwnProperty(a)&&($.each(regionlst,(function(e,t){if(e==a){for(var n=0;n<t.length;n++)n%6==0&&(s+='<div class="__list-col">'),s+='<p id="'+t[n].code+'" onclick="BMS.Region.fnSetRegion(\''+a+"', '"+t[n].code+'\')" data-name="'+t[n].alias+'"> - '+t[n].name+"</p>",n%6==5&&(s+="</div>");s+="</div>"}})),$("#spnRgnHeadTxt").html("PICK YOUR CITY"),$("#spnRgnHeadTxt").removeClass("removeMarginLeft"),$("#spnRgnHeadTxt").addClass("applyMarginLeft"),$(".city-list .__city-banner").html(i),$(".city-list .location-icon").html(e),$("#div_CityName").html(s),$("#div_States").fadeOut(),$(".city-list").fadeIn(),$("#locationPopup .__icon-back").fadeIn()))}catch(e){BMS.Misc.fnErr({fnName:"BMS.Region.fnSwStates",err:e})}},BMS.Region.fnSetRegion=function(e,t){try{BMS.Misc.fnBusy(!0);var n=void 0!==$("#"+t).attr("data-subreg")&&"Y"==$("#"+t).attr("data-subreg"),i="Maharashtra"==e&&n?"Mumbai":"NCR"==e&&n?"National Capital Region (NCR)":$("#"+t).attr("data-name");global.tmpCk=BMS.Region.fnGRgn(),global.ck=t,$("#spnSelectedRegion").html(i),BMS.Region.fnSetSubRgnCookie(i,t),"undefined"!=typeof blnIsRegionRouting&&1==blnIsRegionRouting?BMS.Region.fnUpdateUrl(i,!0):BMS.Region.fnUpdateUrl(i,!1)}catch(e){BMS.Misc.fnErr({fnName:"BMS.Region.fnSetRegion",err:e})}},BMS.Region.fnSTopReg=function(e){try{BMS.Misc.fnBusy(!0);var t=e.RegionCode||e.SubRegionCode,n=e.RegionName||e.SubRegionName,i=e.RegionSlug||e.SubRegionSlug,a=e.Lat||"",o=e.Long||"";global.tmpCk=BMS.Region.fnGRgn(),global.ck=t,$("#spnSelectedRegion").html(n),BMS.Region.fnSetSubRgnCookie(n,t,i,a,o),"undefined"!=typeof blnIsRegionRouting&&1==blnIsRegionRouting?BMS.Region.fnUpdateUrl(i,!0):BMS.Region.fnUpdateUrl(i,!1),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"citypopup_home_18"})}catch(e){BMS.Misc.fnErr({fnName:"BMS.Region.fnSTopReg",err:e})}},BMS.Region.fnOtherRegionCallBack=function(){try{global.tmpCk;var e=global.ck;fnUpdateUrl(e),BMS.Misc.fnBusy(!1)}catch(e){BMS.Misc.fnErr({fnName:"BMS.Region.fnOtherRegionCallBack",err:e})}},BMS.Region.fnUpdateUrl=function(e,t){!0===t?(t="/",t+=e,t+=("/"+(e=location.pathname).split("/").splice(2,e.split("/").length).join("/")).replace(/\/$/,""),t+=location.search,t+=location.hash,window.location.href=t):"undefined"!=typeof pageName&&"404"==pageName?location.href="/":window.location.reload()},BMS.Region.fnRedirectToRegionPage=function(){try{var e,t;"undefined"!=typeof blnIsRegionRouting&&1==blnIsRegionRouting?(e=location.pathname,t="/",t+=BMS.Storage.get({name:"Rgn",key:"slug"}),t+=("/"+e.split("/").splice(2,e.split("/").length).join("/")).replace(/\/$/,""),t+=location.search,t+=location.hash,BMS.Region.fnSendRegionData((function(){location.href=t}))):BMS.Region.fnSendRegionData((function(){BMS.Misc.fnBusy(!1)}))}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnErr",err:e})}},BMS.Region.fnSendRegionData=function(t){try{var e,n,i,a=BMS.Storage.get({name:"Rgn"}),o=BMS.Storage.get({name:"ld"});""!==o?(e=BMS.Misc.fnGVal({data:a,key:"Code"}),n=BMS.Misc.fnGVal({data:o,key:"MEMBERID"}),i=BMS.Misc.fnGVal({data:o,key:"LSID"}),BMS.Misc.fnDoSecureTrans({cmd:"SETPROFILE",p1:"SETPROFILE",p2:n,p3:i,p10:"|REGIONCODE="+e+"|",fnCC:function(e){t()},fnEC:function(e){t()},blnSupp:!0})):t()}catch(e){BMS.Misc.fnErr({fnName:"BMS.Region.fnSendRegionData",err:e})}},BMS.Region.fnHideRegSel=function(){try{$("#locationPopup").is(":visible")?BMS.Misc.modal("locationPopup",!1):$("[data-id=dTopRgnDD]").is(":visible")&&BMS.Header.fnHideSelectOverlay(),$(".select-overlay").click((function(){BMS.Header.fnHideSelectOverlay()}))}catch(e){BMS.Misc.fnErr({fnName:"BMS.Region.fnHideRegSel",err:e})}},BMS.Region.fnGRgn=function(){try{return BMS.Storage.get({name:"Rgn",key:"Code"})}catch(e){BMS.Misc.fnErr({fnName:"BMS.Region.fnGRgn",err:e})}},BMS.Region.fnSetSubRgnCookie=function(n,e,i,a,o){try{var s=!1;if(BMS.Storage.set({name:"Rgn",value:"",storage:"C",sess:!1}),void 0!==global.arrBreakRgn&&$.each(global.arrBreakRgn,(function(e,t){void 0!==subregionlist[t]&&$.each(subregionlist[t],(function(e,t){if(s=BMS.Misc.fnUrlName(t.SubRegionName.trim().toLowerCase())==BMS.Misc.fnUrlName(n.trim().toLowerCase()))return BMS.Storage.set({name:"Rgn",key:"subregionDetails",value:JSON.stringify(t),storage:"C",sess:!1}),BMS.Storage.set({name:"Rgn",key:"text",value:t.SubRegionName.trim(),storage:"C",sess:!1}),BMS.Storage.set({name:"Rgn",key:"Code",value:t.RegionCode.trim(),storage:"C",sess:!1}),BMS.Storage.set({name:"Rgn",key:"slug",value:i.trim(),storage:"C",sess:!1}),BMS.Storage.set({name:"Rgn",key:"lat",value:a.trim(),storage:"C",sess:!1}),BMS.Storage.set({name:"Rgn",key:"long",value:o.trim(),storage:"C",sess:!1}),$("#spnSelectedRegion").html(t.SubRegionName.trim()),!1}))})),s)return!1;BMS.Storage.set({name:"Rgn",key:"text",value:n,storage:"C",sess:!1}),BMS.Storage.set({name:"Rgn",key:"Code",value:e,storage:"C",sess:!1}),BMS.Storage.set({name:"Rgn",key:"slug",value:i,storage:"C",sess:!1}),BMS.Storage.set({name:"Rgn",key:"lat",value:a,storage:"C",sess:!1}),BMS.Storage.set({name:"Rgn",key:"long",value:o,storage:"C",sess:!1})}catch(e){void 0}},$(document).ready((function(){var e;""==BMS.Storage.get({name:"Rgn",storage:"C"})&&""!=strSelRegionCode&&""!=strSelRegionName&&BMS.Storage.set({name:"Rgn",value:"|Code="+strSelRegionCode+"|text="+strSelRegionName+"|slug="+strSelRegionUrlName+"|",storage:"C",sess:!1}),""!==BMS.Storage.get({name:"rgn",storage:"C"})&&(e=JSON.parse(BMS.Storage.get({name:"rgn",storage:"C"})),BMS.Storage.set({name:"Rgn",value:"|Code="+e.regionCode+"|text="+e.regionName+"|slug="+e.regionNameSlug+"|",storage:"C",sess:!1}),BMS.Storage.del({name:"rgn"})),BMS.Region.fnPgLd();try{void 0!==global.arrBreakRgn&&$.each(global.arrBreakRgn,(function(e,t){void 0!==subregionlist[t]&&$.each(subregionlist[t],(function(e,n){var t=regionlst[n.RegionCode]||regionlst[n.RegionName],i=!1;$.each(t,(function(e,t){n.SubRegionCode==t.code&&(i=!0)})),void 0!==t&&!1===i&&t.push({code:n.SubRegionCode.trim(),name:n.SubRegionName.trim(),alias:n.SubRegionName.trim(),slug:n.RegionSlug.trim()}),$.each(statelist,(function(e,t){(t.name.toLowerCase()==n.RegionCode.toLowerCase()||t.name.toLowerCase()==n.RegionName.toLowerCase())&&-1===$.inArray(n.SubRegionCode,statelist[e].regions)&&statelist[e].regions.push(n.SubRegionCode)}))}))}))}catch(e){void 0}})),BMS.Notifications.notifCount=0,BMS.Notifications.counter=0,BMS.Notifications.clearAllImage=function(){try{$("#notification-count").html("").removeClass("__alerts-bubble"),$("#notification").html('<div class="notification-head"><span><a href="javascript:;" onclick="$(\'[data-id=dNotifDD]\').hide();"><span class="head-notification">Back</span></a></span></div><span class="__icon notification-icon"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns: xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><use xlink: href="/icons/common-icons.svg#icon-no-notification"></use></svg ></span ><h4>Nothing that rings a bell</h4>')}catch(e){BMS.Misc.fnErr({fnName:"BMS.Notifications.clearAll",err:e})}},BMS.Notifications.dateCalc=function(e){try{date1=new Date;var t=date1.getTime()-new Date(e).getTime(),n=Math.round(t/864e5),i=Math.round(t/6e4),a=Math.round(t/36e5);return 0<n?n+"d ago":0<a?a+"hr ago":0<i?i+"min ago":"Now"}catch(e){BMS.Misc.fnErr({fnName:"BMS.Notifications.dateCalc",err:e})}},BMS.Notifications.countTab=function(){var e=document.title;if(e.match(/\(\d{1,3}\)/)){var t=e.indexOf(")");return e.substring(t+1,e.length)}return e},BMS.Notifications.clearAll=function(){try{var n=BMS.Storage.isset({name:"ld",key:"MEMBERID",storage:"C"});BMS.Misc.fnAjax({url:"/serv/getData",type:"GET",dataType:"JSON",data:{cmd:"CLEARALLNOTIF",clearAll:!0},success:function(e){var t;n&&(t=BMS.Notifications.countTab(),document.title=t),BMS.Notifications.clearAllImage()},error:function(e){BMS.Misc.fnErr({fnName:"BMS.Notifications.clearAll",err:e})}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.Notifications.clearAll",err:e})}return!1},BMS.Notifications.notifCountDecreaser=function(n,e){try{var i,a,o,s,r=BMS.Storage.isset({name:"ld",key:"MEMBERID",storage:"C"});$(n).attr("dAnalyData").split(","),$(n).hasClass("readNotif")||0==r?(i=(i=$(n).attr("notifId")).split("-"),o=$("#"+i[0]).attr("href"),s=$("#"+i[0]).attr("target"),a=$(e.target),e.preventDefault(),void 0!==o&&void 0!==s&&(a.hasClass("read-more")||a.hasClass("show_less")||window.open(o,s))):(i=$(n).attr("notifId"),$(n).attr("dAnalyData").split(","),o=(a=$(e.target)).data("href"),s=a.data("target"),memberIdNotification=BMS.Storage.get({name:"ld",key:"MEMBERID",storage:"C"}),void 0!==i&&(i=i.split("-"),void 0===o&&(o=$("#"+i[0]).data("href")),void 0===s&&(s=$("#"+i[0]).data("target")),$("#"+i[0]+"_"+i[1]).attr("data-viewed","true"),BMS.Misc.fnAjax({url:"/serv/getData",type:"GET",dataType:"JSON",data:{cmd:"VIEWEDNOTIFICATN",msgId:i[0],flag:i[1]},success:function(e){var t;e.error?BMS.Misc.fnErr({fnName:"BMS.Notifications.notifCountDecreaser.fnAjax.error",err:e.error}):(--BMS.Notifications.notifCount,$(n).removeClass("_unread"),$(n).removeClass("cursorhandPTA"),$(n).addClass("readNotif"),BMS.Notifications.notifCount<=0?($("#notification-count").html("").removeClass("__alerts-bubble"),r&&(t=BMS.Notifications.countTab(),document.title=t)):($("#notification-count").html(BMS.Notifications.notifCount),r&&(t=BMS.Notifications.countTab(),document.title="("+BMS.Notifications.notifCount+") "+t)),$("#"+i[0]).addClass("cursorhandPTA")),void 0===o&&void 0===s?n.onclick=null:($(n).addClass("cursorhandPTA"),n.onclick=function(e){e=$(e.target),$(n).attr("dAnalyData").split(",");e.hasClass("read-more")||e.hasClass("show_less")||window.open(o,s)},a.hasClass("read-more")||a.hasClass("show_less")||window.open(o,s))},error:function(e){BMS.Misc.fnErr({fnName:"BMS.Notifications.notifCountDecreaser.fnAjax.error",err:e})}})))}catch(e){BMS.Misc.fnErr({fnName:"BMS.Notifications.notifCountDecreaser",err:e})}},BMS.Notifications.softDelete=function(e,t){try{t.stopPropagation?t.stopPropagation():t.cancelBubble=!0;var n=$(e).attr("id"),i=$("#"+n).parents(".notification-card").attr("notifId").split("-");function a(){var e;$("#"+n).parents(".notification-card").hasClass("_unread")?(--BMS.Notifications.notifCount,o&&(e=BMS.Notifications.countTab(),document.title="("+BMS.Notifications.notifCount+") "+e),$("#notification-count").html(BMS.Notifications.notifCount),$("#"+n).parents(".notification-card").slideUp()):($("#"+n).parents(".notification-card").slideUp(),$("#notification-count").html(BMS.Notifications.notifCount)),--BMS.Notifications.counter,BMS.Notifications.notifCount<=0&&($("#notification-count").html("").removeClass("__alerts-bubble"),o&&(e=BMS.Notifications.countTab(),document.title=e)),BMS.Notifications.counter<=0&&(o&&(e=BMS.Notifications.countTab(),document.title=e),BMS.Notifications.clearAllImage())}msgID=i[0],msgFlag=i[1];var o=BMS.Storage.isset({name:"ld",key:"MEMBERID",storage:"C"});o?BMS.Misc.fnAjax({url:"/serv/getData",type:"GET",dataType:"JSON",data:{cmd:"CLEARALLNOTIF",msgID:msgID,flag:msgFlag},success:function(e){a()},error:function(e){BMS.Misc.fnErr({fnName:"BMS.Notifications.clearAll",err:e})}}):a()}catch(e){BMS.Misc.fnErr({fnName:"BMS.Notifications.clearAll",err:e})}return!1},BMS.Notifications.generateHTML=function(e,t){try{var n,i,a="",o=BMS.Storage.isset({name:"ld",key:"MEMBERID",storage:"C"});for(n in a+='<div class="notification-dropdown nav-tip notification-body" style="display:block;">',e){BMS.Notifications.counter++;var s="",r=[e[n].id,e[n].msgTpl,e[n].campaign];if(0==e[n].viewed&&++BMS.Notifications.notifCount,s='onclick = "BMS.Notifications.notifCountDecreaser(this,event);"',e.hasOwnProperty(n)){var l,c=e[n].viewed,d="",u="https:"+global.strContentUrl+"/notifications/default-bell.png";""!=e[n].imgURL&&e[n].imgURL,e[n].imgURL;for(l in e[n].cta)"object"==typeof e[n].cta[l]&&void 0!==e[n].cta[l].text&&(0==e[n].viewed&&1==o?d+='<div class="book-btn"><a id="'+e[n].id+'" data-href="'+e[n].cta[l].link+'" data-target="'+e[n].cta[l].target+'">'+e[n].cta[l].text+"</a></div>":d+='<div class="book-btn"><a id="'+e[n].id+'" href="'+e[n].cta[l].link+'" target="'+e[n].cta[l].target+'">'+e[n].cta[l].text+"</a></div>");var p=BMS.Notifications.dateCalc(e[n].stamp),f=e[n].msgType,g=c?"readNotif cursorhandPTA":"_unread cursorhandPTA",h=e[n].bannerURL||"",m="";""!==h&&(m='<div class="card-img">',m+='<img src="" data-src="'+h+'"/>',m+="</div>"),"PT_CTA"==e[n].msgTpl&&void 0!==e[n].data.type&&"ticket"==e[n].data.type?(a+='<div class="notification-card movie-ticket '+g+'" notifId="'+e[n].id+"-"+f+'" dAnalyData="'+r+'" '+s+' id="'+e[n].id+"_"+f+'" data-viewed="'+e[n].viewed+'">',a+='<div class="__head">Tickets Booked!',a+="</div >",a+='<div class="card-wrapper movie-crd">',a+='<span class="durtion">'+p+"</span>",a+='<span id="'+e[n].id+'-s" class="__dismiss" onclick="return BMS.Notifications.softDelete(this,event);">',a+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns: xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">',a+='<use xlink: href="/icons/common-icons.svg#icon-cancel"></use>',a+="</svg >",a+="</span >",a+="<p>",a+="<span>"+e[n].longTxt+"</span>",a+="</p>",a+='<div class="button-section">',a+=d):(a+='<div class="notification-card event-ticket '+g+'" notifId="'+e[n].id+"-"+f+'" dAnalyData="'+r+'" '+s+' id="'+e[n].id+"_"+f+'" data-viewed="'+e[n].viewed+'">',a+='<div class="card-wrapper event-crd">',a+=m,a+='<div class="card-content">',a+='<span class="durtion">'+p+"</span>",a+='<span id="'+e[n].id+'-s" class="__dismiss" onclick="return BMS.Notifications.softDelete(this,event);">',a+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns: xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">',a+='<use xlink: href="/icons/common-icons.svg#icon-cancel"></use>',a+="</svg >",a+="</span >",a+="<h4>"+e[n].shortTxt+"</h4>",a+="<p>"+e[n].longTxt+"</p>",a+='<div class="button-section">',a+=d,a+="</div>"),a+="</div>",a+="</div>",a+="</div>"}}return a+="</div>",BMS.Notifications.notifCount<=0&&($("#notification-count").html("").removeClass("__alerts-bubble"),o&&(i=BMS.Notifications.countTab(),document.title=i)),a}catch(e){BMS.Misc.fnErr({fnName:"BMS.Notifications.generateHTML",err:e})}},BMS.Notifications.getData=function(){try{BMS.Notifications.notifCount=0,BMS.Notifications.counter=0,$("#notification").html('<div class="notification-loader">Loading...</div>'),$("#profile-notification-badge,#notification-count").hide(),BMS.Misc.fnAjax({url:"/serv/getData",type:"GET",data:{cmd:"GETNOTIF",v:Math.random()},success:function(e){var t,n,i;null==e||e.errors||e.error||"error"==e.status?BMS.Notifications.clearAllImage():(t=BMS.Storage.isset({name:"ld",key:"MEMBERID",storage:"C"}),n='<div class="notification-head">',n+="<span>",n+='<a href="javascript:;" onclick="$(\'[data-id=dNotifDD]\').hide();">',n+='<span class="head-notification">Back</span>',n+="</a>",n+="</span>",n+='<span class="clearall">',n+='<a href="javascript:;" onclick="BMS.Notifications.clearAll();">',n+='<span class="">Clear all</span>',n+="</a>",n+="</span>",n+="</div>",n+=BMS.Notifications.generateHTML(e,"A"),n+="</div>",$("#notification").html(n),$("._softDel").hide(),0==Object.keys(e).length?BMS.Notifications.clearAllImage():0<BMS.Notifications.notifCount&&($("#notification-count").html(BMS.Notifications.notifCount),$("#profile-notification-badge,#notification-count").show(),t?(i=BMS.Notifications.countTab(),document.title="("+BMS.Notifications.notifCount+") "+i):(i=BMS.Notifications.countTab(),document.title=i),$("#notification-count").hasClass("__alerts-bubble")||$("#notification-count").addClass("__alerts-bubble")),BMS.Notifications.fnCalculateNotificationWrapperHeight())},error:function(e){BMS.Notifications.clearAllImage()}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.Notifications.getData",err:e})}},BMS.Notifications.fnPushNotificationBellClick=function(){try{$("#memberNotification").on("click",(function(){var e,t=$(this);"1"===t.attr("isClose")?(e=$.extend({},BMS.Notifications.fnGetCommonParams(),{eventAction:"clicked_bell"}),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},e),t.attr("isClose",-1)):t.attr("isClose",1)}))}catch(e){BMS.Misc.fnErr({fnName:"BMS.Notifications.fnPushNotificationBellClick",err:e})}},BMS.Notifications.fnBindPushNotificationButtonClick=function(){try{$(".notification-dropdown-wrapper").on("click",".card-wrapper",(function(){var e=$.extend({},BMS.Notifications.fnGetCommonParams(),{eventAction:"clicked_notification"});BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},e)}))}catch(e){BMS.Misc.fnErr({fnName:"BMS.Notifications.fnBindPushNotificationButtonClick",err:e})}},BMS.Notifications.fnGetCommonParams=function(){try{return{event:"tvc_gtmstdevent",eventCategory:"inbox",eventLabel:"",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:global.strAppCode,user_mode:BMS.Storage.isset({name:"ld"})?"logged_in":"guest",tvc_userid:BMS.Storage.get({name:"ld",key:"MEMBERID"}),page_url:window.location.href,bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"sessionId"}),region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",product:"inbox"}}catch(e){BMS.Misc.fnErr({fnName:"BMS.Notifications.fnGetCommonParams",err:e})}},BMS.Notifications.fnCalculateNotificationWrapperHeight=function(){try{var e=$(".profile-sidebar-wrapper").height();$(".notification-dropdown-wrapper").css({height:"calc(100% - "+e+"px)",top:e+"px"}),$(".notification-body").attr("style","height: calc(100vh - 62px - "+e+"px);")}catch(e){BMS.Misc.fnErr({fnName:"BMS.Notifications.fnCalculateNotificationWrapperHeight",err:e})}},$((function(){return 0!=$("#notification").length&&($("#memberNotification").click((function(){$.each($(".notification-card img"),(function(){var e;$(this).attr("data-src")&&(e=$(this).data("src"),$(this).attr("src",e),$(this).removeAttr("data-src"))}))})),$("#notification-count").html("").removeClass("__alerts-bubble"),""!=BMS.Storage.get({name:"Rgn",key:"Code",storage:"C"})&&(e=BMS.Storage.get({name:"ld",key:"MEMBERID",storage:"C"}),""!=BMS.Storage.get({name:"ld",key:"LSID",storage:"C"})&&""!=e||""==e?BMS.Notifications.getData():BMS.Notifications.clearAllImage()),global.SignInCallBack.push((function(){$("#notification-count").html("").removeClass("__alerts-bubble"),$(".notification-dropdown-wrapper").hide()})),BMS.SignIn.fnRegister("notification-getData",BMS.Notifications.getData),global.SignOutCallBack.push((function(){$("#notification-count").html("").removeClass("__alerts-bubble"),$(".notification-dropdown-wrapper").hide(),BMS.Notifications.getData();var e=BMS.Notifications.countTab();document.title=e})),$(".icon-notification").click((function(){0!=$(".notification-head").length&&BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"InboxVirtualpage_home_17",pageurl:window.location.href})})),$("#memberNotification").attr("isClose",1),BMS.Notifications.fnPushNotificationBellClick(),void BMS.Notifications.fnBindPushNotificationButtonClick());var e})),window.stopWowLoad=!1,function(){function t(e,t){return function(){return e.apply(t,arguments)}}var i,e,n,l,a,s=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};function o(){}function r(){this.keys=[],this.values=[]}function c(){"undefined"!=typeof console&&null!==console&&void 0,"undefined"!=typeof console&&null!==console&&void 0}function d(e){null==e&&(e={}),this.scrollCallback=t(this.scrollCallback,this),this.scrollHandler=t(this.scrollHandler,this),this.resetAnimation=t(this.resetAnimation,this),this.start=t(this.start,this),this.scrolled=!0,this.config=this.util().extend(e,this.defaults),this.animationNameCache=new n,this.wowEvent=this.util().createEvent(this.config.boxClass)}o.prototype.extend=function(e,t){var n,i;for(n in t)i=t[n],null==e[n]&&(e[n]=i);return e},o.prototype.isMobile=function(e){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)},o.prototype.createEvent=function(e,t,n,i){var a;return null==t&&(t=!1),null==n&&(n=!1),null==i&&(i=null),null!=document.createEvent?(a=document.createEvent("CustomEvent")).initCustomEvent(e,t,n,i):null!=document.createEventObject?(a=document.createEventObject()).eventType=e:a.eventName=e,a},o.prototype.emitEvent=function(e,t){return null!=e.dispatchEvent?e.dispatchEvent(t):t in(null!=e)?e[t]():"on"+t in(null!=e)?e["on"+t]():void 0},o.prototype.addEvent=function(e,t,n){return null!=e.addEventListener?e.addEventListener(t,n,!1):null!=e.attachEvent?e.attachEvent("on"+t,n):e[t]=n},o.prototype.removeEvent=function(e,t,n){return null!=e.removeEventListener?e.removeEventListener(t,n,!1):null!=e.detachEvent?e.detachEvent("on"+t,n):delete e[t]},o.prototype.innerHeight=function(){return"innerHeight"in window?window.innerHeight:document.documentElement.clientHeight},e=o,n=this.WeakMap||this.MozWeakMap||(r.prototype.get=function(e){for(var t,n=this.keys,i=t=0,a=n.length;t<a;i=++t)if(n[i]===e)return this.values[i]},r.prototype.set=function(e,t){for(var n,i=this.keys,a=n=0,o=i.length;n<o;a=++n)if(i[a]===e)return void(this.values[a]=t);return this.keys.push(e),this.values.push(t)},r),i=this.MutationObserver||this.WebkitMutationObserver||this.MozMutationObserver||(c.notSupported=!0,c.prototype.observe=function(){},c),l=this.getComputedStyle||function(n,e){return this.getPropertyValue=function(e){var t;return a.test(e="float"===e?"styleFloat":e)&&e.replace(a,(function(e,t){return t.toUpperCase()})),(null!=(t=n.currentStyle)?t[e]:void 0)||null},this},a=/(\-([a-z]){1})/g,this.WOW=(d.prototype.defaults={boxClass:"wow",animateClass:"animated",offset:0,mobile:!1,live:!0,lazyLoad:!0,lazyLaodOffset:-100,callback:null},d.prototype.init=function(){var e;return this.element=window.document.documentElement,"interactive"===(e=document.readyState)||"complete"===e?this.start():this.util().addEvent(document,"DOMContentLoaded",this.start),this.finished=[]},d.prototype.start=function(){var a,e,t,n,s;if(this.stopped=!1,this.boxes=function(){for(var e=this.element.querySelectorAll("."+this.config.boxClass),t=[],n=0,i=e.length;n<i;n++)a=e[n],t.push(a);return t}.call(this),this.all=function(){for(var e=this.boxes,t=[],n=0,i=e.length;n<i;n++)a=e[n],t.push(a);return t}.call(this),this.boxes.length)if(this.disabled())this.resetStyle();else for(n=this.boxes,this.mobile()&&this.resetStyle(),e=0,t=n.length;e<t;e++)a=n[e],this.mobile()||this.applyStyle(a,!0),this.isClosetoViewport(a)&&!stopWowLoad&&this.lazyLoad(a);if(this.disabled()||(this.util().addEvent(window,"scroll",this.scrollHandler),this.util().addEvent(window,"resize",this.scrollHandler),this.interval=setInterval(this.scrollCallback,50)),this.config.live)return new i((s=this,function(e){for(var a,o,t=[],n=0,i=e.length;n<i;n++)o=e[n],t.push(function(){for(var e=o.addedNodes||[],t=[],n=0,i=e.length;n<i;n++)a=e[n],t.push(this.doSync(a));return t}.call(s));return t})).observe(document.body,{childList:!0,subtree:!0})},d.prototype.stop=function(){if(this.stopped=!0,this.util().removeEvent(window,"scroll",this.scrollHandler),this.util().removeEvent(window,"resize",this.scrollHandler),null!=this.interval)return clearInterval(this.interval)},d.prototype.sync=function(e){if(i.notSupported)return this.doSync(this.element)},d.prototype.doSync=function(e){var t,n,i,a,o;if(1===(e=null==e?this.element:e).nodeType){for(o=[],n=0,i=(a=(e=e.parentNode||e).querySelectorAll("."+this.config.boxClass)).length;n<i;n++)t=a[n],s.call(this.all,t)<0?(this.boxes.push(t),this.all.push(t),this.stopped||this.disabled()||this.mobile()?this.resetStyle():this.applyStyle(t,!0),o.push(this.scrolled=!0)):o.push(void 0);return o}},d.prototype.lazyLoad=function(e){var t=global.blnIsTouchScreen?"data-mobile":"data-src",n=e.querySelectorAll("img["+t+"]");if(n&&this.config.lazyLoad)for(var i,a,o,s=0;s<n.length;s++)""!=(o=(a=n[s]).getAttribute(t))&&((i=$(a)).parent().find(".img-placeholder").hide(),a.setAttribute("src",o),i.one("error",(function(e){var t=$(this).attr("data-error");this.setAttribute("src",t)})),i.one("load",(function(){$(this).parents(".is-loading").removeClass("is-loading")})))},d.prototype.show=function(e){return this.applyStyle(e),e.className=e.className+" "+this.config.animateClass,null!=this.config.callback&&this.config.callback(e),this.util().emitEvent(e,this.wowEvent),this.util().addEvent(e,"animationend",this.resetAnimation),this.util().addEvent(e,"oanimationend",this.resetAnimation),this.util().addEvent(e,"webkitAnimationEnd",this.resetAnimation),this.util().addEvent(e,"MSAnimationEnd",this.resetAnimation),e},d.prototype.applyStyle=function(e,t){var n,i=e.getAttribute("data-wow-duration"),a=e.getAttribute("data-wow-delay"),o=e.getAttribute("data-wow-iteration");return this.animate((n=this,function(){return n.customStyle(e,t,i,a,o)}))},d.prototype.animate="requestAnimationFrame"in window?function(e){return window.requestAnimationFrame(e)}:function(e){return e()},d.prototype.resetStyle=function(){for(var e,t=this.boxes,n=[],i=0,a=t.length;i<a;i++)e=t[i],n.push(e.style.visibility="visible");return n},d.prototype.resetAnimation=function(e){if(0<=e.type.toLowerCase().indexOf("animationend"))return(e=e.target||e.srcElement).className=e.className.replace(this.config.animateClass,"").trim()},d.prototype.customStyle=function(e,t,n,i,a){return t&&this.cacheAnimationName(e),e.style.visibility=t?"hidden":"visible",n&&this.vendorSet(e.style,{animationDuration:n}),i&&this.vendorSet(e.style,{animationDelay:i}),a&&this.vendorSet(e.style,{animationIterationCount:a}),this.vendorSet(e.style,{animationName:t?"none":this.cachedAnimationName(e)}),e},d.prototype.vendors=["moz","webkit"],d.prototype.vendorSet=function(a,e){var o,s,r,t=[];for(o in e)s=e[o],a[""+o]=s,t.push(function(){for(var e=this.vendors,t=[],n=0,i=e.length;n<i;n++)r=e[n],t.push(a[""+r+o.charAt(0).toUpperCase()+o.substr(1)]=s);return t}.call(this));return t},d.prototype.vendorCSS=function(e,t){for(var n,i=l(e),a=i.getPropertyCSSValue(t),o=this.vendors,s=0,r=o.length;s<r;s++)n=o[s],a=a||i.getPropertyCSSValue("-"+n+"-"+t);return a},d.prototype.animationName=function(t){var n;try{n=this.vendorCSS(t,"animation-name").cssText}catch(e){n=l(t).getPropertyValue("animation-name")}return"none"===n?"":n},d.prototype.cacheAnimationName=function(e){return this.animationNameCache.set(e,this.animationName(e))},d.prototype.cachedAnimationName=function(e){return this.animationNameCache.get(e)},d.prototype.scrollHandler=function(){return this.scrolled=!0},d.prototype.scrollCallback=function(){var a;if(this.scrolled&&(this.scrolled=!1,this.boxes=function(){for(var e=this.boxes,t=[],n=0,i=e.length;n<i;n++)(a=e[n])&&(this.isClosetoViewport(a)&&!stopWowLoad&&this.lazyLoad(a),this.isVisible(a)&&this.isClosetoViewport(a)&&(this.show(a),!stopWowLoad)||t.push(a));return t}.call(this),!this.boxes.length&&!this.config.live))return this.stop()},d.prototype.offsetTop=function(e){for(var t;void 0===e.offsetTop;)e=e.parentNode;for(t=e.offsetTop;e=e.offsetParent;)t+=e.offsetTop;return t},d.prototype.isPositionFixed=function(e){for(var t=l(e).position;e.parentNode&&"body"!==e.parentNode.localName&&"fixed"!==t&&"fixed"!==(t=l(e).position);)e=e.parentNode;return"fixed"===t},d.prototype.isVisible=function(e){var t=window.pageYOffset,n=$(e);if(-1<e.className.indexOf("fixed-card")){var i=n.parents(".fixed-wrapper");if(!i.is(":visible"))return!1;t=i.scrollTop()}return n=e.getAttribute("data-wow-offset")||this.config.offset,t=(i=t)+Math.min(this.element.clientHeight,this.util().innerHeight())-n,e=(n=this.offsetTop(e))+e.clientHeight,n<=t&&i<=e},d.prototype.isClosetoViewport=function(e){var t=window.pageYOffset,n=$(e);if(-1<e.className.indexOf("fixed-card")){var i=n.parents(".fixed-wrapper");if(!i.is(":visible"))return!1;t=i.scrollTop()}return n=parseInt(this.config.lazyLoadOffset),t=(i=t)+Math.min(this.element.clientHeight,this.util().innerHeight())-n,n=this.offsetTop(e),0!=e.clientHeight&&(e=n+e.clientHeight,n<=t&&i<=e)},d.prototype.util=function(){return null!=this._util?this._util:this._util=new e},d.prototype.disabled=function(){return!1},d.prototype.mobile=function(){return this.util().isMobile(navigator.userAgent)},d)}.call(this),(function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(e.jQuery)})(this,(function(u){u.transit={version:"0.9.12",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var o=document.createElement("div"),p={};function e(e){if(e in o.style)return e;for(var t=["Moz","Webkit","O","ms"],n=e.charAt(0).toUpperCase()+e.substr(1),i=0;i<t.length;++i){var a=t[i]+n;if(a in o.style)return a}}var n=-1<navigator.userAgent.toLowerCase().indexOf("chrome");p.transition=e("transition"),p.transitionDelay=e("transitionDelay"),p.transform=e("transform"),p.transformOrigin=e("transformOrigin"),p.filter=e("Filter"),p.transform3d=(o.style[p.transform]="",o.style[p.transform]="rotateY(90deg)",""!==o.style[p.transform]);var t,f=p.transitionEnd={transition:"transitionend",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"}[p.transition]||null;for(t in p)p.hasOwnProperty(t)&&void 0===u.support[t]&&(u.support[t]=p[t]);function i(e){return"string"==typeof e&&this.parse(e),this}function g(e,t,n){!0===t?e.queue(n):t?e.queue(t,n):e.each((function(){n.call(this)}))}function h(e,t,n,i){var a,e=(a=[],u.each(e,(function(e){e=u.camelCase(e),e=r(e=u.transit.propertyMap[e]||u.cssProps[e]||e),p[e]&&(e=r(p[e])),-1===u.inArray(e,a)&&a.push(e)})),a);u.cssEase[n]&&(n=u.cssEase[n]);var o=m(t)+" "+n;0<parseInt(i,10)&&(o+=" "+m(i));var s=[];return u.each(e,(function(e,t){s.push(t+" "+o)})),s.join(", ")}function a(i,e){e||(u.cssNumber[i]=!0),u.transit.propertyMap[i]=p.transform,u.cssHooks[i]={get:function(e){return u(e).css("transit:transform").get(i)},set:function(e,t){var n=u(e).css("transit:transform");n.setFromString(i,t),u(e).css({"transit:transform":n})}}}function r(e){return e.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()}))}function s(e,t){return"string"!=typeof e||e.match(/^[\-0-9\.]+$/)?""+e+t:e}function m(e){return s(e="string"==typeof e&&!e.match(/^[\-0-9\.]+/)?u.fx.speeds[e]||u.fx.speeds._default:e,"ms")}return o=null,u.cssEase={_default:"ease",in:"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeInCubic:"cubic-bezier(.550,.055,.675,.190)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},u.cssHooks["transit:transform"]={get:function(e){return u(e).data("transform")||new i},set:function(e,t){t instanceof i||(t=new i(t)),"WebkitTransform"!==p.transform||n?e.style[p.transform]=t.toString():e.style[p.transform]=t.toString(!0),u(e).data("transform",t)}},u.cssHooks.transform={set:u.cssHooks["transit:transform"].set},u.cssHooks.filter={get:function(e){return e.style[p.filter]},set:function(e,t){e.style[p.filter]=t}},u.fn.jquery<"1.8"&&(u.cssHooks.transformOrigin={get:function(e){return e.style[p.transformOrigin]},set:function(e,t){e.style[p.transformOrigin]=t}},u.cssHooks.transition={get:function(e){return e.style[p.transition]},set:function(e,t){e.style[p.transition]=t}}),a("scale"),a("scaleX"),a("scaleY"),a("translate"),a("rotate"),a("rotateX"),a("rotateY"),a("rotate3d"),a("perspective"),a("skewX"),a("skewY"),a("x",!0),a("y",!0),i.prototype={setFromString:function(e,t){t="string"==typeof t?t.split(","):t.constructor===Array?t:[t];t.unshift(e),i.prototype.set.apply(this,t)},set:function(e){var t=Array.prototype.slice.apply(arguments,[1]);this.setter[e]?this.setter[e].apply(this,t):this[e]=t.join(",")},get:function(e){return this.getter[e]?this.getter[e].apply(this):this[e]||0},setter:{rotate:function(e){this.rotate=s(e,"deg")},rotateX:function(e){this.rotateX=s(e,"deg")},rotateY:function(e){this.rotateY=s(e,"deg")},scale:function(e,t){this.scale=e+","+(t=void 0===t?e:t)},skewX:function(e){this.skewX=s(e,"deg")},skewY:function(e){this.skewY=s(e,"deg")},perspective:function(e){this.perspective=s(e,"px")},x:function(e){this.set("translate",e,null)},y:function(e){this.set("translate",null,e)},translate:function(e,t){void 0===this._translateX&&(this._translateX=0),void 0===this._translateY&&(this._translateY=0),null!=e&&(this._translateX=s(e,"px")),null!=t&&(this._translateY=s(t,"px")),this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var e=(this.scale||"1,1").split(",");return e[0]&&(e[0]=parseFloat(e[0])),e[1]&&(e[1]=parseFloat(e[1])),e[0]===e[1]?e[0]:e},rotate3d:function(){for(var e=(this.rotate3d||"0,0,0,0deg").split(","),t=0;t<=3;++t)e[t]&&(e[t]=parseFloat(e[t]));return e[3]&&(e[3]=s(e[3],"deg")),e}},parse:function(e){var i=this;e.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,(function(e,t,n){i.setFromString(t,n)}))},toString:function(e){var t,n=[];for(t in this)this.hasOwnProperty(t)&&(p.transform3d||"rotateX"!==t&&"rotateY"!==t&&"perspective"!==t&&"transformOrigin"!==t)&&"_"!==t[0]&&(e&&"scale"===t?n.push(t+"3d("+this[t]+",1)"):e&&"translate"===t?n.push(t+"3d("+this[t]+",0)"):n.push(t+"("+this[t]+")"));return n.join(" ")}},u.fn.transition=u.fn.transit=function(e,t,n,a){var o=this,i=0,s=!0,r=u.extend(!0,{},e);"function"==typeof t&&(a=t,t=void 0),"object"==typeof t&&(n=t.easing,i=t.delay||0,s=void 0===t.queue||t.queue,a=t.complete,t=t.duration),"function"==typeof n&&(a=n,n=void 0),void 0!==r.easing&&(n=r.easing,delete r.easing),void 0!==r.duration&&(t=r.duration,delete r.duration),void 0!==r.complete&&(a=r.complete,delete r.complete),void 0!==r.queue&&(s=r.queue,delete r.queue),void 0!==r.delay&&(i=r.delay,delete r.delay),void 0===t&&(t=u.fx.speeds._default),void 0===n&&(n=u.cssEase._default),t=m(t);var l=h(r,t,n,i),c=u.transit.enabled&&p.transition?parseInt(t,10)+parseInt(i,10):0;if(0===c)return g(o,s,(function(e){o.css(r),a&&a.apply(o),e&&e()})),o;var d={};return g(o,s,(function(e){var t,n,i;this.offsetWidth,t=e,n=!1,i=function(){n&&o.unbind(f,i),0<c&&o.each((function(){this.style[p.transition]=d[this]||null})),"function"==typeof a&&a.apply(o),"function"==typeof t&&t()},0<c&&f&&u.transit.useTransitionEnd?(n=!0,o.bind(f,i)):window.setTimeout(i,c),o.each((function(){0<c&&(this.style[p.transition]=l),u(this).css(r)}))})),this},u.transit.getTransitionValue=h,u})),(function(i){i.fn.tabs=function(e){var t,n=i(this);n.find(".tab-toggle").on("click",(function(e){t=i(this).attr("data-toggle"),t=n.find("#"+t),n.find(".tab-content._active").removeClass("_active"),n.find(".tab-toggle._active").removeClass("_active"),t.addClass("_active"),t.find(".dd-cards"),i(this).addClass("_active")}))}})(jQuery),(function(){var a={mailcheck:{threshold:5,defaultDomains:["gmail.com","yahoo.com","yahoo.co.in","hotmail.com","in.com","sify.com","rediffmail.com","ymail.com","yahoo.in","rediff.com","rocketmail.com","live.com","live.in","google.com","indiatimes.com","mail.com","bookmyshow.com","bigtree.in","ovi.com","aol.com","aol.in","indiya.com","vsnl.net","india.com","eth.net","talktalk.com","airtelmail.in","inbox.com","hotmail.co.uk","yahoomail.co.in","msn.com","satyam.com","live.co.uk","yahoo.com.au","hotmail.ca","cooltoad.com","zmail.com","sifymail.com","facebook.com","rediffmail.co.in","gmail.co.in","bsnl.co.in","hotmail.in","boxbe.com","webdunia.com","mail.yahoo.co.in","outlook.in","outlook.com","rediffmail.in","comcast.net","yahoo.co.uk","yahoo.ca","btinternet.com","zoho.com","me.com","mac.com","live.com","googlemail.com","verizon.net","sbcglobal.net","att.net","gmx.com"],defaultTopLevelDomains:["co.uk","co.in","com","net","org","info","edu","gov","mil","in","ca","com.au"],run:function(e){e.domains=e.domains||a.mailcheck.defaultDomains,e.topLevelDomains=e.topLevelDomains||a.mailcheck.defaultTopLevelDomains,e.distanceFunction=e.distanceFunction||a.sift3Distance;var t=a.mailcheck.suggest(encodeURI(e.email),e.domains,e.topLevelDomains,e.distanceFunction);t?e.suggested&&e.suggested(t):e.empty&&e.empty()},suggest:function(e,t,n,i){e=e.toLowerCase();e=this.splitEmail(e);if(t=this.findClosestDomain(e.domain,t,i)){if(t!=e.domain)return{address:e.address,domain:t,full:e.address+"@"+t}}else{i=this.findClosestDomain(e.topLevelDomain,n);if(e.domain&&i&&i!=e.topLevelDomain){n=e.domain,t=n.substring(0,n.lastIndexOf(e.topLevelDomain))+i;return{address:e.address,domain:t,full:e.address+"@"+t}}}return!1},findClosestDomain:function(e,t,n){var i,a=99,o=null;if(!e||!t)return!1;n=n||this.sift3Distance;for(var s=0;s<t.length;s++){if(e===t[s])return e;(i=n(e,t[s]))<a&&(a=i,o=t[s])}return a<=this.threshold&&null!==o&&o},sift3Distance:function(e,t){if(null==e||0===e.length)return null==t||0===t.length?0:t.length;if(null==t||0===t.length)return e.length;for(var n=0,i=0,a=0,o=0;n+i<e.length&&n+a<t.length;){if(e.charAt(n+i)==t.charAt(n+a))o++;else for(var i=0,a=0,s=0;s<5;s++){if(n+s<e.length&&e.charAt(n+s)==t.charAt(n)){i=s;break}if(n+s<t.length&&e.charAt(n)==t.charAt(n+s)){a=s;break}}n++}return(e.length+t.length)/2-o},splitEmail:function(e){var t=e.split("@");if(t.length<2)return!1;for(var n=0;n<t.length;n++)if(""===t[n])return!1;var e=t.pop(),i=e.split("."),a="";if(0==i.length)return!1;if(1==i.length)a=i[0];else{for(n=1;n<i.length;n++)a+=i[n]+".";2<=i.length&&(a=a.substring(0,a.length-1))}return{topLevelDomain:a,domain:e,address:t.join("@")}}}};"undefined"!=typeof module&&module.exports&&(module.exports=a.mailcheck),"undefined"!=typeof window&&window.jQuery&&(jQuery.fn.mailcheck=function(e){var t,n,i=this;e.suggested&&(t=e.suggested,e.suggested=function(e){t(i,e)}),e.empty&&(n=e.empty,e.empty=function(){n.call(null,i)}),e.email=this.val(),a.mailcheck.run(e)})})(),(function(r){r.fn.setAltText=function(s){var e=r(this);return-1<window.navigator.userAgent.indexOf("MSIE ")?e:e.each((function(e,t){var n=(t=r(t)).attr("placeholder")||"",i=null!=n?n:s&&s.text&&""!=s.text?s.text:"Enter text",a=s&&s.blurcolor?s.blurcolor:"#7F7F7F",o=s&&s.focuscolor?s.focuscolor:t.css("color");t.bind({blur:function(){t.val()==i||""==t.val()?t.val(i).css("color",a):t.css("color",o)},focus:function(){t.val()==i&&t.val("").css("color",o)}}),t.is(":focus")||t.val(i).css("color",a)}))}})(jQuery),(function(e){e.fn.doEnter=function(t){return e(this).unbind("keypress"),e(this).bind("keypress",(function(e){13==(e.keyCode||e.which)&&t&&t.callback&&(t.argument?t.callback(t.argument):t.callback())}))}})(jQuery),(function(e,t){"function"==typeof define&&define.amd?define([],(function(){return e.svg4everybody=t()})):"object"==typeof module&&module.exports?module.exports=t():e.svg4everybody=t()})(this,(function(){function f(e,t,n){if(n){var i=document.createDocumentFragment(),a=!t.hasAttribute("viewBox")&&n.getAttribute("viewBox");a&&t.setAttribute("viewBox",a);for(var o=n.cloneNode(!0);o.childNodes.length;)i.appendChild(o.firstChild);e.appendChild(i)}}return function(e){var r=Object(e),e=window.top!==window.self,l="polyfill"in r?r.polyfill:/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/.test(navigator.userAgent)||(navigator.userAgent.match(/\bEdge\/12\.(\d+)\b/)||[])[1]<10547||(navigator.userAgent.match(/\bAppleWebKit\/(\d+)\b/)||[])[1]<537||/\bEdge\/.(\d+)\b/.test(navigator.userAgent)&&e,c={},d=window.requestAnimationFrame||setTimeout,u=document.getElementsByTagName("use"),p=0;l&&(function e(){for(var t=0;t<u.length;){var n,i,a=u[t],o=a.parentNode,s=(function(){for(var e=o;"svg"!==e.nodeName.toLowerCase()&&(e=e.parentNode););return e})();s?(n=a.getAttribute("xlink:href")||a.getAttribute("href"),l&&(!r.validate||r.validate(n,s,a)?(o.removeChild(a),a=(i=n.split("#")).shift(),n=i.join("#"),a.length?((i=c[a])||((i=c[a]=new XMLHttpRequest).open("GET",a),i.send(),i._embeds=[]),i._embeds.push({parent:o,svg:s,id:n}),(function(i){i.onreadystatechange=function(){var n;4===i.readyState&&((n=i._cachedDocument)||((n=i._cachedDocument=document.implementation.createHTMLDocument("")).body.innerHTML=i.responseText,i._cachedTarget={}),i._embeds.splice(0).map((function(e){var t=(t=i._cachedTarget[e.id])||(i._cachedTarget[e.id]=n.getElementById(e.id));f(e.parent,e.svg,t)})))},i.onreadystatechange()})(i)):f(o,document.getElementById(n))):(++t,++p))):++t}0<u.length-p&&d(e,67)})()}})),function(){function e(r){return function(e,t,n,i){t=y(t,i,4);var a=!k(e)&&S.keys(e),o=(a||e).length,s=0<r?0:o-1;return arguments.length<3&&(n=e[a?a[s]:s],s+=r),(function(e,t,n,i,a,o){for(;0<=a&&a<o;a+=r){var s=i?i[a]:a;n=t(n,e[s],s,e)}return n})(e,t,n,a,s,o)}}function t(o){return function(e,t,n){t=M(t,n);for(var i=_(e),a=0<o?0:i-1;0<=a&&a<i;a+=o)if(t(e[a],a,e))return a;return-1}}function n(o,s,r){return function(e,t,n){var i=0,a=_(e);if("number"==typeof n)0<o?i=0<=n?n:Math.max(n+a,i):a=0<=n?Math.min(n+1,a):n+a+1;else if(r&&n&&a)return e[n=r(e,t)]===t?n:-1;if(t!=t)return 0<=(n=s(u.call(e,i,a),S.isNaN))?n+i:-1;for(n=0<o?i:a-1;0<=n&&n<a;n+=o)if(e[n]===t)return n;return-1}}function i(e,t){var n=x.length,i=e.constructor,a=S.isFunction(i)&&i.prototype||l,o="constructor";for(S.has(e,o)&&!S.contains(t,o)&&t.push(o);n--;)(o=x[n])in e&&e[o]!==a[o]&&!S.contains(t,o)&&t.push(o)}function a(){}var o=this,s=o._,r=Array.prototype,l=Object.prototype,c=Function.prototype,d=r.push,u=r.slice,p=l.toString,f=l.hasOwnProperty,g=Array.isArray,h=Object.keys,m=c.bind,v=Object.create,S=function(e){return e instanceof S?e:this instanceof S?void(this._wrapped=e):new S(e)};"undefined"!=typeof exports?(exports="undefined"!=typeof module&&module.exports?module.exports=S:exports)._=S:o._=S,S.VERSION="1.8.3";var y=function(a,o,e){if(void 0===o)return a;switch(null==e?3:e){case 1:return function(e){return a.call(o,e)};case 2:return function(e,t){return a.call(o,e,t)};case 3:return function(e,t,n){return a.call(o,e,t,n)};case 4:return function(e,t,n,i){return a.call(o,e,t,n,i)}}return function(){return a.apply(o,arguments)}},M=function(e,t,n){return null==e?S.identity:S.isFunction(e)?y(e,t,n):S.isObject(e)?S.matcher(e):S.property(e)};S.iteratee=function(e,t){return M(e,t,1/0)};function b(e){return S.isObject(e)?v?v(e):(a.prototype=e,e=new a,a.prototype=null,e):{}}var w=function(l,c){return function(e){var t=arguments.length;if(t<2||null==e)return e;for(var n=1;n<t;n++)for(var i=arguments[n],a=l(i),o=a.length,s=0;s<o;s++){var r=a[s];c&&void 0!==e[r]||(e[r]=i[r])}return e}},B=function(t){return function(e){return null==e?void 0:e[t]}},C=Math.pow(2,53)-1,_=B("length"),k=function(e){e=_(e);return"number"==typeof e&&0<=e&&e<=C};S.each=S.forEach=function(e,t,n){if(t=y(t,n),k(e))for(a=0,o=e.length;a<o;a++)t(e[a],a,e);else for(var i=S.keys(e),a=0,o=i.length;a<o;a++)t(e[i[a]],i[a],e);return e},S.map=S.collect=function(e,t,n){t=M(t,n);for(var i=!k(e)&&S.keys(e),a=(i||e).length,o=Array(a),s=0;s<a;s++){var r=i?i[s]:s;o[s]=t(e[r],r,e)}return o},S.reduce=S.foldl=S.inject=e(1),S.reduceRight=S.foldr=e(-1),S.find=S.detect=function(e,t,n){n=k(e)?S.findIndex(e,t,n):S.findKey(e,t,n);return void 0!==n&&-1!==n?e[n]:void 0},S.filter=S.select=function(e,i,t){var a=[];return i=M(i,t),S.each(e,(function(e,t,n){i(e,t,n)&&a.push(e)})),a},S.reject=function(e,t,n){return S.filter(e,S.negate(M(t)),n)},S.every=S.all=function(e,t,n){t=M(t,n);for(var i=!k(e)&&S.keys(e),a=(i||e).length,o=0;o<a;o++){var s=i?i[o]:o;if(!t(e[s],s,e))return!1}return!0},S.some=S.any=function(e,t,n){t=M(t,n);for(var i=!k(e)&&S.keys(e),a=(i||e).length,o=0;o<a;o++){var s=i?i[o]:o;if(t(e[s],s,e))return!0}return!1},S.contains=S.includes=S.include=function(e,t,n,i){return k(e)||(e=S.values(e)),0<=S.indexOf(e,t,n="number"!=typeof n||i?0:n)},S.invoke=function(e,n){var i=u.call(arguments,2),a=S.isFunction(n);return S.map(e,(function(e){var t=a?n:e[n];return null==t?t:t.apply(e,i)}))},S.pluck=function(e,t){return S.map(e,S.property(t))},S.where=function(e,t){return S.filter(e,S.matcher(t))},S.findWhere=function(e,t){return S.find(e,S.matcher(t))},S.max=function(e,i,t){var n,a,o=-1/0,s=-1/0;if(null==i&&null!=e)for(var r=0,l=(e=k(e)?e:S.values(e)).length;r<l;r++)n=e[r],o<n&&(o=n);else i=M(i,t),S.each(e,(function(e,t,n){a=i(e,t,n),(s<a||a===-1/0&&o===-1/0)&&(o=e,s=a)}));return o},S.min=function(e,i,t){var n,a,o=1/0,s=1/0;if(null==i&&null!=e)for(var r=0,l=(e=k(e)?e:S.values(e)).length;r<l;r++)(n=e[r])<o&&(o=n);else i=M(i,t),S.each(e,(function(e,t,n){((a=i(e,t,n))<s||1/0===a&&1/0===o)&&(o=e,s=a)}));return o},S.shuffle=function(e){for(var t,n=k(e)?e:S.values(e),i=n.length,a=Array(i),o=0;o<i;o++)(t=S.random(0,o))!==o&&(a[o]=a[t]),a[t]=n[o];return a},S.sample=function(e,t,n){return null==t||n?(e=!k(e)?S.values(e):e)[S.random(e.length-1)]:S.shuffle(e).slice(0,Math.max(0,t))},S.sortBy=function(e,i,t){return i=M(i,t),S.pluck(S.map(e,(function(e,t,n){return{value:e,index:t,criteria:i(e,t,n)}})).sort((function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(i<n||void 0===n)return 1;if(n<i||void 0===i)return-1}return e.index-t.index})),"value")};c=function(o){return function(n,i,e){var a={};return i=M(i,e),S.each(n,(function(e,t){t=i(e,t,n);o(a,e,t)})),a}};S.groupBy=c((function(e,t,n){S.has(e,n)?e[n].push(t):e[n]=[t]})),S.indexBy=c((function(e,t,n){e[n]=t})),S.countBy=c((function(e,t,n){S.has(e,n)?e[n]++:e[n]=1})),S.toArray=function(e){return e?S.isArray(e)?u.call(e):k(e)?S.map(e,S.identity):S.values(e):[]},S.size=function(e){return null==e?0:(k(e)?e:S.keys(e)).length},S.partition=function(e,i,t){i=M(i,t);var a=[],o=[];return S.each(e,(function(e,t,n){(i(e,t,n)?a:o).push(e)})),[a,o]},S.first=S.head=S.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:S.initial(e,e.length-t)},S.initial=function(e,t,n){return u.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},S.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:S.rest(e,Math.max(0,e.length-t))},S.rest=S.tail=S.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},S.compact=function(e){return S.filter(e,S.identity)};var E=function(e,t,n,i){for(var a=[],o=0,s=i||0,r=_(e);s<r;s++){var l=e[s];if(k(l)&&(S.isArray(l)||S.isArguments(l))){var c=0,d=(l=!t?E(l,t,n):l).length;for(a.length+=d;c<d;)a[o++]=l[c++]}else n||(a[o++]=l)}return a};S.flatten=function(e,t){return E(e,t,!1)},S.without=function(e){return S.difference(e,u.call(arguments,1))},S.uniq=S.unique=function(e,t,n,i){S.isBoolean(t)||(i=n,n=t,t=!1),null!=n&&(n=M(n,i));for(var a=[],o=[],s=0,r=_(e);s<r;s++){var l=e[s],c=n?n(l,s,e):l;t?(s&&o===c||a.push(l),o=c):n?S.contains(o,c)||(o.push(c),a.push(l)):S.contains(a,l)||a.push(l)}return a},S.union=function(){return S.uniq(E(arguments,!0,!0))},S.intersection=function(e){for(var t=[],n=arguments.length,i=0,a=_(e);i<a;i++){var o=e[i];if(!S.contains(t,o)){for(var s=1;s<n&&S.contains(arguments[s],o);s++);s===n&&t.push(o)}}return t},S.difference=function(e){var t=E(arguments,!0,!0,1);return S.filter(e,(function(e){return!S.contains(t,e)}))},S.zip=function(){return S.unzip(arguments)},S.unzip=function(e){for(var t=e&&S.max(e,_).length||0,n=Array(t),i=0;i<t;i++)n[i]=S.pluck(e,i);return n},S.object=function(e,t){for(var n={},i=0,a=_(e);i<a;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},S.findIndex=t(1),S.findLastIndex=t(-1),S.sortedIndex=function(e,t,n,i){for(var a=(n=M(n,i,1))(t),o=0,s=_(e);o<s;){var r=Math.floor((o+s)/2);n(e[r])<a?o=r+1:s=r}return o},S.indexOf=n(1,S.findIndex,S.sortedIndex),S.lastIndexOf=n(-1,S.findLastIndex),S.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var i=Math.max(Math.ceil((t-e)/n),0),a=Array(i),o=0;o<i;o++,e+=n)a[o]=e;return a};function T(e,t,n,i,a){return i instanceof t?(n=b(e.prototype),a=e.apply(n,a),S.isObject(a)?a:n):e.apply(n,a)}S.bind=function(e,t){if(m&&e.bind===m)return m.apply(e,u.call(arguments,1));if(!S.isFunction(e))throw new TypeError("Bind must be called on a function");var n=u.call(arguments,2),i=function(){return T(e,i,t,this,n.concat(u.call(arguments)))};return i},S.partial=function(a){var o=u.call(arguments,1),s=function(){for(var e=0,t=o.length,n=Array(t),i=0;i<t;i++)n[i]=o[i]===S?arguments[e++]:o[i];for(;e<arguments.length;)n.push(arguments[e++]);return T(a,s,this,this,n)};return s},S.bindAll=function(e){var t,n,i=arguments.length;if(i<=1)throw new Error("bindAll must be passed function names");for(t=1;t<i;t++)e[n=arguments[t]]=S.bind(e[n],e);return e},S.memoize=function(i,a){var o=function(e){var t=o.cache,n=""+(a?a.apply(this,arguments):e);return S.has(t,n)||(t[n]=i.apply(this,arguments)),t[n]};return o.cache={},o},S.delay=function(e,t){var n=u.call(arguments,2);return setTimeout((function(){return e.apply(null,n)}),t)},S.defer=S.partial(S.delay,S,1),S.throttle=function(n,i,a){var o,s,r,l=null,c=0;a=a||{};function d(){c=!1===a.leading?0:S.now(),l=null,r=n.apply(o,s),l||(o=s=null)}return function(){var e=S.now();c||!1!==a.leading||(c=e);var t=i-(e-c);return o=this,s=arguments,t<=0||i<t?(l&&(clearTimeout(l),l=null),c=e,r=n.apply(o,s),l||(o=s=null)):l||!1===a.trailing||(l=setTimeout(d,t)),r}},S.debounce=function(t,n,i){var a,o,s,r,l,c=function(){var e=S.now()-r;e<n&&0<=e?a=setTimeout(c,n-e):(a=null,i||(l=t.apply(s,o),a||(s=o=null)))};return function(){s=this,o=arguments,r=S.now();var e=i&&!a;return a=a||setTimeout(c,n),e&&(l=t.apply(s,o),s=o=null),l}},S.wrap=function(e,t){return S.partial(t,e)},S.negate=function(e){return function(){return!e.apply(this,arguments)}},S.compose=function(){var n=arguments,i=n.length-1;return function(){for(var e=i,t=n[i].apply(this,arguments);e--;)t=n[e].call(this,t);return t}},S.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},S.before=function(e,t){var n;return function(){return 0<--e&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},S.once=S.partial(S.before,2);var I=!{toString:null}.propertyIsEnumerable("toString"),x=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];S.keys=function(e){if(!S.isObject(e))return[];if(h)return h(e);var t,n=[];for(t in e)S.has(e,t)&&n.push(t);return I&&i(e,n),n},S.allKeys=function(e){if(!S.isObject(e))return[];var t,n=[];for(t in e)n.push(t);return I&&i(e,n),n},S.values=function(e){for(var t=S.keys(e),n=t.length,i=Array(n),a=0;a<n;a++)i[a]=e[t[a]];return i},S.mapObject=function(e,t,n){t=M(t,n);for(var i,a=S.keys(e),o=a.length,s={},r=0;r<o;r++)s[i=a[r]]=t(e[i],i,e);return s},S.pairs=function(e){for(var t=S.keys(e),n=t.length,i=Array(n),a=0;a<n;a++)i[a]=[t[a],e[t[a]]];return i},S.invert=function(e){for(var t={},n=S.keys(e),i=0,a=n.length;i<a;i++)t[e[n[i]]]=n[i];return t},S.functions=S.methods=function(e){var t,n=[];for(t in e)S.isFunction(e[t])&&n.push(t);return n.sort()},S.extend=w(S.allKeys),S.extendOwn=S.assign=w(S.keys),S.findKey=function(e,t,n){t=M(t,n);for(var i,a=S.keys(e),o=0,s=a.length;o<s;o++)if(t(e[i=a[o]],i,e))return i},S.pick=function(e,t,n){var i,a,o={},s=e;if(null==s)return o;S.isFunction(t)?(a=S.allKeys(s),i=y(t,n)):(a=E(arguments,!1,!1,1),i=function(e,t,n){return t in n},s=Object(s));for(var r=0,l=a.length;r<l;r++){var c=a[r],d=s[c];i(d,c,s)&&(o[c]=d)}return o},S.omit=function(e,t,n){var i;return t=S.isFunction(t)?S.negate(t):(i=S.map(E(arguments,!1,!1,1),String),function(e,t){return!S.contains(i,t)}),S.pick(e,t,n)},S.defaults=w(S.allKeys,!0),S.create=function(e,t){e=b(e);return t&&S.extendOwn(e,t),e},S.clone=function(e){return S.isObject(e)?S.isArray(e)?e.slice():S.extend({},e):e},S.tap=function(e,t){return t(e),e},S.isMatch=function(e,t){var n=S.keys(t),i=n.length;if(null==e)return!i;for(var a=Object(e),o=0;o<i;o++){var s=n[o];if(t[s]!==a[s]||!(s in a))return!1}return!0};var $=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof S&&(e=e._wrapped),t instanceof S&&(t=t._wrapped);var a=p.call(e);if(a!==p.call(t))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t}var o="[object Array]"===a;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,a=t.constructor;if(s!==a&&!(S.isFunction(s)&&s instanceof s&&S.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}i=i||[];for(var r=(n=n||[]).length;r--;)if(n[r]===e)return i[r]===t;if(n.push(e),i.push(t),o){if((r=e.length)!==t.length)return!1;for(;r--;)if(!$(e[r],t[r],n,i))return!1}else{var l,c=S.keys(e),r=c.length;if(S.keys(t).length!==r)return!1;for(;r--;)if(l=c[r],!S.has(t,l)||!$(e[l],t[l],n,i))return!1}return n.pop(),i.pop(),!0};S.isEqual=function(e,t){return $(e,t)},S.isEmpty=function(e){return null==e||(k(e)&&(S.isArray(e)||S.isString(e)||S.isArguments(e))?0===e.length:0===S.keys(e).length)},S.isElement=function(e){return!(!e||1!==e.nodeType)},S.isArray=g||function(e){return"[object Array]"===p.call(e)},S.isObject=function(e){var t=typeof e;return"function"==t||"object"==t&&!!e},S.each(["Arguments","Function","String","Number","Date","RegExp","Error"],(function(t){S["is"+t]=function(e){return p.call(e)==="[object "+t+"]"}})),S.isArguments(arguments)||(S.isArguments=function(e){return S.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(S.isFunction=function(e){return"function"==typeof e||!1}),S.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},S.isNaN=function(e){return S.isNumber(e)&&e!==+e},S.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===p.call(e)},S.isNull=function(e){return null===e},S.isUndefined=function(e){return void 0===e},S.has=function(e,t){return null!=e&&f.call(e,t)},S.noConflict=function(){return o._=s,this},S.identity=function(e){return e},S.constant=function(e){return function(){return e}},S.noop=function(){},S.property=B,S.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},S.matcher=S.matches=function(t){return t=S.extendOwn({},t),function(e){return S.isMatch(e,t)}},S.times=function(e,t,n){var i=Array(Math.max(0,e));t=y(t,n,1);for(var a=0;a<e;a++)i[a]=t(a);return i},S.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},S.now=Date.now||function(){return(new Date).getTime()};w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},g=S.invert(w),B=function(t){function n(e){return t[e]}var e="(?:"+S.keys(t).join("|")+")",i=RegExp(e),a=RegExp(e,"g");return function(e){return i.test(e=null==e?"":""+e)?e.replace(a,n):e}};S.escape=B(w),S.unescape=B(g),S.result=function(e,t,n){t=null==e?void 0:e[t];return S.isFunction(t=void 0===t?n:t)?t.call(e):t};var A=0;S.uniqueId=function(e){var t=++A+"";return e?e+t:t},S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};function R(e){return"\\"+L[e]}var P=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\u2028|\u2029/g;S.template=function(o,e,t){e=S.defaults({},e=!e&&t?t:e,S.templateSettings);var t=RegExp([(e.escape||P).source,(e.interpolate||P).source,(e.evaluate||P).source].join("|")+"|$","g"),s=0,r="__p+='";o.replace(t,(function(e,t,n,i,a){return r+=o.slice(s,a).replace(D,R),s=a+e.length,t?r+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":n?r+="'+\n((__t=("+n+"))==null?'':__t)+\n'":i&&(r+="';\n"+i+"\n__p+='"),e})),r+="';\n",r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+(r=!e.variable?"with(obj||{}){\n"+r+"}\n":r)+"return __p;\n";try{var n=new Function(e.variable||"obj","_",r)}catch(e){throw e.source=r,e}t=function(e){return n.call(this,e,S)},e=e.variable||"obj";return t.source="function("+e+"){\n"+r+"}",t},S.chain=function(e){e=S(e);return e._chain=!0,e};function O(e,t){return e._chain?S(t).chain():t}S.mixin=function(n){S.each(S.functions(n),(function(e){var t=S[e]=n[e];S.prototype[e]=function(){var e=[this._wrapped];return d.apply(e,arguments),O(this,t.apply(S,e))}}))},S.mixin(S),S.each(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var n=r[t];S.prototype[t]=function(){var e=this._wrapped;return n.apply(e,arguments),"shift"!==t&&"splice"!==t||0!==e.length||delete e[0],O(this,e)}})),S.each(["concat","join","slice"],(function(e){var t=r[e];S.prototype[e]=function(){return O(this,t.apply(this._wrapped,arguments))}})),S.prototype.value=function(){return this._wrapped},S.prototype.valueOf=S.prototype.toJSON=S.prototype.value,S.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],(function(){return S}))}.call(this),(function(e){"function"==typeof define&&define.amd?define("typeahead.js",["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)})((function(p){var f=(function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isArray:p.isArray,isFunction:p.isFunction,isObject:p.isPlainObject,isUndefined:function(e){return void 0===e},isElement:function(e){return!(!e||1!==e.nodeType)},isJQuery:function(e){return e instanceof p},toStr:function(e){return f.isUndefined(e)||null===e?"":e+""},bind:p.proxy,each:function(e,n){p.each(e,(function(e,t){return n(t,e)}))},map:p.map,filter:p.grep,every:function(n,i){var a=!0;return n?(p.each(n,(function(e,t){if(!(a=i.call(null,t,e,n)))return!1})),!!a):a},some:function(n,i){var a=!1;return n?(p.each(n,(function(e,t){if(a=i.call(null,t,e,n))return!1})),!!a):a},mixin:p.extend,identity:function(e){return e},clone:function(e){return p.extend(!0,{},e)},getIdGenerator:function(){var e=0;return function(){return e++}},templatify:function(e){return p.isFunction(e)?e:function(){return String(e)}},defer:function(e){setTimeout(e,0)},debounce:function(a,o,s){var r,l;return function(){var e=this,t=arguments,n=function(){r=null,s||(l=a.apply(e,t))},i=s&&!r;return clearTimeout(r),r=setTimeout(n,o),l=i?a.apply(e,t):l}},throttle:function(n,i){var a,o,s,r,l=0,c=function(){l=new Date,s=null,r=n.apply(a,o)};return function(){var e=new Date,t=i-(e-l);return a=this,o=arguments,t<=0?(clearTimeout(s),s=null,l=e,r=n.apply(a,o)):s=s||setTimeout(c,t),r}},stringify:function(e){return f.isString(e)?e:JSON.stringify(e)},noop:function(){}}})(),n=(function(){"use strict";var n={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return function(e){var t;return e=f.mixin({},n,e),{css:(t={css:(function(){var e={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",width:"100%",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};f.isMsie()&&f.mixin(e.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"});return e})(),classes:e,html:(function(e){return{wrapper:'<span class="'+e.wrapper+'"></span>',menu:'<div class="'+e.menu+'"></div>'}})(e),selectors:(function(e){var n={};return f.each(e,(function(e,t){n[t]="."+e})),n})(e)}).css,html:t.html,classes:t.classes,selectors:t.selectors,mixin:function(e){f.mixin(e,t)}}}})(),u=(function(){"use strict";var t;function e(e){e&&e.el||p.error("EventBus initialized without el"),this.$el=p(e.el)}return t={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},f.mixin(e.prototype,{_trigger:function(e,t){e=p.Event("typeahead:"+e);return(t=t||[]).unshift(e),this.$el.trigger.apply(this.$el,t),e},before:function(e){var t=[].slice.call(arguments,1);return this._trigger("before"+e,t).isDefaultPrevented()},trigger:function(e){this._trigger(e,[].slice.call(arguments,1)),(e=t[e])&&this._trigger(e,[].slice.call(arguments,1))}}),e})(),t=(function(){"use strict";var r=/\s+/,o=(function(){var e;e=window.setImmediate?function(e){setImmediate((function(){e()}))}:function(e){setTimeout((function(){e()}),0)};return e})();return{onSync:function(e,t,n){return i.call(this,"sync",e,t,n)},onAsync:function(e,t,n){return i.call(this,"async",e,t,n)},off:function(e){var t;if(!this._callbacks)return this;e=e.split(r);for(;t=e.shift();)delete this._callbacks[t];return this},trigger:function(e){var t,n,i,a;if(!this._callbacks)return this;e=e.split(r),n=[].slice.call(arguments,1);for(;(a=e.shift())&&(t=this._callbacks[a]);)i=s(t.sync,this,[a].concat(n)),a=s(t.async,this,[a].concat(n)),i()&&o(a);return this}};function i(e,t,n,i){var a,o,s;if(!n)return this;for(t=t.split(r),n=i?(s=i,(o=n).bind?o.bind(s):function(){o.apply(s,[].slice.call(arguments,0))}):n,this._callbacks=this._callbacks||{};a=t.shift();)this._callbacks[a]=this._callbacks[a]||{sync:[],async:[]},this._callbacks[a][e].push(n);return this}function s(i,a,o){return function(){for(var e,t=0,n=i.length;!e&&t<n;t+=1)e=!1===i[t].apply(a,o);return!e}}})(),g=(function(s){"use strict";var e={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(a){var o;(a=f.mixin({},e,a)).node&&a.pattern&&(a.pattern=f.isArray(a.pattern)?a.pattern:[a.pattern],o=(function(e,t,n){for(var i=[],a=0,o=e.length;a<o;a++)i.push(f.escapeRegExChars(e[a]));return n=n?"\\b("+i.join("|")+")\\b":"("+i.join("|")+")",t?new RegExp(n):new RegExp(n,"i")})(a.pattern,a.caseSensitive,a.wordsOnly),(function e(t,n){var i;for(var a=0;a<t.childNodes.length;a++)3===(i=t.childNodes[a]).nodeType?a+=n(i)?1:0:e(i,n)})(a.node,(function(e){var t,n,i;(t=o.exec(e.data))&&(i=s.createElement(a.tagName),a.className&&(i.className=a.className),(n=e.splitText(t.index)).splitText(t[0].length),i.appendChild(n.cloneNode(!0)),e.parentNode.replaceChild(i,n));return!!t})))}})(window.document),h=(function(){"use strict";var o;function a(e,t){(e=e||{}).input||p.error("input is missing"),t.mixin(this),this.$hint=p(e.hint),this.$input=p(e.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=(e=this.$input,p('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=f.noop)}return o={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},a.normalizeQuery=function(e){return f.toStr(e).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},f.mixin(a.prototype,t,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(e){var t=o[e.which||e.keyCode];this._managePreventDefault(t,e),t&&this._shouldTrigger(t,e)&&this.trigger(t+"Keyed",e)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(e,t){var n;switch(e){case"up":case"down":n=!i(t);break;default:n=!1}n&&t.preventDefault()},_shouldTrigger:function(e,t){t="tab"!==e||!i(t);return t},_checkLanguageDirection:function(){var e=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==e&&(this.dir=e,this.$hint.attr("dir",e),this.trigger("langDirChanged",e))},_setQuery:function(e,t){var n,i;i=this.query,i=(n=a.normalizeQuery(e)===a.normalizeQuery(i))&&this.query.length!==e.length,this.query=e,t||n?!t&&i&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var t=this,e=f.bind(this._onBlur,this),n=f.bind(this._onFocus,this),i=f.bind(this._onKeydown,this),a=f.bind(this._onInput,this);return this.$input.on("blur.tt",e).on("focus.tt",n).on("keydown.tt",i),!f.isMsie()||9<f.isMsie()?this.$input.on("input.tt",a):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",(function(e){o[e.which||e.keyCode]||f.defer(f.bind(t._onInput,t,e))})),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(e,t){this.setInputValue(e),this._setQuery(e,t)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(e){this.$input.val(e),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(e){this.$hint.val(e)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var e=this.getInputValue(),t=this.getHint(),t=e!==t&&0===t.indexOf(e);""!==e&&t&&!this.hasOverflow()||this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var e=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=e},isCursorAtEnd:function(){var e=this.$input.val().length,t=this.$input[0].selectionStart;return f.isNumber(t)?t===e:!document.selection||((t=document.selection.createRange()).moveStart("character",-e),e===t.text.length)},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=p("<div>")}}),a;function i(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}})(),a=(function(){"use strict";var d,a;function e(e,t){var n,i;(e=e||{}).templates=e.templates||{},e.templates.notFound=e.templates.notFound||e.templates.empty,e.source||p.error("missing source"),e.node||p.error("missing node"),e.name&&!/^[_a-zA-Z0-9-]+$/.test(e.name)&&p.error("invalid dataset name: "+e.name),t.mixin(this),this.highlight=!!e.highlight,this.name=e.name||a(),this.limit=e.limit||5,this.displayFn=(n=(n=e.display||e.displayKey)||f.stringify,f.isFunction(n)?n:function(e){return e[n]}),this.displayCategory=e.displayCategory||!1,this.templates=(t=e.templates,i=this.displayFn,{notFound:t.notFound&&f.templatify(t.notFound),pending:t.pending&&f.templatify(t.pending),header:t.header&&f.templatify(t.header),footer:t.footer&&f.templatify(t.footer),suggestion:t.suggestion||function(e){return p("<div>").text(i(e))},category:{header:t.category&&t.category.header||function(e){return p("<div>").text(e)}}}),this.source=e.source.__ttAdapter?e.source.__ttAdapter():e.source,this.async=f.isUndefined(e.async)?2<this.source.length:!!e.async,this._resetLastSuggestion(),this.$el=p(e.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}return d={val:"tt-selectable-display",obj:"tt-selectable-object"},a=f.getIdGenerator(),e.extractData=function(e){e=p(e);return e.data(d.obj)?{val:e.data(d.val)||"",obj:e.data(d.obj)||null}:null},f.mixin(e.prototype,t,{_overwrite:function(e,t){(t=t||[]).length?this._renderSuggestions(e,t):this.async&&this.templates.pending?this._renderPending(e):!this.async&&this.templates.notFound?this._renderNotFound(e):this._empty(),this.trigger("rendered",this.name,t,!1)},_append:function(e,t){(t=t||[]).length&&this.$lastSuggestion.length?this._appendSuggestions(e,t):t.length?this._renderSuggestions(e,t):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(e),this.trigger("rendered",this.name,t,!0)},_renderSuggestions:function(e,t){var n=this.displayCategory?this._getCategorizedSuggestionsFragment(e,t):this._getSuggestionsFragment(e,t);this.$lastSuggestion=n.children().last(),this.$el.html(n).prepend(this._getHeader(e,t)).append(this._getFooter(e,t))},_appendSuggestions:function(e,t){e=this._getSuggestionsFragment(e,t),t=e.children().last();this.$lastSuggestion.after(e),this.$lastSuggestion=t},_renderPending:function(e){var t=this.templates.pending;this._resetLastSuggestion(),t&&this.$el.html(t({query:e,dataset:this.name}))},_renderNotFound:function(e){var t=this.templates.notFound;this._resetLastSuggestion(),t&&this.$el.html(t({query:e,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(n,e){var i=this,a=document.createDocumentFragment();return f.each(e,(function(e){var t=i._injectQuery(n,e),e=p(i.templates.suggestion(t)).data(d.obj,e).data(d.val,i.displayFn(e)).addClass(i.classes.suggestion+" "+i.classes.selectable);a.appendChild(e[0])})),this.highlight&&g({className:this.classes.highlight,node:a,pattern:n}),p(a)},_getCategorizedSuggestionsFragment:function(r,e){var l=this,n={},t=[],i=document.createDocumentFragment();f.each(e,(function(e,t){void 0===n.sequenceCategory&&(n.sequenceCategory=[]),n.sequenceCategory.push(e)}));for(var a=0;a<1;a++){var o=t[a],c=document.createDocumentFragment(),s=n.sequenceCategory,o=p(l.templates.category.header(o)).data(d.obj,o).data(d.val,o).addClass(l.classes.category);f.each(s,(function(e){var t=l._injectQuery(r,e),n=p(l.templates.suggestion(t)).data(d.obj,e).data(d.val,l.displayFn(e)).addClass(l.classes.suggestion+" "+l.classes.selectable),i=document.createElement("div");i.setAttribute("style","width:25px; height:25px; margin-right:10px;");var a,o,s,t='<svg height="100%" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><use xlink:href="'+(a=null!=e.group?e.group.toLowerCase():"",o=null!=e.type?e.type.toLowerCase():"",s="/icons/search-icons.svg#icon-","mc"===(null!=e.eventStrTags?e.eventStrTags[0]:"")?s+"movie-club":"event"===a?s+a+"-"+o:a?s+a:s+"movies")+'"></use></svg>';"videos"!=pageName&&(p(i).append(t),p(n[0]).css("padding","15px"),p(n[0]).css("min-height","60px"),p(n[0]).css("border-bottom","solid 1px #E5E5E5"),p(n[0]).css("display","flex"),p(n[0]).css("flex-direction","row"),p(n[0]).css("align-items","center"),p(n[0]).css("justify-content","flex-start"),(t=document.createElement("div")).setAttribute("style","padding : 5px 0; width: calc(100% - 35px);"),p(t).html(p(n[0]).html()),p(n[0]).html(""),p(n[0]).append(p(i)).append(p(t))),c.appendChild(n[0])})),this.highlight&&g({className:this.classes.highlight,node:c,pattern:r}),i.appendChild(o[0]),i.appendChild(c)}return p(i)},_getFooter:function(e,t){return this.templates.footer?this.templates.footer({query:e,suggestions:t,dataset:this.name}):null},_getHeader:function(e,t){return this.templates.header?this.templates.header({query:e,suggestions:t,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=p()},_injectQuery:function(e,t){return f.isObject(t)?f.mixin({_query:e},t):t},update:function(t){var n=this,i=!1,a=!1,o=0;function e(e){a||(a=!0,e=(e||[]).slice(0,n.limit),o=e.length,n._overwrite(t,e),o<n.limit&&n.async&&n.trigger("asyncRequested",t))}this.cancel(),this.cancel=function(){i=!0,n.cancel=p.noop,n.async&&n.trigger("asyncCanceled",t)},this.source(t,e,(function(e){e=e||[],!i&&o<n.limit&&(n.cancel=p.noop,n._append(t,e.slice(0,n.limit-o)),o+=e.length,n.async&&n.trigger("asyncReceived",t))})),a||e([])},cancel:p.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=p("<div>")}}),e})(),m=(function(){"use strict";function e(e,n){var i=this;(e=e||{}).node||p.error("node is required"),n.mixin(this),this.$node=p(e.node),this.query=null,this.datasets=f.map(e.datasets,(function(e){var t=i.$node.find(e.node).first();return e.node=t.length?t:p("<div>").appendTo(i.$node),new a(e,n)}))}return f.mixin(e.prototype,t,{_onSelectableClick:function(e){this.trigger("selectableClicked",p(e.currentTarget))},_onRendered:function(e,t,n,i){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",t,n,i)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){return f.every(this.datasets,(function(e){return e.isEmpty()}))},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var e=this.getActiveSelectable();e&&e.removeClass(this.classes.cursor)},_ensureVisible:function(e){var t=e.position().top,n=t+e.outerHeight(!0),i=this.$node.scrollTop(),e=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10);t<0?this.$node.scrollTop(i+t):e<n&&this.$node.scrollTop(i+(n-e))},bind:function(){var t=this,e=f.bind(this._onSelectableClick,this);return this.$node.on("click.tt",this.selectors.selectable,e),f.each(this.datasets,(function(e){e.onSync("asyncRequested",t._propagate,t).onSync("asyncCanceled",t._propagate,t).onSync("asyncReceived",t._propagate,t).onSync("rendered",t._onRendered,t).onSync("cleared",t._onCleared,t)})),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.addClass(this.classes.open)},close:function(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(e){this.$node.attr("dir",e)},selectableRelativeToCursor:function(e){var t=this.getActiveSelectable(),n=this._getSelectables(),e=(t?n.index(t):-1)+e;return-1===(e=(e=(e+1)%(n.length+1)-1)<-1?n.length-1:e)?null:n.eq(e)},setCursor:function(e){this._removeCursor(),(e=e&&e.first())&&(e.addClass(this.classes.cursor),this._ensureVisible(e))},getSelectableData:function(e){return e&&e.length?a.extractData(e):null},getActiveSelectable:function(){var e=this._getSelectables().filter(this.selectors.cursor).first();return e.length?e:null},getTopSelectable:function(){var e=this._getSelectables().first();return e.length?e:null},update:function(t){var e=t!==this.query;return e&&(this.query=t,f.each(this.datasets,(function(e){e.update(t)}))),e},empty:function(){f.each(this.datasets,(function(e){e.clear()})),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){this.$node.off(".tt"),this.$node=p("<div>"),f.each(this.datasets,(function(e){e.destroy()}))}}),e})(),v=(function(){"use strict";var t=m.prototype;function e(){m.apply(this,[].slice.call(arguments,0))}return f.mixin(e.prototype,m.prototype,{open:function(){return this._allDatasetsEmpty()||this._show(),t.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),t.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),t._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),t._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(e){return this.$node.css("ltr"===e?this.css.ltr:this.css.rtl),t.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),e})(),S=(function(){"use strict";function e(e,t){var n,i,a,o,s,r,l,c,d;(e=e||{}).input||p.error("missing input"),e.menu||p.error("missing menu"),e.eventBus||p.error("missing event bus"),t.mixin(this),this.eventBus=e.eventBus,this.minLength=f.isNumber(e.minLength)?e.minLength:1,this.input=e.input,this.menu=e.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),n=u(this,"activate","open","_onFocused"),i=u(this,"deactivate","_onBlurred"),a=u(this,"isActive","isOpen","_onEnterKeyed"),o=u(this,"isActive","isOpen","_onTabKeyed"),s=u(this,"isActive","_onEscKeyed"),r=u(this,"isActive","open","_onUpKeyed"),l=u(this,"isActive","open","_onDownKeyed"),c=u(this,"isActive","isOpen","_onLeftKeyed"),d=u(this,"isActive","isOpen","_onRightKeyed"),t=u(this,"_openIfActive","_onQueryChanged"),e=u(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",n,this).onSync("blurred",i,this).onSync("enterKeyed",a,this).onSync("tabKeyed",o,this).onSync("escKeyed",s,this).onSync("upKeyed",r,this).onSync("downKeyed",l,this).onSync("leftKeyed",c,this).onSync("rightKeyed",d,this).onSync("queryChanged",t,this).onSync("whitespaceChanged",e,this).onSync("langDirChanged",this._onLangDirChanged,this)}return f.mixin(e.prototype,{_hacks:function(){var i=this.input.$input||p("<div>"),a=this.menu.$node||p("<div>");i.on("blur.tt",(function(e){var t=document.activeElement,n=a.is(t),t=0<a.has(t).length;f.isMsie()&&(n||t)&&(e.preventDefault(),e.stopImmediatePropagation(),f.defer((function(){i.focus()})))})),a.on("mousedown.tt",(function(e){e.preventDefault()}))},_onSelectableClicked:function(e,t){this.select(t)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(e,t,n,i){this._updateHint(),this.eventBus.trigger("render",n,i,t)},_onAsyncRequested:function(e,t,n){this.eventBus.trigger("asyncrequest",n,t)},_onAsyncCanceled:function(e,t,n){this.eventBus.trigger("asynccancel",n,t)},_onAsyncReceived:function(e,t,n){this.eventBus.trigger("asyncreceive",n,t)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(e,t){var n;(n=this.menu.getActiveSelectable())&&this.select(n)&&t.preventDefault()},_onTabKeyed:function(e,t){var n;(n=this.menu.getActiveSelectable())?this.select(n)&&t.preventDefault():(n=this.menu.getTopSelectable())&&this.autocomplete(n)&&t.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function(e,t){this._minLengthMet(t)?this.menu.update(t):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(e,t){this.dir!==t&&(this.dir=t,this.menu.setLanguageDirection(t))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(e){return(e=f.isString(e)?e:this.input.getQuery()||"").length>=this.minLength},_updateHint:function(){var e=this.menu.getTopSelectable(),t=this.menu.getSelectableData(e),n=this.input.getInputValue();!t||f.isBlankString(n)||this.input.hasOverflow()?this.input.clearHint():(e=h.normalizeQuery(n),e=f.escapeRegExChars(e),(t=new RegExp("^(?:"+e+")(.+$)","i").exec(t.val))&&this.input.setHint(n+t[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return!!this.isActive()||!(!this.isEnabled()||this.eventBus.before("active"))&&(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return!this.isActive()||!this.eventBus.before("idle")&&(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0)},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(e){this.input.setQuery(f.toStr(e))},getVal:function(){return this.input.getQuery()},select:function(e){e=this.menu.getSelectableData(e);return!(!e||this.eventBus.before("select",e.obj))&&(this.input.setQuery(e.val,!0),this.eventBus.trigger("select",e.obj),this.close(),!0)},autocomplete:function(e){var t=this.input.getQuery(),e=this.menu.getSelectableData(e);return!(!e||t===e.val||this.eventBus.before("autocomplete",e.obj))&&(this.input.setQuery(e.val),this.eventBus.trigger("autocomplete",e.obj),!0)},moveCursor:function(e){var t=this.input.getQuery(),n=this.menu.selectableRelativeToCursor(e),i=this.menu.getSelectableData(n),e=i?i.obj:null;return!(this._minLengthMet()&&this.menu.update(t)||this.eventBus.before("cursorchange",e))&&(this.menu.setCursor(n),i?this.input.setInputValue(i.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",e),!0)},destroy:function(){this.input.destroy(),this.menu.destroy()}}),e;function u(n){var e=[].slice.call(arguments,1);return function(){var t=[].slice.call(arguments);f.each(e,(function(e){return n[e].apply(n,t)}))}}})();!(function(){"use strict";var e,c,t;function i(e,n){e.each((function(){var e,t=p(this);(e=t.data(c.typeahead))&&n(e,t)}))}function d(e){e=f.isJQuery(e)||f.isElement(e)?p(e).first():[];return e.length?e:null}e=p.fn.typeahead,c={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},t={initialize:function(s,r){var l;return r=f.isArray(r)?r:[].slice.call(arguments,1),l=n((s=s||{}).classNames),this.each((function(){var e,t,n,i,a,o;f.each(r,(function(e){e.highlight=!!s.highlight})),e=p(this),t=p(l.html.wrapper),n=d(s.hint),i=d(s.menu),o=!1!==s.hint&&!n,a=!1!==s.menu&&!i,o&&(n=(function(e,t){return e.clone().addClass(t.classes.hint).removeData().css(t.css.hint).css(function(e){return{backgroundAttachment:e.css("background-attachment"),backgroundClip:e.css("background-clip"),backgroundColor:e.css("background-color"),backgroundImage:e.css("background-image"),backgroundOrigin:e.css("background-origin"),backgroundPosition:e.css("background-position"),backgroundRepeat:e.css("background-repeat"),backgroundSize:e.css("background-size")}}(e)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})})(e,l)),a&&(i=p(l.html.menu).css(l.css.menu)),n&&n.val(""),e=(function(e,t){e.data(c.attrs,{dir:e.attr("dir"),autocomplete:e.attr("autocomplete"),spellcheck:e.attr("spellcheck"),style:e.attr("style")}),e.addClass(t.classes.input).attr({autocomplete:"off",spellcheck:!1});try{e.attr("dir")||e.attr("dir","auto")}catch(e){}return e})(e,l),(o||a)&&(t.css(l.css.wrapper),e.css(o?l.css.input:l.css.inputWithNoHint),e.wrap(t).parent().prepend(o?n:null).append(a?i:null));o=a?v:m,a=new u({el:e}),n=new h({hint:n,input:e},l),i=new o({node:i,datasets:r},l),a=new S({input:n,menu:i,eventBus:a,minLength:s.minLength},l),e.data(c.www,l),e.data(c.typeahead,a)}))},isEnabled:function(){var t;return i(this.first(),(function(e){t=e.isEnabled()})),t},enable:function(){return i(this,(function(e){e.enable()})),this},disable:function(){return i(this,(function(e){e.disable()})),this},isActive:function(){var t;return i(this.first(),(function(e){t=e.isActive()})),t},activate:function(){return i(this,(function(e){e.activate()})),this},deactivate:function(){return i(this,(function(e){e.deactivate()})),this},isOpen:function(){var t;return i(this.first(),(function(e){t=e.isOpen()})),t},open:function(){return i(this,(function(e){e.open()})),this},close:function(){return i(this,(function(e){e.close()})),this},select:function(e){var t=!1,n=p(e);return i(this.first(),(function(e){t=e.select(n)})),t},autocomplete:function(e){var t=!1,n=p(e);return i(this.first(),(function(e){t=e.autocomplete(n)})),t},moveCursor:function(t){var n=!1;return i(this.first(),(function(e){n=e.moveCursor(t)})),n},val:function(t){var n;return arguments.length?(i(this,(function(e){e.setVal(t)})),this):(i(this.first(),(function(e){n=e.getVal()})),n)},destroy:function(){return i(this,(function(e,t){var n,i;i=(n=t).data(c.www),t=n.parent().filter(i.selectors.wrapper),f.each(n.data(c.attrs),(function(e,t){f.isUndefined(e)?n.removeAttr(t):n.attr(t,e)})),n.removeData(c.typeahead).removeData(c.www).removeData(c.attr).removeClass(i.classes.input),t.length&&(n.detach().insertAfter(t),t.remove()),e.destroy()})),this}},p.fn.typeahead=function(e){return t[e]?t[e].apply(this,[].slice.call(arguments,1)):t.initialize.apply(this,arguments)},p.fn.typeahead.noConflict=function(){return p.fn.typeahead=e,this}})()})),(function(i){i.fn.typeaheadWrapper=function(e){var t=i(this),n=i.extend(!0,{config:{hint:!0,highlight:!0,minLength:2},dataSet:{name:"result",source:function(){return[]},templates:{notFound:'<div class="tt-no-results">No matching results</div>',pending:'<div class="tt-searching">Searching...</div>'}},onResultSelection:function(e,t){}},e),e=function(){t.parent().find(".tt-suggestion").first().addClass("tt-cursor")};return t.typeahead(n.config,n.dataSet),t.bind("keyup",(function(e){i(this).typeahead("val").length<n.config.minLength||13!==e.keyCode||t.parent().find(".tt-cursor").trigger("click")})),t.bind("typeahead:render",e),t.bind("typeahead:open",e),_.isFunction(n.onResultSelection)&&t.bind("typeahead:select",n.onResultSelection),t}})(jQuery),(function(p){"use strict";var g={},h={},o={},e={},r={container:{},filters:{},grid:{},tabs:{},cinemas:{grid:{}}},f={},l={},c=!1,n=null,i=null,a=null,s=null,d=null,u=null,m=null,v=["2D","3D"],S=null,y=null,M=BMS.Misc.fnUrlName(BMS.Storage.get({name:"Rgn",key:"text"})),b=BMS.Misc.fnUrlName(BMS.Storage.get({name:"Rgn",key:"Code"})),t=BMS.Storage.get({name:"Rgn",key:"subregionDetails"}),w=""!=t?BMS.Misc.fnUrlName(JSON.parse(t).SubRegionName.toLowerCase()):"",B=""!=t?JSON.parse(t).SubRegionCode.toLowerCase():"",C={},k=100,E=90,T=-20,I=90,x=null,$=!1,A=null,R=!1,P="movies";function L(e){_.isArray(e)||(e=[e]),x.rejectWith({type:P},e)}function D(e){var t;t=e.recommendedData,_.isUndefined(t)||_.isNull(t)||_.isEmpty(t.data)||_.isEmpty(t.data.QUICKBOOK)||(u=t.data.QUICKBOOK.MT,h.recommendEvents=h.getRecommendedEvents(),_.isEmpty(BMS.Misc)||_.isEmpty(BMS.Misc.Showtimes)||!_.isFunction(BMS.Misc.Showtimes.renderRecommendations)||BMS.Misc.Showtimes.renderRecommendations(t)),_.isEmpty(e.moviesData)&&_.isEmpty(e.cinemas)?_.isEmpty(x)||L({error:"no-data"}):(n=e.moviesData&&e.moviesData.BookMyShow||{},a=n.arrEvents,d=n.arrLanguages,_.isEmpty(e.cinemas)||_.isEmpty(e.cinemas.BookMyShow)||_.isEmpty(e.cinemas.BookMyShow.aiVN)||(i=e.cinemas.BookMyShow,s=i.aiVN.venues||{}),h.events=h.getEvents(),h.languages=h.getLanguages(),(function(e){_.isUndefined(e)||_.isNull(e)||_.isEmpty(e.data)||_.isEmpty(e.data.LANGTRANS)||(m=e.data.LANGTRANS.MT.Languages,h.preferredLanguages=h.getPreferredLanguages());h.getPersistentFilters()})(e.preferredLanguages),h.dimensions=h.getDimensions(),h.langSequence=h.getLangSequence(),h.cinemas=h.getCinemas(),h.subRegions=h.getSubRegions(),!0!==$&&(f.quickBook(),l.dispatchRecommendWizEvent()))}function O(e){if(!_.isEmpty(n))return h.getPersistentFilters(),f.quickBook(),void l.dispatchRecommendWizEvent();var t;!_.isEmpty(A)&&1!=$||(t={url:"/serv/getData",data:{cmd:"QUICKBOOK",type:"MT"}},!0===BMS.Storage.isset({name:"ld"})&&(t.data.getSeenData=1),t.data.getRecommendedData=1,(A=g.makeAjaxCall(t)).done((function(e){D(e)})),A.fail((function(){_.isEmpty(x)||L({error:"ajax"})})))}var N,U=new Date,t=N=U.getDay();t+=5<=N?1:8;var G=new Date(U);G.setDate(U.getDate()-t),G.setHours(0,0,0,0),g={sanitize:{date:function(e){e=e.split("-");return new Date(e[0],e[1]-1,e[2])},time:function(e){var t=e.getHours(),e=e.getMinutes();return 12<t&&(t-=12),t+":"+(e=e<10?"0"+e:e)+" pm"},boolean:function(n){return"string"==typeof n?"Y"==n?n=!0:"N"==n?n=!1:n:("object"!=typeof n&&"array"!=typeof n||_.each(n,(function(e,t){n[t]=g.sanitize.boolean(e)})),n)}},render:function(e,s,t){var n=p("#"+e).html();if(!p.isEmptyObject(n)){e=n.split("\n").join("");var r,i,a=/([$\^\\\/()|?+*\[\]{}.\-])/g;return t=t||{},n=(i="{{}}").length,r=Math.ceil(n/2),t=i.substr(0,r).replace(a,"\\$1"),a=i.substr(r,n).replace(a,"\\$1")||t,a=new RegExp(t+"[^"+t+a+"]+"+a,"g"),e.replace(a,(function(e){var t,n=e.slice(r,-r),i=n.split("."),a=0,o=i.length;if(n in s)t=s[n];else for(t=s;a<o;a++){if(!(i[a]in t))return e;t=t[i[a]]}return t}))}},eventMatchesFilter:function(e){var t=!0;return C.hasOwnProperty("dimension")&&(t=-1!==C.dimension.indexOf(e.dimension)),t=(t=C.hasOwnProperty("language")?-1!==C.language.indexOf(e.lang):t)&&C.hasOwnProperty("isAtmosEnabled")?!0===e.isAtmosEnabled:t},cinemaMatchesFilter:function(e){var t=!0;return t=C.hasOwnProperty("subRegion")?-1!==C.subRegion.indexOf(e.subRegionCode):t},isNewEvent:function(e){e=new Date(e);return e.setHours(0,0,0,0),G<=e},formattedDate:function(e,t){t=t||"-";var n=(n=(e=e instanceof Date?e:new Date(e)).getMonth()+1)<10?"0"+n:n;return e.getFullYear()+t+n+t+e.getDate()},sortDimensions:function(e){var i=/^\d+/,a=[],o=[],s={};e.forEach((function(e,t){var n=e.match(i);null!==n?void 0===s[n]?(s[n]=[e],a.push(n)):s[n].push(e):o.push(e)}));var e=a.sort((function(e,t){return e-t})),t=[];e.forEach((function(e){e=s[e];1===e.length?t.push(e[0]):(e.sort(),t=t.concat(e))}));e=o.sort();return t.concat(e)},makeAjaxCall:function(e){return p.ajax({url:e.url,data:e.data,dataType:e.responseType||"JSON",method:e.method||"GET",cache:!1})}},h.getCinemas=function(){var a={},o=BMS.Misc.QuickbookModal.getPreferredCinemas();return _.isEmpty(s)||s.forEach((function(e){var t=e.VenueCode,n=e.VenueName,i="/buytickets/"+BMS.Misc.fnUrlName(n.toLowerCase())+"-"+(""!=w?w:M.toLowerCase())+"/cinema-"+(""!=B?B:b.toLowerCase())+"-"+t+"-MT";a[t]={venueCode:t,companyCode:e.CompanyCode,name:n,isAtmosEnabled:e.IsATMOSEnabled,url:i,isPreferred:!_.isUndefined(o[t]),latitude:e.VenueLatitude,longitude:e.VenueLongitude,subRegionCode:e.VenueSubRegionCode,subRegionName:e.VenueSubRegionName,isCinemaNew:"Y"==e.CinemaIsNew,CinemaUnpaidFlag:e.CinemaUnpaidFlag}})),a},h.getSubRegions=function(){var t={};return _.each(h.cinemas,(function(e){_.isEmpty(e.subRegionName)||_.isEmpty(e.subRegionCode)||(t[e.subRegionCode]=e.subRegionName)})),_.map(t,(function(e,t){return{code:t,name:e}}))},h.eventTitleDim={},h.getEvents=function(){var p={};if(_.isEmpty(a))return p;var f=(f=BMS.Misc.fnUrlName(BMS.Storage.get({name:"Rgn",key:"text"}))).toLowerCase();return a.forEach((function(l,c){var d=l.EventTitle,e=l.ChildEvents,u=l.eventGroup;_.isUndefined(e)||e.forEach((function(e,t){var n=e.EventCode,i="/buytickets/"+(e.EventURL||"#")+"-"+(""!=w?w:f)+"/movie-"+(""!=B?B:b.toLowerCase())+"-"+n+"-MT",a=g.sanitize.boolean(e.isDefault),o=e.EventDimension.trim().toUpperCase(),s=g.sanitize.date(e.EventDate),r=!_.isEmpty(h.recommendEvents)&&h.recommendEvents.hasOwnProperty(n);p[n]={id:n,isMovieClubEnabled:"Y"===e.IsMovieClubEnabled,lang:e.EventLanguage,group:u,censor:e.EventCensor,genre:e.JsonGenre,url:i,syno:e.EventSyno,title:d,eventName:e.EventName,trailerUrl:e.TrailerURL,eventDate:s,isAtmosEnabled:g.sanitize.boolean(e.EventIsAtmosEnabled),duration:e.Duration,dimension:o,isDefault:a,isNew:e.isNewEvent&&"Y"==e.isNewEvent,sequence:c,isSeen:l.isSeen,isRated:l.isRated,isRecommended:r,avgRating:l.avgRating,totalVotes:l.totalVotes},a&&(h.eventTitleDim[d]={dim:o,eventId:n,isMovieClubEnabled:"Y"===e.IsMovieClubEnabled})}))})),p},h.getRecommendedEvents=function(){var n={};return u.forEach((function(e){var t=e.EventCode;n[t]={id:t,venueCode:e.VenueCode,dates:e.Dates}})),n},h.getLanguages=function(){var n=[];return _.each(d,(function(e){var t={};t.code=e.EventLangCode,t.name=e.EventLangName,n.push(t)})),n},h.getPreferredLanguages=function(){var i=[];return _.each(m,(function(e,t){var n={};n.language=t,i.push(n)})),i},h.getDimensions=function(){var t={};return _.each(h.events,(function(e){_.isEmpty(e.dimension)||(t[e.dimension]=!0)})),_.map(t,(function(e,t){return t}))},h.getLangSequence=function(){var n=[];return _.isEmpty(m)||_.each(m,(function(e,t){_.findWhere(h.languages,{name:t})&&n.push(t)})),_.each(h.languages,(function(e){n.push(e.name)})),n=_.uniq(n)},h.languagesEvents=null,h.getLanguagesEvents=function(){var r={},e=h.events;h.langSequence;return _.each(e,(function(e,t){var n=null,n=!!g.eventMatchesFilter(e),i=e.lang;(_.isUndefined(r[i])||_.isUndefined(r[i].events))&&(r[i]={events:{}});var a,o=r[e.lang].events,s=e.title;_.isUndefined(o[s])&&(o[s]={firstChildEventId:e.id},e.isFirstChild=!0),!0===n?(a=o[s].firstChildEventId,(i=h.events[a]).matchesFilter=!0,h.events[a]=i):e.isFirstChild&&(e.matchesFilter=n),o[s].isMovieClubEnabled=e.isMovieClubEnabled,_.isEmpty(e.dimension)||(_.isEmpty(o[s].dimensions)&&(o[s].dimensions=[]),e={dim:e.dimension,eventId:e.id},o[s].dimensions.push(e))})),r},h.calculateEventScore=function(e){var t=0;return!0===e.matchesFilter&&(t+=k),!0===e.isSeen&&(t+=T),!0===e.isRecommended&&(t+=E),t},h.calculateCinemaScore=function(e){var t=0;return!0===e.matchesFilter&&(t+=k),!0===e.isPreferred&&(t+=I),t},h.getScoredLanguagesEvents=function(){var e=p.extend(!0,{},h.getLanguagesEvents()),a={};return _.each(e,(function(e,t){var n=e.events,i=[],e=[];_.each(n,(function(e,t){var n=e.firstChildEventId,e={title:t,isMovieClubEnabled:e.isMovieClubEnabled,dimensions:e.dimensions,firstChildEventId:n},n=h.events[n];e.score=h.calculateEventScore(n),i.push(e)})),e=_(i).chain().sortBy((function(e){return e.title})).sortBy((function(e){return-e.score})).value(),a[t]={},a[t].events=e})),a},h.getPersistentFilters=function(){var e,n;!BMS.Storage.isset({name:"quickbook"})||(e=BMS.Storage.get({name:"quickbook",key:"moviefilters"}))&&(C=JSON.parse(e),_.isEmpty(h.preferredLanguages)||(_.each(h.preferredLanguages,(function(e,t){C.language.push(e.language)})),C.language=_.uniq(C.language)),n=[],_.each(C.language,(function(e,t){_.findWhere(h.languages,{name:e})&&n.push(e)})),C={},_.isEmpty(n)||(C.language=n))},h.getFilteredLanguageSequence=function(){if(C.hasOwnProperty("language")){var t=[];return _.each(h.langSequence,(function(e){-1<C.language.indexOf(e)&&t.push(e)})),_.each(h.languages,(function(e){t.push(e.name)})),t=_.uniq(t)}return h.langSequence},o.rows=function(){var o=[];h.languagesEvents=h.getScoredLanguagesEvents();for(var e=h.languagesEvents,t=h.getFilteredLanguageSequence(),n=0;n<t.length;n++){var i,s,a=t[n],r=e[a];_.isEmpty(r)||_.isEmpty(r.events)||(i=!0,_.each(r.events,(function(e){!_.isUndefined(e)&&p.isEmptyObject(e.firstChildEventId)&&(i=!1)})),i&&(r=r.events,o.push({text:a,type:"header"}),s=r.length,_.each(r,(function(e,t){var n,i,a=e.title;_.isEmpty(e.firstChildEventId)||(n={firstChildEventId:e.firstChildEventId,type:"evt",isMovieClubEnabled:e.isMovieClubEnabled,url:h.events[e.firstChildEventId].url},t==s-1&&(n.isLastRowForHeader=!0),_.isUndefined(e.dimensions)||_.isEmpty(e.dimensions)||(n.hasDimensions=!0,i=null,e.dimensions.forEach((function(e){var t=h.eventTitleDim[a];p.isEmptyObject(t)||e.dim!==t.dim||(i=e.eventId)})),_.isEmpty(i)||(n.url=h.events[i].url),n.dimensions=e.dimensions),o.push(n))}))))}return o},o.cinemaRows=function(){var t=[],e=_(h.cinemas).chain().each((function(e){e.matchesFilter=g.cinemaMatchesFilter(e),e.score=h.calculateCinemaScore(e)})).sortBy((function(e){return e.name})).sortBy((function(e){return-e.score})).value();return _.each(e,(function(e){t.push({type:"venue",venueCode:e.venueCode})})),t},o.gridBasedOnAverage=function(e){for(var t={},n=1,i=0,a=0;i<S;)_.isUndefined(t[n])&&(t[n]={rows:[]}),t[n].rows.push(e[i]),i++,++a===y&&(n++,a=0);return t},o.minDataGrid=function(e){for(var t={},n=0,i=0;i<S;)"header"===e[i].type&&(n++,0),_.isUndefined(t[n])&&(t[n]={rows:[]}),t[n].rows.push(e[i]),i++,0;return t},o.grid=function(){var e=o.rows();S=e.length,y=Math.ceil(S/4);var l=S<=10?p.extend(!0,{},o.minDataGrid(e)):p.extend(!0,{},o.gridBasedOnAverage(e)),c={},d=null,u=0;return _.each(l,(function(e,o){o=parseInt(o);var s=e.rows;_.isEmpty(c[o])&&(c[o]={rows:[]});var r=c[o].rows;s.forEach((function(e,t){var n,i,a=!1;d=u<3&&4<y?4:2,"header"==e.type&&(t>=s.length-d&&o<4&&0<u&&0<t&&(i=o+1,_.isEmpty(c[i])&&(c[i]={rows:[]}),_.isEmpty(l[i])&&(l[i]={rows:[]}),n=s.splice(t,s.length),n.length,a=!0,l[i].rows=n.concat(l[i].rows)),u++),!a&&0==t&&"evt"==e.type&&e.isLastRowForHeader&&(c[i=o-1].rows.push(e),a=!0),a||r.push(e)}))})),c},o.cinemasGrid=function(){for(var e={},t=1,n=o.cinemaRows(),i=Math.ceil(n.length/4),a=0;a<n.length;)_.isEmpty(e[t])&&(e[t]={rows:[]}),e[t].rows.push(n[a]),i*t<=++a&&t++;return e},o.setPreferredLanguageFilters=function(){var n;_.isEmpty(h.preferredLanguages)||(n=[],_.each(h.preferredLanguages,(function(e,t){_.findWhere(h.languages,{name:e.language})&&n.push(e.language)})),(!_.isEmpty(n)||1<=n.length)&&(C.language=n))},e.grid=o.grid,e.cinemasGrid=o.cinemasGrid,f.filters={},f.filters.clearFilters=function(){C={}},f.filters.dimensions=function(e,t){var n;e=e||_.clone(h.dimensions),_.isEmpty(e)||e.length<=1||(e=e.filter((function(e){return-1!==v.indexOf(e.toUpperCase())||-1!==e.toUpperCase().indexOf("IMAX")&&!0})),e=g.sortDimensions(e),n='<div class="__label">Filter</div>',_.each(e,(function(e){n+=g.render("temp-filter",{text:e,filterValue:e,filterKey:"dimension",hiddenFilters:""})})),t&&(n+=g.render("temp-filter",{text:"DOLBY ATMOS",filterValue:!0,filterKey:"isAtmosEnabled"})),f.filters.appendFilterSet(n,"movie-listing-filter",l.click.applyDimensionFilter))},f.filters.languages=function(e){if(e=e||_.clone(h.languages),!(_.isEmpty(e)||e.length<=1)){for(var t=0;t<h.langSequence.length;t++)e[t]=h.langSequence[t];var i='<div class="__label">Filter</div>';if(e.length<=6)_.each(e,(function(e){var t="",n=!1;C.hasOwnProperty("language")&&-1!==C.language.indexOf(e)&&(n=!0,t="_active"),i+=g.render("temp-filter",{text:e,filterValue:e,filterKey:"language",cssClass:t,active:n,hiddenFilters:""})}));else{for(var n=e.length-6,t=0;t<6;t++){var a="",o=!1;C.hasOwnProperty("language")&&-1!==C.language.indexOf(e[t])&&(o=!0,a="_active"),i+=g.render("temp-filter",{text:e[t],filterValue:e[t],filterKey:"language",cssClass:a,active:o,hiddenFilters:""})}for(var s="",t=6;t<e.length;t++)s+=g.render("temp-hidden-filter",{text:e[t],filterValue:e[t],filterKey:"language",cssClass:a,active:o});s=g.render("temp-hidden-filter-set",{filters:s}),i+=g.render("temp-filter",{text:"+ "+n+" More",filterValue:"languages-dropdown",filterKey:"language",cssClass:" dropdown ",active:o,hiddenFilters:s})}f.filters.appendFilterSet(i,"movie-listing-filter",l.click.applyLanguageFilter)}},f.filters.subRegions=function(e){var t;e=e||_.clone(h.subRegions),_.isEmpty(e)||e.length<=1||(t='<div class="__label">Filter</div>',_.each(e,(function(e){t+=g.render("temp-filter",{text:e.name,filterValue:e.code,filterKey:"subRegion",hiddenFilters:""})})),f.filters.appendFilterSet(t,"cinema-listing-filter",l.click.applySubRegionsFilter))},f.filters.appendFilterSet=function(e,t,n){t=g.render("temp-filter-set",{filters:e,cssClasses:t}),t=p(t);t.find(".__filter").click(n),t.find('input[type="checkbox"]').click(n),t.find(".dropdown").mouseenter(l.mouseenter.filtermenu),t.find(".__filter-menu").mouseleave(l.mouseleave.filtermenu),t.find(".__filter-menu").find("input").each((function(){var e=p(this),t=e.data("filterKey"),n=e.data("filterValue");C.hasOwnProperty("language")&&-1<C[t].indexOf(n)?(e.prop("checked",!0),e.data("active",!0)):(e.removeAttr("checked"),e.data("active",!1))})),r.filters.append(t)},f.getEventTitleForEvt=function(e,t){var n=h.events[e],e=n.title.trim();return _.isEmpty(t)||(e+=" - "+t+" "),!1===n.isDefault&&(e+=" - "+n.lang),_.isEmpty(n.censor)||(e+=" ("+n.censor+")"),e},f.evt=function(e,t){var n,i=h.events[e.firstChildEventId],a=!0===i.isNew&&!0!==i.isRecommended&&!0!==i.isSeen?"new-event":"",o="",s="",r="",l="";!1===i.matchesFilter?o+=" filter-false":_.isEmpty(C)||(o+=" matches-filter");var c=e.dimensions;_.isUndefined(c)||1!=c.length||"2D"!==(d=c[0].dim)&&(u=d);var d=f.getEventTitleForEvt(i.id,u),u="";!0===i.isSeen?(o+=" _seen",s=g.render("temp-seen-evt-svg")):!_.isUndefined(c)&&1<c.length&&(u=f.dimensions(e.dimensions,t));!0===i.isSeen&&i.isRated;c="";!0===i.isRecommended&&(o+=" _recommended",c=g.render("temp-recommended-evt-svg")),_.isUndefined(i.avgRating)||(o+=" _rating",l=i.avgRating,n=i.totalVotes,r=g.render("temp-rating-evt-svg",{cssRating:"",votes:n,rating:l}));l="";return i.isMovieClubEnabled&&(l=g.render("temp-movie-club-icon")),g.render("temp-event",{seenContent:s,text:d,eventURL:e.url,cssClass:a,containerCssClass:o,dimensions:u,ratingHTML:"",eventId:i.id,recommendedContent:c,ratingContent:r,dataGALabel:t,movieClubIcon:l})},f.label=function(e){var t="";return C.hasOwnProperty("language")&&-1==C.language.indexOf(e.text)&&(t="filter-false"),g.render("temp-label",{text:e.text.toUpperCase(),cssClass:t})},f.dimensions=function(e,n){var i="",t=e[0];h.events[t.eventId].title;if(1==e.length)return"";var t=_.map(e,(function(e){return e.dim})),a=g.sortDimensions(t);if(_.uniq(a).length<=1)return"";var o=[];return e.forEach((function(e){o[a.indexOf(e.dim)]=e})),_.each(o,(function(e){var t=h.events[e.eventId];i+=g.render("temp-dimension",{text:e.dim,eventURL:t.url,eventId:t.id,dataGALabel:n})})),i=!_.isEmpty(i)?'<div class="dimension-container">'+i+"</div>":i},f.grid=function(){var n=[],a=1,o="";_.each(e.grid(),(function(e,t){var i="";e.rows.forEach((function(e){if(!_.isUndefined(e)){var t=null;switch(e.type){case"header":var n=f[t="label"](e);o=p(n).text().trim(),a=1;break;case"evt":n=f[t="evt"](e,o+"-"+a);break;case"dimension":n=f[t="dimension"](e)}_.isEmpty(n)||(i+='<li class="'+t+'-container">'+n+"</li>"),"evt"==t&&++a}})),_.isEmpty(i)||(e=g.render("temp-grid-col",{listHtml:i,viewMore:""}),e=p(e),n.push({domObj:e}))}));var t="";0===n.length?t=_.isEmpty(C)?g.render("temp-no-results"):g.render("temp-no-results-with-filters"):n.forEach((function(e){t+=e.domObj.wrap("<div/>").parent().html()})),r.grid.html(t),r.grid.find(".__event").on("click",l.click.handleEventClick),r.grid.find(".__dimension").on("click",l.click.handleDimensionClick),r.grid.find(".__rating-container").on("mouseenter",l.mouseenter.heart),r.grid.find(".__rating-container").on("mouseleave",l.mouseleave.heart)},f.applyFilter=function(e,t,n){if(!0===t)switch(e.filterKey){case"dimension":case"language":var i;_.isEmpty(C[e.filterKey])||(i=C[e.filterKey].indexOf(e.filterValue),C[e.filterKey].splice(i,1)),0==C[e.filterKey].length&&delete C[e.filterKey];break;default:delete C[e.filterKey]}else if(!_.isEmpty(e))switch(e.filterKey){case"dimension":_.isEmpty(C[e.filterKey])&&(C[e.filterKey]=[]);var a=C[e.filterKey];a.push(e.filterValue),C[e.filterKey]=_.uniq(a);break;case"language":_.isEmpty(C[e.filterKey])&&(C[e.filterKey]=[]);a=C[e.filterKey];a.push(e.filterValue),C[e.filterKey]=_.uniq(a);break;default:C[e.filterKey]=e.filterValue}f.grid(),BMS.Misc.QuickbookModal.postRender(r.container);t=_.values(C).join(",");BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"QuickBook",{"Filter Used":t,"Event Type":"MT",Appcode:window.global.strAppCode});var o=[];_.isEmpty(C.language)||p.each(C.language,(function(e,t){o.push(t)}));t=BMS.Storage.get({name:"ld",storage:"C"});BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"applied_quickbook_7",action:"language",label:o.join(","),user_mode:""!=t?"Logged In":"Guest Mode"})},f.cinemas={},f.cinemas.venue=function(e,t){var n=h.cinemas[e.venueCode],i=n.isCinemaNew?"new-venue":"",a="",e="";return!1===n.matchesFilter?(i+=" filter-false",a+=" filter-false"):_.isEmpty(C)||(a+=" matches-filter"),n.isPreferred&&!0===n.matchesFilter&&(i+="preferred-venue"),"Z"===n.CinemaUnpaidFlag&&(e=g.render("temp-unpaid")),g.render("temp-venue",{text:n.name,venueUrl:n.url,cssClass:i,containerCssClass:a,venueCode:n.venueCode,unpaidContent:e,dataPostion:t})},f.cinemas.grid=function(){var n,a="",o=1;_.each(e.cinemasGrid(),(function(e,t){var i="";e.rows.forEach((function(e,t){var n;_.isUndefined(e)||(n=null,"venue"===e.type&&(n="venue"),e=f.cinemas[n](e,o),n=[n+"-container"],_.isEmpty(e)||(i+='<li class="'+n.join(" ")+'">'+e+"</li>"),++o)})),_.isEmpty(i)||(a+=g.render("temp-grid-col",{listHtml:i,viewMore:""}),n=p(a))})),_.isEmpty(n)?r.cinemas.grid.html(g.render("temp-no-results")):(r.cinemas.grid.html(n),r.cinemas.grid.find(".__venue").on("click",l.click.handleVenueClick))},f.cinemas.applyFilter=function(e,t,n){var i;!0===t?"subRegion"===e.filterKey?(_.isEmpty(C[e.filterKey])||(i=C[e.filterKey].indexOf(e.filterValue),C[e.filterKey].splice(i,1)),0==C[e.filterKey].length&&delete C[e.filterKey]):delete C[e.filterKey]:_.isEmpty(e)||("subRegion"===e.filterKey?(_.isEmpty(C[e.filterKey])&&(C[e.filterKey]=[]),(i=C[e.filterKey]).push(e.filterValue),C[e.filterKey]=_.uniq(i)):C[e.filterKey]=e.filterValue),f.cinemas.grid(),BMS.Misc.QuickbookModal.postRender(r.container);var a=[];_.isEmpty(C.subRegion)||p.each(C.subRegion,(function(e,t){a.push(p('.cinema-listing-filter [data-filter-value="'+t+'"]').text().trim())}));e=BMS.Storage.get({name:"ld",storage:"C"});BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"applied_quickbook_7",action:"subregion",label:a.join(","),user_mode:""!=e?"Logged In":"Guest Mode"})},f.renderMoviesFilters=function(){C.hasOwnProperty("language")||!BMS.Storage.isset({name:"ld"})&&!BMS.Storage.isset({name:"le"})||o.setPreferredLanguageFilters(),f.filters.languages(null)},f.renderCinemasFilters=function(){f.filters.subRegions()},f.renderTabs=function(){var e=g.render("temp-qb-listing-tabs",{primaryButtonText:"Movies",secondaryButtonText:"Cinemas"});r.tabs.html(e).removeClass("none"),r.tabs.find("button").click((function(){var e,t=p(this);t.hasClass("_active")||(t.addClass("_active"),t.hasClass("primary-tab")?f.showPrimaryTabContent():f.showSecondaryTabContent(),t.siblings().removeClass("_active"),e=BMS.Storage.get({name:"ld",storage:"C"}),t.hasClass("primary-tab")?BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"applied_quickbook_7",action:"secondary",label:"movies",user_mode:""!=e?"Logged In":"Guest Mode"}):t.hasClass("secondary-tab")&&BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"applied_quickbook_7",action:"secondary",label:"venues",user_mode:""!=e?"Logged In":"Guest Mode"}))}))},f.toggleMovieListing=function(e){!0===e?(r.grid.removeClass("none"),r.filters.find(".movie-listing-filter").removeClass("none")):(r.grid.addClass("none"),r.filters.find(".movie-listing-filter").addClass("none"))},f.toggleCinemaListing=function(e){!0===e?(r.cinemas.grid.removeClass("none"),r.filters.find(".cinema-listing-filter").removeClass("none"),BMS.Misc.QuickbookModal.hidePreferredCinemasContainer()):(r.cinemas.grid.addClass("none"),r.filters.find(".cinema-listing-filter").addClass("none"),BMS.Misc.QuickbookModal.showPreferredCinemasContainer())},f.showPrimaryTabContent=function(){c=!0,f.toggleMovieListing(!0),f.toggleCinemaListing()},f.showSecondaryTabContent=function(){c=!1,f.toggleMovieListing(),f.toggleCinemaListing(!0)},f.renderTabsContent=function(){f.renderTabs(),f.renderMoviesListing(),f.renderCinemasListing(),f.showPrimaryTabContent(),r.container.addClass("_has-tabs"),r.filters.removeClass("none")},f.renderMoviesListing=function(){r.clearContainers(),f.renderMoviesFilters(),f.grid(),r.grid.find(".evt-dim-container").removeClass("matches-filter")},f.renderCinemasListing=function(){r.clearCinemaContainers(),f.renderCinemasFilters(),f.cinemas.grid()},f.quickBook=function(){var e;f.renderTabsContent(),e=r.container,_.isArray(e)||(e=[e]),x.resolveWith({type:P},e)},f.quickBookPostRender=function(){var n,i,a,o,e,t,s;!0===c&&(n=[],i=[],a={index:0,width:0},o=0,r.grid.find("ul").each((function(e,t){t=p(t);i.push(t);t=t.width();n.push(parseInt(t)),o+=parseInt(t),t>a.width&&(a.index=e,a.width=t)})),e=parseInt(r.container.width()),(t=i.length)<=2&&(t*=3),t=(e-o)/(2*t),i.forEach((function(e,t){n[t]})),e<o&&(i[a.index],s=(o-e)/2,a.width),t=r.filters.find(".__filter-menu"),s=r.filters.find(".__filter-menu").parent(),t.width(),s.width())},r.prepareContainer=function(){r.container=p(g.render("temp-quickbook-container",{quickbookType:"quickbook-movies",containerClass:""})),r.tabs=r.container.find(".qb-tabs"),r.filters=r.container.find(".filters"),r.grid=r.container.find(".grid"),r.cinemas.grid=r.container.find(".venue-grid")},r.clearContainers=function(){r.filters.addClass("none").find(".movie-listing-filter").remove(),r.grid.empty().addClass("none")},r.clearCinemaContainers=function(){r.filters.addClass("none").find(".cinema-listing-filter").remove(),r.cinemas.grid.empty().addClass("none")},l.click={},l.mouseenter={},l.mouseleave={},l.click.applyDimensionFilter=function(e){var t=p(this),n=t.data("filter-key"),i=t.data("filter-value"),a=!0===t.data("active"),o={};return"All"!=i?(o.filterKey=n,o.filterValue=i):f.filters.clearFilters(),f.applyFilter(o,a,e),"dimension"===n&&("All"==i?t.parent().siblings().find("._active").removeClass("_active").data("active",!1):(i=t.parent().siblings().find("[data-filter-value=All]")).data("active")&&(i.data("active",!1),i.removeClass("_active"))),t.data("active",!a),a?t.removeClass("_active"):t.addClass("_active"),!1},l.click.applyLanguageFilter=function(e){var t=p(this),n=t.data("filter-key"),i=t.data("filter-value");if("languages-dropdown"==i){var a=r.filters.find(".__filter-menu").parent();return a.hasClass("_active")?a.removeClass("_active"):a.addClass("_active"),!1}var o=!0===t.data("active"),a={};"All"!=i?(a.filterKey=n,a.filterValue=i):f.filters.clearFilters(),f.applyFilter(a,o,e),C.hasOwnProperty("language")?BMS.Storage.set({name:"quickbook",key:"moviefilters",value:JSON.stringify(C)}):BMS.Storage.del({name:"quickbook",key:"moviefilters",value:JSON.stringify(C)}),"language"===n&&("All"==i?t.parent().siblings().find("._active").removeClass("_active").data("active",!1):(i=t.parent().siblings().find("[data-filter-value=All]")).data("active")&&(i.data("active",!1),i.removeClass("_active"))),t.data("active",!o),o?t.removeClass("_active"):t.addClass("_active")},l.click.applySubRegionsFilter=function(e){var t=p(this),n=t.data("filter-key"),i=t.data("filter-value"),a=!0===t.data("active"),o={};return"All"!=i?(o.filterKey=n,o.filterValue=i):f.filters.clearFilters(),f.cinemas.applyFilter(o,a,e),"All"==i?t.parent().siblings().find("._active").removeClass("_active").data("active",!1):(i=t.parent().siblings().find("[data-filter-value=All]")).data("active")&&(i.data("active",!1),i.removeClass("_active")),t.data("active",!a),a?t.removeClass("_active"):t.addClass("_active"),!1},l.click.handleEventClick=function(){var e=p(this).data("id"),t=h.events[e];BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"QuickBook",{ProductID:e,"Event Name":t.eventName,"Event Type":"MT",Appcode:window.global.strAppCode});t=BMS.Storage.get({name:"ld",storage:"C"}),t={event:"clicked_quickbook_6",action:"movielist",label:p(this).data("ga-label"),meta_1:"title",meta_2:p(this).text().trim(),user_mode:""!=t?"Logged In":"Guest Mode"};BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},t)},l.click.handleVenueClick=function(){var e=BMS.Storage.get({name:"ld",storage:"C"}),e={event:"clicked_quickbook_6",action:"venuelist",label:p(this).data("position"),meta_1:p(this).text().trim(),user_mode:""!=e?"Logged In":"Guest Mode"};BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},e)},l.click.handleDimensionClick=function(){var e=p(this).data("id"),t=h.events[e],t={ProductID:e,"Event Name":t.eventName,"Experience Clicked":t.dimension,"Event Type":"MT",Appcode:window.global.strAppCode};BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"QuickBook",t);t=BMS.Storage.get({name:"ld",storage:"C"}),t={event:"clicked_quickbook_6",action:"movielist",label:p(this).data("ga-label"),meta_1:"format",meta_2:p(this).text().trim(),user_mode:""!=t?"Logged In":"Guest Mode"};BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},t)},l.mouseenter.heart=function(e){p(this).find(".__event-votes").show()},l.mouseleave.heart=function(){p(this).find(".__event-votes").hide()},l.mouseenter.filtermenu=function(){p(this).parent().addClass("_active")},l.mouseleave.filtermenu=function(){p(this).parent().removeClass("_active")},l.dispatchRecommendWizEvent=function(){var e;!0!==R&&(R=!0,e={"Recommendation Shown":_.isEmpty(u)?"No":"Yes",Appcode:window.global.strAppCode},BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"QuickBook",e))};BMS.Misc.Quickbook=BMS.Misc.Quickbook||{},BMS.Misc.Quickbook.movies={getFragment:function(){return r.prepareContainer(),r.clearContainers(),$=!1,x=null,x=new p.Deferred,_.delay(O,1),x.promise()},resetData:function(){f.filters.clearFilters(),R=!($=!(n=null)),O()},prefetchAPIData:function(){$=!0,"buytickets"!=pageName&&O()},postRender:f.quickBookPostRender}})(jQuery),blnCallSeatHtml=!1,(function(l){"use strict";var i={},d=null,a={events:"CT",sports:"SP",plays:"PL",activities:"AT"},o={events:"ET",plays:"PL",sports:"ST",activities:"AT"},n={events:{event_click:"Events-Click"},plays:{event_click:"Plays-Click"},sports:{event_click:"Sports-Click"},activities:{event_click:"Activities-Click"}},u={events:"events",sports:"sports",plays:"plays",activities:"activities"},p={},c={},s={},e={},r={filters:{},container:{},grid:{}},f={},g={},h={},m=100,v=!0,S=null,y="Featured Events",M=!1,b=null,w=null,B=null,C=6,t=l(window).height();500<t&&t<700?C=8:700<t&&t<1050?C=18:1050<t&&(C=25);var k=!1,E="Today",T="Tomorrow",I="This Weekend",x="Next Weekend",$=null,A=[a.sports,a.activities],R={};R[a.events]=["genres"],R[a.plays]=["language"];var P=BMS.Misc.fnUrlName(BMS.Storage.get({name:"Rgn",key:"text"}));function L(e){_.isArray(e)||(e=[e]),$.rejectWith({type:d},e)}function D(e){var t=i[d];_.isEmpty(t)||_.isEmpty(t.data)?_.isEmpty($)||L({error:"no-data"}):(!_.isEmpty(t.featured)&&v?(S=t.featured[0],M=!0):(S=null,c.featuredEvents={}),b=t.data.BookMyShow,w=b.arrEvent,b.arrLanguages,B=b.arrJsonGenres,c.labels=c.getLabels(),c.events=c.getEvents(),c.genres=c.getGenres(),c.featuredEvents=c.getFeaturedEvents(),c.languages=c.getLanguages(),!0!==e&&g.quickBook())}function O(n){var e;_.isEmpty(i[d])||_.isEmpty(i[d].data)?(e={timestamp:l.now(),cmd:"QUICKBOOK",type:a[d]},l.get("/serv/getData",e,(function(e){var t;t=n,i[d]=e,D(t)}),"json").fail((function(){_.isEmpty($)||L({error:"ajax"})}))):D()}var p={getLabelByDate:function(e){var t=c.labels,n="";return p.date.isToday(e)&&-1!==t.indexOf(E)?n=E:p.date.isTomorrow(e)&&-1!==t.indexOf(T)?n=T:p.date.isThisWeekend(e)&&-1!==t.indexOf(I)?n=I:p.date.isNextWeekend(e)&&-1!==t.indexOf(x)&&(n=x),n},date:{isToday:function(e){return p.formattedDate(e)===U},isTomorrow:function(e){return p.formattedDate(e)===G},isThisWeekend:function(e){e=p.formattedDate(e);return e==F||e==j},isNextWeekend:function(e){e=p.formattedDate(e);return e==q||e==V}},formattedDate:function(e,t){t=t||"-";var n=(n=(e=e instanceof Date?e:new Date(e)).getMonth()+1)<10?"0"+n:n;return e.getFullYear()+t+n+t+e.getDate()},daysInMonth:function(e,t){return new Date(year,e,0).getDate()},weekendDates:function(){},sanitize:{date:function(e){return new Date(e.substr(0,4),Number(e.substr(4,2))-1,e.substr(6,2),e.substr(8,2),e.substr(10,2))},time:function(e){var t=e.getHours(),e=e.getMinutes();return 12<t&&(t-=12),t+":"+(e=e<10?"0"+e:e)+" pm"},boolean:function(n){return"string"==typeof n?"Y"==n?n=!0:"N"==n?n=!1:n:("object"!=typeof n&&"array"!=typeof n||_.each(n,(function(e,t){n[t]=p.sanitize.boolean(e)})),n)}},render:function(e,s,t){var n=l("#"+e).html();if(!l.isEmptyObject(n)){e=n.split("\n").join("");var r,i=/([$\^\\\/()|?+*\[\]{}.\-])/g;return t=t||{},n="{{}}".length,r=Math.ceil(n/2),t="{{}}".substr(0,r).replace(i,"\\$1"),i="{{}}".substr(r,n).replace(i,"\\$1")||t,i=new RegExp(t+"[^"+t+i+"]+"+i,"g"),e.replace(i,(function(e){var t,n=e.slice(r,-r),i=n.split("."),a=0,o=i.length;if(n in s)t=s[n];else for(t=s;a<o;a++){if(!(i[a]in t))return e;t=t[i[a]]}return t}))}},eventMatchesFilter:function(s){var r=_.isEmpty(h);c.labels;return _.each(h,(function(e,t){switch(t){case"parent-genre":(s.genre.hasOwnProperty(e)||s.genre.hasOwnProperty(_.escape(e)))&&(r=!0);break;case"sub-genre":var n=h["parent-genre"],i=[],a=h[t],o=[];a.forEach((function(e,t){o.push(e);var n=_.escape(e);e!==n&&o.push(n)})),_.isEmpty(s.genre)||(i=s.genre[n]);i=_.intersection(i,o);r=0<i.length;break;default:r=-1!==e.indexOf(s[t])}})),r},sortLanguagesForFilters:function(e){return _.clone(e).sort()}},N=new Date,U=p.formattedDate(N),t=new Date(N);t.setDate(t.getDate()+1);var G=p.formattedDate(t),t=new Date(N);t.setDate(t.getDate()+(6-N.getDay()));var F=p.formattedDate(t),t=new Date(t);t.setDate(t.getDate()+1);var j=p.formattedDate(t),t=new Date(t);t.setDate(t.getDate()+6);var q=p.formattedDate(t),t=new Date(t);t.setDate(t.getDate()+1);var V=p.formattedDate(t);c.getFeaturedEvents=function(){var n={};return _.isEmpty(S)||S.forEach((function(e,t){n[e.EventCode]={eventId:e.ID,id:e.EventCode,title:e.EventName,details:e.EventDetails,arrDates:e.EventDates,fromDate:e.DateFrom,toDate:e.DateTo,url:e.RedirectURL,location:e.EventLocation,regionCode:e.RegCode,isFeatured:!0,sequence:t}})),n},c.getEvents=function(){var c={};return w.forEach((function(e,t){var n=e.EventTitle,i=e.EventCode,a=BMS.Misc.fnUrlName(n).toLowerCase(),o="";u[d]!==u.sports||_.isEmpty(P)||_.isUndefined(P)||(o="/"+P.toLowerCase()),o+="/"+u[d]+"/"+(""==a?"-":a)+"/"+i;var s={},a=e.jsonGenre;_.isEmpty(a)||(_.isObject(a)?s=a:_.isString(a)&&(s=JSON.parse(a)));var r=[],l={};(e.arrDates||[]).forEach((function(e){var t=e.ShowDateCode,e=p.sanitize.date(t),t=p.getLabelByDate(e);r.push(e),_.isEmpty(t)||(l[t]=!0)})),a=_.keys(l),c[i]={id:i,type:e.EventType,title:n,language:e.Language,arrDates:e.arrDates,eventDates:r,ratings:e.Ratings,url:o,viewLabels:a,genre:s,sequence:t}})),c},c.getLanguages=function(){if(a[d]!==a.plays)return[];var t={};return _.each(c.events,(function(e){0!==_.intersection(e.viewLabels,c.labels).length&&(t[e.language]=!0)})),_.keys(t)},c.getLabels=function(){var e=[E],t=N.getDay();return 5===t?e.push(I,x):0===t||6===t?e.push(T,x):e.push(T,I),M&&e.push(y),e},c.labelsEvents=function(){var n={};c.labels.forEach((function(e){n[e]={events:[]}}));var t,e=c.events;return _.each(e,(function(t,e){t.matchesFilter=p.eventMatchesFilter(t),t.viewLabels.forEach((function(e){_.isUndefined(n[e])||n[e].events.push(t.id)}))})),M&&(t=[],_.each(c.featuredEvents,(function(e){t.push(e.id)})),n[y]={events:t}),n},c.calculateEventScore=function(e){var t=0;!0!==e.matchesFilter&&!0!==e.isFeatured||(t+=m);e=e.viewLabels;return!_.isUndefined(e)&&1<e.length&&(t-=e.length),t},c.getScoredLabelsEvents=function(){var e=l.extend(!0,{},c.labelsEvents()),n={};return _.each(e,(function(e,i){var t=e.events,a=[],e=[];_.each(t,(function(e,t){var n=(M&&i===y?c.featuredEvents:c.events)[e],e={id:e};e.score=c.calculateEventScore(n),a.push(e)})),e=_(a).chain().sortBy((function(e){return(i===y?c.featuredEvents:c.events)[e.id].title})).sortBy((function(e){return-e.score})).value(),n[i]={},n[i].events=e})),n},c.getGenres=function(){var n={};_.each(c.events,(function(e){0!==_.intersection(e.viewLabels,c.labels).length&&(e=e.genre,_.each(e,(function(e,t){_.isEmpty(n[t])&&(n[t]=[]),e=(e=e||[]).concat(n[t]),e=_.uniq(e),e=_.map(e,(function(e){return e.replace(/&amp;/g,"&")})),_.isEmpty(e)||(n[t]=e)})))}));var s=[];return _.each(B,(function(i){var a=i.Code,o=i.childGenres;_.each(n,(function(t,e){var n;a===e&&(n=[],_.each(o,(function(e){_.contains(t,e.Code)&&n.push(e)})),i.childGenres=n,s.push(i))}))})),n=s},s.rows=function(){for(var t=[],e=c.getScoredLabelsEvents(),n=0;n<c.labels.length;n++){var i=c.labels[n],a=e[i];_.isUndefined(a)||_.isUndefined(a.events)||_.isEmpty(a.events)||(t.push({text:i,type:"header"}),a=a.events,_.each(a,(function(e){t.push({type:"event",id:e.id,isFeatured:i===y&&M})})))}return t},s.grid=function(){for(var e={},t=1,n=s.rows(),i=0;i<n.length;)_.isEmpty(e[t])&&(e[t]={rows:[]}),e[t].rows.push(n[i]),i++,_.isUndefined(n[i])||"header"!=n[i].type||t++;return e},s.sportRows=function(){var t=[];return _.each(c.events,(function(e){t.push({type:"event",id:e.id,isFeatured:!1})})),t},s.sportsGrid=function(){for(var e={},t=1,n=s.sportRows(),i=Math.ceil(n.length/4),a=0;a<n.length;)_.isEmpty(e[t])&&(e[t]={rows:[]}),e[t].rows.push(n[a]),i*t<=++a&&t++;return e},e.grid=function(){return a[d]===a.sports?s.sportsGrid():s.grid()},g.filters={},g.filters.clearFilters=function(){_.isEmpty("sub-genre")||g.filters.hideSubgenres(),h={}},g.filters.genres=function(e){var t;e=e||_.clone(c.genres),_.isEmpty(e)||(e=e,e=_.sortBy(e,(function(e){return e.Code})),t="",e.forEach((function(e){t+=g.filters.getFilterItemHtml("parent-genre",e.Code,e.Name)})),r.genreFilters=g.filters.appendFilterSet(t))},g.filters.getFilterItemHtml=function(e,t,n){return p.render("temp-filter",{text:n,filterValue:t,filterKey:e,hiddenFilters:""})},g.filters.subGenres=function(t){var n,e=_.filter(c.genres,(function(e){return e.Code==t}))[0].childGenres;_.isEmpty(e)||(e=_.clone(e)),_.isEmpty(e)||e.length<=1?g.filters.hideSubgenres():(e=_.sortBy(e,(function(e){return e.Code})),n="",_.each(e,(function(e){n+=g.filters.getFilterItemHtml("sub-genre",e.Code,e.Name)})),g.filters.hideSubgenres(),r.subGenreFilters=g.filters.appendFilterSet(n,"child-filters"))},g.filters.hideSubgenres=function(){_.isEmpty(r.subGenreFilters)||r.subGenreFilters.empty().addClass("none")},g.filters.appendFilterSet=function(e,t){t=p.render("temp-filter-set",{filters:e,cssClasses:t||""}),t=l(t);return t.find(".__filter").click(f.click.applyFilters),r.filters.append(t),k||(r.filters.removeClass("none"),k=!0),t},g.filters.languages=function(e){var t,n;e=e||_.clone(c.languages),_.isEmpty(e)||e.length<=1||(e=_.filter(e,(function(e){return e.indexOf("/")<0})),-1!==(t=-1===(t=(e=p.sortLanguagesForFilters(e)).indexOf("Others"))?e.indexOf("others"):t)&&(t=e.splice(t,1),e.push(t)),n='<div class="__label">Language</div>',_.each(e,(function(e){n+=p.render("temp-filter",{text:e,filterValue:e,filterKey:"language",hiddenFilters:""})})),r.languageFilters=g.filters.appendFilterSet(n))},g.evt=function(e){var t=(e.isFeatured?c.featuredEvents:c.events)[e.id],n={},i="",a="";return!1===t.matchesFilter?i+=" filter-false":!0===e.isFeatured?i+=" featured-event":_.isEmpty(h)||(a+=" matches-filter"),n.html=p.render("temp-event",{seenContent:"",text:t.title,eventURL:t.url,cssClass:"",containerCssClass:a,dimensions:"",ratingHTML:"",eventId:e.id,recommendedContent:"",ratingContent:"",movieClubIcon:""}),n.cssClass=i,n},g.label=function(e){return p.render("temp-label",{text:e.text.toUpperCase()})},g.grid=function(){var n,i="";_.each(e.grid(),(function(e,t){var a="",o=!1;e.rows.forEach((function(e,t){if(!_.isUndefined(e)){var n=null;switch(e.type){case"header":n="label";break;case"event":n="evt"}var i=g[n](e),e=[n+"-container"];_.isEmpty(i)||(C<t&&(o=!0,e.push("_hidden")),_.isObject(i)?(e.push(i.cssClass),a+='<li class="'+e.join(" ")+'">'+i.html+"</li>"):a+='<li class="'+e.join(" ")+'">'+i+"</li>")}})),_.isEmpty(a)||(!(e="")===o&&(e+=p.render("temp-view-more")),i+=p.render("temp-grid-col",{listHtml:a,viewMore:e}),(n=l(i)).find(".__view-more").click(f.click.handleViewMoreLink))})),_.isEmpty(n)?L({error:"no-data"}):(r.grid.html(n).removeClass("none"),r.grid.find(".__event").on("click",f.click.handleEventClick))},g.applyFilter=function(e,t,n){if(!0===t)"parent-genre"===e.filterKey?(_.isEmpty(h[e.filterKey])||delete h[e.filterKey],_.isEmpty(h["sub-genre"])||delete h["sub-genre"],g.filters.hideSubgenres()):(a=h[e.filterKey].indexOf(e.filterValue),h[e.filterKey].splice(a,1),0===h[e.filterKey].length&&delete h[e.filterKey]);else if(!_.isEmpty(e))switch(e.filterKey){case"parent-genre":h[e.filterKey]=e.filterValue,_.isEmpty(h["sub-genre"])||delete h["sub-genre"],g.filters.subGenres(h["parent-genre"]);break;case"sub-genre":_.isEmpty(h[e.filterKey])&&(h[e.filterKey]=[]);var i=h[e.filterKey];i.push(e.filterValue),h[e.filterKey]=_.uniq(i);break;default:_.isEmpty(h[e.filterKey])&&(h[e.filterKey]=[]);i=h[e.filterKey];i.push(e.filterValue),h[e.filterKey]=_.uniq(i)}g.grid();var a=_.values(h).join(",");BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"QuickBook",{"Filter Used":a,"Event Type":o[d],Appcode:window.global.strAppCode}),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"filters",category:"Quickbook",action:"Movies-Filter",label:a})},g.generateFilters=function(){-1===A.indexOf(a[d])&&(-1!==R[a[d]].indexOf("genres")&&g.filters.genres(),-1!==R[a[d]].indexOf("language")&&g.filters.languages())},g.quickBook=function(){var e=i[d];_.isEmpty(e)||_.isEmpty(e.data)?L({error:"no-data"}):(g.generateFilters(),g.grid(),e=r.container,_.isArray(e)||(e=[e]),$.resolveWith({type:d},e))},r.prepareContainer=function(){var e=l(p.render("temp-quickbook-container",{quickbookType:"quickbook-"+d,containerClass:"other-events"}));r.container=e,r.filters=r.container.find(".filters"),r.grid=r.container.find(".grid")},r.clearContainers=function(){k=!1,r.filters.empty().addClass("none"),r.grid.empty().addClass("none"),r.prepareContainer()},f.click={},f.click.applyFilters=function(e){var t=l(this),n=t.data("filter-key"),i=t.data("filter-value"),a={},o=!0===t.data("active");return"All"!==i?(a.filterKey=n,a.filterValue=i):(delete h[n],n==["parent-genre"]&&(delete h["sub-genre"],g.filters.hideSubgenres())),g.applyFilter(a,o,e),"parent-genre"===n||"sub-genre"===n&&"All"===i?t.parent().siblings().find("._active").removeClass("_active").data("active",!1):"sub-genre"!=n||(n=t.parent().siblings().find("[data-filter-value=All]")).data("active")&&(n.data("active",!1),n.removeClass("_active")),t.data("active",!o),o?t.removeClass("_active"):t.addClass("_active"),!1},f.click.handleEventClick=function(){var e=l(this).data("id"),t=c.events[e];BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"QuickBook",{ProductID:e,"Event Name":t.title,"Event Type":o[d],Appcode:window.global.strAppCode}),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"event_click",category:"Quickbook",action:n[d].event_click,label:t.title})},f.click.handleViewMoreLink=function(){return l(this).addClass("none").prev().find("._hidden").removeClass("_hidden"),!1};BMS.Misc.Quickbook=BMS.Misc.Quickbook||{},BMS.Misc.Quickbook.events={getFragment:function(e){return $=new l.Deferred,d=e,r.prepareContainer(),r.clearContainers(),g.filters.clearFilters(),_.delay(O,1),$.promise()},resetData:function(){i={},g.filters.clearFilters(),r.prepareContainer(),r.clearContainers()},prefetchAPIData:function(e){d=e,O(!0)}}})(jQuery),(function(){var e,l={},t=!1,a={},o={},s="",n=!1,c=["favourites","mostRecentlyBooked","mostRecentlySurfed","popular"],d="favourites",u=[],i=BMS.Storage.get({name:"Rgn",key:"subregionDetails"}),r=""!=i?BMS.Misc.fnUrlName(JSON.parse(i).SubRegionName.toLowerCase()):"",p=""!=i?JSON.parse(i).SubRegionCode.toLowerCase():"",f="movies",g="events";function h(){var e=o.modal.find(".modal-header").outerHeight(),t=$(window).height();o.modal.find(".qb-overflow-wrapper").css({height:t-e+"px"})}l.initializeDOM=function(){(o={mainBodyWrapper:$("body > .main-body-wrapper"),showCaseCarousel:$("#showcase-primary .showcase-carousel")}).quickbookWrapper=$("#quickbook-wrapper"),o.modalOverlay=o.quickbookWrapper.find(".qb-modal-overlay"),o.modal=$(".modal",o.quickbookWrapper),o.searchBoxContainer=$(".qb-search-box-container"),o.searchDropdown=o.searchBoxContainer.find("#btn-dd-search"),o.region=o.searchBoxContainer.find(".qb-region"),o.preferredCinemas=$(".preferred-cinemas-container",o.quickbookWrapper),o.quickbookOverFlowWrapper=o.modal.find(".modal-body .qb-overflow-wrapper"),o.quickbookBody=o.quickbookWrapper.find(".quickbook-body"),o.topTrending=o.modal.find(".modal-body #qb-top-trending"),o.qbSearchListIcon=o.searchBoxContainer.find("#search-list-icon")},a.render=function(e,s,t){var n=$("#"+e).html();if(!$.isEmptyObject(n)){e=n.split("\n").join("");var r,i=/([$\^\\\/()|?+*\[\]{}.\-])/g;return t=t||{},n="{{}}".length,r=Math.ceil(n/2),t="{{}}".substr(0,r).replace(i,"\\$1"),i="{{}}".substr(r,n).replace(i,"\\$1")||t,i=new RegExp(t+"[^"+t+i+"]+"+i,"g"),e.replace(i,(function(e){var t,n=e.slice(r,-r),i=n.split("."),a=0,o=i.length;if(n in s)t=s[n];else for(t=s;a<o;a++){if(!(i[a]in t))return e;t=t[i[a]]}return t}))}},l.isOpen=function(){return t},l.updateIsOpen=function(e){t=e},l.show=function(e){s=e;e=l.isOpen();o.qbSearchListIcon.hide(),e?(l.clearQuickbookBody(),s!==f?(l.hideTopTrendingMovies(),l.hidePreferredCinemas(!0)):l.showPreferredCinemas(!0),l.showLoaderTemplate(),l.unbindResizeHandler()):(handlePopups.freezeDocument(),l.doShowAnimation(),l.showSearchbox(),s===f?l.showPreferredCinemas(!0):l.hidePreferredCinemas(!0)),h(),e||l.showLoaderTemplate(),l.showQuickbook(s),e||l.updateIsOpen(!0)},l.doShowAnimation=function(){o.modal.removeClass("none"),o.modalOverlay.removeClass("none"),o.quickbookWrapper.hasClass("_fixed")&&(n=!0,o.quickbookWrapper.removeClass("_fixed")),o.quickbookWrapper.addClass("_active")},l.hide=function(){handlePopups.releaseDocument(),l.clearQuickbookBody(),l.unbindResizeHandler(),o.qbSearchListIcon.show(),s===f&&l.hideTopTrendingMovies(),l.hideSearchbox(),l.showPreferredCinemasContainer(),l.hidePreferredCinemas(),l.updateIsOpen(!1),l.doHideAnimation(),$("#quickbook-wrapper").hide()},l.doHideAnimation=function(){o.mainBodyWrapper.removeClass("_blur"),!0===n&&(n=!1,o.quickbookWrapper.addClass("_fixed")),o.quickbookWrapper.removeClass("_active"),setTimeout((function(){}),10),o.modalOverlay.addClass("none")},l.getCurrentQuickbookObject=function(){return(s=_.isEmpty(s)?o.searchDropdown.data("type"):s)!==f?BMS.Misc.Quickbook.events:BMS.Misc.Quickbook[s]},l.showQuickbook=function(){var e=l.getCurrentQuickbookObject().getFragment(s);e.done((function(e){this.type===s&&l.renderQuickbookContent(e,s)})),e.fail((function(e){this.type===s&&l.showNoResultsTemplate(e)}))},l.renderQuickbookContent=function(e){s===f&&o.quickbookBody.css("visibility","hidden"),o.quickbookBody.html(e),l.postRender(),o.quickbookBody.css("visibility","visible"),s===f&&l.showTopTrendingMovies(),l.bindResizeHandler()},l.bindResizeHandler=function(){e=_.debounce((function(){l.postRender(),h()}),400),$(window).bind("resize",e)},l.unbindResizeHandler=function(){$(window).unbind("resize",e)},l.postRender=function(){var e=l.getCurrentQuickbookObject();_.isUndefined(e)||_.isUndefined(e.postRender)||e.postRender.call(this)},l.clearQuickbookBody=function(){o.quickbookBody.html("")},l.showNoResultsTemplate=function(){o.quickbookBody.html(a.render("temp-no-results"))},l.showLoaderTemplate=function(){o.quickbookBody.html(a.render("temp-qb-loader"))},l.showRegion=function(){_.isEmpty(o.region.find(".region-name").html())||o.region.removeClass("none")},l.hideRegion=function(){o.region.addClass("none")},l.showPreferredCinemas=function(e){0<o.preferredCinemas.html().trim().length&&o.preferredCinemas.removeClass("none"),!0===e&&o.preferredCinemas.addClass("qb-active")},l.hidePreferredCinemas=function(e){o.preferredCinemas.removeClass("qb-active"),1==e&&o.preferredCinemas.addClass("none")},l.showSearchbox=function(){o.searchBoxContainer.addClass("_fixed"),o.searchBoxContainer.addClass("_shift")},l.hideSearchbox=function(){o.searchBoxContainer.removeClass("_shift"),setTimeout((function(){o.searchBoxContainer.removeClass("_fixed")}),200)},l.showTopTrendingMovies=function(){},l.hideTopTrendingMovies=function(){},l.resetQuickbookListingData=function(){BMS.Misc.Quickbook[f].resetData(),BMS.Misc.Quickbook[g].resetData()},l.prefetchAPIData=function(){l.getCurrentQuickbookObject().prefetchAPIData(s)},l.processPreferredCinemas=function(e){if(!_.isEmpty(e)){try{BMS.Storage.set({name:"userCine",key:"pop",value:_.keys(e.popular).join(";"),storage:"C",sess:!1})}catch(e){}for(var n,i=0,a={},t=0;t<c.length;t++){if(3<=i)break;var o=c[t],s=e[o];_.each(s,(function(e,t){return 3!==i&&(o===d&&(n="Favourite Cinemas"),void(a.hasOwnProperty(t)||(a[t]=e,i++)))}))}_.isEmpty(n)&&(n="Preferred Cinemas");var r=_.map(a,(function(e){return e}));(r=_.compact(r)).length<1||(u=r,l.renderPreferredCinemas({label:n,data:r}))}},l.renderPreferredCinemas=function(e){var n=[],i=1;e.data.forEach((function(e){var t="/buytickets/"+BMS.Misc.fnUrlName(e.venueName.toLowerCase())+"-"+(""!=r?r:BMS.Misc.fnUrlName(e.regionName.toLowerCase()))+"/cinema-"+(""!=p?p:e.regionCode.toLowerCase())+"-"+e.venueCode+"-MT";n.push(a.render("temp-preferred-cinema-item",{url:t,name:e.venueName,dataPosition:i})),++i}));var t=a.render("temp-preferred-cinemas",{label:e.label.trim(),data:n.join(", ")});o.preferredCinemas.html(t),s===f&&l.showPreferredCinemas(),o.preferredCinemas.find("a").on("click.preferred",(function(e){e.stopPropagation();o.preferredCinemas.hasClass("qb-active");e=BMS.Storage.get({name:"ld",storage:"C"}),e={event:"clicked_quickbook_6",action:"recommendedvenue",label:$(this).data("position"),meta_1:$(this).text().trim(),user_mode:""!=e?"Logged In":"Guest Mode"};BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},e)}))},l.getPreferredCinemasObject=function(){var t={};return u.forEach((function(e){t[e.venueCode]=e})),t},l.showPreferredCinemasContainer=function(){o.preferredCinemas.removeClass("none")},l.hidePreferredCinemasContainer=function(){o.preferredCinemas.addClass("none")},l.initialize=function(){l.initializeDOM(),0<o.quickbookWrapper.length&&(l.prefetchAPIData(),!0!==global.blnIsTouchScreen&&(BMS.SignIn.fnRegister("quickbook-listing",l.resetQuickbookListingData),global.RgnCallBack.push(l.resetQuickbookListingData)))},BMS.Misc.QuickbookModal={initialize:l.initialize,show:l.show,hide:l.hide,postRender:l.postRender,getPreferredCinemas:l.getPreferredCinemasObject,showPreferredCinemasContainer:l.showPreferredCinemasContainer,hidePreferredCinemasContainer:l.hidePreferredCinemasContainer,isOpen:l.isOpen}})(),(function(){var o,y={startedTyping:!1,timeElapsed:0,timer:null,fiveSecondsElapsed:!1,results:null,time:null,ti:"",statusCode:"",emptyResponseTimeOut:null,typedAfterEmptyResponse:!1,output:[]},M={SUCCESS:"SUCCESS","NO-CLICK":"NO-CLICK",LATE:"LATE","NO-RESULT":"NO-RESULT",EXIT:"EXIT",CLEAR:"CLEAR"};o="videos"==pageName?12:8,showQuickBookRecomm=!1;var b="",w="",B=BMS.Misc.fnUrlName(BMS.Storage.get({name:"Rgn",key:"text"})),C=BMS.Misc.fnUrlName(BMS.Storage.get({name:"Rgn",key:"Code"})),e=BMS.Storage.get({name:"Rgn",key:"subregionDetails"}),k=""!=e?BMS.Misc.fnUrlName(JSON.parse(e).SubRegionName.toLowerCase()):"",E=""!=e?JSON.parse(e).SubRegionCode.toLowerCase():"",T={MT:"MT",CT:"ET",PL:"PL",SP:"ST",videos:"videos"},I={All:"All-Search",MT:"Movies-Search",CT:"Events-Search",PL:"Plays-Search",SP:"Sports-Search",videos:"Videos-Search"},s=null,i=!1,e=BMS.Storage.get({name:"userCine"}),r={url:"/quickbook-search.bms",type:"GET",headers:{"x-requested-from":"WEB"},data:{d:{mrs:BMS.Misc.fnGVal({key:"mrs",data:e}).replace(/;/g,"|"),mrb:BMS.Misc.fnGVal({key:"mrb",data:e}).replace(/;/g,"|")},cat:"",_:$.now()},dataType:"json"},l=[],c={},x={},A={NCPA:"/ncpa",PTHV:"/venue/prithvi-theatre/PTHV"},R=[];$.each(A,(function(e,t){R.push(e.toLowerCase())})),window.gaSendShowDates=function(e,t,n){var i=(i=new Date).toString();BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"quickbook_bookticketfor",section_click:e,daypart_click:t,click_datetime:i,eventID:n})};var P=null,L=[],d={options:{config:{minLength:1},dataSet:{name:"quickbook",source:function(e,t,i){s&&s.abort(),P=e;var n=x.dropdownButton.data("value"),a=x.dropdownButton.data("type"),e={q:e,sz:o="videos"==a?12:8,st:"ON",em:BMS.Storage.get({name:"le",storage:"C"}),lt:"",lg:""};(a=void 0!==(a=P)?a:"").length;a=global.blnIsTouchScreen?"":x.dropdownButton.data("label").toLowerCase();1!==x.dropdownButton.data("isall")&&"all"!==a?e.sc=n:delete r.data.sc,"videos"==x.dropdownButton.data("type")||global.blnIsTouchScreen&&"videos"==pageName?(e.sc="",e.c="video"):"video"==r.data.c&&delete r.data.c,-1===l.indexOf(n)&&(e.r=C,e.sr=E.toUpperCase()),r.data=$.extend(r.data,e,!0),r.data._=$.now(),s="in-preprod.bms.bz"==window.location.hostname?$.ajax(r).done((function(e,t,n){e=d.getProcessedSearchResults(e);i(e),y.statusCode=n.status})).fail((function(e){400==e.status&&$(".tt-searching").html("No Results Found"),y.statusCode=e.status})):$.ajax(r).done((function(e,t,n){e=d.getProcessedSearchResults(e);i(e),y.statusCode=n.status})).fail((function(e){y.statusCode=e.status}))},limit:o,display:function(e){return e.title},templates:{suggestion:function(e){var t=e.title;if("Video"==e.group?t+='<div class = "__cast">'+e.category+"</div>":"desc"in e&&null!=e.desc&&0<e.desc.length&&(t+='<div class = "__cast">'+e.desc.splice(0,3).join(", ")+"</div>"),null!=e.showDates&&0<e.showDates.length){t+=' <div class ="__booktext">Book tickets for ';for(var n=0;n<e.showDates.length;n++){t+='<span class="__showdate">';var i="";i+='" onclick="gaSendShowDates(',i+="'"+(null!=e.showDates[n].flag?"daypart":"dayofweek")+"',",i+="'"+e.showDates[n].text+"',",i+="'"+e.companyCode+"'",i+=')">',0==n?(t+='<a href="/buytickets/'+BMS.Misc.fnUrlName(e.title)+"-"+(""!=k?k:B.toLowerCase())+"/movie-"+(""!=E?E:C.toLowerCase())+"-"+e.companyCode+"-MT/"+e.showDates[n].value,null!=e.showDates[n].flag?t+="?q="+e.showDates[n].flag:t+="?q=DEL"):t+=' | <a href="/buytickets/'+BMS.Misc.fnUrlName(e.title)+"-"+(""!=k?k:B.toLowerCase())+"/movie-"+(""!=E?E:C.toLowerCase())+"-"+e.companyCode+"-MT/"+e.showDates[n].value+"/?q=DEL",t+=i,t+=e.showDates[n].text+"</a>  ",t+="</span>"}t+="</div>"}var a=x.dropdownButton.data("type");if("Video"==e.group&&"videos"==a&&"videos"==pageName&&!global.blnIsTouchScreen){switch(e.category){case"MyBollywood":categoryUrl="bollywood";break;case"MyStyle":categoryUrl="fashion-lifestyle";break;case"MyTV":categoryUrl="tv-news";break;default:categoryUrl="movie-trailers"}a=global.blnIsTouchScreen?60:30,a=e.title.length>a?e.title.substring(0,a)+"...":e.title,t='<div class="'+(global.blnIsTouchScreen?"video-card _touch":"video-card")+'" title="'+e.title+'">\t\t\t\t\t\t\t\t\t\t\t\t<div class="top-block">\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="img-container">\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img src="'+e.imgURL+'" alt="'+e.title+'" />\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="overlay-container">\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="play">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="__play-button"></div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="overlay"></div>\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t<div class="details">'+a+"</div>\t\t\t\t\t\t\t\t\t\t\t</div>"}return $("<div>").html(t)},category:{header:function(e){return $("<div>").text("")}}},displayCategory:function(e){var t="",n=null!=e.group?e.group.toLowerCase():"",i=null!=e.type?e.type.toUpperCase():"",a=null!=e.category?e.category.toLowerCase():"";switch(n){case"event":switch(i){case"MT":t="Movies";break;case"CT":t="Events";break;case"PL":t="Plays";break;case"SP":t="Sports"}break;case"venue":switch(i){case"MT":t="Cinemas";break;case"PL":t="Theaters";break;default:t="Venues"}break;case"offer":t="Offers";break;case"artist":t="Artists";break;case"person":t="Persons";break;case"experience":t="Experiences";break;case"video":if("videos"!=x.dropdownButton.data("type")||global.blnIsTouchScreen)t="Videos";else switch(a){case"mybollywood":t="MyBollywood";break;case"mytv":t="MyTV";break;case"mystyle":t="MyStyle";break;default:t="Trailers"}}return t}},onResultSelection:function(e,t){d.processSelectedResult(t)}},getProcessedSearchResults:function(e){!(function(e){try{null!=y.timer&&clearInterval(y.timer),null!=y.emptyResponseTimeOut&&clearTimeout(y.emptyResponseTimeOut),y.timeElapsed=0,y.results=e,y.time=e.meta&&e.meta.time?e.meta.time:"",y.ti=(e.meta&&e.meta.ti?e.meta:y).ti,y.output=e.hits||[],0==y.output.length&&(y.emptyResponseTimeOut=setTimeout((function(){y.typedAfterEmptyResponse=!1,y.typedAfterEmptyResponse||F(M["NO-RESULT"],"FAILED",0,0)}),5e3)),y.timer=setInterval((function(){y.timeElapsed++,5==y.timeElapsed&&""!=$(".search-box.tt-input").val()&&0!=y.output.length&&(y.fiveSecondsElapsed=!0,F(M["NO-CLICK"],"FAILED",5,0))}),1e3)}catch(e){BMS.Misc.fnErr({fnName:"initializeSearchRelevancyTimer",err:e})}})(e),L=e.hits||[];var t=[],n=["BFMU","BFRM"],i=0;if("videos"==x.dropdownButton.data("type")&&"object"==typeof e&&!_.isEmpty(e)){for(var a=[],o=[],s=[],r=e.hits,l=0;l<r.length;l++)"MyTV"==r[l].TYPE?s.push(r[l]):"MyBollywood"==r[l].TYPE?a.push(e.hits[l]):o.push(r[l]);e.hits=a.concat(o,s)}return _.each(e.hits,(function(e){if(void 0===e.Group){if("venue"===e.GRP.toLowerCase())if(-1!=$.inArray(e.ID,n)&&++i,1==i)e.ID="BFRM",hitType="|CT|PT|";else if(1<i&&i<=n.length)return void++i}else if("venue"===e.Group.toLowerCase())if(-1!=$.inArray(e.Code,n)&&++i,1==i)e.Code="BFRM",hitType="|CT|PT|";else if(1<i&&i<=n.length)return void++i;t.push(e)})),_.map(t,(function(e){var t;n=void 0===e.Type?-1!==e.TYPE.indexOf("|")?e.TYPE.split("|")[1]:e.TYPE:-1!==e.Type.indexOf("|")?e.Type.split("|")[1]:e.Type,t=void 0===e.GRP?{group:e.Group,type:n,title:e.Title,groupCode:e.Code,companyCode:e.CompanyCode,status:e.Status,releaseDate:e.ReleaseDate,desc:e["Desc.title"]}:"Video"===e.GRP?{group:e.GRP,category:e.TYPE,title:e.TITLE,videoId:e.ID,desc:e.DESC,videoURL:e.VURL,imgURL:e.IURL}:"Article"===e.GRP||"BoxOffice"===e.GRP?{group:e.GRP,type:e.TYPE,title:e.TITLE,desc:e.DESC,pageURL:e.L_URL}:{group:e.GRP,type:n,title:e.TITLE,webUrl:e.WEB_REDIRECT_URL,groupTitle:e.GROUP_TITLE,groupCode:e.CODE,companyCode:e.ID,status:e.ST,releaseDate:e.RDATE,desc:e.DESC,experienceName:e.UNAME,venuesCC:e.CC,showDates:e.SHOWDATE,eventStrTags:e.EVENTSTRTAGS};var n=null,i=null;return _.isUndefined(e.inner_hits)||$.isEmptyObject(e.inner_hits)||(n=e.inner_hits.map((function(e,t){return 0!==t&&"Y"!==e.IsDefault||(i=e.Code),{isDefault:e.IsDefault,dimension:e.Format,language:e.Language,code:e.code}})),t.defaultEventCode=i),_.isNull(i)&&(i=void 0===e.CODE?e.Code:e.CODE),t.innerHits=n,t}))},processSelectedResult:function(e,t){for(var n,i,a,o,s,r,l,c,d,u={},p=0,f=null,g=0;g<L.length;g++)if("Video"==e.group){if(L[g].GRP==e.group&&L[g].TYPE==e.category&&L[g].ID==e.videoId){u=L[g],p=g+1;break}}else if(L[g].GRP==e.group&&L[g].CODE==e.groupCode&&L[g].ID==e.companyCode){u=L[g],p=g+1;break}f=global.blnIsTouchScreen?"M5":"WEB";try{var h=BMS.Storage.get({name:"ld",key:"MEMBEREMAIL"});u.INPUT=P,u.REGION=BMS.Storage.get({name:"Rgn",storage:"C",key:"Code"});var m=JSON.parse(BMS.Storage.get({name:"buytickets",storage:"L",key:"filters"})||"{}").subRegions||[];u.SUBREGION=m.join(", "),u.POSN=p,u.SRC=f,u.EMAIL=""!=h?h:"",u.LAT=b,u.LONG=w,u.GRP=e.group||"",u.BMSID=BMS.Storage.get({name:"bmsId"})?BMS.Storage.get({name:"bmsId"}):"",u.THRESHOLD=1e3*y.timeElapsed,u.TIME=y.time,u.MSG=y.statusCode,u.ti=y.ti,y.timeElapsed<5?u.ERR_TYPE=M.SUCCESS:5<y.timeElapsed&&(u.ERR_TYPE=M.LATE),u.OUTPUT=[]}catch(e){}if("video"==e.group.toLowerCase()?(n="MyBollywood"==e.category?"bollywood":"MyTV"==e.category?"tv-news":"fashion-lifestyle",S=e.title.toLowerCase(),i=BMS.Misc.fnUrlName(e.title).toLowerCase(),a=e.videoId,s="videos",v=e.group.toLowerCase()):(d="",S=e.title.toLowerCase(),a=void 0===e.companyCode?e.defaultEventCode:e.companyCode,o=e.groupCode,v=e.group.toLowerCase(),s=e.type.toUpperCase(),c=""==(c=BMS.Misc.fnUrlName(S))?"-":c,"CT"!=s&&"PL"!=s&&"PT"!=s&&"SP"!=s&&"AT"!=s||(r=e.webUrl,l=void 0===e.groupTitle?"":e.groupTitle.toLowerCase())),"event"===v)switch(s){case"MT":_.isEmpty(e.status)||"CS"!==e.status&&"OF"!==e.status?d="/buytickets/"+c+"-"+(""!=k?k:B.toLowerCase())+"/movie-"+(""!=E?E:C.toLowerCase())+"-"+a+"-MT":(_.isEmpty(B)||_.isUndefined(B)||(d="/"+B.toLowerCase()),d+="/movies/"+c+"/"+a);break;case"CT":d=void 0!==r?r:"/events/"+BMS.Misc.fnUrlName(l);break;case"AT":d=void 0!==r?r:"/activities/"+BMS.Misc.fnUrlName(l);break;case"PL":d=void 0!==r?r:"/plays/"+BMS.Misc.fnUrlName(l);break;case"PT":d=void 0!==r?r:"/events/"+BMS.Misc.fnUrlName(l);break;case"SP":_.isEmpty(B)||_.isUndefined(B)||(d="/"+B.toLowerCase(),d+="/sports/"+BMS.Misc.fnUrlName(l)+"/"+a),void 0!==r&&(d=r)}else"venue"===v?d="MT"===s?void 0===e.venuesCC?"/buytickets/"+c+"-"+(""!=k?k:B.toLowerCase())+"/cinema-"+(""!=E?E:C.toLowerCase())+"-"+o+"-MT":"/buytickets/"+c+"-"+(""!=k?k:B.toLowerCase())+"/cinema-"+(""!=E?E:C.toLowerCase())+"-"+a+"-MT":void 0===e.venuesCC?-1!=$.inArray(e.companyCode.toLowerCase(),R)?A[e.companyCode.toUpperCase()]:e.companyCode.toLowerCase()!=e.companyCode.toLowerCase()?"/venue/"+c+"/"+e.companyCode+"-"+e.groupCode:"/venue/"+c+"/"+e.companyCode:-1!=$.inArray(e.venuesCC.toLowerCase(),R)?A[e.venuesCC.toUpperCase()]:"/venue/"+c+"/"+e.venuesCC+"-"+a:"person"===v?d="/person/"+c+"/"+a:"offer"===v?d="/offers/"+c+"/"+(void 0===o?a:o):"experience"===v?d="/experiences/bms-picks/"+e.experienceName+"/"+a:"video"===v?d="/videos/"+n+"/"+i+"/"+a:"article"!==v&&"boxoffice"!==v||(d=e.pageURL);BMS.Misc.fnBusy(!0),"venue"===v&&(a=e.groupCode),BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"QuickBook",{"Is Search":"Yes","Search Term":P,ProductID:a,"Event Name":S,"Event Type":T[s],Appcode:window.global.strAppCode});var v=x.dropdownButton.data(),S=null,S=_.isEmpty(v)?s:1===v.isall&&"videos"!=v.value?"All":v.value;BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"search",category:"Quickbook",action:I[S],label:P}),window.location.assign(d)}};function u(e){var t,n;27!=e.keyCode&&27!=e.which||i||!a().length?(i=!1,global.blnIsTouchScreen&&!a()&&(13===e.keyCode||13==e.which?0<(n=$(e.target).parent().find(".tt-cursor")).length&&n.trigger("tap"):O())):(i=!0,j(),e.stopPropagation()),"videos"==pageName&&(t="videos"==x.dropdownButton.data("type"),n=$(".tt-menu .tt-dataset"),e=$("#search-list-icon"),t||global.blnIsTouchScreen&&"videos"==pageName?(n.addClass("tt-dataset-videos"),global.blnIsTouchScreen&&n.addClass("_touch"),t&&e.hide()):n.removeClass("tt-dataset-videos"))}function p(){t("")}var t=function(e){c.typeahead("val",e)},a=function(){return c.typeahead("val")};function f(e){27!=e.keyCode&&27!=e.which||h(!1)}function n(e){_.isUndefined(e)&&(e=x.dropdownButton.data("type"));var t=(1===x.dropdownButton.data("isall")?x.searchBoxContainer.find('li [data-type="'+e+'"][data-isall=1]'):x.searchBoxContainer.find('li [data-type="'+e+'"][data-isall=0]')).data("search-placeholder");x.searchBox.attr("placeholder",t),BMS.Misc.QuickbookModal.show(e),x.searchBox.focus(),$(document).bind("keyup",f)}var g=function(e){var t,n,i,a;_.isUndefined(e)&&(e=x.dropdownButton.data("type"),x.dropdownMenu.find("[data-type="+e+"][data-isall=0]").parent().removeClass("none")),$("#quickbook-wrapper .qb-modal-overlay").hasClass("none")||(BMS.Misc.QuickbookModal.hide(),n=(t=x.dropdownMenu.find("[data-isall=1]")).data("type"),i=t.data("value"),a=t.data("placeholder"),t.data("search-placeholder"),e=t.text(),x.searchBox.attr("placeholder",a),t.parent().addClass("none"),x.dropdownButton.data({type:n,value:i,isall:1}).find(".icon-type").html(t.find(".icon-type").html()).next().text(e),p(),x.searchBox.blur(),$(document).unbind("keyup",f))},h=function(e){!0===e?(BMS.Misc.QuickbookModal.isOpen()||BMS.Misc.Router.triggerRoute("quickbook",!1),n()):(BMS.Misc.Router.triggerRoute("",!1),g())};function m(e){var t=$(this),n=t.data("type"),i=t.data("value"),a=t.data("label");x.searchDropdown.removeClass("_hovered"),p();var o,s=0;1===t.data("isall")&&(s=1),x.dropdownButton.data({type:n,value:i,isall:s,label:a}).find(".icon-type").html(t.find(".icon-type").html()).next().text(t.text()),x.dropdownMenu.children().removeClass("none"),t.parent().addClass("none"),o=x.dropdownButton.data("type"),n="videos"==o,s=$(".tt-menu .tt-dataset"),t=$("#search-list-icon"),n||global.blnIsTouchScreen&&"videos"==pageName?(s.addClass("tt-dataset-videos"),global.blnIsTouchScreen&&s.addClass("_touch"),g(o)):(s.removeClass("tt-dataset-videos"),h(!0)),"videos"!=pageName||global.blnIsTouchScreen||n&&t.hide(),fnHandleQuickbookRecommendation(i);i={"Category Selected":x.dropdownButton.text().trim(),Appcode:window.global.strAppCode};BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"QuickBook",i);i=BMS.Storage.get({name:"ld",storage:"C"});return BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"applied_quickbook_7",action:"primary",label:a,user_mode:""!=i?"Logged In":"Guest Mode"}),!1}function v(){var e=x.dropdownButton.data("type");$("#quickbook-wrapper .qb-modal-overlay").hasClass("none")&&("videos"!=e?h(!0):g(e),x.searchDropdown.removeClass("_hovered"))}function S(){var e=x.dropdownButton.data("type");$("#quickbook-wrapper .qb-modal-overlay").hasClass("none")&&0<$("#quickbook-wrapper").length&&("videos"!=e?h(!0):g(e)),O(),global.blnIsTouchScreen||(handleRecommendedEventTextResize(),fnHandleQuickbookRecommendation($("#btn-dd-search").data("value")))}var D={trendingSearchData:{},TYPES:{MOVIES:"MT",EVENTS:"CT",ALL:"ALL",FINAL:"FINAL"},hitsData:{},getCategoryDetails:function(e){var t="",n="";switch(e){case"MT":default:t="Movie",n="icon-movie";break;case"CT":t="Event",n="icon-event";break;case"PL":t="Play",n="icon-plays";break;case"SP":t="Sport",n="icon-sports"}return{category:t,icon:n}}};function O(){var e;global.blnIsTouchScreen&&!a()&&"videos"!=pageName&&(_.isEmpty(D.trendingSearchData)?((e=$("#qb-search-box-container .tt-menu")).find(".tt-dataset").html('<div class="tt-searching">Searching...</div>'),e.show()):0<$("#qb-search-box-container").length&&0<$("#qb-search-box-container .trending-search-suggestion").length?$("#qb-search-box-container .tt-menu").show():U())}function N(){var e=$(".ts-desktop-main .trending-search-text"),t=$(".ts-desktop-main .trending-search-result-block"),n=e.attr("width"),i=Math.floor(parseInt($(".ts-desktop-main .ts-desktop-wrapper").css("width")))-(Math.floor(n)+2);e.css("width",n+"px"),t.css("width",i+"px")}function U(){for(var e=D.TYPES.FINAL,t=D.hitsData[e],n=t.length,i=$("#qb-search-box-container .tt-menu"),a=i.find(".tt-dataset"),o='<div class="tt-category">Popular Searches in '+BMS.Storage.get({name:"Rgn",key:"text"})+"</div>",s=0;s<n;s++){var r=D.getCategoryDetails(t[s].TYPE);o+='<div data-search-type="'+e+'" \t\t\t\t\t\tdata-search-index="'+s+'" \t\t\t\t\t\tclass = "tt-suggestion tt-selectable trending-search-suggestion'+(0===s?" tt-cursor":"")+'" >\t\t\t\t\t\t<span class="icon-type">\t\t\t\t\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">\t\t\t\t\t\t\t<use xlink:href="/icons/common-icons.svg#'+r.icon+'"></use>\t\t\t\t\t\t\t</svg>\t\t\t\t\t\t</span>\t\t\t\t\t\t<div class="trending-data">\t\t\t\t\t\t\t<div class="__title">'+t[s].TITLE+'</div>\t\t\t\t\t\t\t<div class="__category">'+r.category+"</div>\t\t\t\t\t\t</div>\t\t\t\t\t</div>"}a.html(o),$("#qb-search-box-container .trending-search-suggestion").off(".trending").on("tap.trending",G),i.show()}function G(e){var t=$(e.currentTarget),n=t.data("search-type"),i=D.hitsData[n],a=t.data("search-index"),o=i[a],e=$.extend(!0,{},o),s="",n=o.TITLE.toLowerCase(),r=o.ID,l=o.ST,t=JSON.parse(BMS.Storage.get({name:"buytickets",storage:"L",key:"filters"})||"{}").subRegions||[],i=o.TYPE.toUpperCase(),c=(c=BMS.Misc.fnUrlName(n))||"-";try{e.INPUT="",e.REGION=BMS.Storage.get({name:"Rgn",storage:"C",key:"Code"}),e.SUBREGION=t.join(", "),e.POSN=a+1,e.SRC="M5",e.LAT=b,e.LONG=w}catch(e){}switch(i){case"MT":_.isEmpty(l)||"CS"!==l?s="/buytickets/"+c+"-"+(""!=k?k:B.toLowerCase())+"/movie-"+(""!=E?E:C.toLowerCase())+"-"+r+"-MT":(_.isEmpty(B)||_.isUndefined(B)||(s="/"+B.toLowerCase()),s+="/movies/"+c+"/"+r);break;case"CT":s="/events/"+c+"/"+r;break;case"PL":s="/plays/"+c+"/"+r;break;case"SP":_.isEmpty(B)||_.isUndefined(B)||(s="/"+B.toLowerCase()),s+="/sports/"+c+"/"+r}void 0,BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"trending_quickbook_5",domain:"bms_mobileweb",pagetype:"QuickBook",product_type:i,product_name:o.TITLE}),BMS.Misc.fnBusy(!0),window.location.assign(s)}function F(e,t,n,i){try{var a=BMS.Storage.get({name:"ld",key:"MEMBEREMAIL"}),o={};o.INPUT=$(".search-box.tt-input").val(),o.REGION=BMS.Storage.get({name:"Rgn",storage:"C",key:"Code"});var s=JSON.parse(BMS.Storage.get({name:"buytickets",storage:"L",key:"filters"})||"{}").subRegions||[];o.SUBREGION=s.join(", "),o.SRC=global.blnIsTouchScreen?"M5":"WEB",o.EMAIL=""!=a?a:"",o.LAT=b,o.LONG=w,o.ST="",o.CODE="",o.TITLE="",o.ID="",o.TYPE="",e==M["NO-CLICK"]?o.OUTPUT=y.output:o.OUTPUT=[],o.GRP=t,o.BMSID=""!=BMS.Storage.get({name:"bmsId"})?BMS.Storage.get({name:"bmsId"}):"",o.THRESHOLD=1e3*n,o.TIME=y.time,o.MSG=y.statusCode,o.ERR_TYPE=e,o.POSN=i,o.ti=y.ti}catch(e){BMS.Misc.fnErr({fnName:"fnPushSearchRelevancyData",err:e})}}function j(){try{y.startedTyping&&F(M.EXIT,"FAILED",0,0),null!=y.timer&&clearInterval(y.timer),null!=y.emptyResponseTimeOut&&clearTimeout(y.emptyResponseTimeOut),y={startedTyping:!1,timeElapsed:0,timer:null,fiveSecondsElapsed:!1,results:null,time:null,ti:"",statusCode:"",emptyResponseTimeOut:null,typedAfterEmptyResponse:!1,output:[]}}catch(e){BMS.Misc.fnErr({fnName:"fnResetSearchRelevancy",err:e})}}function q(){var e=x.dropdownButton.data("type");"videos"!=e?h(!0):g(e)}$((function(){x.searchBoxContainer=$(".qb-search-box-container"),x.searchBox=x.searchBoxContainer.find(".search-box"),x.dropdownButton=x.searchBoxContainer.find("#btn-dd-search"),x.dropdownMenu=x.searchBoxContainer.find(".search-dropdown-menu"),x.searchDropdown=x.searchBoxContainer.find(".search-dropdown"),c=x.searchBox.typeaheadWrapper(d.options),BMS.Misc.QuickbookModal.initialize(),c.on("keyup",u),x.dropdownMenu.find(".__item").click(m),x.dropdownButton.on("click",v),x.searchBox.on("focus",S),$("#search-list-icon",x.searchBoxContainer).on("click",q),x.searchBoxContainer.on("click","#qb-region-link",(function(){return BMS.Region.fnSwStates(""),!1})),x.searchDropdown.on("mouseover",(function(){x.searchDropdown.addClass("_hovered")})),x.searchDropdown.on("mouseleave",(function(){x.searchDropdown.removeClass("_hovered")})),x.searchBoxContainer.find(".twitter-typeahead").css("width","100%"),x.searchBoxContainer.find(".search-box.tt-input").on("input",(function(){y.startedTyping=!0,y.typedAfterEmptyResponse=!0,""==this.value&&y.startedTyping&&F(M.CLEAR,"FAILED",0,0)})),$(".qb-modal-overlay #btn-close, .qb-modal-overlay #btn-back").click((function(){var e,t,n;h(!1),"videos"==pageName&&(e="videos"==x.dropdownButton.data("type"),t=$(".tt-menu .tt-dataset"),n=$("#search-list-icon"),e||global.blnIsTouchScreen&&"videos"==pageName?(t.addClass("tt-dataset-videos"),global.blnIsTouchScreen&&t.addClass("_touch"),e&&n.hide()):t.removeClass("tt-dataset-videos")),j()})),"videos"==pageName&&(t="videos"==x.dropdownButton.data("type"),i=$(".tt-menu .tt-dataset"),n=$("#search-list-icon"),t||global.blnIsTouchScreen&&"videos"==pageName?(i.addClass("tt-dataset-videos"),global.blnIsTouchScreen&&i.addClass("_touch"),t&&n.hide()):i.removeClass("tt-dataset-videos"));var e,t,n,i,a="MT";switch(pageName){case"moives":a="MT";break;case"events":a="CT";break;case"sports":a="SP";break;case"plays":a="PL";break;default:a="MT"}fnShowQuickBookRecommendation(a),global.blnIsTouchScreen||(e="",t=$(".ts-desktop-main .trending-search-text"),n=$(".ts-desktop-main .trending-search-result-block"),i=BMS.Storage.get({name:"Rgn",key:"text"}),e=_.isEmpty(i)?"":"in "+i+" ",t.find(".trending-in-region-text").html(e),i=parseInt(t.css("width"))+parseInt(t.css("padding-left"))+parseInt(t.css("padding-right")),t.attr("width",i),e=Math.floor(parseInt($(".ts-desktop-main .ts-desktop-wrapper").css("width")))-(Math.floor(i)+2),t.css("width",i+"px"),n.css("width",e+"px"),N(),handleWindowResize())})),fnInitializeQuickbookRecommendation=function(){var e;global.blnIsTouchScreen||0<(e=$(".quickbook-recommendation-header")).length&&e.off(".recomm").on("click.recomm",(function(e){$(this).closest(".quickbook-recommendation-wrapper").find(".quickbook-recommendation-body").toggle(),$(this).find(".qb-symbol").toggle()}))},fnShowQuickBookRecommendation=function(e){fnInitializeQuickbookRecommendation(),fnHandleQuickbookRecommendation(e),fnBindQBRecommAnalytics()},handleRecommendedEventTextResize=function(){var e={event:$(".quickbook-recommendation-wrapper.reco-events"),play:$(".quickbook-recommendation-wrapper.reco-plays"),sport:$(".quickbook-recommendation-wrapper.reco-sports"),movie:$(".quickbook-recommendation-wrapper.reco-movies")};$.each(e,(function(e,t){var n,i;0!=t.length&&0!=t.find(".recommended-event-card").length&&"none"!=$(t).find(".quickbook-recommendation-body").css("display")&&(n=$(t).find(".quickbook-recommendation-body").offset().left,i=$(t).find(".recommended-event-card").first().offset().left,$(t).find(".quickbook-recommendation-header").css("margin-left",i-n))}))},fnHandleQuickbookRecommendation=function(e){var t=$(".qb-overflow-wrapper .qb-overflow-container").find(".quickbook-recommendation-container");if(0<t.length){var n="";switch(t.addClass("hidden"),e){case"MT":n=".reco-movies";break;case"CT":n=".reco-events";break;case"PL":n=".reco-plays";break;case"SP":n=".reco-sports"}$typeRecommendation=t.closest(n);t=$typeRecommendation.find(".recommended-event-card");0<t.length?($typeRecommendation.removeClass("hidden"),t.each((function(e,t){t=$(t).find(".event-image-container img");t.attr("src",t.attr("data-src"))}))):$typeRecommendation.addClass("hidden"),handleRecommendedEventTextResize(),fnFormatEllipses($(".quickbook-recommendation-body.reco-events, .quickbook-recommendation-body.reco-plays, .quickbook-recommendation-body.reco-sports").find(".recommended-event-card").find(".event-name-container"))}},fnBindQBRecommAnalytics=function(){showQuickBookRecomm&&$(".quickbook-recommendation-container .quickbook-recommendation-body .__movie-name,\t\t\t\t.quickbook-recommendation-container .quickbook-recommendation-body .__location").off(".qbrecommanalytics").on("click.qbrecommanalytics",fnPushQBRecommMovieCinemaNameClick)},fnFormatEllipses=function(e){try{var t=e.length;maxLength=60,minLength=20,0<t&&e.map((function(e,t){var n=$(t),i=n.text()?n.text().trim():"",t=i.length;t>=maxLength?(maxLength,i=i.substr(0,maxLength),n.text(i+"...").addClass("resizedFont")):t<maxLength&&t>minLength&&n.addClass("resizedFont")}))}catch(e){BMS.Misc.fnErr({fnName:"formatEllipses",err:e})}},fnPushQBRecommMovieCinemaNameClick=function(e){var t,n,i;e&&(t=$(e.currentTarget),n=(i=$(e.currentTarget).parents(".detail")).data("movie-name"),e=i.data("venue-name"),i=i.data("position"),i={event:t.hasClass("__movie-name")?"click_moviename_quickbook_1":"click_cinemaname_quickbook_2",eventname:n||null,venue_name:e||null,rposition:i||null},BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},i))},fnPushQBShowtimeClick=function(e,t,n,i,a){var o=BMS.Storage.get({name:"ld",storage:"C"}),s=$(".quickbook-recommendation-container").find(".recommended-event-card[data-position='"+e+"']").data("movie-name");BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"clicked_quickbook_6",action:"recommendedmovie",label:e,meta_1:a&&i?"showtime":"title",meta_2:a&&i?a:s,user_mode:""!=o?"Logged In":"Guest Mode"})},fnPushQBViewAnalytics=function(){if(showQuickBookRecomm)for(var e=$(".quickbook-recommendation-container .detail"),t=e.length,n=0;n<t;n++){for(var i=$(e[n]),a={event:"view_recommend_quickbook_4",eventname:i.data("movie-name"),venue_name:i.data("venue-name")},o=i.find(".__day"),s=o.length,r=i.find(".__details"),l=r.length,c=0;c<s;c++)a["date"+(c+1)]=$(o[c]).text();for(c=0;c<l;c++){for(var d=$(r[c]).find(".timestamp"),u="",p=d.length,f=0;f<p;f++)u+=0!==f?"|":"",u+=d[f].innerHTML;a["showtime"+(c+1)]=u}BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},a)}};BMS.Misc.Router.registerRoute("quickbook","quickbookSearchBox",n,g),BMS.Misc.Quickbook=BMS.Misc.Quickbook||{},BMS.Misc.Quickbook.searchBox={getVal:a,setVal:t,triggerQuickbook:function(){h(!0)}},handleWindowResize=function(){$(window).resize((function(){N(),handleRecommendedEventTextResize()}))}})(),(function(e){var f=e(window);e.fn.visible=function(e,t,n){if(!(this.length<1)){var i=1<this.length?this.eq(0):this,a=i.get(0),o=f.width(),s=f.height(),n=n||"both",t=!0!==t||a.offsetWidth*a.offsetHeight;if("function"==typeof a.getBoundingClientRect){var r=a.getBoundingClientRect(),l=0<=r.top&&r.top<s,c=0<r.bottom&&r.bottom<=s,d=0<=r.left&&r.left<o,u=0<r.right&&r.right<=o,p=e?l||c:l&&c,r=e?d||u:d&&u;return"both"===n?t&&p&&r:"vertical"===n?t&&p:"horizontal"===n?t&&r:void 0}l=f.scrollTop(),c=l+s,d=f.scrollLeft(),u=d+o,p=i.offset(),r=p.top,s=r+i.height(),o=p.left,p=o+i.width(),i=!0===e?s:r,r=!0===e?r:s,s=!0===e?p:o,p=!0===e?o:p;return"both"===n?!!t&&r<=c&&l<=i&&p<=u&&d<=s:"vertical"===n?!!t&&r<=c&&l<=i:"horizontal"===n?!!t&&p<=u&&d<=s:void 0}}})(jQuery),(function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof exports?module.exports=e(require("jquery")):e(jQuery)})((function(c){"use strict";var i,o=window.Slick||{};i=0,(o=function(e,t){var n=this;n.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:c(e),appendDots:c(e),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button"><svg version="1.1" style="stroke-width: 10px; stroke: #FFF; fill: #FFF;" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><use xlink:href="/icons/common-icons.svg#icon-prev-arrow"></use></svg></button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button"><svg version="1.1" style="stroke-width: 5px; stroke: #FFF; fill: #FFF;" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><use xlink:href="/icons/common-icons.svg#icon-next-arrow"></use></svg></button>',autoplay:!0,autoplaySpeed:3e3,centerMode:!0,centerPadding:"50px",cssEase:"ease",customPaging:function(e,t){return'<button type="button" data-role="none" role="button" aria-required="false" tabindex="0">'+(t+1)+"</button>"},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",offset:-75,mobileFirst:!1,pauseOnHover:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},n.initials={animating:!1,dragging:!1,autoPlayTimer:500,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},c.extend(n,n.initials),n.activeBreakpoint=null,n.animType=null,n.animProp=null,n.breakpoints=[],n.breakpointSettings=[],n.cssTransitions=!1,n.hidden="hidden",n.paused=!1,n.positionProp=null,n.respondTo=null,n.rowCount=1,n.shouldClick=!0,n.$slider=c(e),n.$slidesCache=null,n.transformType=null,n.transitionType=null,n.visibilityChange="visibilitychange",n.windowWidth=0,n.windowTimer=null,n.visibleDiv=!1,e=c(e).data("slick")||{},n.options=c.extend({},n.defaults,e,t),n.currentSlide=n.options.initialSlide,n.originalSettings=n.options,void 0!==document.mozHidden?(n.hidden="mozHidden",n.visibilityChange="mozvisibilitychange"):void 0!==document.webkitHidden&&(n.hidden="webkitHidden",n.visibilityChange="webkitvisibilitychange"),n.autoPlay=c.proxy(n.autoPlay,n),n.autoPlayClear=c.proxy(n.autoPlayClear,n),n.changeSlide=c.proxy(n.changeSlide,n),n.clickHandler=c.proxy(n.clickHandler,n),n.selectHandler=c.proxy(n.selectHandler,n),n.setPosition=c.proxy(n.setPosition,n),n.swipeHandler=c.proxy(n.swipeHandler,n),n.dragHandler=c.proxy(n.dragHandler,n),n.keyHandler=c.proxy(n.keyHandler,n),n.autoPlayIterator=c.proxy(n.autoPlayIterator,n),n.instanceUid=i++,n.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,n.registerBreakpoints(),n.init(!0),n.checkResponsive(!0),c(window).scroll((function(){n.lazyLoad.call(n,!0)})),c(window).resize((function(){n.lazyLoad.call(n)}))}).prototype.checkResponsive=function(e,t){var n,i,a,o=this,s=!1,r=o.$slider.width(),l=window.innerWidth||c(window).width();if("window"===o.respondTo?a=l:"slider"===o.respondTo?a=r:"min"===o.respondTo&&(a=Math.min(l,r)),o.options.responsive&&o.options.responsive.length&&null!==o.options.responsive){for(n in i=null,o.breakpoints)o.breakpoints.hasOwnProperty(n)&&(!1===o.originalSettings.mobileFirst?a<o.breakpoints[n]&&(i=o.breakpoints[n]):a>o.breakpoints[n]&&(i=o.breakpoints[n]));null!==i?null!==o.activeBreakpoint&&i===o.activeBreakpoint&&!t||(o.activeBreakpoint=i,"unslick"===o.breakpointSettings[i]?o.unslick(i):(o.options=c.extend({},o.originalSettings,o.breakpointSettings[i]),!0===e&&(o.currentSlide=o.options.initialSlide),o.refresh(e)),s=i):null!==o.activeBreakpoint&&(o.activeBreakpoint=null,o.options=o.originalSettings,!0===e&&(o.currentSlide=o.options.initialSlide),o.refresh(e),s=i),e||!1===s||o.$slider.trigger("breakpoint",[o,s])}},o.prototype.registerBreakpoints=function(){var e,t,n,i=this,a=i.options.responsive||null;if("array"===c.type(a)&&a.length){for(e in i.respondTo=i.options.respondTo||"window",a)if(n=i.breakpoints.length-1,t=a[e].breakpoint,a.hasOwnProperty(e)){for(;0<=n;)i.breakpoints[n]&&i.breakpoints[n]===t&&i.breakpoints.splice(n,1),n--;i.breakpoints.push(t),i.breakpointSettings[t]=a[e].settings}i.breakpoints.sort((function(e,t){return i.options.mobileFirst?e-t:t-e}))}},o.prototype.addSlide=o.prototype.slickAdd=function(e,t,n){var i=this;if("boolean"==typeof t)n=t,t=null;else if(t<0||t>=i.slideCount)return!1;i.unload(),"number"==typeof t?0===t&&0===i.$slides.length?c(e).appendTo(i.$slideTrack):n?c(e).insertBefore(i.$slides.eq(t)):c(e).insertAfter(i.$slides.eq(t)):!0===n?c(e).prependTo(i.$slideTrack):c(e).appendTo(i.$slideTrack),i.$slides=i.$slideTrack.children(this.options.slide),i.$slideTrack.children(this.options.slide).detach(),i.$slideTrack.append(i.$slides),i.$slides.each((function(e,t){c(t).attr("data-slick-index",e)})),i.$slidesCache=i.$slides,i.reinit()},o.prototype.animateSlide=function(e,t){var n={},i=this;!0===i.options.rtl&&!1===i.options.vertical&&(e=-e),!1===i.transformsEnabled?!1===i.options.vertical?i.$slideTrack.animate({left:e},i.options.speed,i.options.easing,t):i.$slideTrack.animate({top:e},i.options.speed,i.options.easing,t):!1===i.cssTransitions?(!0===i.options.rtl&&(i.currentLeft=-i.currentLeft),c({animStart:i.currentLeft}).animate({animStart:e},{duration:i.options.speed,easing:i.options.easing,step:function(e){e=Math.ceil(e),!1===i.options.vertical?n[i.animType]="translate("+e+"px, 0px)":n[i.animType]="translate(0px,"+e+"px)",i.$slideTrack.css(n)},complete:function(){t&&t.call()}})):(i.applyTransition(),e=Math.ceil(e),!1===i.options.vertical?n[i.animType]="translate3d("+e+"px, 0px, 0px)":n[i.animType]="translate3d(0px,"+e+"px, 0px)",i.$slideTrack.css(n),t&&setTimeout((function(){i.disableTransition(),t.call()}),i.options.speed))},o.prototype.asNavFor=function(t){var e=this.options.asNavFor;null!==(e=e&&null!==e?c(e).not(this.$slider):e)&&"object"==typeof e&&e.each((function(){var e=c(this).slick("getSlick");e.unslicked||e.slideHandler(t,!0)}))},o.prototype.applyTransition=function(e){var t=this,n={};!1===t.options.fade?n[t.transitionType]=t.transformType+" "+t.options.speed+"ms "+t.options.cssEase:n[t.transitionType]="opacity "+t.options.speed+"ms "+t.options.cssEase,(!1===t.options.fade?t.$slideTrack:t.$slides.eq(e)).css(n)},o.prototype.autoPlay=function(){this.autoPlayTimer&&clearInterval(this.autoPlayTimer),this.slideCount>this.options.slidesToShow&&!0!==this.paused&&(this.autoPlayTimer=setInterval(this.autoPlayIterator,this.options.autoplaySpeed))},o.prototype.autoPlayClear=function(){this.autoPlayTimer&&clearInterval(this.autoPlayTimer)},o.prototype.autoPlayIterator=function(){var e=this;!1===e.options.infinite?1===e.direction?(e.currentSlide+1===e.slideCount-1&&(e.direction=0),e.slideHandler(e.currentSlide+e.options.slidesToScroll)):(e.currentSlide-1==0&&(e.direction=1),e.slideHandler(e.currentSlide-e.options.slidesToScroll)):e.slideHandler(e.currentSlide+e.options.slidesToScroll)},o.prototype.buildArrows=function(){var e=this;!0===e.options.arrows&&(e.$prevArrow=c(e.options.prevArrow).addClass("slick-arrow"),e.$nextArrow=c(e.options.nextArrow).addClass("slick-arrow"),e.slideCount>e.options.slidesToShow?(e.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),e.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.prependTo(e.options.appendArrows),e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.appendTo(e.options.appendArrows),!0!==e.options.infinite&&e.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):e.$prevArrow.add(e.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},o.prototype.buildDots=function(){var e,t,n=this;if(!0===n.options.dots&&n.slideCount>n.options.slidesToShow){for(t='<ul class="'+n.options.dotsClass+'">',e=0;e<=n.getDotCount();e+=1)t+="<li>"+n.options.customPaging.call(this,n,e)+"</li>";n.$dots=c(t+="</ul>").appendTo(n.options.appendDots),n.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")}},o.prototype.buildOut=function(){var e=this;e.$slides=e.$slider.children(e.options.slide+":not(.slick-cloned)").addClass("slick-slide"),e.slideCount=e.$slides.length,e.$slides.each((function(e,t){c(t).attr("data-slick-index",e).data("originalStyling",c(t).attr("style")||"")})),e.$slidesCache=e.$slides,e.$slider.addClass("slick-slider"),e.$slideTrack=0===e.slideCount?c('<div class="slick-track"/>').appendTo(e.$slider):e.$slides.wrapAll('<div class="slick-track"/>').parent(),e.$list=e.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent(),e.$slideTrack.css("opacity",0),!0!==e.options.centerMode&&!0!==e.options.swipeToSlide||(e.options.slidesToScroll=1),c("img[data-lazy]",e.$slider).not("[src]").addClass("slick-loading"),e.setupInfinite(),e.buildArrows(),e.buildDots(),e.updateDots(),e.setSlideClasses("number"==typeof e.currentSlide?e.currentSlide:0),!0===e.options.draggable&&e.$list.addClass("draggable")},o.prototype.buildRows=function(){var e,t,n,i=this,a=document.createDocumentFragment(),o=i.$slider.children();if(1<i.options.rows){for(n=i.options.slidesPerRow*i.options.rows,t=Math.ceil(o.length/n),e=0;e<t;e++){for(var s=document.createElement("div"),r=0;r<i.options.rows;r++){for(var l=document.createElement("div"),c=0;c<i.options.slidesPerRow;c++){var d=e*n+(r*i.options.slidesPerRow+c);o.get(d)&&l.appendChild(o.get(d))}s.appendChild(l)}a.appendChild(s)}i.$slider.html(a),i.$slider.children().children().children().css({width:100/i.options.slidesPerRow+"%",display:"inline-block"})}},o.prototype.changeSlide=function(e,t){var n,i=this,a=c(e.target);switch(a.is("a")&&e.preventDefault(),a.is("li")||(a=a.closest("li")),n=i.slideCount%i.options.slidesToScroll!=0?0:(i.slideCount-i.currentSlide)%i.options.slidesToScroll,e.data.message){case"previous":o=0==n?i.options.slidesToScroll:i.options.slidesToShow-n,i.slideCount>i.options.slidesToShow&&i.slideHandler(i.currentSlide-o,!1,t);break;case"next":o=0==n?i.options.slidesToScroll:n,i.slideCount>i.options.slidesToShow&&i.slideHandler(i.currentSlide+o,!1,t);break;case"index":var o=0===e.data.index?0:e.data.index||a.index()*i.options.slidesToScroll;i.slideHandler(i.checkNavigable(o),!1,t),a.children().trigger("focus");break;default:return}},o.prototype.checkNavigable=function(e){var t=this.getNavigableIndexes(),n=0;if(e>t[t.length-1])e=t[t.length-1];else for(var i in t){if(e<t[i]){e=n;break}n=t[i]}return e},o.prototype.cleanUpEvents=function(){var e=this;e.options.dots&&null!==e.$dots&&c("li",e.$dots).off("click.slick",e.changeSlide),!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow&&e.$prevArrow.off("click.slick",e.changeSlide),e.$nextArrow&&e.$nextArrow.off("click.slick",e.changeSlide)),e.$list.off("click.slick",e.clickHandler),c(document).off(e.visibilityChange,e.visibility),!0===e.options.accessibility&&e.$list.off("keydown.slick",e.keyHandler),!0===e.options.focusOnSelect&&c(e.$slideTrack).children().off("click.slick",e.selectHandler),c(window).off("orientationchange.slick.slick-"+e.instanceUid,e.orientationChange),c(window).off("resize.slick.slick-"+e.instanceUid,e.resize),c("[draggable!=true]",e.$slideTrack).off("dragstart",e.preventDefault),c(window).off("load.slick.slick-"+e.instanceUid,e.setPosition),c(document).off("ready.slick.slick-"+e.instanceUid,e.setPosition)},o.prototype.cleanUpRows=function(){var e;1<this.options.rows&&((e=this.$slides.children().children()).removeAttr("style"),this.$slider.html(e))},o.prototype.clickHandler=function(e){!1===this.shouldClick&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault())},o.prototype.destroy=function(e){var t=this;t.autoPlayClear(),t.touchObject={},t.cleanUpEvents(),c(".slick-cloned",t.$slider).detach(),t.$dots&&t.$dots.remove(),!0===t.options.arrows&&(t.$prevArrow&&t.$prevArrow.length&&(t.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.remove()),t.$nextArrow&&t.$nextArrow.length&&(t.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.remove())),t.$slides&&(t.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each((function(){c(this).attr("style",c(this).data("originalStyling"))})),t.$slideTrack.children(this.options.slide).detach(),t.$slideTrack.detach(),t.$list.detach(),t.$slider.append(t.$slides)),t.cleanUpRows(),t.$slider.removeClass("slick-slider"),t.$slider.removeClass("slick-initialized"),t.unslicked=!0,e||t.$slider.trigger("destroy",[t])},o.prototype.disableTransition=function(e){var t={};t[this.transitionType]="",(!1===this.options.fade?this.$slideTrack:this.$slides.eq(e)).css(t)},o.prototype.fadeSlide=function(e,t){var n=this;!1===n.cssTransitions?(n.$slides.eq(e).css({zIndex:n.options.zIndex}),n.$slides.eq(e).animate({opacity:1},n.options.speed,n.options.easing,t)):(n.applyTransition(e),n.$slides.eq(e).css({opacity:1,zIndex:n.options.zIndex}),t&&setTimeout((function(){n.disableTransition(e),t.call()}),n.options.speed))},o.prototype.fadeSlideOut=function(e){!1===this.cssTransitions?this.$slides.eq(e).animate({opacity:0,zIndex:this.options.zIndex-2},this.options.speed,this.options.easing):(this.applyTransition(e),this.$slides.eq(e).css({opacity:0,zIndex:this.options.zIndex-2}))},o.prototype.filterSlides=o.prototype.slickFilter=function(e){null!==e&&(this.unload(),this.$slideTrack.children(this.options.slide).detach(),this.$slidesCache.filter(e).appendTo(this.$slideTrack),this.reinit())},o.prototype.getCurrent=o.prototype.slickCurrentSlide=function(){return this.currentSlide},o.prototype.getDotCount=function(){var e=this,t=0,n=0,i=0;if(!0===e.options.infinite)for(;t<e.slideCount;)++i,t=n+e.options.slidesToShow,n+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;else if(!0===e.options.centerMode)i=e.slideCount;else for(;t<e.slideCount;)++i,t=n+e.options.slidesToShow,n+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;return i-1},o.prototype.getLeft=function(e){var t,n=this,i=0;return n.slideOffset=0,t=n.$slides.first().outerHeight(!0),!0===n.options.infinite?(n.slideCount>n.options.slidesToShow&&(n.slideOffset=n.slideWidth*n.options.slidesToShow*-1,i=t*n.options.slidesToShow*-1),n.slideCount%n.options.slidesToScroll!=0&&e+n.options.slidesToScroll>n.slideCount&&n.slideCount>n.options.slidesToShow&&(i=e>n.slideCount?(n.slideOffset=(n.options.slidesToShow-(e-n.slideCount))*n.slideWidth*-1,(n.options.slidesToShow-(e-n.slideCount))*t*-1):(n.slideOffset=n.slideCount%n.options.slidesToScroll*n.slideWidth*-1,n.slideCount%n.options.slidesToScroll*t*-1))):e+n.options.slidesToShow>n.slideCount&&(n.slideOffset=(e+n.options.slidesToShow-n.slideCount)*n.slideWidth,i=(e+n.options.slidesToShow-n.slideCount)*t),n.slideCount<=n.options.slidesToShow&&(i=n.slideOffset=0),!0===n.options.centerMode&&!0===n.options.infinite?n.slideOffset+=n.slideWidth*Math.floor(n.options.slidesToShow/2)-n.slideWidth:!0===n.options.centerMode&&(n.slideOffset=0,n.slideOffset+=n.slideWidth*Math.floor(n.options.slidesToShow/2)),t=!1===n.options.vertical?e*n.slideWidth*-1+n.slideOffset:e*t*-1+i,!0===n.options.variableWidth&&(t=(i=n.slideCount<=n.options.slidesToShow||!1===n.options.infinite?n.$slideTrack.children(".slick-slide").eq(e):n.$slideTrack.children(".slick-slide").eq(e+n.options.slidesToShow))[0]?-1*i[0].offsetLeft:0,!0===n.options.centerMode&&(t=(i=!1===n.options.infinite?n.$slideTrack.children(".slick-slide").eq(e):n.$slideTrack.children(".slick-slide").eq(e+n.options.slidesToShow+1))[0]?-1*i[0].offsetLeft:0,t+=(n.$list.width()-i.outerWidth())/2)),t},o.prototype.getOption=o.prototype.slickGetOption=function(e){return this.options[e]},o.prototype.getNavigableIndexes=function(){for(var e=this,t=0,n=0,i=[],a=!1===e.options.infinite?e.slideCount:(t=-1*e.options.slidesToScroll,n=-1*e.options.slidesToScroll,2*e.slideCount);t<a;)i.push(t),t=n+e.options.slidesToScroll,n+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;return i},o.prototype.getSlick=function(){return this},o.prototype.getSlideCount=function(){!0===this.options.centerMode&&(this.slideWidth,Math.floor(this.options.slidesToShow/2));return this.options.slidesToScroll},o.prototype.goTo=o.prototype.slickGoTo=function(e,t){this.changeSlide({data:{message:"index",index:parseInt(e)}},t)},o.prototype.init=function(e){var t=this;c(t.$slider).hasClass("slick-initialized")||(c(t.$slider).addClass("slick-initialized"),t.buildRows(),t.buildOut(),t.setProps(),t.startLoad(),t.loadSlider(),t.initializeEvents(),t.updateArrows(),t.updateDots()),t.lazyLoad(),e&&t.$slider.trigger("init",[t]),t.options.accessibility},o.prototype.initArrowEvents=function(){!0===this.options.arrows&&this.slideCount>this.options.slidesToShow&&(this.$prevArrow.on("click.slick",{message:"previous"},this.changeSlide),this.$nextArrow.on("click.slick",{message:"next"},this.changeSlide))},o.prototype.initDotEvents=function(){!0===this.options.dots&&this.slideCount>this.options.slidesToShow&&c("li",this.$dots).on("click.slick",{message:"index"},this.changeSlide)},o.prototype.initializeEvents=function(){var e=this;e.initArrowEvents(),e.initDotEvents(),e.$list.on("click.slick",e.clickHandler),c(document).on(e.visibilityChange,c.proxy(e.visibility,e)),!0===e.options.accessibility&&e.$list.on("keydown.slick",e.keyHandler),!0===e.options.focusOnSelect&&c(e.$slideTrack).children().on("click.slick",e.selectHandler),c(window).on("orientationchange.slick.slick-"+e.instanceUid,c.proxy(e.orientationChange,e)),c(window).on("resize.slick.slick-"+e.instanceUid,c.proxy(e.resize,e)),c("[draggable!=true]",e.$slideTrack).on("dragstart",e.preventDefault),c(window).on("load.slick.slick-"+e.instanceUid,e.setPosition),c(document).on("ready.slick.slick-"+e.instanceUid,e.setPosition)},o.prototype.initUI=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.show(),e.$nextArrow.show()),!0===e.options.dots&&e.slideCount>e.options.slidesToShow&&e.$dots.show(),!0===e.options.autoplay&&e.autoPlay()},o.prototype.keyHandler=function(e){e.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===e.keyCode&&!0===this.options.accessibility?this.changeSlide({data:{message:"previous"}}):39===e.keyCode&&!0===this.options.accessibility&&this.changeSlide({data:{message:"next"}}))},o.prototype.lazyLoad=function(e){var t,n,i=this;if(e){if(this.visibleDiv)return;if(1!=i.isVisible.call(i,i.$slides.eq(0)))return}function a(e){c("img[data-lazy]",e).each((function(){var e=c(this),t=c(this).attr("data-lazy"),n=document.createElement("img"),i=c(this).attr("data-error");n.onload=function(){e.attr("src",t).removeAttr("data-lazy").removeAttr("slick-loading"),e.parents(".is-loading").removeClass("is-loading")},n.onerror=function(){""!=i&&e.animate({opacity:0},100,(function(){void 0,e.attr("src",i).removeAttr("data-lazy").removeAttr("data-error").animate({opacity:1},200,(function(){e.removeAttr("data-lazy").removeClass("slick-loading")})),i=""}))},n.src=t}))}!this.visibleDiv&&1!=i.isVisible.call(i,i.$slides.eq(0))||(!0===i.options.centerMode?n=!0===i.options.infinite?(t=i.currentSlide+(i.options.slidesToShow/2+1))+i.options.slidesToShow+2:(t=Math.max(0,i.currentSlide-(i.options.slidesToShow/2+1)),i.options.slidesToShow/2+1+2+i.currentSlide):(n=(t=i.options.infinite?i.options.slidesToShow+i.currentSlide:i.currentSlide)+i.options.slidesToShow,!0===i.options.fade&&(0<t&&t--,n<=i.slideCount&&n++)),a(i.$slider.find(".slick-slide").slice(t,n)),i.slideCount<=i.options.slidesToShow?a(i.$slider.find(".slick-slide")):i.currentSlide>=i.slideCount-i.options.slidesToShow?a(i.$slider.find(".slick-cloned").slice(0,i.options.slidesToShow)):0===i.currentSlide&&a(i.$slider.find(".slick-cloned").slice(-1*i.options.slidesToShow)))},o.prototype.loadSlider=function(){this.setPosition(),this.$slideTrack.css({opacity:1}),this.$slider.removeClass("slick-loading"),this.initUI(),"progressive"===this.options.lazyLoad&&this.progressiveLazyLoad()},o.prototype.next=o.prototype.slickNext=function(){this.changeSlide({data:{message:"next"}})},o.prototype.orientationChange=function(){this.setPosition()},o.prototype.pause=o.prototype.slickPause=function(){this.autoPlayClear(),this.paused=!0},o.prototype.play=o.prototype.slickPlay=function(){this.paused=!1,this.autoPlay()},o.prototype.postSlide=function(e){this.$slider.trigger("afterChange",[this,e]),this.animating=!1,this.setPosition(),!(this.swipeLeft=null)===this.options.autoplay&&!1===this.paused&&this.autoPlay(),this.options.accessibility},o.prototype.prev=o.prototype.slickPrev=function(){this.changeSlide({data:{message:"previous"}})},o.prototype.preventDefault=function(e){e.preventDefault()},o.prototype.progressiveLazyLoad=function(){var e,t=this;0<c("img[data-lazy]",t.$slider).length&&(e=c("img[data-lazy]",t.$slider).first()).attr("src",e.attr("data-lazy")).removeClass("slick-loading").load((function(){e.removeAttr("data-lazy"),t.progressiveLazyLoad(),!0===t.options.adaptiveHeight&&t.setPosition()})).error((function(){e.removeAttr("data-lazy"),t.progressiveLazyLoad()}))},o.prototype.refresh=function(e){var t=this.currentSlide;this.destroy(!0),c.extend(this,this.initials,{currentSlide:t}),this.init(),e||this.changeSlide({data:{message:"index",index:t}},!1)},o.prototype.reinit=function(){var e=this;e.$slides=e.$slideTrack.children(e.options.slide).addClass("slick-slide"),e.slideCount=e.$slides.length,e.currentSlide>=e.slideCount&&0!==e.currentSlide&&(e.currentSlide=e.currentSlide-e.options.slidesToScroll),e.slideCount<=e.options.slidesToShow&&(e.currentSlide=0),e.setProps(),e.setupInfinite(),e.buildArrows(),e.updateArrows(),e.initArrowEvents(),e.buildDots(),e.updateDots(),e.initDotEvents(),e.checkResponsive(!1,!0),!0===e.options.focusOnSelect&&c(e.$slideTrack).children().on("click.slick",e.selectHandler),e.setSlideClasses(0),e.setPosition(),e.$slider.trigger("reInit",[e]),!0===e.options.autoplay&&e.focusHandler()},o.prototype.resize=function(){var e=this;c(window).width()!==e.windowWidth&&(clearTimeout(e.windowDelay),e.windowDelay=window.setTimeout((function(){e.windowWidth=c(window).width(),e.checkResponsive(),e.unslicked||e.setPosition()}),50))},o.prototype.removeSlide=o.prototype.slickRemove=function(e,t,n){var i=this;if(e="boolean"==typeof e?!0===(t=e)?0:i.slideCount-1:!0===t?--e:e,i.slideCount<1||e<0||e>i.slideCount-1)return!1;i.unload(),(!0===n?i.$slideTrack.children():i.$slideTrack.children(this.options.slide).eq(e)).remove(),i.$slides=i.$slideTrack.children(this.options.slide),i.$slideTrack.children(this.options.slide).detach(),i.$slideTrack.append(i.$slides),i.$slidesCache=i.$slides,i.reinit()},o.prototype.setCSS=function(e){var t,n,i=this,a={};!0===i.options.rtl&&(e=-e),t="left"==i.positionProp?Math.ceil(e)+"px":"0px",n="top"==i.positionProp?Math.ceil(e)+"px":"0px",a[i.positionProp]=e,!1===i.transformsEnabled||(!(a={})===i.cssTransitions?a[i.animType]="translate("+t+", "+n+")":a[i.animType]="translate3d("+t+", "+n+", 0px)"),i.$slideTrack.css(a)},o.prototype.setDimensions=function(){var e=this;!1===e.options.vertical?!0===e.options.centerMode&&e.$list.css({padding:"0 "+e.options.centerPadding+" 0"}):(e.$list.height(e.$slides.first().outerHeight(!0)*e.options.slidesToShow),!0===e.options.centerMode&&e.$list.css({padding:e.options.centerPadding+" 0px"})),e.listWidth=e.$list.width(),e.listHeight=e.$list.height(),!1===e.options.vertical&&!1===e.options.variableWidth?(e.slideWidth=Math.ceil(e.listWidth/e.options.slidesToShow),e.$slideTrack.width(Math.ceil(e.slideWidth*e.$slideTrack.children(".slick-slide").length))):!0===e.options.variableWidth?e.$slideTrack.width(5e3*e.slideCount):(e.slideWidth=Math.ceil(e.listWidth),e.$slideTrack.height(Math.ceil(e.$slides.first().outerHeight(!0)*e.$slideTrack.children(".slick-slide").length)));var t=e.$slides.first().outerWidth(!0)-e.$slides.first().width();!1===e.options.variableWidth&&e.$slideTrack.children(".slick-slide").width(e.slideWidth-t)},o.prototype.setFade=function(){var n,i=this;i.$slides.each((function(e,t){n=i.slideWidth*e*-1,!0===i.options.rtl?c(t).css({position:"relative",right:n,top:0,zIndex:i.options.zIndex-2,opacity:0}):c(t).css({position:"relative",left:n,top:0,zIndex:i.options.zIndex-2,opacity:0})})),i.$slides.eq(i.currentSlide).css({zIndex:i.options.zIndex-1,opacity:1})},o.prototype.setOption=o.prototype.slickSetOption=function(e,t,n){var i,a;if("responsive"===e&&"array"===c.type(t))for(a in t)if("array"!==c.type(this.options.responsive))this.options.responsive=[t[a]];else{for(i=this.options.responsive.length-1;0<=i;)this.options.responsive[i].breakpoint===t[a].breakpoint&&this.options.responsive.splice(i,1),i--;this.options.responsive.push(t[a])}else this.options[e]=t;!0===n&&(this.unload(),this.reinit())},o.prototype.setPosition=function(){this.setDimensions(),!1===this.options.fade?this.setCSS(this.getLeft(this.currentSlide)):this.setFade(),this.$slider.trigger("setPosition",[this])},o.prototype.setHeight=function(){var e;1===this.options.slidesToShow&&!0===this.options.adaptiveHeight&&!1===this.options.vertical&&(e=this.$slides.eq(this.currentSlide).outerHeight(!0),this.$list.css("height",e))},o.prototype.setProps=function(){var e=this,t=document.body.style;e.positionProp=!0===e.options.vertical?"top":"left","top"===e.positionProp?e.$slider.addClass("slick-vertical"):e.$slider.removeClass("slick-vertical"),void 0===t.WebkitTransition&&void 0===t.MozTransition&&void 0===t.msTransition||!0===e.options.useCSS&&(e.cssTransitions=!0),e.options.fade&&("number"==typeof e.options.zIndex?e.options.zIndex<3&&(e.options.zIndex=3):e.options.zIndex=e.defaults.zIndex),void 0!==t.OTransform&&(e.animType="OTransform",e.transformType="-o-transform",e.transitionType="OTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.MozTransform&&(e.animType="MozTransform",e.transformType="-moz-transform",e.transitionType="MozTransition",void 0===t.perspectiveProperty&&void 0===t.MozPerspective&&(e.animType=!1)),void 0!==t.webkitTransform&&(e.animType="webkitTransform",e.transformType="-webkit-transform",e.transitionType="webkitTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.msTransform&&(e.animType="msTransform",e.transformType="-ms-transform",e.transitionType="msTransition",void 0===t.msTransform&&(e.animType=!1)),void 0!==t.transform&&!1!==e.animType&&(e.animType="transform",e.transformType="transform",e.transitionType="transition"),e.transformsEnabled=null!==e.animType&&!1!==e.animType},o.prototype.setSlideClasses=function(e){var t,n,i=this,a=i.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true");i.$slides.eq(e).addClass("slick-current"),!0===i.options.centerMode?(n=Math.floor(i.options.slidesToShow/2),!0===i.options.infinite&&(n<=e&&e<=i.slideCount-1-n?i.$slides.slice(e-n,e+n+1).addClass("slick-active").attr("aria-hidden","false"):(t=i.options.slidesToShow+e,a.slice(t-n+1,t+n+2).addClass("slick-active").attr("aria-hidden","false")),0===e?a.eq(a.length-1-i.options.slidesToShow).addClass("slick-center"):e===i.slideCount-1&&a.eq(i.options.slidesToShow).addClass("slick-center")),i.$slides.eq(e).addClass("slick-center")):0<=e&&e<=i.slideCount-i.options.slidesToShow?i.$slides.slice(e,e+i.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):a.length<=i.options.slidesToShow?a.addClass("slick-active").attr("aria-hidden","false"):(n=i.slideCount%i.options.slidesToShow,t=!0===i.options.infinite?i.options.slidesToShow+e:e,(i.options.slidesToShow==i.options.slidesToScroll&&i.slideCount-e<i.options.slidesToShow?a.slice(t-(i.options.slidesToShow-n),t+n):a.slice(t,t+i.options.slidesToShow)).addClass("slick-active").attr("aria-hidden","false")),"ondemand"===i.options.lazyLoad&&i.lazyLoad()},o.prototype.setupInfinite=function(){var e,t,n,i=this;if(!0===i.options.fade&&(i.options.centerMode=!1),!0===i.options.infinite&&!1===i.options.fade&&(t=null,i.slideCount>i.options.slidesToShow)){for(n=!0===i.options.centerMode?i.options.slidesToShow+1:i.options.slidesToShow,e=i.slideCount;e>i.slideCount-n;--e)c(i.$slides[t=e-1]).clone(!0).attr("id","").attr("data-slick-index",t-i.slideCount).prependTo(i.$slideTrack).addClass("slick-cloned");for(e=0;e<n;e+=1)t=e,c(i.$slides[t]).clone(!0).attr("id","").attr("data-slick-index",t+i.slideCount).appendTo(i.$slideTrack).addClass("slick-cloned");i.$slideTrack.find(".slick-cloned").find("[id]").each((function(){c(this).attr("id","")}))}},o.prototype.setPaused=function(e){!0===this.options.autoplay&&!0===this.options.pauseOnHover&&((this.paused=e)?this.autoPlayClear():this.autoPlay())},o.prototype.selectHandler=function(e){e=c(e.target).is(".slick-slide")?c(e.target):c(e.target).parents(".slick-slide"),e=parseInt(e.attr("data-slick-index"))||0;if(this.slideCount<=this.options.slidesToShow)return this.setSlideClasses(e),void this.asNavFor(e);this.slideHandler(e)},o.prototype.slideHandler=function(e,t,n){var i,a,o,s=this;t=t||!1,!0===s.animating&&!0===s.options.waitForAnimate||!0===s.options.fade&&s.currentSlide===e||s.slideCount<=s.options.slidesToShow||(!1===t&&s.asNavFor(e),i=e,o=s.getLeft(i),t=s.getLeft(s.currentSlide),s.currentLeft=null===s.swipeLeft?t:s.swipeLeft,!1===s.options.infinite&&!1===s.options.centerMode&&(e<0||e>s.getDotCount()*s.options.slidesToScroll)||!1===s.options.infinite&&!0===s.options.centerMode&&(e<0||e>s.slideCount-s.options.slidesToScroll)?!1===s.options.fade&&(i=s.currentSlide,!0!==n?s.animateSlide(t,(function(){s.postSlide(i)})):s.postSlide(i)):(!0===s.options.autoplay&&clearInterval(s.autoPlayTimer),a=i<0?s.slideCount%s.options.slidesToScroll!=0?s.slideCount-s.slideCount%s.options.slidesToScroll:s.slideCount+i:i>=s.slideCount?s.slideCount%s.options.slidesToScroll!=0?0:i-s.slideCount:i,s.animating=!0,s.$slider.trigger("beforeChange",[s,s.currentSlide,a]),t=s.currentSlide,s.currentSlide=a,s.setSlideClasses(s.currentSlide),s.updateDots(),s.updateArrows(),!0!==s.options.fade?!0!==n?s.animateSlide(o,(function(){s.postSlide(a)})):s.postSlide(a):!0!==n?(s.fadeSlideOut(t),s.fadeSlide(a,(function(){s.postSlide(a)}))):s.postSlide(a)))},o.prototype.startLoad=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.hide(),e.$nextArrow.hide()),!0===e.options.dots&&e.slideCount>e.options.slidesToShow&&e.$dots.hide(),e.$slider.addClass("slick-loading")},o.prototype.unfilterSlides=o.prototype.slickUnfilter=function(){null!==this.$slidesCache&&(this.unload(),this.$slideTrack.children(this.options.slide).detach(),this.$slidesCache.appendTo(this.$slideTrack),this.reinit())},o.prototype.unload=function(){var e=this;c(".slick-cloned",e.$slider).remove(),e.$dots&&e.$dots.remove(),e.$prevArrow&&e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.remove(),e.$nextArrow&&e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.remove(),e.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},o.prototype.unslick=function(e){this.$slider.trigger("unslick",[this,e]),this.destroy()},o.prototype.updateArrows=function(){var e=this;Math.floor(e.options.slidesToShow/2);!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&!e.options.infinite&&(e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===e.currentSlide?(e.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):(e.currentSlide>=e.slideCount-e.options.slidesToShow&&!1===e.options.centerMode||e.currentSlide>=e.slideCount-1&&!0===e.options.centerMode)&&(e.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},o.prototype.updateDots=function(){null!==this.$dots&&(this.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true"),this.$dots.find("li").eq(Math.floor(this.currentSlide/this.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false"))},o.prototype.visibility=function(){document[this.hidden]?(this.paused=!0,this.autoPlayClear()):!0===this.options.autoplay&&(this.paused=!1,this.autoPlay())},o.prototype.focusHandler=function(){var n=this;n.$slider.on("focus.slick blur.slick","*",(function(e){e.stopImmediatePropagation();var t=c(this);setTimeout((function(){n.isPlay&&(t.is(":focus")?(n.autoPlayClear(),n.paused=!0):(n.paused=!1,n.autoPlay()))}),0)}))},o.prototype.offsetTop=function(e){for(var t;void 0===e.offsetTop;)e=e.parentNode;for(t=e.offsetTop;e==e.offsetParent;)t+=e.offsetTop;return t},o.prototype.isVisible=function(e){var t=window.pageYOffset,n=this.options.offset,t=t+c(window).height()-n,n=e[0]&&e.offset().top||0;return e.find(".experience-card")[0],this.visibleDiv=n<=t,n<=t},o.prototype.addEvent=function(e,t,n){return null!=e.addEventListener?e.addEventListener(t,n,!1):null!=e.attachEvent?e.attachEvent("on"+t,n):e[t]=n},c.fn.slick=function(){for(var e,t=arguments[0],n=Array.prototype.slice.call(arguments,1),i=this.length,a=0;a<i;a++)if("object"==typeof t||void 0===t?this[a].slick=new o(this[a],t):e=this[a].slick[t].apply(this[a].slick,n),void 0!==e)return e;return this}})),(function(c){c.fn.showcaseTrailer=function(e){var t,n;c.extend(e,{autoplay:!0}),"undefined"!=typeof pageName&&"synopsis"==pageName?(n=c(".synopsis-banner"),t=c(".poster")):n=c(".banner-container, .overlay-card");var i=c(this).attr("data-trailer-code"),a=c('<div id="showcase-trailer-wrapper">').append('<div class="header">\t\t\t\t\t\t\t\t\t\t<button id="st-btn-close">\t\t\t\t\t\t\t\t\t\t\t<span class="icon-cancel">\t\t\t\t\t\t\t\t\t\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">\t\t\t\t\t\t\t\t\t\t\t\t\t<use xlink:href="/icons/common-icons.svg#icon-cancel"></use>\t\t\t\t\t\t\t\t\t\t\t\t</svg>\t\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t</button>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t<div class="body">\t\t\t\t\t\t\t\t\t</div>'),o=!1,s="";"#trailer"==window.location.hash&&("undefined"!=typeof pageName&&"home"==pageName&&(i=c(".__play-video","#showcase-primary .overlay-card").data("trailer-code"),setTimeout((function(){c(".__dismiss","#showcase-primary .showcase-overlay").trigger("click")}),300)),i&&l("show"));var r=function(e){27==e.keyCode&&l("hide"),e.stopPropagation()};function l(e){switch(e){case"show":o||(n.find(".__play").transition({scale:1.5,opacity:0},300),c("#quickbook-wrapper").transition({opacity:0},300),c(".secondary","#navbar").transition({opacity:0},300),c(".mv-synopsis-wrapper").transition({opacity:0},300),setTimeout((function(){(s=c('<div id="youtube-container" class="wow fadeIn"><iframe width="100%" height="100%" src="" id="youtube-iframe" frameborder="0" allowfullscreen autoplay="true"></iframe></div></div>')).find("iframe").attr({src:"https://www.youtube.com/embed/"+i+"?autoplay=1&mute=1"}),"undefined"!=typeof pageName&&"synopsis"==pageName&&(BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"Viewed trailer",analyticsObj),"synopsis"==pageName&&BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"YoutubeVideoAppended",videopath:"Videoopened",videolabel:"undefined"!=typeof eventTitle?eventTitle:""})),"undefined"!=typeof pageName&&"synopsis"==pageName&&n.clone().appendTo(a.find(".body")),a.css("margin-top","0px"),a.show(),c("body").append(a),c("#st-btn-close").one("click",(function(){a.find(".body").html(""),l("hide")})),setTimeout((function(){a.addClass("_dance")}),100),setTimeout((function(){a.find(".body").append(s)}),500),o=!0}),200));break;case"hide":o&&(s.html(""),a.css("margin-top","100px"),a.removeClass("_dance"),setTimeout((function(){a.hide(),setTimeout((function(){c("#quickbook-wrapper").transition({opacity:1}),c(".secondary","#navbar").transition({opacity:1}),c(".mv-synopsis-wrapper").transition({opacity:1}),n.find(".__play").transition({scale:1,opacity:.75}),n.find(".__play")[0].style="",a.find(".body").html(""),a.detach()}),50)}),500),o=!1,c(document).unbind("keyup",r)),"synopsis"==pageName&&BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"YoutubeVideoClosed",videopath:"Videoclosed",videolabel:"undefined"!=typeof eventTitle?eventTitle:""})}}c([t,n]).each((function(){c(this).find(".__play").click((function(){if("undefined"!=typeof pageName&&"synopsis"==pageName?i=n.data("trailer-code"):(i=c(this).data("trailer-code"),c(this).parents(".banner-container")),"undefined"!=typeof fnPushDLShowcase)try{""!=c(this).attr("data-dl-data")&&fnPushDLShowcase(JSON.parse(c(this).attr("data-dl-data")))}catch(e){}l("show"),c(document).bind("keyup",r)}))}))},c(document).ready((function(){"undefined"!=typeof pageName&&("synopsis"===pageName?c(".synopsis-banner"):c(".banner-container")).showcaseTrailer()}))})(jQuery),(function(c){var d={regionSearch:{regionName:[],regionCode:[],regionSlug:[],stringMatcher:function(e){return function(n,e){d.regionSearch.regionName=[],d.regionSearch.regionCode=[],d.regionSearch.regionSlug=[],substrRegex=new RegExp(n,"i");var i=new RegExp("\\b"+n.toUpperCase()+"\\w*\\b","gi"),a=["Mumbai","Mumbai : Western","Mumbai : South Central","Navi Mumbai","Kalyan","Ulhasnagar","National Capital Region (NCR)"],o=[];c.each(regionlst,(function(e,t){c.each(t,(function(e,t){(i=new RegExp("\\b"+n.toUpperCase()+"\\w*\\b","gi")).test(t.alias.toUpperCase())&&-1==c.inArray(t.alias,a)&&o.push(new Array(t.code,t.name,t.slug))}))}));for(var t=0;t<regionalias.length;t++){for(var s=!1,r=0;r<regionalias[t].Alias.length;r++)if(i.test(regionalias[t].Alias[r].toUpperCase())){s=!0;break}s&&o.push(new Array(regionalias[t].code,regionalias[t].name,regionalias[t].slug))}(i.test("BOMBAY")||i.test("MUMBAI")||i.test("MUMBAI WESTERN")||i.test("Mumbai South Central")||i.test("NAVI MUMBAI")||i.test("KALYAN")||i.test("ULHASNAGAR"))&&o.push(new Array("MUMBAI","Mumbai","mumbai")),(i.test("NATIONAL CAPITAL REGION")||i.test("NCR"))&&o.push(new Array("NCR","National Capital Region (NCR)","national-capital-region-ncr")),i.test("BANGALORE")&&o.push(new Array("BANG","Bengaluru","bengaluru"));for(var l=0;l<o.length;l++)-1==d.regionSearch.regionName.indexOf(o[l][1])&&(d.regionSearch.regionName.push(o[l][1]),d.regionSearch.regionCode.push(o[l][0]),d.regionSearch.regionSlug.push(o[l][2]));e(d.regionSearch.regionName)}},onSelection:function(e,n){var i,a,t,o=BMS.Storage.get({name:"lang",storage:"C"});""==o||"eng"==o?(t=n.trim(),o=d.regionSearch.regionName.indexOf(t),BMS.Region.fnSTopReg({RegionCode:d.regionSearch.regionCode[o],RegionName:d.regionSearch.regionName[o],RegionSlug:d.regionSearch.regionSlug[o]})):(a=i="",c.each(regionlst,(function(e,t){if(c.each(t,(function(e,t){if(t.name==n)return i=t.alias,a=t.code,!1})),0<i.length)return!1})),t=i.trim(),0<=["Mumbai","Mumbai : Western","Mumbai : South Central","Navi Mumbai","Kalyan","Ulhasnagar"].indexOf(n)?(a="MUMBAI",t="Mumbai"):0<=["Bangalore","Bengaluru"].indexOf(n)&&(a="BANG",t="Bengaluru"),BMS.Region.fnSTopReg({RegionCode:a,RegionName:t,RegionSlug:strtolower(fnUrlName(t))}))}}};c(document).ready((function(){c(".form-input.__input._default").typeaheadWrapper({dataSet:{source:d.regionSearch.stringMatcher(),limit:8},onResultSelection:d.regionSearch.onSelection}),c("#inp_RegionSearch.form-input._dos").typeaheadWrapper({dataSet:{source:d.regionSearch.stringMatcher(),limit:8},onResultSelection:d.regionSearch.onSelection})}))})(jQuery),(function(s){s.fn.SumoSelect=function(e){var o=s.extend({placeholder:"Select Here",csvDispCount:3,captionFormat:"{0} Selected",floatWidth:400,forceCustomRendering:!0,nativeOnDevice:["Android","BlackBerry","iPhone","iPad","iPod","Opera Mini","IEMobile","Silk"],outputAsCSV:!1,csvSepChar:",",okCancelInMulti:!1,triggerChangeCombined:!0,selectAll:!1,selectAlltext:"Select All"},e),e=this.each((function(){var a=this;!this.sumo&&s(this).is("select")&&(this.sumo={E:s(a),is_multi:s(a).attr("multiple"),select:"",caption:"",placeholder:"",optDiv:"",CaptionCont:"",is_floating:!1,is_opened:!1,mob:!1,Pstate:[],createElems:function(){var n=this;n.E.wrap('<div class="SumoSelect" tabindex="0">'),n.select=n.E.parent(),n.caption=s("<span></span>"),n.CaptionCont=s('<p class="CaptionCont"><label><i class="downChevron"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 500 500" enable-background="new 0 0 100 100" xml:space="preserve"><use xlink:href="/icons/common-icons.svg#icon-arrow-down-new"></use></svg></i></label></p>').addClass("SlectBox").attr("style",n.E.attr("style")).prepend(n.caption),n.select.append(n.CaptionCont),n.E.attr("disabled")&&n.select.addClass("disabled").removeAttr("tabindex"),o.outputAsCSV&&n.is_multi&&n.E.attr("name")&&(n.select.append(s('<input class="HEMANT123" type="hidden" />').attr("name",n.E.attr("name")).val(n.getSelStr())),n.E.removeAttr("name")),!n.isMobile()||o.forceCustomRendering?(n.E.hide(),n.optDiv=s('<div class="optWrapper">'),n.floatingList(),ul=s('<ul class="options">'),n.optDiv.append(ul),o.selectAll&&n.selAll(),s(n.E.children("option")).each((function(e,t){t=s(t),n.createLi(t)})),n.is_multi&&n.multiSelelect(),n.select.append(n.optDiv),n.basicEvents(),n.selAllState()):n.setNativeMobile()},createLi:function(e,t){return e.attr("value")||e.attr("value",e.val()),li=s('<li data-val="'+e.val()+'"><label>'+e.text()+"</label></li>"),this.is_multi&&li.prepend("<span><i></i></span>"),e[0].disabled&&(li=li.addClass("disabled")),this.onOptClick(li),e[0].selected&&li.addClass("selected"),e.attr("class")&&li.addClass(e.attr("class")),ul=this.optDiv.children("ul.options"),void 0===t?ul.append(li):ul.children("li").eq(t).before(li),li},getSelStr:function(){return sopt=[],this.E.children("option:selected").each((function(){sopt.push(s(this).val())})),sopt.join(o.csvSepChar)},multiSelelect:function(){var e=this;e.optDiv.addClass("multiple"),e.okbtn=s('<p class="btnOk">OK</p>').click((function(){o.triggerChangeCombined&&(changed=!1,e.E.children("option:selected").length!=e.Pstate.length?changed=!0:e.E.children("option:selected").each((function(){e.Pstate.indexOf(s(this).val())<0&&(changed=!0)})),changed&&(e.E.trigger("change").trigger("click"),e.setText())),e.hideOpts()})),e.cancelBtn=s('<p class="btnCancel">Cancel</p>').click((function(){e._cnbtn(),e.hideOpts()})),e.optDiv.append(s('<div class="MultiControls">').append(e.okbtn).append(e.cancelBtn))},_cnbtn:function(){for(this.E.children("option:selected").each((function(){this.selected=!1})),this.optDiv.find("li.selected").removeClass("selected"),i=0;i<this.Pstate.length;i++)this.E.children('option[value="'+this.Pstate[i]+'"]')[0].selected=!0,this.optDiv.find('li[data-val="'+this.Pstate[i]+'"]').addClass("selected");this.selAllState()},selAll:function(){var n=this;n.is_multi&&(n.chkAll=s("<i>"),n.selAll=s('<p class="select-all"><label>'+o.selectAlltext+"</label></p>").prepend(s("<span></span>").append(n.chkAll)),n.chkAll.on("click",(function(){n.selAll.toggleClass("selected"),n.optDiv.find("ul.options li").each((function(e,t){t=s(t),n.selAll.hasClass("selected")?t.hasClass("selected")||t.trigger("click"):t.hasClass("selected")&&t.trigger("click")}))})),n.optDiv.prepend(n.selAll))},selAllState:function(){var n,i;o.selectAll&&(i=n=0,this.optDiv.find("ul.options li").each((function(e,t){s(t).hasClass("selected")&&n++,s(t).hasClass("disabled")||i++})),n==i?this.selAll.removeClass("partial").addClass("selected"):0==n?this.selAll.removeClass("selected partial"):this.selAll.addClass("partial"))},showOpts:function(){var t=this;t.E.attr("disabled")||(t.is_opened=!0,t.optDiv.addClass("open"),t.optDiv.closest(".SumoSelect").find(".CaptionCont").find("span").addClass("_active"),t.optDiv.closest(".SumoSelect").find(".CaptionCont").find(".downChevron").addClass("rotate"),s(document).on("click.sumo",(function(e){t.select.is(e.target)||0!==t.select.has(e.target).length||t.is_opened&&(t.hideOpts(),t.is_multi&&o.okCancelInMulti&&t._cnbtn())})),t.is_floating&&(H=t.optDiv.children("ul").outerHeight()+2,t.is_multi&&(H+=parseInt(t.optDiv.css("padding-bottom"))),t.optDiv.css("height",H)),t.is_multi&&(t.is_floating||o.okCancelInMulti)&&(t.Pstate=[],t.E.children("option:selected").each((function(){t.Pstate.push(s(this).val())}))))},hideOpts:function(){this.is_opened=!1,this.optDiv.removeClass("open").find("ul li.sel").removeClass("sel"),this.optDiv.closest(".SumoSelect").find(".CaptionCont").find("span").removeClass("_active"),this.optDiv.closest(".SumoSelect").find(".CaptionCont").find(".downChevron").removeClass("rotate"),s(document).off("click.sumo")},setOnOpen:function(){this.optDiv.find("ul li").eq(this.E[0].selectedIndex).addClass("sel"),this.showOpts()},nav:function(e){var t,n,i=this.optDiv.find("ul li.sel");this.is_opened&&i.length?(n=e?i.prevAll("li:not(.disabled)"):i.nextAll("li:not(.disabled)")).length&&(i.removeClass("sel"),i=n.first().addClass("sel"),e=(t=this.optDiv.find("ul")).scrollTop(),(n=i.position().top+e)>=e+t.height()-i.outerHeight()&&t.scrollTop(n-t.height()+i.outerHeight()),n<e&&t.scrollTop(n)):this.setOnOpen()},basicEvents:function(){var t=this;t.CaptionCont.click((function(e){t.E.trigger("click"),t.is_opened?t.hideOpts():t.showOpts(),e.stopPropagation()})),t.select.on("keydown",(function(e){switch(e.which){case 38:t.nav(!0);break;case 40:t.nav(!1);break;case 32:case 13:t.is_opened?t.optDiv.find("ul li.sel").trigger("click"):t.setOnOpen();break;case 9:case 27:return t.is_multi&&o.okCancelInMulti&&t._cnbtn(),void t.hideOpts();default:return}e.preventDefault()})),s(window).on("resize.sumo",(function(){t.floatingList()}))},onOptClick:function(e){var t=this;e.click((function(){var e=s(this);e.hasClass("disabled")||(txt="",t.is_multi?(e.toggleClass("selected"),t.E.children('option[value="'+e.data("val")+'"]')[0].selected=e.hasClass("selected"),t.selAllState()):(e.parent().find("li.selected").removeClass("selected"),e.toggleClass("selected"),t.E.val(e.attr("data-val"))),t.is_multi&&o.triggerChangeCombined&&(t.is_floating||o.okCancelInMulti)||(t.setText(),t.E.trigger("change").trigger("click")),t.is_multi||t.hideOpts())}))},setText:function(){var e=this;if(e.placeholder="",e.is_multi){for(sels=e.E.children(":selected").not(":disabled"),i=0;i<sels.length;i++){if(i>=o.csvDispCount&&o.csvDispCount){e.placeholder=o.captionFormat.replace("{0}",sels.length);break}e.placeholder+=s(sels[i]).text()+", "}e.placeholder=e.placeholder.replace(/,([^,]*)$/,"$1")}else e.placeholder=e.E.children(":selected").not(":disabled").text();return is_placeholder=!1,e.placeholder||(is_placeholder=!0,e.placeholder=e.E.attr("placeholder"),e.placeholder||(e.placeholder=e.E.children("option:disabled:selected").text())),e.placeholder=e.placeholder||o.placeholder,e.caption.text(e.placeholder),csvField=e.select.find("input.HEMANT123"),csvField.length&&csvField.val(e.getSelStr()),is_placeholder?e.caption.addClass("placeholder"):e.caption.removeClass("placeholder"),e.placeholder},isMobile:function(){for(var e=navigator.userAgent||navigator.vendor||window.opera,t=0;t<o.nativeOnDevice.length;t++)if(0<e.toString().toLowerCase().indexOf(o.nativeOnDevice[t].toLowerCase()))return o.nativeOnDevice[t];return!1},setNativeMobile:function(){var e=this;e.E.addClass("SelectClass"),e.mob=!0,e.E.change((function(){e.setText()}))},floatingList:function(){this.is_floating=s(window).width()<=o.floatWidth,this.optDiv.toggleClass("isFloating",this.is_floating),this.is_floating||this.optDiv.css("height",""),this.optDiv.toggleClass("okCancelInMulti",o.okCancelInMulti&&!this.is_floating)},vRange:function(e){if(opts=this.E.children("option"),opts.length<=e||e<0)throw"index out of bounds";return this},toggSel:function(e,t){var n=this.vRange(t);n.E.children("option")[t].disabled||(n.E.children("option")[t].selected=e,n.mob||n.optDiv.find("ul.options li").eq(t).toggleClass("selected",e),n.setText())},toggDis:function(e,t){var n=this.vRange(t);(n.E.children("option")[t].disabled=e)&&(n.E.children("option")[t].selected=!1),n.mob||n.optDiv.find("ul.options li").eq(t).toggleClass("disabled",e).removeClass("selected"),n.setText()},toggSumo:function(e){return this.enabled=e,this.select.toggleClass("disabled",e),e?(this.E.attr("disabled","disabled"),this.select.removeAttr("tabindex")):(this.E.removeAttr("disabled"),this.select.attr("tabindex","0")),this},toggSelAll:function(n){var i=this;i.E.find("option").each((function(e,t){i.E.find("option")[s(this).index()].disabled||(i.E.find("option")[s(this).index()].selected=n,i.mob||i.optDiv.find("ul.options li").eq(s(this).index()).toggleClass("selected",n),i.setText())})),!i.mob&&o.selectAll&&i.selAll.removeClass("partial").toggleClass("selected",n)},reload:function(){var e=this.unload();return s(e).SumoSelect(o)},unload:function(){return this.select.before(this.E),this.E.show(),o.outputAsCSV&&this.is_multi&&this.select.find("input.HEMANT123").length&&this.E.attr("name",this.select.find("input.HEMANT123").attr("name")),this.select.remove(),delete a.sumo,a},add:function(e,t,n){if(void 0===e)throw"No value to add";if(opts=this.E.children("option"),"number"==typeof t&&(n=t,t=e),void 0===t&&(t=e),opt=s("<option></option>").val(e).html(t),opts.length<n)throw"index out of bounds";return void 0===n||opts.length==n?(this.E.append(opt),this.mob||this.createLi(opt)):(opts.eq(n).before(opt),this.mob||this.createLi(opt,n)),a},remove:function(e){var t=this.vRange(e);t.E.children("option").eq(e).remove(),t.mob||t.optDiv.find("ul.options li").eq(e).remove(),t.setText()},selectItem:function(e){this.toggSel(!0,e)},unSelectItem:function(e){this.toggSel(!1,e)},selectAll:function(){this.toggSelAll(!0)},unSelectAll:function(){this.toggSelAll(!1)},disableItem:function(e){this.toggDis(!0,e)},enableItem:function(e){this.toggDis(!1,e)},enabled:!0,enable:function(){return this.toggSumo(!1)},disable:function(){return this.toggSumo(!0)},init:function(){return this.createElems(),this.setText(),this}},a.sumo.init())}));return 1==e.length?e[0]:e}})(jQuery),use=0<window.navigator.userAgent.indexOf("MSIE")?"svg":"use",$(document).ready((function(){(global.blnIsTouchScreen?ratingFuncMobile:ratingFuncDesktop)(),$(".js-rating").click((function(){$(this).parents(".show-more-info").addClass("showRating")})),$(".poster-container").on("mouseleave",(function(e){e.preventDefault(),e.stopPropagation(),$(this).find(".show-more-info").removeClass("showRating")})),$(".ns-card-multiple .book-button").click((function(){var e=$(this);e.children(".__container").removeClass("opaqueOnHover"),e.parents(".card-container").addClass("showExperience"),e.children().html("Pick A Format"),e.addClass("button-false")})),$(".hideExperienceOnClick").click((function(){var e=$(this).parents(".card-container");e.removeClass("showExperience"),e.find(".book-button").children(".__container").addClass("opaqueOnHover").html("BOOK NOW"),e.find(".book-button").removeClass("button-false")})),global.blnIsTouchScreen&&($(".movie-card .more-info-button, .poster-container").on("tap",(function(e){e.stopPropagation(),$(this).parents(".movie-card").addClass("infoContainerIsActive")})),$(".movie-card .show-more-info-overlay").on("tap",(function(e){e.stopPropagation(),$(this).parents(".movie-card").removeClass("infoContainerIsActive"),$(this).parents(".movie-card").find(".show-more-info-container .show-more-info").removeClass("showRating")})));var e=$(".movie-card").find(".genre-list"),t=$(".ev-card").find(".tags");!(function(e,t){for(var n=0;n<e.length;n++)for(var i=0,a=0<$(e[n]).find(".__genre").length?$(e[n]).find(".__genre"):$(e[n]).find(".__tag"),o=0;o<a.length;o++){var s=$(a[o]).text().length;t<(i=s+i)&&(s=$(a[o]).text().slice(0,3)+"...",$(a[o]).text(s))}})(e,24),(function(e,t){for(var n=0;n<e.length;n++){var i=0;genreItems=0<$(e[n]).find(".__genre").length?$(e[n]).find(".__genre"):$(e[n]).find(".__tag");for(var a,o=0;o<genreItems.length;o++)i=$(genreItems[o]).text().length,t<i&&(a=$(genreItems[o]).text().slice(0,8)+"...",$(genreItems[o]).text(a))}})(t,20),$(".__day").click((function(e){e.preventDefault();var t=$(this),n=t.parents(".showtimes").find(".__details"),e=t.index();t.hasClass("_active")?t.siblings().addClass("_inactive").removeClass("_active"):(t.addClass("_active").removeClass("_inactive"),t.siblings().addClass("_inactive").removeClass("_active"),0==e?($(n[0]).addClass("_active").removeClass("_inactive"),$(n[1]).addClass("_inactive").removeClass("_active")):1==e&&($(n[1]).addClass("_active").removeClass("_inactive"),$(n[0]).addClass("_inactive").removeClass("_active")))}));t=$(".ev-card").find(".__name a"),$(".ev-card").find(".__location");function n(e,t,n){if(0<e.length)for(var i=0;i<e.length;i++){var a,o=$(e[i]).text().length;n<=o?(a=(a=(a=$(e[i]).text()).substr(0,n)).replace(/[.]*(\s?\w*)$/," ..."),$(e[i]).text(a),$(e[i]).text(a).addClass("resizedFont")):o<n&&t<o&&$(e[i]).addClass("resizedFont")}}venueListName=$(".ve-card").find(".__name a"),venueListLocation=$(".ve-card").find(".__location"),movieListName=$(".movie-card").find(".__name a"),mamiEventTitle=$(".mami-event-card").find(".title"),n(t,30,60),n(t,30,60),n(venueListName,30,60),n(venueListLocation,40,80),n(movieListName,30,37),n(mamiEventTitle,40,50)})),(function(C){"use strict";C.fn.socialSharer=function(a){var o=function(e,s,t){var n=t&&t.isTemplate?e:b[e];if(!C.isEmptyObject(n)){var r,i=n.split("\n").join(""),e=/([$\^\\\/()|?+*\[\]{}.\-])/g;return t=t||{},n="{{}}".length,r=Math.ceil(n/2),t="{{}}".substr(0,r).replace(e,"\\$1"),e="{{}}".substr(r,n).replace(e,"\\$1")||t,e=new RegExp(t+"[^"+t+e+"]+"+e,"g"),i.replace(e,(function(e){var t,n=e.slice(r,-r),i=n.split("."),a=0,o=i.length;if(n in s)t=s[n];else for(t=s;a<o;a++){if(!(i[a]in t))return e;t=t[i[a]]}return t}))}},s=function(e,t){return e.replace(/{{url}}/g,encodeURIComponent(t.url)).replace(/{{title}}/g,encodeURIComponent(t.title)).replace(/{{description}}/g,encodeURIComponent(t.description)).replace(/{{media}}/g,encodeURIComponent(t.media)).replace(/{{fbAppId}}/g,encodeURIComponent(t.fbAppId)).replace(/{{via}}/g,encodeURIComponent(t.via))},r={pinterest:{url:"http://pinterest.com/pin/create/button/?url={{url}}&utm_source=pinterestshare&utm_medium=social&media={{media}}&description={{description}}",linkTitle:"Pinterest"},facebook:{url:"https://www.facebook.com/sharer/sharer.php?s=100&p[title]={{title}}&p[summary]={{description}}&p[url]={{url}}&utm_source=FBLIKE&fbrefresh=1&utm_medium=social&p[images][0]={{media}}",linkTitle:"Facebook"},twitter:{url:"https://twitter.com/share?url={{url}}&utm_source=twittershare&utm_medium=social&via={{via}}&text={{title}}",linkTitle:"Twitter"},linkedin:{url:"https://www.linkedin.com/shareArticle?mini=true&url={{url}}&utm_source=lkdnshare&title={{title}}&summary={{description}}+&source={{via}}&utm_medium=social",linkTitle:"Linked In"},facebookFeed:{url:"https://www.facebook.com/dialog/feed?app_id={{fbAppId}}&link={{url}}&utm_source=FBLIKE&utm_medium=social&fbrefresh=1&caption={{title}}&description={{description}}&picture={{media}}",linkTitle:"Facebook"},facebookShare:{url:"https://www.facebook.com/dialog/share?app_id={{fbAppId}}&display=popup&href={{url}}&utm_source=FBLIKE&utm_medium=social&fbrefresh=1&quote={{description}}",linkTitle:"Facebook"},whatsapp:{url:"whatsapp://send?text={{url}}&utm_source=whatsappshare&utm_medium=social",linkTitle:"Whatsapp"}},t="facebook",n="twitter",i="linkedin",e="pinterest",l="facebookFeed",c="facebookShare",d="whatsapp",u=C(document).find("title").text();a=a||{};var p,f,g,h,m,v={og:{title:C('meta[property="og:title"]'),url:C('meta[property="og:url"]'),description:C('meta[property="og:description"]'),media:C('meta[property="og:image"]'),siteName:C('meta[property="og:site_name"]')}};v.og.title.length&&(p=v.og.title.attr("content")),v.og.url.length&&(f=v.og.url.attr("content").replace("?utm_source=FBLIKE&fbrefresh=1","")),v.og.description.length&&(g=v.og.description.attr("content")),v.og.media.length&&(h=v.og.media.attr("content")),v.og.siteName.length&&(m=v.og.siteName.attr("content"));var S=C.extend({url:f||location.href,description:g||u,media:h||"",title:p,via:m||"BookMyShow",showCount:!1,showLinkTitle:!0,callback:function(){}},a.config),y=a.buttons&&a.buttons.length?a.buttons:[e,t,n],M={},b={};b[e]='<svg class="social-sharer-svg svg-pinterest" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve" class="svg-pinterest"><use xlink:href="/icons/common-icons.svg#icon-pinterest-icon"></use></svg>',b[t]='<svg class="social-sharer-svg svg-facebook" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve" class="svg-facebook"><use xlink:href="/icons/common-icons.svg#icon-facebook-modal"></use></svg>',b[n]='<svg class="social-sharer-svg svg-twitter" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve" class="svg-facebook"><use xlink:href="/icons/common-icons.svg#icon-twitter-icon"></use></svg>',b[d]='<svg class="social-sharer-svg svg-whatsapp" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" enable-background="new 0 0 100 100" xml:space="preserve" class="svg-facebook"><use xlink:href="/icons/common-icons.svg#icon-whatsapp"></use></svg>',b[l]=b[t],b[c]=b[t];c=C("<a>").attr("data-type","{{type}}").attr("data-url","{{url}}").attr("href","#").attr("title","{{title}}").addClass("share-item {{type}}");b.shareLink=c.wrap("<div>").parent().html();function w(){var i=C("<div>").addClass("social-share-container");y.forEach((function(e){var t={type:e,url:s(r[e].url,S)};t.title=!0===S.showLinkTitle?r[e].linkTitle:"";var n=o("shareLink",t),n=C(n),t=a.renderer&&a.renderer[e]&&"function"==typeof a.renderer[e].label?a.renderer[e].label.call(this):b[t.type],t=C("<span>").addClass("__label").html(t);n.append(t),S.showCount&&M[e]&&0<M[e]&&(n.attr("data-tooltip",+M[e]+" Shares"),global.blnIsTouchScreen),i.append(n)})),C("a",i).click((function(e){BMS.Misc.fnPopup({url:C(this).data("url")})})),B.html(i)}var B=C(this);return!0===S.showCount?C.ajax({url:"/serv/getData",dataType:"json",type:"GET",data:{saurl:S.url,cmd:"SHARE"},success:function(e){M[t]=e.FBcnt,M[n]=e.TWtcnt,M[i]=e.Lincnt,w(),S.callback()},error:function(){S.showCount=!1,w()}}):w(),B}})(jQuery),(function(r){r.extend(r,{placeholder:{browser_supported:function(){return void 0!==this._supported?this._supported:this._supported=!!("placeholder"in r('<input type="text">')[0])},shim:function(e){var t={color:"#888",cls:"placeholder",selector:"input[placeholder], textarea[placeholder]"};return r.extend(t,e),!this.browser_supported()&&r(t.selector)._placeholder_shim(t)}}}),r.extend(r.fn,{_placeholder_shim:function(o){function s(e){var t=r(e).offsetParent().offset(),n=r(e).offset();return{top:n.top-t.top,left:n.left-t.left,width:r(e).width()}}return this.each((function(){var e=r(this);if(e.is(":visible")){if(e.data("placeholder"))return e.data("placeholder").css(s(e)),!0;var t={};e.is("textarea")||"auto"==e.css("height")||(t={lineHeight:e.css("height"),whiteSpace:"nowrap"});var n="border-box"===e.css("box-sizing"),i=e.is("textarea"),a=r("<label />").text(e.attr("placeholder")).addClass(o.cls).css(r.extend({position:"absolute",display:"inline",float:"none",overflow:"hidden",textAlign:"left",color:o.color,cursor:"text",paddingTop:!i&&n?"0":e.css("padding-top"),paddingRight:e.css("padding-right"),paddingBottom:!i&&n?"0":e.css("padding-bottom"),paddingLeft:e.css("padding-left"),fontSize:e.css("font-size"),fontFamily:e.css("font-family"),fontStyle:e.css("font-style"),fontWeight:e.css("font-weight"),textTransform:e.css("text-transform"),backgroundColor:"transparent",zIndex:99},t)).css(s(this)).attr("for",this.id).data("target",e).click((function(){r(this).data("target").is(":disabled")||r(this).data("target").focus()})).insertBefore(this);e.data("placeholder",a).on("keydown",(function(){a.hide()})).on("blur change",(function(){a[e.val().length?"hide":"show"]()})).triggerHandler("blur"),r(window).one("resize",(function(){!(function e(t){var n=t.data("target");void 0!==n&&(t.css(s(n)),r(window).one("resize",(function(){e(t)})))})(a)}))}}))}})})(jQuery),jQuery(document).add(window).bind("ready load",(function(){jQuery.placeholder&&jQuery.placeholder.shim()})),(function(v){function e(){var e=i();e!==a&&(a=e,o.trigger("orientationchange"))}function S(e,t,n,i){var a=n.type;n.type=t,v.event.dispatch.call(e,n,i),n.type=a}v.attrFn=v.attrFn||{};var t=navigator.userAgent.toLowerCase(),n=-1<t.indexOf("chrome")&&(-1<t.indexOf("windows")||-1<t.indexOf("macintosh")||-1<t.indexOf("linux"))&&t.indexOf("mobile")<0&&t.indexOf("android")<0,y={tap_pixel_range:5,swipe_h_threshold:50,swipe_v_threshold:50,taphold_threshold:750,doubletap_int:500,touch_capable:"ontouchstart"in window&&!n,orientation_support:"orientation"in window&&"onorientationchange"in window,startevent:"ontouchstart"in window&&!n?"touchstart":"mousedown",endevent:"ontouchstart"in window&&!n?"touchend":"mouseup",moveevent:"ontouchstart"in window&&!n?"touchmove":"mousemove",tapevent:"ontouchstart"in window&&!n?"tap":"click",scrollevent:"ontouchstart"in window&&!n?"touchmove":"scroll",hold_timer:null,tap_timer:null};v.isTouchCapable=function(){return y.touch_capable},v.getStartEvent=function(){return y.startevent},v.getEndEvent=function(){return y.endevent},v.getMoveEvent=function(){return y.moveevent},v.getTapEvent=function(){return y.tapevent},v.getScrollEvent=function(){return y.scrollevent},v.each(["tapstart","tapend","tapmove","tap","tap2","tap3","tap4","singletap","doubletap","taphold","swipe","swipeup","swiperight","swipedown","swipeleft","swipeend","scrollstart","scrollend","orientationchange"],(function(e,t){v.fn[t]=function(e){return e?this.on(t,e):this.trigger(t)},v.attrFn[t]=!0})),v.event.special.tapstart={setup:function(){var n=this,i=v(n);i.on(y.startevent,(function(e){if(i.data("callee",arguments.callee),e.which&&1!==e.which)return!1;var t=e.originalEvent,t={position:{x:(y.touch_capable?t.touches[0]:e).screenX,y:(y.touch_capable?t.touches[0]:e).screenY},offset:{x:y.touch_capable?t.touches[0].pageX-t.touches[0].target.offsetLeft:e.offsetX,y:y.touch_capable?t.touches[0].pageY-t.touches[0].target.offsetTop:e.offsetY},time:Date.now(),target:e.target};return S(n,"tapstart",e,t),!0}))},remove:function(){v(this).off(y.startevent,v(this).data.callee)}},v.event.special.tapmove={setup:function(){var n=this,i=v(n);i.on(y.moveevent,(function(e){i.data("callee",arguments.callee);var t=e.originalEvent,t={position:{x:(y.touch_capable?t.touches[0]:e).screenX,y:(y.touch_capable?t.touches[0]:e).screenY},offset:{x:y.touch_capable?t.touches[0].pageX-t.touches[0].target.offsetLeft:e.offsetX,y:y.touch_capable?t.touches[0].pageY-t.touches[0].target.offsetTop:e.offsetY},time:Date.now(),target:e.target};return S(n,"tapmove",e,t),!0}))},remove:function(){v(this).off(y.moveevent,v(this).data.callee)}},v.event.special.tapend={setup:function(){var n=this,i=v(n);i.on(y.endevent,(function(e){i.data("callee",arguments.callee);var t=e.originalEvent,t={position:{x:(y.touch_capable?t.changedTouches[0]:e).screenX,y:(y.touch_capable?t.changedTouches[0]:e).screenY},offset:{x:y.touch_capable?t.changedTouches[0].pageX-t.changedTouches[0].target.offsetLeft:e.offsetX,y:y.touch_capable?t.changedTouches[0].pageY-t.changedTouches[0].target.offsetTop:e.offsetY},time:Date.now(),target:e.target};return S(n,"tapend",e,t),!0}))},remove:function(){v(this).off(y.endevent,v(this).data.callee)}},v.event.special.taphold={setup:function(){var l,c=this,d=v(c),u={x:0,y:0},p=0,f=0;d.on(y.startevent,(function(i){if(i.which&&1!==i.which)return!1;d.data("tapheld",!1),l=i.target;var a=i.originalEvent,o=Date.now(),s={x:(y.touch_capable?a.touches[0]:i).screenX,y:(y.touch_capable?a.touches[0]:i).screenY},r={x:y.touch_capable?a.touches[0].pageX-a.touches[0].target.offsetLeft:i.offsetX,y:y.touch_capable?a.touches[0].pageY-a.touches[0].target.offsetTop:i.offsetY};return u.x=(i.originalEvent.targetTouches?i.originalEvent.targetTouches[0]:i).pageX,u.y=(i.originalEvent.targetTouches?i.originalEvent.targetTouches[0]:i).pageY,p=u.x,f=u.y,y.hold_timer=window.setTimeout((function(){var e,t=u.x-p,n=u.y-f;i.target==l&&(u.x==p&&u.y==f||t>=-y.tap_pixel_range&&t<=y.tap_pixel_range&&n>=-y.tap_pixel_range&&n<=y.tap_pixel_range)&&(d.data("tapheld",!0),e=Date.now(),t={x:(y.touch_capable?a.touches[0]:i).screenX,y:(y.touch_capable?a.touches[0]:i).screenY},n={x:y.touch_capable?a.touches[0].pageX-a.touches[0].target.offsetLeft:i.offsetX,y:y.touch_capable?a.touches[0].pageY-a.touches[0].target.offsetTop:i.offsetY},duration=e-o,n={startTime:o,endTime:e,startPosition:s,startOffset:r,endPosition:t,endOffset:n,duration:duration,target:i.target},d.data("callee1",arguments.callee),S(c,"taphold",i,n))}),y.taphold_threshold),!0})).on(y.endevent,(function(){d.data("callee2",arguments.callee),d.data("tapheld",!1),window.clearTimeout(y.hold_timer)})).on(y.moveevent,(function(e){d.data("callee3",arguments.callee),p=(e.originalEvent.targetTouches?e.originalEvent.targetTouches[0]:e).pageX,f=(e.originalEvent.targetTouches?e.originalEvent.targetTouches[0]:e).pageY}))},remove:function(){v(this).off(y.startevent,v(this).data.callee1).off(y.endevent,v(this).data.callee2).off(y.moveevent,v(this).data.callee3)}},v.event.special.doubletap={setup:function(){var i,a,o,t,s=this,r=v(s),l=!1;r.on(y.startevent,(function(e){return(!e.which||1===e.which)&&(r.data("doubletapped",!1),i=e.target,r.data("callee1",arguments.callee),t=e.originalEvent,o={position:{x:(y.touch_capable?t.touches[0]:e).screenX,y:(y.touch_capable?t.touches[0]:e).screenY},offset:{x:y.touch_capable?t.touches[0].pageX-t.touches[0].target.offsetLeft:e.offsetX,y:y.touch_capable?t.touches[0].pageY-t.touches[0].target.offsetTop:e.offsetY},time:Date.now(),target:e.target},!0)})).on(y.endevent,(function(e){var t=Date.now(),n=t-(r.data("lastTouch")||t+1);window.clearTimeout(a),r.data("callee2",arguments.callee),n<y.doubletap_int&&e.target==i&&100<n?(r.data("doubletapped",!0),window.clearTimeout(y.tap_timer),n={position:{x:(y.touch_capable?e.originalEvent.changedTouches[0]:e).screenX,y:(y.touch_capable?e.originalEvent.changedTouches[0]:e).screenY},offset:{x:y.touch_capable?e.originalEvent.changedTouches[0].pageX-e.originalEvent.changedTouches[0].target.offsetLeft:e.offsetX,y:y.touch_capable?e.originalEvent.changedTouches[0].pageY-e.originalEvent.changedTouches[0].target.offsetTop:e.offsetY},time:Date.now(),target:e.target},n={firstTap:o,secondTap:n,interval:n.time-o.time},l||S(s,"doubletap",e,n),l=!0,window.setTimeout((function(){l=!1}),y.doubletap_int)):(r.data("lastTouch",t),a=window.setTimeout((function(){window.clearTimeout(a)}),y.doubletap_int,[e])),r.data("lastTouch",t)}))},remove:function(){v(this).off(y.startevent,v(this).data.callee1).off(y.endevent,v(this).data.callee2)}},v.event.special.singletap={setup:function(){var n=this,i=v(n),a=null,o=null,s={x:0,y:0};i.on(y.startevent,(function(e){return(!e.which||1===e.which)&&(o=Date.now(),a=e.target,i.data("callee1",arguments.callee),s.x=(e.originalEvent.targetTouches?e.originalEvent.targetTouches[0]:e).pageX,s.y=(e.originalEvent.targetTouches?e.originalEvent.targetTouches[0]:e).pageY,!0)})).on(y.endevent,(function(t){i.data("callee2",arguments.callee),t.target==a&&(end_pos_x=(t.originalEvent.changedTouches?t.originalEvent.changedTouches[0]:t).pageX,end_pos_y=(t.originalEvent.changedTouches?t.originalEvent.changedTouches[0]:t).pageY,y.tap_timer=window.setTimeout((function(){var e;i.data("doubletapped")||i.data("tapheld")||s.x!=end_pos_x||s.y!=end_pos_y||(e=t.originalEvent,(e={position:{x:(y.touch_capable?e.changedTouches[0]:t).screenX,y:(y.touch_capable?e.changedTouches[0]:t).screenY},offset:{x:y.touch_capable?e.changedTouches[0].pageX-e.changedTouches[0].target.offsetLeft:t.offsetX,y:y.touch_capable?e.changedTouches[0].pageY-e.changedTouches[0].target.offsetTop:t.offsetY},time:Date.now(),target:t.target}).time-o<y.taphold_threshold&&S(n,"singletap",t,e))}),y.doubletap_int))}))},remove:function(){v(this).off(y.startevent,v(this).data.callee1).off(y.endevent,v(this).data.callee2)}},v.event.special.tap={setup:function(){var d,u,p=this,f=v(p),g=!1,h=null,m={x:0,y:0};f.on(y.startevent,(function(e){return f.data("callee1",arguments.callee),(!e.which||1===e.which)&&(g=!0,m.x=(e.originalEvent.targetTouches?e.originalEvent.targetTouches[0]:e).pageX,m.y=(e.originalEvent.targetTouches?e.originalEvent.targetTouches[0]:e).pageY,d=Date.now(),h=e.target,u=e.originalEvent.targetTouches||[e],!0)})).on(y.endevent,(function(e){f.data("callee2",arguments.callee);var t,n=(e.originalEvent.targetTouches?e.originalEvent.changedTouches[0]:e).pageX,i=(e.originalEvent.targetTouches?e.originalEvent.changedTouches[0]:e).pageY,a=m.x-n,o=m.y-i;if(h==e.target&&g&&Date.now()-d<y.taphold_threshold&&(m.x==n&&m.y==i||a>=-y.tap_pixel_range&&a<=y.tap_pixel_range&&o>=-y.tap_pixel_range&&o<=y.tap_pixel_range)){for(var s=e.originalEvent,r=[],l=0;l<u.length;l++){var c={position:{x:(y.touch_capable?s.changedTouches[l]:e).screenX,y:(y.touch_capable?s.changedTouches[l]:e).screenY},offset:{x:y.touch_capable?s.changedTouches[l].pageX-s.changedTouches[l].target.offsetLeft:e.offsetX,y:y.touch_capable?s.changedTouches[l].pageY-s.changedTouches[l].target.offsetTop:e.offsetY},time:Date.now(),target:e.target};r.push(c)}switch(u.length){case 1:t="tap";break;case 2:t="tap2";break;case 3:t="tap3";break;case 4:t="tap4"}S(p,t,e,r)}}))},remove:function(){v(this).off(y.startevent,v(this).data.callee1).off(y.endevent,v(this).data.callee2)}},v.event.special.swipe={setup:function(){var o,s=v(this),r=!1,l=!1,a={x:0,y:0},c={x:0,y:0};s.on(y.startevent,(function(e){(s=v(e.currentTarget)).data("callee1",arguments.callee),a.x=(e.originalEvent.targetTouches?e.originalEvent.targetTouches[0]:e).pageX,a.y=(e.originalEvent.targetTouches?e.originalEvent.targetTouches[0]:e).pageY,c.x=a.x,c.y=a.y,r=!0;var t=e.originalEvent;o={position:{x:(y.touch_capable?t.touches[0]:e).screenX,y:(y.touch_capable?t.touches[0]:e).screenY},offset:{x:y.touch_capable?t.touches[0].pageX-t.touches[0].target.offsetLeft:e.offsetX,y:y.touch_capable?t.touches[0].pageY-t.touches[0].target.offsetTop:e.offsetY},time:Date.now(),target:e.target}})),s.on(y.moveevent,(function(e){(s=v(e.currentTarget)).data("callee2",arguments.callee),c.x=(e.originalEvent.targetTouches?e.originalEvent.targetTouches[0]:e).pageX,c.y=(e.originalEvent.targetTouches?e.originalEvent.targetTouches[0]:e).pageY;var t,n=(s.parent().data("xthreshold")?s.parent():s).data("xthreshold"),i=(s.parent().data("ythreshold")?s.parent():s).data("ythreshold"),n=void 0!==n&&!1!==n&&parseInt(n)?parseInt(n):y.swipe_h_threshold,i=void 0!==i&&!1!==i&&parseInt(i)?parseInt(i):y.swipe_v_threshold;a.y>c.y&&a.y-c.y>i&&(t="swipeup"),a.x<c.x&&c.x-a.x>n&&(t="swiperight"),a.y<c.y&&c.y-a.y>i&&(t="swipedown"),null!=(t=a.x>c.x&&a.x-c.x>n?"swipeleft":t)&&r&&(a.x=0,a.y=0,c.x=0,c.y=0,r=!1,i=e.originalEvent,endEvnt={position:{x:(y.touch_capable?i.touches[0]:e).screenX,y:(y.touch_capable?i.touches[0]:e).screenY},offset:{x:y.touch_capable?i.touches[0].pageX-i.touches[0].target.offsetLeft:e.offsetX,y:y.touch_capable?i.touches[0].pageY-i.touches[0].target.offsetTop:e.offsetY},time:Date.now(),target:e.target},n=Math.abs(o.position.x-endEvnt.position.x),i=Math.abs(o.position.y-endEvnt.position.y),i={startEvnt:o,endEvnt:endEvnt,direction:t.replace("swipe",""),xAmount:n,yAmount:i,duration:endEvnt.time-o.time},l=!0,s.trigger("swipe",i).trigger(t,i))})),s.on(y.endevent,(function(e){var t,n,i,a="";(s=v(e.currentTarget)).data("callee3",arguments.callee),l&&(n=s.data("xthreshold"),t=s.data("ythreshold"),i=void 0!==n&&!1!==n&&parseInt(n)?parseInt(n):y.swipe_h_threshold,n=void 0!==t&&!1!==t&&parseInt(t)?parseInt(t):y.swipe_v_threshold,t=e.originalEvent,endEvnt={position:{x:(y.touch_capable?t.changedTouches[0]:e).screenX,y:(y.touch_capable?t.changedTouches[0]:e).screenY},offset:{x:y.touch_capable?t.changedTouches[0].pageX-t.changedTouches[0].target.offsetLeft:e.offsetX,y:y.touch_capable?t.changedTouches[0].pageY-t.changedTouches[0].target.offsetTop:e.offsetY},time:Date.now(),target:e.target},o.position.y>endEvnt.position.y&&o.position.y-endEvnt.position.y>n&&(a="swipeup"),o.position.x<endEvnt.position.x&&endEvnt.position.x-o.position.x>i&&(a="swiperight"),o.position.y<endEvnt.position.y&&endEvnt.position.y-o.position.y>n&&(a="swipedown"),o.position.x>endEvnt.position.x&&o.position.x-endEvnt.position.x>i&&(a="swipeleft"),n=Math.abs(o.position.x-endEvnt.position.x),i=Math.abs(o.position.y-endEvnt.position.y),i={startEvnt:o,endEvnt:endEvnt,direction:a.replace("swipe",""),xAmount:n,yAmount:i,duration:endEvnt.time-o.time},s.trigger("swipeend",i)),l=r=!1}))},remove:function(){v(this).off(y.startevent,v(this).data.callee1).off(y.moveevent,v(this).data.callee2).off(y.endevent,v(this).data.callee3)}},v.event.special.scrollstart={setup:function(){function t(e,t){S(a,(n=t)?"scrollstart":"scrollend",e)}var n,i,a=this,o=v(a);o.on(y.scrollevent,(function(e){o.data("callee",arguments.callee),n||t(e,!0),clearTimeout(i),i=setTimeout((function(){t(e,!1)}),50)}))},remove:function(){v(this).off(y.scrollevent,v(this).data.callee)}};var i,a,o=v(window),s={0:!0,180:!0};y.orientation_support&&(t=window.innerWidth||o.width(),t=(n=window.innerHeight||o.height())<t&&50<t-n,n=s[window.orientation],(t&&n||!t&&!n)&&(s={"-90":!0,90:!0})),v.event.special.orientationchange={setup:function(){return!y.orientation_support&&(a=i(),o.on("throttledresize",e),!0)},teardown:function(){return!y.orientation_support&&(o.off("throttledresize",e),!0)},add:function(e){var t=e.handler;e.handler=function(e){return e.orientation=i(),t.apply(this,arguments)}}},v.event.special.orientationchange.orientation=i=function(){var e=document.documentElement;return(y.orientation_support?s[window.orientation]:e&&e.clientWidth/e.clientHeight<1.1)?"portrait":"landscape"},v.event.special.throttledresize={setup:function(){v(this).on("resize",d)},teardown:function(){v(this).off("resize",d)}};var r,l,c,d=function(){l=Date.now(),250<=(c=l-u)?(u=l,v(this).trigger("throttledresize")):(r&&window.clearTimeout(r),r=window.setTimeout(e,250-c))},u=0;v.each({scrollend:"scrollstart",swipeup:"swipe",swiperight:"swipe",swipedown:"swipe",swipeleft:"swipe",swipeend:"swipe",tap2:"tap"},(function(e,t){v.event.special[e]={setup:function(){v(this).on(t,v.noop)}}}))})(jQuery),jQuery,window.mt={},mt.templates={},mt.templates.card='<aside class="mt-card-wrapper wow fadeIn fixed-card" data-wow-offset="-50" data-index="{{index}}">\t\t<div class="trailer-card">\t\t\t<div class="card-container">\t\t\t\t<div class="poster-container">\t\t\t\t\t<img class="__poster" src="{{ieposterURL}}" data-src="{{posterURL}}" data-error="{{fallbackURL}}">\t\t\t\t\t<div class="__overlay"></div>\t\t\t\t\t<div class="show-more-info">\t\t\t\t\t\t<div class="trailer-player">\t\t\t\t\t\t\t<span class="trailer-icon __icon" data-url="" data-eventcode="{{eventCode}}">\t\t\t\t\t\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">\t\t\t\t\t\t\t\t\t<use xlink:href="/icons/movies-icons.svg#icon-play"></use>\t\t\t\t\t\t\t\t</svg>\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t<span class="now-playing">\t\t\t\t\t\t\t\t<span class="__text">NOW PLAYING</span>\t\t\t\t\t\t\t</span>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t\t<div class="release-info {{datePillContainerClass}}">\t\t\t\t\t   <div class="date">\t\t\t\t\t   \t\t<div class="day">{{date}}</div>\t\t\t\t\t   \t\t<div class="month">{{month}}</div>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t\t<div class="stats-wrapper">\t\t\t\t\t\t<div class="stats">\t\t\t\t\t\t\t<div class="popularity">\t\t\t\t\t\t\t\t<div class="__likes {{noLikes}}">\t\t\t\t\t\t\t\t\t<div class="__thumbs">\t\t\t\t\t\t\t\t\t\t<svg class="thumb-like" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">\t\t\t\t\t\t\t\t\t\t\t<use xlink:href="/icons/movies-icons.svg#icon-like"></use>\t\t\t\t\t\t\t\t\t\t</svg>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t<div class="__percentage">{{wtsPerc}} %</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t<div class="__votes">\t\t\t\t\t\t\t\t\t<div class="__count">{{totalVotes}}</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t\t<div class="detail">\t\t\t\t\t\t<div class="__title">\t\t\t\t\t\t\t<a class="__movie-link" href="{{url}}" target="_blank" title="{{title}}">{{title}}</a>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t</div>\t\t</div>\t</aside>',mt.templates.nscard='<aside class="mt-card-wrapper wow fadeIn fixed-card" data-wow-offset="-50" data-index="{{index}}">\t\t<div class=" trailer-card now-showing ">\t\t\t<div class="card-container">\t\t\t\t<div class="poster-container">\t\t\t\t\t<img class="__poster" src="{{ieposterURL}}" data-src="{{posterURL}}" data-error="{{fallbackURL}}">\t\t\t\t\t<div class="__overlay"></div>\t\t\t\t\t<div class="show-more-info">\t\t\t\t\t\t<div class="trailer-player">\t\t\t\t\t\t\t<span class="trailer-icon __icon" data-url="" data-eventcode="{{eventCode}}">\t\t\t\t\t\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">\t\t\t\t\t\t\t\t\t<use xlink:href="/icons/movies-icons.svg#icon-play"></use>\t\t\t\t\t\t\t\t</svg>\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t<span class="now-playing">\t\t\t\t\t\t\t\t<span class="__text">NOW PLAYING</span>\t\t\t\t\t\t\t</span>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t\t<div class="stats-wrapper">\t\t\t\t\t\t<div class="stats">\t\t\t\t\t\t\t<div class="popularity">\t\t\t\t\t\t\t\t<div class="__likes {{noLikes}}">\t\t\t\t\t\t\t\t\t<div class="__thumbs">\t\t\t\t\t\t\t\t\t\t<svg version="1.1" style="fill: #D6181F;" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">\t\t\t\t\t\t\t\t\t\t\t<use xlink:href="/icons/movies-icons.svg#icon-heart"></use>\t\t\t\t\t\t\t\t\t\t</svg>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t<div class="__percentage">{{wtsPerc}} %</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t<div class="__votes">\t\t\t\t\t\t\t\t\t<div class="__count">{{totalVotes}}</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t\t<div class="detail">\t\t\t\t\t\t<div class="__title">\t\t\t\t\t\t\t<a class="__movie-link" href="{{url}}" target="_blank" title="{{title}}">{{title}}</a>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t\t<div class="book-button">\t\t\t\t\t{{book_now_button}}\t\t\t    </div>\t\t\t</div>\t\t</div>\t</aside>',mt.templates.trailerScreen='<div class="mt-single-trailer">\t\t\t\t\t<div class="__bg"></div>\t\t\t\t\t<div class="mt-single-video" id="player">\t\t\t\t\t\t\x3c!--<iframe width="100%" height="100%" src="" id="youtube-iframe" frameborder="0" allowfullscreen autoplay="true"></iframe>--\x3e\t\t\t\t\t</div>\t\t\t\t\t<div class="mt-single-synopsis">\t\t\t\t\t\t<div class="mt-synopsis-wrapper">\t\t\t\t\t\t\t<div class="mt-synopsis-content">\t\t\t\t\t\t\t\t<div class="movie-info">\t\t\t\t\t\t\t\t\t<div class="movie-name">\t\t\t\t\t\t\t\t\t\t<div id="eventTitle" class="__name" itemprop="name" title="The Grey">The Grey</div>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t<div class="language-container">\t\t\t\t\t\t\t\t\t\t<span class="__language-tag">ENGLISH</span>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t<div class="genre-container">\t\t\t\t\t\t\t\t\t\t\x3c!--<span class="__genre-tag">DRAMA</span>\t\t\t\t\t\t\t\t\t\t<span class="__genre-tag">THRILLER</span>--\x3e\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t<div class="mt-stats">\t\t\t\t\t\t\t\t\t<div class="thumbs-ups">\t\t\t\t\t\t\t\t\t\t<span class="__icon">\t\t\t\t\t\t\t\t\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">\t\t\t\t\t\t\t\t\t\t\t\t<use xlink:href="/icons/movies-icons.svg#icon-like"></use>\t\t\t\t\t\t\t\t\t\t\t</svg>\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t<span class="__text-container">\t\t\t\t\t\t\t\t\t\t\t<span class="__percentage">&nbsp;</span>\t\t\t\t\t\t\t\t\t\t\t<span class="__votes">&nbsp;</span>\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t<div class="release-date-container">\t\t\t\t\t\t\t\t\t\t<div class="calendar-detail">\t\t\t\t\t\t\t\t\t\t\t<span class="__icon">\t\t\t\t\t\t\t\t\t\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">\t\t\t\t\t\t\t\t\t\t\t\t\t<use xlink:href="/icons/movies-icons.svg#icon-date"></use>\t\t\t\t\t\t\t\t\t\t\t\t</svg>\t\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t\t<span class="__date">\t\t\t\t\t\t\t\t\t\t\t\t<span class="day-and-month">1 Sep</span>\t\t\t\t\t\t\t\t\t\t\t\t<span class="year">2015</span>\t\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t<div class="summary-reviews">\t\t\t\t\t\t\t\t\t<div id="mt-summary" class="tab-content">\t\t\t\t\t\t\t\t\t\t<div class="synopsis">\t\t\t\t\t\t\t\t\t\t\t<blockquote>\t\t\t\t\t\t\t\t\t\t\t\tAfter their plane crashes in Alaska, six oil workers are led by a skilled huntsman to survival, but a pack of merciless wolves haunts their every step.\t\t\t\t\t\t\t\t\t\t\t</blockquote>\t\t\t\t\t\t\t\t\t\t\t<a href="#"><span class="__read-more">Read more</span></a>\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t<div class="wts-wrapper">\t\t\t\t\t\t\t\t\t<div class="wts-true" id="wts-true" event-code="" event-type="MT" event-wts="1">\t\t\t\t\t\t\t\t\t\t<div class="wts-container">\t\t\t\t\t\t\t\t\t\t\t<span class="__icon">\t\t\t\t\t\t\t\t\t\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">\t\t\t\t\t\t\t\t\t\t\t\t\t<use xlink:href="/icons/movies-icons.svg#icon-like"></use>\t\t\t\t\t\t\t\t\t\t\t\t</svg>\t\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t\t<span class="__text">WILL WATCH</span>\t\t\t\t\t\t\t\t\t\t\t<span class="__text count"></span>\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t<div class="wts-undefined" id="wts-undefined" event-code="" event-type="MT" event-wts="-2">\t\t\t\t\t\t\t\t\t\t<div class="wts-container">\t\t\t\t\t\t\t\t\t\t\t<span class="__icon">\t\t\t\t\t\t\t\t\t\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">\t\t\t\t\t\t                            <use xlink:href="/icons/movies-icons.svg#icon-question"></use>\t\t\t\t\t\t                        </svg>\t\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t\t<span class="__text">MAYBE</span>\t\t\t\t\t\t\t\t\t\t\t<span class="__text un-count"></span>\t\t\t\t\t\t\t\t\t\t</div>                    \t\t\t\t</div>\t\t\t\t\t\t\t\t\t<div class="wts-false" id="wts-false" event-code="" event-type="MT" event-wts="-1">\t\t\t\t\t\t\t\t\t\t<div class="wts-container">\t\t\t\t\t\t\t\t\t\t\t<span class="__icon">\t\t\t\t\t\t\t\t\t\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">\t\t\t\t\t\t\t\t\t\t\t\t\t<use xlink:href="/icons/movies-icons.svg#icon-dislike"></use>\t\t\t\t\t\t\t\t\t\t\t\t</svg>\t\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t\t<span class="__text">WON\'T WATCH</span>\t\t\t\t\t\t\t\t\t\t\t<span class="__text count"></span>\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t<div class="btn-wrapper">\t\t\t\t\t\t\t\t\t<a id="trailerbuyBtn" class="btn _cuatro" href="">Book Now</a>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t<div class="error-text">\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t</div>',(function(d){BMS.Misc.Trailers={};var e=window.mt.API,t=window.mt.NSAPI,u={},p={events:{},analyticsObj:{}},i={},f={},g={pill:{},modal:{},popular:{},fresh:{},genres:{},nowShowing:{},languages:{},trailerScreen:{},tabs:{}},n={popular:{},fresh:{},nowShowing:{},trailerScreen:{},languages:{}},o={modal:{show:{},hide:{}},toggle:{tabs:{},langs:{}},launchTrailer:{},stop:{},load:{}},a=BMS.Storage.get({name:"Rgn",key:"subregionDetails"}),h=(""!=a&&BMS.Misc.fnUrlName(JSON.parse(a).SubRegionName.toLowerCase()),""!=a?JSON.parse(a).SubRegionCode.toLowerCase():"");function s(e){return(e+"").replace(/^([a-z])|\s+([a-z])/g,(function(e){return e.toUpperCase()}))}u={sanitize:{date:function(e){return new Date(e.substr(0,4)+" "+e.substr(4,2)+" "+e.substr(6,2)+" "+e.substr(8,2)+":"+e.substr(10,2))},time:function(e){var t=e.getHours(),n=e.getMinutes(),e=!1;return 12<t?(t-=12,e=!0):12==t?e=!0:0==t&&(t=12),t+":"+(n=n<10?"0"+n:n)+" "+(e=e?"pm":"am")},boolean:function(n){return"string"==typeof n?"Y"==n?n=!0:"N"==n?n=!1:n:("object"!=typeof n&&"array"!=typeof n||_.each(n,(function(e,t){n[t]=u.sanitize.boolean(e)})),n)}},venueName:function(e){return e.replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"").replace(/\s/g,"-").toLowerCase()+"/cinema"},render:function(e,s,t){e=e.split("\n").join("");var n,r,i=/([$\^\\\/()|?+*\[\]{}.\-])/g;return t=t||{},n="{{}}".length,r=Math.ceil(n/2),t="{{}}".substr(0,r).replace(i,"\\$1"),i="{{}}".substr(r,n).replace(i,"\\$1")||t,i=new RegExp(t+"[^"+t+i+"]+"+i,"g"),e.replace(i,(function(e){var t,n=e.slice(r,-r),i=n.split("."),a=0,o=i.length;if(n in s)t=s[n];else for(t=s;a<o;a++){if(!(i[a]in t))return e;t=t[i[a]]}return t}))},difference:function(e){for(var t=[],n=e.length-1,i=0;i<e.length-1;i++)if(i!=n)return parseInt(e[i])>parseInt(e[i+1])?t.push(parseInt(e[i])-parseInt(e[i+1])):t.push(parseInt(e[i+1])-parseInt(e[i]))},getLatLongDistance:function(e,t){var n=e.lat,i=t.lat,a=e.lng,o=t.lng,e=function(e){return e*(Math.PI/180)},t=e(i-n),a=e(o-a),a=Math.sin(t/2)*Math.sin(t/2)+Math.cos(e(n))*Math.cos(e(i))*Math.sin(a/2)*Math.sin(a/2);return(6371*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))).toFixed(2)},between:function(e,t){var n=Math.min.apply(Math,[e,t]),t=Math.max.apply(Math,[e,t]);return n<this&&this<t},getCatAvailability:function(e){(e=parseInt(e))<0&&(e=0);for(var t,n=0;n<availSeatRange.length;n++)if(t=void 0,t=availSeatRange[n].range.split("-"),e>=parseInt(t[0])&&e<=parseInt(t[1]))return availSeatRange[n]},fnExtractVideoCode:function(e){return _.compact(e.split(/[\\?&]v=([^&#]*)/))[1]},calculateNumberOfCardsInRow:function(e,t){e=Math.round(t.width()/e.width());return void 0,e}},d.extend(BMS.Misc.Trailers,{helpers:u,models:p,presenters:f,views:i,render:n,events:o,dom:g}),p.languages={},p.genres={},p.events.popular=function(){var n={};return _.each(e,(function(e,t){n[e.EventCode]={id:e.EventCode,title:e.EventName,language:[e.EventLanguage,"All Languages"],url:"/movies/"+e.EventURL+"/"+e.EventCode,trailerURL:e.TrailerURL,trailerUploadDate:e.trailerUploadDate,posterURL:global.strContentUrl+"/events/moviecard/"+e.EventCode+".jpg",fallbackURL:"",synopsis:e.EventSyno,wtsCount:e.wtsCount,dwtsCount:e.dwtsCount,wtsPerc:e.wtsPerc,visible:!0,enabled:!0,active:!1,buyBtn:!1,buyURL:""},p.languages[e.EventLanguage]=!0})),n},p.events.fresh=function(){var n={};return _.each(e,(function(e,t){n[e.EventCode]={id:e.EventCode,title:e.EventTitle,language:[e.EventLanguage,"All Languages"],url:"/movies/"+e.EventURL+"/"+e.EventCode,trailerURL:e.TrailerURL,trailerUploadDate:e.trailerUploadDate,posterURL:global.strContentUrl+"/events/moviecard/"+e.EventCode+".jpg",fallbackURL:"",synopsis:e.EventSyno,wtsCount:e.wtsCount,dwtsCount:e.dwtsCount,wtsPerc:e.wtsPerc,visible:!0,enabled:!0,active:!1,buyBtn:!1,buyURL:""},p.languages[e.EventLanguage]=!0})),n},p.events.nowShowing=function(){var n={};_.each(t,(function(e,t){n[e.EventCode]={id:e.EventCode,title:e.EventTitle,language:[e.EventLanguage,"All Languages"],url:"/movies/"+e.EventURL+"/"+e.EventCode,trailerURL:e.TrailerURL,trailerUploadDate:e.trailerUploadDate,posterURL:global.strContentUrl+"/events/moviecard/"+e.EventCode+".jpg",fallbackURL:"",synopsis:e.EventSyno,wtsCount:e.wtsCount,dwtsCount:e.dwtsCount,wtsPerc:e.wtsPerc,visible:!0,enabled:!0,active:!1,buyBtn:!0,buyURL:"/buytickets/"+e.EventCode},p.languages[e.EventLanguage]=!0}))},p.active={language:[],genre:[],pills:[],tab:"comingSoon",comingsoon:"fresh",isPlaying:!1,nextSibling:null},f.languages=function(){return _.uniq(_.union(BMS.Misc.Trailers.models.nsLanguageSequence,BMS.Misc.Trailers.models.cslanguageSequence))},f.genre=function(){var e=_.map(p.genres,(function(e,t){return t})),e=_.sortBy(e,(function(e,t){return e}));return _.uniq(e)},f.popular=function(){return void 0,_.sortBy(p.events.cs,(function(e){return-e.wtsCount}))},f.nowShowing=function(){return void 0,p.events.ns},f.fresh=function(){return void 0,_.sortBy(p.events.cs,(function(e){return-e.trailerUploadDate}))},f.toggleLanguage=function(e){var n=[];return"comingSoon"==p.active.tab?_.each(i[p.active.comingsoon],(function(e){e.visible=!1})):_.each(i[p.active.tab],(function(e){e.visible=!1})),void 0,_.each(e,(function(t,e){void 0,void 0,_.each(p.active.language,(function(e){-1<t.languageFilter.indexOf(e)&&(void 0,t.visible=!0,n.push(t))}))})),n},f.showtrailerScreen=function(){var e=d(this);void 0;var t=parseInt(d(window).width()/e.width()),n=e.siblings(":visible").addBack().index(e)+1,i=global.strContentUrl+"/events/showcasesynopsis/"+e.find(".trailer-icon").attr("data-eventcode")+".jpg";for(g.trailerScreen.find(".__bg").css({"background-image":"url("+i+")"}),n%t==0&&n--;n%t!=0;)n--;n<0&&(n=0);i=e.siblings(":visible").addBack().eq(n);i.before(g.trailerScreen);e=d(window).height()-(e.find(".trailer-card").height()+d(".modal-header","#mt-wrapper").height()+80);g.trailerScreen.height(e=e<400?420:e),i.parents(".fixed-wrapper").scrollTop(i.parents(".fixed-wrapper").scrollTop()+g.trailerScreen.offset().top-(d(".modal-header","#mt-wrapper").height()+20)),p.active.isPlaying=!0},f.toggleGenre=function(e){var n=[];return"comingSoon"==p.active.tab?_.each(i[p.active.comingsoon],(function(e){e.visible=!1})):_.each(i[p.active.tab],(function(e){e.visible=!1})),_.each(e,(function(t,e){_.each(p.active.genre,(function(e){-1<t.genreFilter.indexOf(e)&&(t.visible=!0,n.push(t))}))})),n},f.toggleFilters=function(){var e=[],e="comingSoon"==p.active.tab?i[p.active.comingsoon]:i[p.active.tab];0!=p.active.language.length&&(e=f.toggleLanguage(e)),0!=p.active.genre.length&&(e=f.toggleGenre(e)),0==p.active.genre.length&&0==p.active.language.length&&_.each(e,(function(e){e.visible=!0})),p.active.card_models=e,"comingSoon"==p.active.tab?n[p.active.comingsoon](e):n[p.active.tab](e),wow.scrollHandler()},f.clearFilters=function(){d.each(g.languages.language,(function(e,t){t.find("input").is(":checked")&&t.find("input").prop("checked",!1)})),d.each(g.genres.genre,(function(e,t){t.find("input").is(":checked")&&t.find("input").prop("checked",!1)})),p.active.genre=[],p.active.language=[]},f.trailerIconClick=function(e){var t=d(this).parents(".mt-card-wrapper");n.trailerIconClick.call(t[0],e)},f.renderPills=function(){n.renderPills()},f.setUserInterest=function(e,t,n,i){try{BMS.Storage.isset({name:"ld"})?f.sendUserVote(e,t,n,i):(BMS.SignIn.fnSignIn(!0),null==global.SignInCallBack&&(global.SignInCallBack=[]),global.SignInCallBack.push((function(){f.sendUserVote(e,t,n,i)})))}catch(i){void 0}},f.sendUserVote=function(e,t,n,i){BMS.Misc.fnAjax({url:"/serv/getData.bms",dataType:"json",data:{cmd:"SETINTEREST",eid:e,intId:t,etype:n},success:function(e){var t;f.updateUserInterest(e,i),e.data?BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"Want to see",{ProductID:p.analyticsObj.ProductID,"Event Type":p.analyticsObj["Event Type"],"Event Name":p.analyticsObj["Event Name"],Language:p.analyticsObj.Language,Genre:p.analyticsObj.Genre,Choice:1==p.analyticsObj.Choice?"Yes":"No",Appcode:global.strAppCode}):(t=e.error.text,d(".error-text").text(t).addClass("_occur"),window.setTimeout((function(){d(".error-text").text(t).removeClass("_occur")}),3e3))},error:function(e,t,n){void 0}})},f.updateUserInterest=function(e,t){var n,i,a,o,s;""!=e.data?(n=e.data.EventInterest.wtsCount,i=e.data.EventInterest.dwtsCount,a=e.data.EventInterest.totCount,o=e.data.EventInterest.maybeCount,t="#"+t.currentTarget.id+" .wts-container",d(t).addClass("_active"),d("#wts-true .__text.count").text("("+n+")"),d("#wts-false  .__text.count").text("("+i+")"),d("#wts-undefined .__text.un-count").text("("+o+")"),d(".like-rating .__votes").text(a+" votes")):(s=e.error.text,d(".error-text").text(s).addClass("_occur"),window.setTimeout((function(){d(".error-text").text(s).removeClass("_occur")}),3e3))},f.togglePills=function(e){var t=d(e.currentTarget),e=t.attr("data-value");d('input[value="'+e+'"]').prop("checked",!1),p.active.language=_.without(p.active.language,e),p.active.genre=_.without(p.active.genre,e),p.active.pills=_.without(p.active.pills,e),f.toggleFilters(),t.remove()},f.clearPills=function(){g.pill.container&&(g.pill.container.html(""),p.active.pills=[])},f.resetView=function(){d(".trailer-card").removeClass("_active"),g.trailerScreen.find(".error-text").removeClass("_occur"),g.trailerScreen.find(".wts-container").removeClass("_active"),g.trailerScreen.detach()},f.clearContainers=function(){g.popular.container&&g.popular.container.html(""),g.fresh.container&&g.fresh.container.html(""),g.nowShowing.container&&g.nowShowing.container.html(""),g.popular={},g.fresh={},g.nowShowing={}},f.setSelectText=function(){g.tabs[p.active.tab].addClass("_active"),g.tabs[p.active.tab].siblings().removeClass("_active"),"popular"==p.active.comingsoon&&d(".__right-pf-filters .__text").html("Popular"),"fresh"==p.active.comingsoon&&d(".__right-pf-filters .__text").html("Fresh")},f.initializePlayer=function(){window.YT&&(g.player=new YT.Player("player",{height:"100%",width:"100%",events:{onReady:o.onPlayerReady,onStateChange:o.onPlayerStateChange}}))},f.resetTrailerScreen=function(){p.active.isPlaying&&(g.trailerScreen.detach(),d(".trailer-card","#mt-wrapper").removeClass("_active"),p.active.isPlaying=!1)},n.popular=function(e){e=e||(i.popular=f.popular()),g.tabs.popular.siblings().removeClass("_active"),g.tabs.popular.addClass("_active"),g.popular.container?(g.popular.container.show(),g.popular.container.siblings().hide(),d.each(g.popular.cards,(function(e,t){t.addClass("none")})),_.each(e,(function(n,e){n.visible&&d.each(g.popular.cards,(function(e,t){d(t).find(".trailer-icon.__icon").attr("data-eventcode")==n.id&&t.removeClass("none")}))}))):(g.popular.container=d('<div class="popular-wrapper">'),g.popular.container.show(),g.popular.cards=[],_.each(e,(function(e,t){var n,i=[];1==e.isTentative?((i=(n=e.releaseDate.split(", "))[0].split(" "))[0]=i[1],i[1]=n[1]):i=(n=e.releaseDate.split(", "))[0].split(" "),g.popular.cards.push(d(u.render(mt.templates.card,{title:e.title,url:e.url,eventCode:e.id,date:i[0],month:i[1],posterURL:1==global.blnIsIE?"":e.posterURL,ieposterURL:1==global.blnIsIE?e.posterURL:"",fallbackURL:e.fallbackURL,index:e.card_index,wts:e.wtsCount+" | "+e.dwtsCount+" | "+e.wtsPerc,totalVotes:e.wtsCount+e.dwtsCount?e.wtsCount+e.dwtsCount+" votes":" ",noLikes:e.wtsPerc?" ":"no-likes",wtsPerc:e.wtsPerc||" "})))})),g.popular.container.append(g.popular.cards),d(".mt-overflow-wrapper").on("click",".show-more-info",o.click.trailerIconClick),wow.scrollHandler(),d(".mt-overflow-wrapper","#mt-wrapper").append(g.popular.container),g.popular.container.siblings().hide())},n.comingSoon=function(){n[p.active.comingsoon]()},n.nowShowing=function(e){e=e||(i.nowShowing=f.nowShowing()),g.nowShowing.container?(g.nowShowing.container.show(),g.nowShowing.container.siblings().hide(),d.each(g.nowShowing.cards,(function(e,t){t.addClass("none")})),_.each(e,(function(n,e){n.visible&&d.each(g.nowShowing.cards,(function(e,t){d(t).find(".trailer-icon.__icon").attr("data-eventcode")==n.id&&t.removeClass("none")}))}))):(g.nowShowing.container=d('<div class="nowshowing-wrapper">'),g.nowShowing.container.show(),g.nowShowing.cards=[],_.each(e,(function(e,t){var n,i,a;a=(i=0!=e.avgRating?(n=e.avgRating,e.totalCount):(n=e.wtsPerc,e.wtsCount+e.dwtsCount),"nscard");BMS.Storage.get({name:"Rgn",key:"text",storage:"C"});var o=BMS.Storage.get({name:"Rgn",key:"Code",storage:"C"}),s=BMS.Storage.get({name:"Rgn",key:"slug",storage:"C"}),o="/buytickets/"+BMS.Misc.fnUrlName(e.title.toLowerCase())+"-"+s+"/movie-"+(""!=h?h:o).toLowerCase()+"-"+e.id+"-MT";g.nowShowing.cards.push(d(u.render(mt.templates[a],{title:e.title,url:e.url,eventCode:e.id,posterURL:1==global.blnIsIE?"":e.posterURL,ieposterURL:1==global.blnIsIE?e.posterURL:"",fallbackURL:e.fallbackURL,index:e.card_index,wts:e.wtsCount+" | "+e.dwtsCount+" | "+e.wtsPerc,totalVotes:i?i+" votes":" ",noLikes:0!=n?" ":"no-likes",wtsPerc:n||" ",book_now_button:'<a href="'+o+'" ><div class="__container">BOOK NOW</div></a>',datePillContainerClass:"_none"})))})),g.nowShowing.container.append(g.nowShowing.cards),d(".mt-overflow-wrapper").on("click",".show-more-info",o.click.trailerIconClick),wow.scrollHandler(),d(".mt-overflow-wrapper","#mt-wrapper").append(g.nowShowing.container),g.nowShowing.container.siblings().hide())},n.fresh=function(e){e=e||(i.fresh=f.fresh()),g.tabs.fresh.siblings().removeClass("_active"),g.tabs.fresh.addClass("_active"),g.fresh.container?(g.fresh.container.show(),g.fresh.container.siblings().hide(),d.each(g.fresh.cards,(function(e,t){t.addClass("none")})),_.each(e,(function(n,e){n.visible&&d.each(g.fresh.cards,(function(e,t){d(t).find(".trailer-icon.__icon").attr("data-eventcode")==n.id&&t.removeClass("none")}))}))):(g.fresh.container=d('<div class="fresh-wrapper">'),g.fresh.cards=[],g.fresh.container.show(),_.each(e,(function(e,t){var n,i=[];1==e.isTentative?((i=(n=e.releaseDate.split(", "))[0].split(" "))[0]=i[1],i[1]=n[1]):i=(n=e.releaseDate.split(", "))[0].split(" "),g.fresh.cards.push(d(u.render(mt.templates.card,{title:e.title,url:e.url,eventCode:e.id,date:i[0],month:i[1],posterURL:e.posterURL,fallbackURL:e.fallbackURL,index:t+1,wts:e.wtsCount+" | "+e.dwtsCount+" | "+e.wtsPerc,totalVotes:e.wtsCount+e.dwtsCount?e.wtsCount+e.dwtsCount+" votes":" ",noLikes:e.wtsPerc?" ":"no-likes",wtsPerc:e.wtsPerc||" "})))})),g.fresh.container.append(g.fresh.cards),d(".mt-overflow-wrapper").on("click",".show-more-info",o.click.trailerIconClick),wow.scrollHandler(),d(".mt-overflow-wrapper","#mt-wrapper").append(g.fresh.container),g.fresh.container.siblings().hide())},n.languages=function(){i.languages||(i.languages=f.languages()),g.languages.select?g.languages.select.val(p.active.language):(g.languages.select=d('<ul class="mt-languages">'),g.languages.language=[],_.each(i.languages,(function(e){g.languages.language.push(d('<li class="list"><input type="checkbox" id="'+e+'" value="'+e+'"><label for="'+e+'"><span class="__tick"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><use xlink:href="/icons/common-icons.svg#icon-tick"></use></svg></span>'+e+"</label></li>"))})),g.languages.select.append(g.languages.language),d(".__right-lang-filters").append(d('<div class="language-wrapper">').html(g.languages.select)),g.languages.select.find(".list input").on("click",o.click.toggleFilters))},n.genre=function(){i.genre||(i.genres=f.genre()),g.genres.select||(g.genres.select=d('<ul class="mt-genres">'),g.genres.genre=[],_.each(i.genres,(function(e){g.genres.genre.push(d('<li class="list"><input type="checkbox" id="'+e+'" value="'+e+'"><label for="'+e+'"><span class="__tick"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><use xlink:href="/icons/common-icons.svg#icon-tick"></use></svg></span>'+e+"</label></li>"))})),g.genres.select.append(g.genres.genre),d(".__right-gen-filters").append(d('<div class="genre-wrapper">').html(g.genres.select)),g.genres.select.find(".list input").on("click",o.click.toggleFilters))},n.renderPills=function(){g.pill.container?(g.pill.pills=[],g.pill.pills.push('<span class="__applied-text">Applied Filters: </span>'),_.each(p.active.pills,(function(e){g.pill.pills.push(d('<span class="__selc-pills" data-value="'+e+'">'+e+'<span class="__rm-filter"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><use xlink:href="/icons/common-icons.svg#icon-cancel"></use></svg></span></span>'))})),g.pill.container.html(g.pill.pills)):(g.pill.container=d('<div class="mt-pills">'),g.pill.pills=[],g.pill.pills.push('<span class="__applied-text">Applied Filters: </span>'),_.each(p.active.pills,(function(e){g.pill.pills.push(d('<span class="__selc-pills" data-value="'+e+'">'+e+'<span class="__rm-filter"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><use xlink:href="/icons/common-icons.svg#icon-cancel"></use></svg></span></span>'))})),g.pill.container.html(g.pill.pills),d("#mt-wrapper .modal-header").append(d('<div class="__selected-filters">').html(g.pill.container))),d(".__selc-pills").on("click",o.click.togglePills)},n.trailerIconClick=function(e){var t;f.resetView(),d(this).find(".trailer-card").addClass("_active"),t=("nowShowing"==p.active.tab?p.events.ns:p.events.cs)[d(this).find(".trailer-icon").attr("data-eventcode")];var n=u.fnExtractVideoCode(t.trailerURL);g.trailerScreen.find("#youtube-iframe").attr("src","https://www.youtube.com/embed/"+n+"?autoplay=1"),g.trailerScreen.find("#eventTitle").attr("title",t.title).html(t.title),g.trailerScreen.find(".synopsis blockquote").html(t.synopsis),g.trailerScreen.find(".language-container .__language-tag").html(t.language[0]);BMS.Misc.fnGVal({key:"text",data:BMS.Storage.get({name:"Rgn"})}).toLowerCase();var i=BMS.Misc.fnGVal({key:"Code",data:BMS.Storage.get({name:"Rgn"})}).toLowerCase(),a=BMS.Misc.fnGVal({key:"slug",data:BMS.Storage.get({name:"Rgn"})}),o=""!=a?"/"+a+t.url:"/"+t.url;g.trailerScreen.find(".synopsis .__read-more").parent().attr("href",o),"1"==t.isTentative?g.trailerScreen.find(".release-date-container .__date .day-and-month").html(t.releaseDate.split(",")[0].split(" ")[1]):g.trailerScreen.find(".release-date-container .__date .day-and-month").html(t.releaseDate.split(",")[0]);i="/buytickets/"+BMS.Misc.fnUrlName(t.title.toLowerCase())+"-"+a+"/movie-"+(""!=h?h:i).toLowerCase()+"-"+t.id+"-MT";"nowShowing"==p.active.tab?(g.trailerScreen.find(".wts-wrapper").hide(),g.trailerScreen.find(".btn-wrapper").children("a").show().attr("href",i)):(g.trailerScreen.find(".wts-wrapper").show(),g.trailerScreen.find(".btn-wrapper").children("a").hide().attr("href","")),null!=t.wtsCount&&g.trailerScreen.find("#wts-true .__text.count").html("("+t.wtsCount+")"),null!=t.dwtsCount&&g.trailerScreen.find("#wts-false .__text.count").html("("+t.dwtsCount+")"),null!=t.maybeCount&&g.trailerScreen.find("#wts-undefined .__text.un-count").html("("+t.maybeCount+")");for(var s=t.genre.split("|"),r="",l=0,c=s.length;l<c;l++)r+='<span class="__genre-tag">'+s[l].toUpperCase()+"</span>";g.trailerScreen.find(".thumbs-ups .__icon").hide(),0!=t.avgRating?(g.trailerScreen.find(".thumbs-ups .__percentage").html(t.avgRating+"%"),g.trailerScreen.find(".__votes").html(t.totalCount+" votes"),g.trailerScreen.find(".thumbs-ups .__icon").show()):0!=t.wtsPerc&&(g.trailerScreen.find(".thumbs-ups .__percentage").html(t.wtsPerc+"%"),g.trailerScreen.find(".__votes").html(t.csCount+" votes"),g.trailerScreen.find(".thumbs-ups .__icon").show()),g.trailerScreen.find(".genre-container").html(r),g.trailerScreen.find("#wts-true").attr("event-code",t.id),g.trailerScreen.find("#wts-false").attr("event-code",t.id),g.trailerScreen.find("#wts-undefined").attr("event-code",t.id),g.trailerScreen.find(".release-date-container .__date .year").html(t.releaseDate.split(",")[1]),f.showtrailerScreen.call(this),f.initializePlayer(),f.playVideo=function(e){e.target.loadVideoById(n,0,"default")},p.analyticsObj.ProductID=t.id,p.analyticsObj["Event Type"]="MT",p.analyticsObj["Event Name"]=t.title,p.analyticsObj.Language=t.language[0],p.analyticsObj.Genre=t.genre.split("|").join(","),p.analyticsObj.Appcode=global.strAppCode,void 0,BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"Viewed trailer",{ProductID:t.id,"Event Type":"MT","Event Name":t.title,Language:t.dataLanguage,Genre:t.genre.split("|").join(","),"Percentage watched":"","Cast and Crew":"","Event Group":t.eventGroup,Page:"Movie Trailers Popup - "+("undefined"!=typeof pageName?pageName:""),Appcode:global.strAppCode})},n.selectBoxText=function(){0!=p.active.language.length?d(".__right-lang-filters .__text").html(p.active.language.join(",")):d(".__right-lang-filters .__text").html("All Languages"),0!=p.active.genre.length?d(".__right-gen-filters .__text").html(p.active.genre.join(",")):d(".__right-gen-filters .__text").html("All Genres")},n.resetCards=function(){g.popular.container&&g.popular.container.html(""),g.fresh.container&&g.fresh.container.html("")},o.click={},o.keypress={},o.click.toggleLanguage=function(){var e=d(this).val();f.toggleLanguage(e)},o.click.toggleGenre=function(){d(this).val()},o.click.toggleFilters=function(e){var t=d(e.currentTarget).parent().parent(),e=d(e.currentTarget);f.resetTrailerScreen(),"mt-languages"==t.attr("class")?e.is(":checked")?(p.active.language.push(e.val()),p.active.pills.push(e.val())):(p.active.language=_.without(p.active.language,e.val()),p.active.pills=_.without(p.active.pills,e.val())):"mt-genres"==t.attr("class")&&(e.is(":checked")?(p.active.genre.push(e.val()),p.active.pills.push(e.val())):(p.active.genre=_.without(p.active.genre,e.val()),p.active.pills=_.without(p.active.pills,e.val()))),n.selectBoxText(),n.renderPills(),f.toggleFilters(),BMS.Misc.fnPushEventDataToAnalytics(["WR","GA"],"",{},{event:"Trailer Popup",page:"Trailers Page",section:s(d(".mt-filters").find("span._active").html()),"Sort by":d(".__right-pf-filters .__text").html(),Language:BMS.Misc.Trailers.models.active.language.join(","),Genre:BMS.Misc.Trailers.models.active.genre.join(","),Appcode:global.strAppCode})},o.click.togglePills=function(e){f.resetTrailerScreen(),f.togglePills(e),n.selectBoxText()},o.click.popularTab=function(e){p.active.tab="popular",p.active.comingsoon=p.active.tab,f.resetTrailerScreen(),f.setSelectText(),d(".__selected-filters,.__right-lang-filters,.__right-gen-filters,.__right-pf-filters").show(),n.popular(),f.toggleFilters(),BMS.Misc.fnPushEventDataToAnalytics(["WR","GA"],"",{},{event:"Trailer Popup",page:"Trailers Page",section:s(d(".mt-filters").find("span._active").html()),"Sort by":d(".__right-pf-filters .__text").html(),Language:BMS.Misc.Trailers.models.active.language.join(","),Genre:BMS.Misc.Trailers.models.active.genre.join(","),Appcode:global.strAppCode})},o.click.comingSoonTab=function(e){p.active.tab=p.active.comingsoon,g.tabs.comingSoon.siblings().removeClass("_active"),g.tabs.comingSoon.addClass("_active"),f.setSelectText(),f.resetTrailerScreen(),d(".__selected-filters,.__right-lang-filters,.__right-gen-filters,.__right-pf-filters").show(),f.toggleFilters(),BMS.Misc.fnPushEventDataToAnalytics(["WR","GA"],"",{},{event:"Trailer Popup",page:"Trailers Page",section:s(d(".mt-filters").find("span._active").html()),"Sort by":d(".__right-pf-filters .__text").html(),Language:BMS.Misc.Trailers.models.active.language.join(","),Genre:BMS.Misc.Trailers.models.active.genre.join(","),Appcode:global.strAppCode})},o.click.freshTab=function(e){p.active.tab="fresh",p.active.comingsoon=p.active.tab,f.setSelectText(),f.resetTrailerScreen(),d(".__right-pf-filters .__text").html("Fresh"),n.fresh(),d(".__selected-filters,.__right-lang-filters,.__right-gen-filters,.__right-pf-filters").show(),f.toggleFilters(),BMS.Misc.fnPushEventDataToAnalytics(["WR","GA"],"",{},{event:"Trailer Popup",page:"Trailers Page",section:s(d(".mt-filters").find("span._active").html()),"Sort by":d(".__right-pf-filters .__text").html(),Language:BMS.Misc.Trailers.models.active.language.join(","),Genre:BMS.Misc.Trailers.models.active.genre.join(","),Appcode:global.strAppCode})},o.click.nowShowingTab=function(e){p.active.tab="nowShowing",g.tabs.nowShowing.siblings().removeClass("_active"),g.tabs.nowShowing.addClass("_active"),f.resetTrailerScreen(),d(".__right-pf-filters").hide(),n.nowShowing(),f.toggleFilters(),BMS.Misc.fnPushEventDataToAnalytics(["WR","GA"],"",{},{event:"Trailer Popup",page:"Trailers Page",section:s(d(".mt-filters").find("span._active").html()),"Sort by":"",Language:BMS.Misc.Trailers.models.active.language.join(","),Genre:BMS.Misc.Trailers.models.active.genre.join(","),Appcode:global.strAppCode})},o.click.trailerIconClick=function(e){p.active.nextSibling=d(e.currentTarget).parents(".mt-card-wrapper").next(),f.trailerIconClick.call(this,e)},o.click.wtsClick=function(e){var t=d("#wts-true").attr("event-code"),n=parseInt(d("#wts-true").attr("event-wts")),i=d("#wts-true").attr("event-type");p.analyticsObj.Choice=1,f.setUserInterest(t,n,i,e)},o.click.dwtsClick=function(e){var t=d("#wts-false").attr("event-code"),n=parseInt(d("#wts-false").attr("event-wts")),i=d("#wts-false").attr("event-type");p.analyticsObj.Choice=-1,f.setUserInterest(t,n,i,e)},o.click.maybeClick=function(e){var t=d("#wts-undefined").attr("event-code"),n=parseInt(d("#wts-undefined").attr("event-wts")),i=d("#wts-undefined").attr("event-type");f.setUserInterest(t,n,i,e)},o.onPlayerReady=function(e){f.playVideo(e)},o.onPlayerStateChange=function(e){switch(e.data){case YT.PlayerState.UNSTARTED:break;case YT.PlayerState.ENDED:p.active.nextSibling.find(".show-more-info").trigger("click");break;case YT.PlayerState.PLAYING:case YT.PlayerState.PAUSED:case YT.PlayerState.BUFFERING:case YT.PlayerState.CUED:}},o.load=function(e){this.modal.show();var t=!1;BMS.Misc.fnAjax({dataType:"json",type:"GET",url:"/serv/getData",data:{cmd:"GETTRAILERS",mtype:"cs"},success:function(e){var i,a;p.events.cs=(i={},e[a=0]&&(p.cslanguageSequence=e[0]),_.each(e[1],(function(e,t){void 0;var n=_.compact(e.EventGenre.split("|"));i[e.EventCode]={id:e.EventCode,title:e.EventTitle,language:[e.EventLanguage,"All Languages"],dataLanguage:e.EventLanguage,eventGroup:e.EventGroup,languageFilter:e.EventLanguage+"|All Languages",url:"/movies/"+e.EventURL+"/"+e.EventCode,trailerURL:e.TrailerURL,posterURL:global.strContentUrl+"/events/moviecard/"+e.EventCode+".jpg",fallbackURL:global.strContentUrl+"/events/moviecard/noimage.jpg",genre:e.EventGenre,genreFilter:e.EventGenre+"|All Genres",releaseDate:e.ShowDate,eventIsDefault:e.EventIsDefault,isTentative:e.TentativeReleaseDate,trailerUploadDate:e.trailerUploadDate,synopsis:e.EventSyno,wtsCount:e.wtsCount,dwtsCount:e.dwtsCount,maybeCount:e.maybeCount,avgRating:e.avgRating,totalVotes:e.totalVotes,wtsPerc:e.wtsPerc,csCount:e.csCount,card_index:a,visible:!0,enabled:!0,active:!1},a+=1,p.languages[e.EventLanguage]=!0,_.each(n,(function(e,t){p.genres[e.trim()]=!0}))})),i),window.mt.API=p.events.cs,p.active.comingsoon="fresh",p.active.tab="comingSoon",d(".__selected-filters,.__right-lang-filters,.__right-gen-filters,.__right-pf-filters").show(),f.setSelectText(),n.fresh(),n.genre(),t=!t||(o.handleGetTrailersSuccess(),!1)},error:function(e){void 0}}),BMS.Misc.fnAjax({dataType:"json",type:"GET",url:"/serv/getData",data:{cmd:"GETTRAILERS",mtype:"ns"},success:function(e){var i,a;p.events.ns=(i={},e[a=0]&&(p.nsLanguageSequence=e[0]),_.each(e[1],(function(e,t){void 0;var n=_.compact(e.EventGenre.split("|"));i[e.EventCode]={id:e.EventCode,title:e.EventTitle,language:[e.EventLanguage,"All Languages"],dataLanguage:e.EventLanguage,eventGroup:e.EventGroup,languageFilter:e.EventLanguage+"|All Languages",url:"/movies/"+e.EventURL+"/"+e.EventCode,trailerURL:e.TrailerURL,posterURL:global.strContentUrl+"/events/moviecard/"+e.EventCode+".jpg",fallbackURL:global.strContentUrl+"/events/moviecard/noimage.jpg",genre:e.EventGenre,genreFilter:e.EventGenre+"|All Genres",releaseDate:e.ShowDate,eventIsDefault:e.EventIsDefault,isTentative:e.TentativeReleaseDate,trailerUploadDate:e.trailerUploadDate,synopsis:e.EventSyno,wtsCount:e.wtsCount,dwtsCount:e.dwtsCount,maybeCount:e.maybeCount,wtsPerc:e.wtsPerc,totalCount:e.totalVotes,userCount:e.userCount,criticCount:e.criticCount,avgRating:e.avgRating,csCount:e.csCount,card_index:a,visible:!0,enabled:!0,active:!1,buyURL:"hello"},a+=1,p.languages[e.EventLanguage]=!0,_.each(n,(function(e,t){p.genres[e.trim()]=!0}))})),i),window.mt.NSAPI=p.events.ns,t=!t||(o.handleGetTrailersSuccess(),!1)},error:function(e){void 0}})},o.handleGetTrailersSuccess=function(){n.languages(),n.genre()},o.modal.show=function(){void 0,g.modal.wrapper.removeClass("none"),g.modal.overlay.removeClass("none").addClass("puff"),handlePopups.freezeDocument(),d(".mt-modal-overlay").scroll((function(){wow.scrollHandler()}))},o.modal.hide=function(){g.modal.overlay.removeClass("puff"),setTimeout((function(){g.modal.overlay.addClass("puff-reverse")}),10),setTimeout((function(){g.modal.overlay.addClass("none").removeClass("puff-reverse")}),300),handlePopups.releaseDocument(),d(".mt-modal-overlay").unbind("scroll",(function(){wow.scrollHandler()}))},d(document).ready((function(){g.modal.wrapper=d("#mt-wrapper"),g.modal.overlay=d(".mt-modal-overlay","#mt-wrapper"),g.trailerScreen=d(mt.templates.trailerScreen),g.trailerScreen.videoContainer=d(".mt-single-video #youtube-iframe"),g.trailerScreen.find("#wts-true").on("click",o.click.wtsClick),g.trailerScreen.find("#wts-false").on("click",o.click.dwtsClick),g.trailerScreen.find("#wts-undefined").on("click",o.click.maybeClick),g.tabs.fresh=d(".__right-pf-filters .__fresh"),g.tabs.popular=d(".__right-pf-filters .__popular"),g.tabs.comingSoon=d(".mt-filters .__comingsoon"),g.tabs.nowShowing=d(".mt-filters .__nowshowing"),g.tabs.fresh.on("click",o.click.freshTab),g.tabs.popular.on("click",o.click.popularTab),g.tabs.nowShowing.on("click",o.click.nowShowingTab),g.tabs.comingSoon.on("click",o.click.comingSoonTab),d(".mt-trigger").click((function(){o.load(),BMS.Misc.Router.triggerRoute("trailers ",!1),BMS.Misc.fnPushEventDataToAnalytics(["WR","GA"],"",{},{event:"Trailer Popup",page:s("undefined"!=typeof pageName?pageName:"")+" Page",section:"Coming Soon","Sort by":d(".__right-pf-filters .__text").html(),Language:BMS.Misc.Trailers.models.active.language.join(","),Genre:BMS.Misc.Trailers.models.active.genre.join(","),Appcode:global.strAppCode})})),global.SignOutCallBack.push((function(){void 0,g.trailerScreen.find(".wts-container").hasClass("_active")&&g.trailerScreen.find(".wts-container").removeClass("_active")})),BMS.Misc.Router.registerRoute("trailers","trailersPopup",(function(){void 0,o.load(),g.tabs[p.active.tab].addClass("_active")}),(function(){void 0,o.modal.hide(),f.clearFilters(),f.clearPills(),n.selectBoxText(),d(".trailer-card","#mt-wrapper").removeClass("_active")})),d("#mt-btn-close").click((function(){p.active.isPlaying?(g.trailerScreen.detach(),p.active.isPlaying=!1,d(".trailer-card","#mt-wrapper").removeClass("_active")):(o.modal.hide(),f.clearFilters(),f.clearPills(),f.clearContainers(),BMS.Misc.Router.triggerRoute("",!1),g.tabs[p.active.tab].removeClass("_active"),n.selectBoxText(),d(".trailer-card","#mt-wrapper").removeClass("_active"),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"Clicked Close on Movie Trailers Link",page:"undefined"!=typeof pageName?pageName:"",section:"header"}))}))}))})(jQuery),(function(i){i.fn.sticky=function(e){var t=this,n=i.extend({addelement:"_active",addfrom:40,removefrom:40},e);i(window).scroll((function(){var e=window.pageYOffset||document.documentElement.scrollTop;e>=n.addfrom?t.addClass(n.addelement):e<=n.removefrom&&t.removeClass(n.addelement)}))}})(jQuery),(function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?e(require("jquery")):e(jQuery)})((function(t){var e,n,u,o,s,p,f,g,h,m,v,i,a,S,r,r=((d=t&&t.fn&&t.fn.select2&&t.fn.select2.amd?t.fn.select2.amd:d)&&d.requirejs||(d?n=d:d={},g={},h={},m={},v={},i=Object.prototype.hasOwnProperty,a=[].slice,S=/\.js$/,p=function(e,t){var n,i,a=c(e),o=a[0];return e=a[1],o&&(n=b(o=l(o,t))),o?e=n&&n.normalize?n.normalize(e,(i=t,function(e){return l(e,i)})):l(e,t):(o=(a=c(e=l(e,t)))[0],e=a[1],o&&(n=b(o))),{f:o?o+"!"+e:e,n:e,pr:o,p:n}},f={require:function(e){return M(e)},exports:function(e){var t=g[e];return void 0!==t?t:g[e]={}},module:function(e){return{id:e,uri:"",exports:g[e],config:(t=e,function(){return m&&m.config&&m.config[t]||{}})};var t}},o=function(e,t,n,i){var a,o,s,r,l,c=[],d=typeof n;if(i=i||e,"undefined"==d||"function"==d){for(t=!t.length&&n.length?["require","exports","module"]:t,r=0;r<t.length;r+=1)if("require"===(o=(s=p(t[r],i)).f))c[r]=f.require(e);else if("exports"===o)c[r]=f.exports(e),l=!0;else if("module"===o)a=c[r]=f.module(e);else if(y(g,o)||y(h,o)||y(v,o))c[r]=b(o);else{if(!s.p)throw new Error(e+" missing "+o);s.p.load(s.n,M(i,!0),(function(t){return function(e){g[t]=e}})(o),{}),c[r]=g[o]}d=n?n.apply(g[e],c):void 0,e&&(a&&a.exports!==u&&a.exports!==g[e]?g[e]=a.exports:d===u&&l||(g[e]=d))}else e&&(g[e]=n)},e=n=s=function(e,t,n,i,a){if("string"==typeof e)return f[e]?f[e](t):b(p(e,t).f);if(!e.splice){if((m=e).deps&&s(m.deps,m.callback),!t)return;t.splice?(e=t,t=n,n=null):e=u}return t=t||function(){},"function"==typeof n&&(n=i,i=a),i?o(u,e,t,n):setTimeout((function(){o(u,e,t,n)}),4),s},s.config=function(e){return s(e)},e._defined=g,(r=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),y(g,e)||y(h,e)||(h[e]=[e,t,n])}).amd={jQuery:!0},d.requirejs=e,d.require=n,d.define=r),d.define("almond",(function(){})),d.define("jquery",[],(function(){var e=t||$;return null==e&&console&&console.error&&void 0,e})),d.define("select2/utils",["jquery"],(function(o){var e={};function c(e){var t,n=e.prototype,i=[];for(t in n)"function"==typeof n[t]&&"constructor"!==t&&i.push(t);return i}e.Extend=function(e,t){var n,i={}.hasOwnProperty;function a(){this.constructor=e}for(n in t)i.call(t,n)&&(e[n]=t[n]);return a.prototype=t.prototype,e.prototype=new a,e.__super__=t.prototype,e},e.Decorate=function(i,a){var e=c(a),t=c(i);function o(){var e=Array.prototype.unshift,t=a.prototype.constructor.length,n=i.prototype.constructor;0<t&&(e.call(arguments,i.prototype.constructor),n=a.prototype.constructor),n.apply(this,arguments)}a.displayName=i.displayName,o.prototype=new function(){this.constructor=o};for(var n=0;n<t.length;n++){var s=t[n];o.prototype[s]=i.prototype[s]}for(var r=0;r<e.length;r++){var l=e[r];o.prototype[l]=(function(e){var t=function(){};e in o.prototype&&(t=o.prototype[e]);var n=a.prototype[e];return function(){return Array.prototype.unshift.call(arguments,t),n.apply(this,arguments)}})(l)}return o};function t(){this.listeners={}}return t.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},t.prototype.trigger=function(e){var t=Array.prototype.slice,n=t.call(arguments,1);this.listeners=this.listeners||{},0===(n=null==n?[]:n).length&&n.push({}),(n[0]._type=e)in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},t.prototype.invoke=function(e,t){for(var n=0,i=e.length;n<i;n++)e[n].apply(this,t)},e.Observable=t,e.generateChars=function(e){for(var t="",n=0;n<e;n++)t+=Math.floor(36*Math.random()).toString(36);return t},e.bind=function(e,t){return function(){e.apply(t,arguments)}},e._convertData=function(e){for(var t in e){var n=t.split("-"),i=e;if(1!==n.length){for(var a=0;a<n.length;a++){var o=n[a];(o=o.substring(0,1).toLowerCase()+o.substring(1))in i||(i[o]={}),a==n.length-1&&(i[o]=e[t]),i=i[o]}delete e[t]}}return e},e.hasScroll=function(e,t){var n=o(t),i=t.style.overflowX,a=t.style.overflowY;return(i!==a||"hidden"!==a&&"visible"!==a)&&("scroll"===i||"scroll"===a||(n.innerHeight()<t.scrollHeight||n.innerWidth()<t.scrollWidth))},e.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof e?e:String(e).replace(/[&<>"'\/\\]/g,(function(e){return t[e]}))},e.appendMany=function(e,t){var n;"1.7"===o.fn.jquery.substr(0,3)&&(n=o(),o.map(t,(function(e){n=n.add(e)})),t=n),e.append(t)},e})),d.define("select2/results",["jquery","./utils"],(function(u,e){function i(e,t,n){this.$element=e,this.data=n,this.options=t,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var e=u('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&e.attr("aria-multiselectable","true"),this.$results=e},i.prototype.clear=function(){this.$results.empty()},i.prototype.displayMessage=function(e){var t=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var n=u('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>'),i=this.options.get("translations").get(e.message);n.append(t(i(e.args))),n[0].className+=" select2-results__message",this.$results.append(n)},i.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},i.prototype.append=function(e){this.hideLoading();var t=[];if(null!=e.results&&0!==e.results.length){e.results=this.sort(e.results);for(var n=0;n<e.results.length;n++){var i=e.results[n],i=this.option(i);t.push(i)}this.$results.append(t)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},i.prototype.position=function(e,t){t.find(".select2-results").append(e)},i.prototype.sort=function(e){return this.options.get("sorter")(e)},i.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option[aria-selected]"),t=e.filter("[aria-selected=true]");(0<t.length?t:e).first().trigger("mouseenter"),this.ensureHighlightVisible()},i.prototype.setClasses=function(){var t=this;this.data.current((function(e){var i=u.map(e,(function(e){return e.id.toString()}));t.$results.find(".select2-results__option[aria-selected]").each((function(){var e=u(this),t=u.data(this,"data"),n=""+t.id;null!=t.element&&t.element.selected||null==t.element&&-1<u.inArray(n,i)?e.attr("aria-selected","true"):e.attr("aria-selected","false")}))}))},i.prototype.showLoading=function(e){this.hideLoading();e={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(e)},e=this.option(e);e.className+=" loading-results",this.$results.prepend(e)},i.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},i.prototype.option=function(e){var t=document.createElement("li");t.className="select2-results__option";var n,i={role:"treeitem","aria-selected":"false"};for(n in e.disabled&&(delete i["aria-selected"],i["aria-disabled"]="true"),null==e.id&&delete i["aria-selected"],null!=e._resultId&&(t.id=e._resultId),e.title&&(t.title=e.title),e.children&&(i.role="group",i["aria-label"]=e.text,delete i["aria-selected"]),i){var a=i[n];t.setAttribute(n,a)}if(e.children){var o=u(t),s=document.createElement("strong");s.className="select2-results__group";u(s);this.template(e,s);for(var r=[],l=0;l<e.children.length;l++){var c=e.children[l],c=this.option(c);r.push(c)}var d=u("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});d.append(r),o.append(s),o.append(d)}else this.template(e,t);return u.data(t,"data",e),t},i.prototype.bind=function(t,e){var a=this,n=t.id+"-results";this.$results.attr("id",n),t.on("results:all",(function(e){a.clear(),a.append(e.data),t.isOpen()&&(a.setClasses(),a.highlightFirstItem())})),t.on("results:append",(function(e){a.append(e.data),t.isOpen()&&a.setClasses()})),t.on("query",(function(e){a.hideMessages(),a.showLoading(e)})),t.on("select",(function(){t.isOpen()&&(a.setClasses(),a.highlightFirstItem())})),t.on("unselect",(function(){t.isOpen()&&(a.setClasses(),a.highlightFirstItem())})),t.on("open",(function(){a.$results.attr("aria-expanded","true"),a.$results.attr("aria-hidden","false"),a.setClasses(),a.ensureHighlightVisible()})),t.on("close",(function(){a.$results.attr("aria-expanded","false"),a.$results.attr("aria-hidden","true"),a.$results.removeAttr("aria-activedescendant")})),t.on("results:toggle",(function(){var e=a.getHighlightedResults();0!==e.length&&e.trigger("mouseup")})),t.on("results:select",(function(){var e,t=a.getHighlightedResults();0!==t.length&&(e=t.data("data"),"true"==t.attr("aria-selected")?a.trigger("close",{}):a.trigger("select",{data:e}))})),t.on("results:previous",(function(){var e,t=a.getHighlightedResults(),n=a.$results.find("[aria-selected]"),i=n.index(t);0!==i&&(e=i-1,0===t.length&&(e=0),(i=n.eq(e)).trigger("mouseenter"),t=a.$results.offset().top,n=i.offset().top,i=a.$results.scrollTop()+(n-t),0===e?a.$results.scrollTop(0):n-t<0&&a.$results.scrollTop(i))})),t.on("results:next",(function(){var e,t=a.getHighlightedResults(),n=a.$results.find("[aria-selected]"),i=n.index(t)+1;i>=n.length||((e=n.eq(i)).trigger("mouseenter"),t=a.$results.offset().top+a.$results.outerHeight(!1),n=e.offset().top+e.outerHeight(!1),e=a.$results.scrollTop()+n-t,0===i?a.$results.scrollTop(0):t<n&&a.$results.scrollTop(e))})),t.on("results:focus",(function(e){e.element.addClass("select2-results__option--highlighted")})),t.on("results:message",(function(e){a.displayMessage(e)})),u.fn.mousewheel&&this.$results.on("mousewheel",(function(e){var t=a.$results.scrollTop(),n=a.$results.get(0).scrollHeight-t+e.deltaY,t=0<e.deltaY&&t-e.deltaY<=0,n=e.deltaY<0&&n<=a.$results.height();t?(a.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):n&&(a.$results.scrollTop(a.$results.get(0).scrollHeight-a.$results.height()),e.preventDefault(),e.stopPropagation())})),this.$results.on("mouseup",".select2-results__option[aria-selected]",(function(e){var t=u(this),n=t.data("data");"true"!==t.attr("aria-selected")?a.trigger("select",{originalEvent:e,data:n}):a.options.get("multiple")?a.trigger("unselect",{originalEvent:e,data:n}):a.trigger("close",{})})),this.$results.on("mouseenter",".select2-results__option[aria-selected]",(function(e){var t=u(this).data("data");a.getHighlightedResults().removeClass("select2-results__option--highlighted"),a.trigger("results:focus",{data:t,element:u(this)})}))},i.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},i.prototype.destroy=function(){this.$results.remove()},i.prototype.ensureHighlightVisible=function(){var e,t,n,i,a=this.getHighlightedResults();0!==a.length&&(e=this.$results.find("[aria-selected]").index(a),i=this.$results.offset().top,t=a.offset().top,n=this.$results.scrollTop()+(t-i),i=t-i,n-=2*a.outerHeight(!1),e<=2?this.$results.scrollTop(0):(i>this.$results.outerHeight()||i<0)&&this.$results.scrollTop(n))},i.prototype.template=function(e,t){var n=this.options.get("templateResult"),i=this.options.get("escapeMarkup"),e=n(e,t);null==e?t.style.display="none":"string"==typeof e?t.innerHTML=i(e):u(t).append(e)},i})),d.define("select2/keys",[],(function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}})),d.define("select2/selection/base",["jquery","../utils","../keys"],(function(n,e,a){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var e=n('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),e.attr("title",this.$element.attr("title")),e.attr("tabindex",this._tabindex),this.$selection=e},i.prototype.bind=function(e,t){var n=this,i=(e.id,e.id+"-results");this.container=e,this.$selection.on("focus",(function(e){n.trigger("focus",e)})),this.$selection.on("blur",(function(e){n._handleBlur(e)})),this.$selection.on("keydown",(function(e){n.trigger("keypress",e),e.which===a.SPACE&&e.preventDefault()})),e.on("results:focus",(function(e){n.$selection.attr("aria-activedescendant",e.data._resultId)})),e.on("selection:update",(function(e){n.update(e.data)})),e.on("open",(function(){n.$selection.attr("aria-expanded","true"),n.$selection.attr("aria-owns",i),n._attachCloseHandler(e)})),e.on("close",(function(){n.$selection.attr("aria-expanded","false"),n.$selection.removeAttr("aria-activedescendant"),n.$selection.removeAttr("aria-owns"),n.$selection.focus(),n._detachCloseHandler(e)})),e.on("enable",(function(){n.$selection.attr("tabindex",n._tabindex)})),e.on("disable",(function(){n.$selection.attr("tabindex","-1")}))},i.prototype._handleBlur=function(e){var t=this;window.setTimeout((function(){document.activeElement==t.$selection[0]||n.contains(t.$selection[0],document.activeElement)||t.trigger("blur",e)}),1)},i.prototype._attachCloseHandler=function(e){n(document.body).on("mousedown.select2."+e.id,(function(e){var t=n(e.target).closest(".select2");n(".select2.select2-container--open").each((function(){var e=n(this);this!=t[0]&&e.data("element").select2("close")}))}))},i.prototype._detachCloseHandler=function(e){n(document.body).off("mousedown.select2."+e.id)},i.prototype.position=function(e,t){t.find(".selection").append(e)},i.prototype.destroy=function(){this._detachCloseHandler(this.container)},i.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")},i})),d.define("select2/selection/single",["jquery","./base","../utils","../keys"],(function(e,t,n,i){function a(){a.__super__.constructor.apply(this,arguments)}return n.Extend(a,t),a.prototype.render=function(){var e=a.__super__.render.call(this);return e.addClass("select2-selection--single"),e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),e},a.prototype.bind=function(t,e){var n=this;a.__super__.bind.apply(this,arguments);var i=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",i),this.$selection.attr("aria-labelledby",i),this.$selection.on("mousedown",(function(e){1===e.which&&n.trigger("toggle",{originalEvent:e})})),this.$selection.on("focus",(function(e){})),this.$selection.on("blur",(function(e){})),t.on("focus",(function(e){t.isOpen()||n.$selection.focus()})),t.on("selection:update",(function(e){n.update(e.data)}))},a.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},a.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},a.prototype.selectionContainer=function(){return e("<span></span>")},a.prototype.update=function(e){var t,n;0!==e.length?(t=e[0],n=this.$selection.find(".select2-selection__rendered"),e=this.display(t,n),n.empty().append(e),n.prop("title",t.title||t.text)):this.clear()},a})),d.define("select2/selection/multiple",["jquery","./base","../utils"],(function(i,e,r){function a(e,t){a.__super__.constructor.apply(this,arguments)}return r.Extend(a,e),a.prototype.render=function(){var e=a.__super__.render.call(this);return e.addClass("select2-selection--multiple"),e.html('<ul class="select2-selection__rendered"></ul>'),e},a.prototype.bind=function(e,t){var n=this;a.__super__.bind.apply(this,arguments),this.$selection.on("click",(function(e){n.trigger("toggle",{originalEvent:e})})),this.$selection.on("click",".select2-selection__choice__remove",(function(e){var t;n.options.get("disabled")||(t=i(this).parent().data("data"),n.trigger("unselect",{originalEvent:e,data:t}))}))},a.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},a.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},a.prototype.selectionContainer=function(){return i('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},a.prototype.update=function(e){if(this.clear(),0!==e.length){for(var t=[],n=0;n<e.length;n++){var i=e[n],a=this.selectionContainer(),o=this.display(i,a);a.append(o),a.prop("title",i.title||i.text),a.data("data",i),t.push(a)}var s=this.$selection.find(".select2-selection__rendered");r.appendMany(s,t)}},a})),d.define("select2/selection/placeholder",["../utils"],(function(e){function t(e,t,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n)}return t.prototype.normalizePlaceholder=function(e,t){return t="string"==typeof t?{id:"",text:t}:t},t.prototype.createPlaceholder=function(e,t){var n=this.selectionContainer();return n.html(this.display(t)),n.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),n},t.prototype.update=function(e,t){var n=1==t.length&&t[0].id!=this.placeholder.id;if(1<t.length||n)return e.call(this,t);this.clear();t=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(t)},t})),d.define("select2/selection/allowClear",["jquery","../keys"],(function(n,i){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&void 0,this.$selection.on("mousedown",".select2-selection__clear",(function(e){i._handleClear(e)})),t.on("keypress",(function(e){i._handleKeyboardClear(e,t)}))},e.prototype._handleClear=function(e,t){if(!this.options.get("disabled")){var n=this.$selection.find(".select2-selection__clear");if(0!==n.length){t.stopPropagation();for(var i=n.data("data"),a=0;a<i.length;a++){var o={data:i[a]};if(this.trigger("unselect",o),o.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle",{})}}},e.prototype._handleKeyboardClear=function(e,t,n){n.isOpen()||t.which!=i.DELETE&&t.which!=i.BACKSPACE||this._handleClear(t)},e.prototype.update=function(e,t){e.call(this,t),0<this.$selection.find(".select2-selection__placeholder").length||0===t.length||((e=n('<span class="select2-selection__clear">&times;</span>')).data("data",t),this.$selection.find(".select2-selection__rendered").prepend(e))},e})),d.define("select2/selection/search",["jquery","../utils","../keys"],(function(n,e,o){function t(e,t,n){e.call(this,t,n)}return t.prototype.render=function(e){var t=n('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=t,this.$search=t.find("input");e=e.call(this);return this._transferTabIndex(),e},t.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("open",(function(){i.$search.trigger("focus")})),t.on("close",(function(){i.$search.val(""),i.$search.removeAttr("aria-activedescendant"),i.$search.trigger("focus")})),t.on("enable",(function(){i.$search.prop("disabled",!1),i._transferTabIndex()})),t.on("disable",(function(){i.$search.prop("disabled",!0)})),t.on("focus",(function(e){i.$search.trigger("focus")})),t.on("results:focus",(function(e){i.$search.attr("aria-activedescendant",e.id)})),this.$selection.on("focusin",".select2-search--inline",(function(e){i.trigger("focus",e)})),this.$selection.on("focusout",".select2-search--inline",(function(e){i._handleBlur(e)})),this.$selection.on("keydown",".select2-search--inline",(function(e){var t;e.stopPropagation(),i.trigger("keypress",e),i._keyUpPrevented=e.isDefaultPrevented(),e.which!==o.BACKSPACE||""!==i.$search.val()||0<(t=i.$searchContainer.prev(".select2-selection__choice")).length&&(t=t.data("data"),i.searchRemoveChoice(t),e.preventDefault())}));var t=document.documentMode,a=t&&t<=11;this.$selection.on("input.searchcheck",".select2-search--inline",(function(e){a?i.$selection.off("input.search input.searchcheck"):i.$selection.off("keyup.search")})),this.$selection.on("keyup.search input.search",".select2-search--inline",(function(e){var t;a&&"input"===e.type?i.$selection.off("input.search input.searchcheck"):(t=e.which)!=o.SHIFT&&t!=o.CTRL&&t!=o.ALT&&t!=o.TAB&&i.handleSearch(e)}))},t.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},t.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},t.prototype.update=function(e,t){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),e.call(this,t),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),n&&this.$search.focus()},t.prototype.handleSearch=function(){var e;this.resizeSearch(),this._keyUpPrevented||(e=this.$search.val(),this.trigger("query",{term:e})),this._keyUpPrevented=!1},t.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(t.text),this.handleSearch()},t.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="";e=""!==this.$search.attr("placeholder")?this.$selection.find(".select2-selection__rendered").innerWidth():.75*(this.$search.val().length+1)+"em",this.$search.css("width",e)},t})),d.define("select2/selection/eventRelay",["jquery"],(function(s){function e(){}return e.prototype.bind=function(e,t,n){var i=this,a=["open","opening","close","closing","select","selecting","unselect","unselecting"],o=["opening","closing","selecting","unselecting"];e.call(this,t,n),t.on("*",(function(e,t){var n;-1!==s.inArray(e,a)&&(n=s.Event("select2:"+e,{params:t=t||{}}),i.$element.trigger(n),-1!==s.inArray(e,o)&&(t.prevented=n.isDefaultPrevented()))}))},e})),d.define("select2/translation",["jquery","require"],(function(t,n){function i(e){this.dict=e||{}}return i.prototype.all=function(){return this.dict},i.prototype.get=function(e){return this.dict[e]},i.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)},i._cache={},i.loadPath=function(e){var t;return e in i._cache||(t=n(e),i._cache[e]=t),new i(i._cache[e])},i})),d.define("select2/diacritics",[],(function(){return{"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""}})),d.define("select2/data/base",["../utils"],(function(n){function i(e,t){i.__super__.constructor.call(this)}return n.Extend(i,n.Observable),i.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")},i.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")},i.prototype.bind=function(e,t){},i.prototype.destroy=function(){},i.prototype.generateResultId=function(e,t){e=e.id+"-result-";return e+=n.generateChars(4),null!=t.id?e+="-"+t.id.toString():e+="-"+n.generateChars(4),e},i})),d.define("select2/data/select",["./base","../utils","jquery"],(function(e,t,s){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,e),n.prototype.current=function(e){var t=[],n=this;this.$element.find(":selected").each((function(){var e=s(this),e=n.item(e);t.push(e)})),e(t)},n.prototype.select=function(a){var e,o=this;if(a.selected=!0,s(a.element).is("option"))return a.element.selected=!0,void this.$element.trigger("change");this.$element.prop("multiple")?this.current((function(e){var t=[];(a=[a]).push.apply(a,e);for(var n=0;n<a.length;n++){var i=a[n].id;-1===s.inArray(i,t)&&t.push(i)}o.$element.val(t),o.$element.trigger("change")})):(e=a.id,this.$element.val(e),this.$element.trigger("change"))},n.prototype.unselect=function(a){var o=this;if(this.$element.prop("multiple")){if(a.selected=!1,s(a.element).is("option"))return a.element.selected=!1,void this.$element.trigger("change");this.current((function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n].id;i!==a.id&&-1===s.inArray(i,t)&&t.push(i)}o.$element.val(t),o.$element.trigger("change")}))}},n.prototype.bind=function(e,t){var n=this;(this.container=e).on("select",(function(e){n.select(e.data)})),e.on("unselect",(function(e){n.unselect(e.data)}))},n.prototype.destroy=function(){this.$element.find("*").each((function(){s.removeData(this,"data")}))},n.prototype.query=function(t,e){var n=[],i=this;this.$element.children().each((function(){var e=s(this);(e.is("option")||e.is("optgroup"))&&(e=i.item(e),null!==(e=i.matches(t,e))&&n.push(e))})),e({results:n})},n.prototype.addOptions=function(e){t.appendMany(this.$element,e)},n.prototype.option=function(e){var t;e.children?(t=document.createElement("optgroup")).label=e.text:void 0!==(t=document.createElement("option")).textContent?t.textContent=e.text:t.innerText=e.text,e.id&&(t.value=e.id),e.disabled&&(t.disabled=!0),e.selected&&(t.selected=!0),e.title&&(t.title=e.title);var n=s(t),e=this._normalizeItem(e);return e.element=t,s.data(t,"data",e),n},n.prototype.item=function(e){var t={};if(null!=(t=s.data(e[0],"data")))return t;if(e.is("option"))t={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if(e.is("optgroup")){for(var t={text:e.prop("label"),children:[],title:e.prop("title")},n=e.children("option"),i=[],a=0;a<n.length;a++){var o=s(n[a]),o=this.item(o);i.push(o)}t.children=i}return(t=this._normalizeItem(t)).element=e[0],s.data(e[0],"data",t),t},n.prototype._normalizeItem=function(e){s.isPlainObject(e)||(e={id:e,text:e});return null!=(e=s.extend({},{text:""},e)).id&&(e.id=e.id.toString()),null!=e.text&&(e.text=e.text.toString()),null==e._resultId&&e.id&&null!=this.container&&(e._resultId=this.generateResultId(this.container,e)),s.extend({},{selected:!1,disabled:!1},e)},n.prototype.matches=function(e,t){return this.options.get("matcher")(e,t)},n})),d.define("select2/data/array",["./select","../utils","jquery"],(function(e,c,d){function i(e,t){var n=t.get("data")||[];i.__super__.constructor.call(this,e,t),this.addOptions(this.convertToOptions(n))}return c.Extend(i,e),i.prototype.select=function(n){var e;0===(e=this.$element.find("option").filter((function(e,t){return t.value==n.id.toString()}))).length&&(e=this.option(n),this.addOptions(e)),i.__super__.select.call(this,n)},i.prototype.convertToOptions=function(e){var t=this,n=this.$element.find("option"),i=n.map((function(){return t.item(d(this)).id})).get(),a=[];for(var o=0;o<e.length;o++){var s,r,l=this._normalizeItem(e[o]);0<=d.inArray(l.id,i)?(s=n.filter(function(e){return function(){return d(this).val()==e.id}}(l)),r=this.item(s),r=d.extend(!0,{},l,r),r=this.option(r),s.replaceWith(r)):(r=this.option(l),l.children&&(l=this.convertToOptions(l.children),c.appendMany(r,l)),a.push(r))}return a},i})),d.define("select2/data/ajax",["./array","../utils","jquery"],(function(e,t,o){function n(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),n.__super__.constructor.call(this,e,t)}return t.Extend(n,e),n.prototype._applyDefaults=function(e){var t={data:function(e){return o.extend({},e,{q:e.term})},transport:function(e,t,n){e=o.ajax(e);return e.then(t),e.fail(n),e}};return o.extend({},t,e,!0)},n.prototype.processResults=function(e){return e},n.prototype.query=function(t,n){var i=this;null!=this._request&&(o.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var a=o.extend({type:"GET"},this.ajaxOptions);function e(){var e=a.transport(a,(function(e){e=i.processResults(e,t);i.options.get("debug")&&window.console&&console.error&&(e&&e.results&&o.isArray(e.results)||void 0),n(e)}),(function(){e.status&&"0"===e.status||i.trigger("results:message",{message:"errorLoading"})}));i._request=e}"function"==typeof a.url&&(a.url=a.url.call(this.$element,t)),"function"==typeof a.data&&(a.data=a.data.call(this.$element,t)),this.ajaxOptions.delay&&null!=t.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(e,this.ajaxOptions.delay)):e()},n})),d.define("select2/data/tags",["jquery"],(function(r){function e(e,t,n){var i=n.get("tags"),a=n.get("createTag");void 0!==a&&(this.createTag=a);a=n.get("insertTag");if(void 0!==a&&(this.insertTag=a),e.call(this,t,n),r.isArray(i))for(var o=0;o<i.length;o++){var s=i[o],s=this._normalizeItem(s),s=this.option(s);this.$element.append(s)}}return e.prototype.query=function(e,c,d){var u=this;this._removeOldTags(),null!=c.term&&null==c.page?e.call(this,c,(function e(t,n){for(var i=t.results,a=0;a<i.length;a++){var o=i[a],s=null!=o.children&&!e({results:o.children},!0);if(o.text===c.term||s)return!n&&(t.data=i,void d(t))}if(n)return!0;var r,l=u.createTag(c);null!=l&&((r=u.option(l)).attr("data-select2-tag",!0),u.addOptions([r]),u.insertTag(i,l)),t.results=i,d(t)})):e.call(this,c,d)},e.prototype.createTag=function(e,t){t=r.trim(t.term);return""===t?null:{id:t,text:t}},e.prototype.insertTag=function(e,t,n){t.unshift(n)},e.prototype._removeOldTags=function(e){this._lastTag;this.$element.find("option[data-select2-tag]").each((function(){this.selected||r(this).remove()}))},e})),d.define("select2/data/tokenizer",["jquery"],(function(c){function e(e,t,n){var i=n.get("tokenizer");void 0!==i&&(this.tokenizer=i),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){e.call(this,t,n),this.$search=t.dropdown.$search||t.selection.$search||n.find(".select2-search__field")},e.prototype.query=function(e,t,n){var i=this;t.term=t.term||"";var a=this.tokenizer(t,this.options,(function(e){var t=i._normalizeItem(e);i.$element.find("option").filter((function(){return c(this).val()===t.id})).length||((e=i.option(t)).attr("data-select2-tag",!0),i._removeOldTags(),i.addOptions([e])),i.trigger("select",{data:t})}));a.term!==t.term&&(this.$search.length&&(this.$search.val(a.term),this.$search.focus()),t.term=a.term),e.call(this,t,n)},e.prototype.tokenizer=function(e,t,n,i){for(var a=n.get("tokenSeparators")||[],o=t.term,s=0,r=this.createTag||function(e){return{id:e.term,text:e.term}};s<o.length;){var l=o[s];-1!==c.inArray(l,a)?(l=o.substr(0,s),null!=(l=r(c.extend({},t,{term:l})))?(i(l),o=o.substr(s+1)||"",s=0):s++):s++}return{term:o}},e})),d.define("select2/data/minimumInputLength",[],(function(){function e(e,t,n){this.minimumInputLength=n.get("minimumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",t.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e})),d.define("select2/data/maximumInputLength",[],(function(){function e(e,t,n){this.maximumInputLength=n.get("maximumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",0<this.maximumInputLength&&t.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e})),d.define("select2/data/maximumSelectionLength",[],(function(){function e(e,t,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),e.call(this,t,n)}return e.prototype.query=function(t,n,i){var a=this;this.current((function(e){e=null!=e?e.length:0;0<a.maximumSelectionLength&&e>=a.maximumSelectionLength?a.trigger("results:message",{message:"maximumSelected",args:{maximum:a.maximumSelectionLength}}):t.call(a,n,i)}))},e})),d.define("select2/dropdown",["jquery","./utils"],(function(t,e){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<span class="select2-dropdown"><span class="select2-results"></span></span>');return e.attr("dir",this.options.get("dir")),this.$dropdown=e},n.prototype.bind=function(){},n.prototype.position=function(e,t){},n.prototype.destroy=function(){this.$dropdown.remove()},n})),d.define("select2/dropdown/search",["jquery","../utils"],(function(a,e){function t(){}return t.prototype.render=function(e){var t=e.call(this),e=a('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=e,this.$search=e.find("input"),t.prepend(e),t},t.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),this.$search.on("keydown",(function(e){i.trigger("keypress",e),i._keyUpPrevented=e.isDefaultPrevented()})),this.$search.on("input",(function(e){a(this).off("keyup")})),this.$search.on("keyup input",(function(e){i.handleSearch(e)})),t.on("open",(function(){i.$search.attr("tabindex",0),i.$search.focus(),window.setTimeout((function(){i.$search.focus()}),0)})),t.on("close",(function(){i.$search.attr("tabindex",-1),i.$search.val("")})),t.on("focus",(function(){t.isOpen()&&i.$search.focus()})),t.on("results:all",(function(e){null!=e.query.term&&""!==e.query.term||(i.showSearch(e)?i.$searchContainer.removeClass("select2-search--hide"):i.$searchContainer.addClass("select2-search--hide"))}))},t.prototype.handleSearch=function(e){var t;this._keyUpPrevented||(t=this.$search.val(),this.trigger("query",{term:t})),this._keyUpPrevented=!1},t.prototype.showSearch=function(e,t){return!0},t})),d.define("select2/dropdown/hidePlaceholder",[],(function(){function e(e,t,n,i){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n,i)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return t="string"==typeof t?{id:"",text:t}:t},e.prototype.removePlaceholder=function(e,t){for(var n=t.slice(0),i=t.length-1;0<=i;i--){var a=t[i];this.placeholder.id===a.id&&n.splice(i,1)}return n},e})),d.define("select2/dropdown/infiniteScroll",["jquery"],(function(a){function e(e,t,n,i){this.lastParams={},e.call(this,t,n,i),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return e.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&this.$results.append(this.$loadingMore)},e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("query",(function(e){i.lastParams=e,i.loading=!0})),t.on("query:append",(function(e){i.lastParams=e,i.loading=!0})),this.$results.on("scroll",(function(){var e=a.contains(document.documentElement,i.$loadingMore[0]);!i.loading&&e&&(e=i.$results.offset().top+i.$results.outerHeight(!1),i.$loadingMore.offset().top+i.$loadingMore.outerHeight(!1)<=e+50&&i.loadMore())}))},e.prototype.loadMore=function(){this.loading=!0;var e=a.extend({},{page:1},this.lastParams);e.page++,this.trigger("query:append",e)},e.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},e.prototype.createLoadingMore=function(){var e=a('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>'),t=this.options.get("translations").get("loadingMore");return e.html(t(this.lastParams)),e},e})),d.define("select2/dropdown/attachBody",["jquery","../utils"],(function(c,s){function e(e,t,n){this.$dropdownParent=n.get("dropdownParent")||c(document.body),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){var i=this,a=!1;e.call(this,t,n),t.on("open",(function(){i._showDropdown(),i._attachPositioningHandler(t),a||(a=!0,t.on("results:all",(function(){i._positionDropdown(),i._resizeDropdown()})),t.on("results:append",(function(){i._positionDropdown(),i._resizeDropdown()})))})),t.on("close",(function(){i._hideDropdown(),i._detachPositioningHandler(t)})),this.$dropdownContainer.on("mousedown",(function(e){e.stopPropagation()}))},e.prototype.destroy=function(e){e.call(this),this.$dropdownContainer.remove()},e.prototype.position=function(e,t,n){t.attr("class",n.attr("class")),t.removeClass("select2"),t.addClass("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=n},e.prototype.render=function(e){var t=c("<span></span>"),e=e.call(this);return t.append(e),this.$dropdownContainer=t},e.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()},e.prototype._attachPositioningHandler=function(e,t){var n=this,i="scroll.select2."+t.id,a="resize.select2."+t.id,o="orientationchange.select2."+t.id,t=this.$container.parents().filter(s.hasScroll);t.each((function(){c(this).data("select2-scroll-position",{x:c(this).scrollLeft(),y:c(this).scrollTop()})})),t.on(i,(function(e){var t=c(this).data("select2-scroll-position");c(this).scrollTop(t.y)})),c(window).on(i+" "+a+" "+o,(function(e){n._positionDropdown(),n._resizeDropdown()}))},e.prototype._detachPositioningHandler=function(e,t){var n="scroll.select2."+t.id,i="resize.select2."+t.id,t="orientationchange.select2."+t.id;this.$container.parents().filter(s.hasScroll).off(n),c(window).off(n+" "+i+" "+t)},e.prototype._positionDropdown=function(){var e=c(window),t=this.$dropdown.hasClass("select2-dropdown--above"),n=this.$dropdown.hasClass("select2-dropdown--below"),i=null,a=this.$container.offset();a.bottom=a.top+this.$container.outerHeight(!1);var o={height:this.$container.outerHeight(!1)};o.top=a.top,o.bottom=a.top+o.height;var s=this.$dropdown.outerHeight(!1),r=e.scrollTop(),l=e.scrollTop()+e.height(),e=r<a.top-s,r=l>a.bottom+s,l={left:a.left,top:o.bottom},a=this.$dropdownParent,a=(a="static"===a.css("position")?a.offsetParent():a).offset();l.top-=a.top,l.left-=a.left,t||n||(i="below"),r||!e||t?!e&&r&&t&&(i="below"):i="above",("above"==i||t&&"below"!==i)&&(l.top=o.top-a.top-s),null!=i&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+i),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+i)),this.$dropdownContainer.css(l)},e.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.position="relative",e.width="auto"),this.$dropdown.css(e)},e.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},e})),d.define("select2/dropdown/minimumResultsForSearch",[],(function(){function e(e,t,n,i){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),e.call(this,t,n,i)}return e.prototype.showSearch=function(e,t){return!(function e(t){for(var n=0,i=0;i<t.length;i++){var a=t[i];a.children?n+=e(a.children):n++}return n}(t.data.results)<this.minimumResultsForSearch)&&e.call(this,t)},e})),d.define("select2/dropdown/selectOnClose",[],(function(){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("close",(function(e){i._handleSelectOnClose(e)}))},e.prototype._handleSelectOnClose=function(e,t){if(t&&null!=t.originalSelect2Event){var n=t.originalSelect2Event;if("select"===n._type||"unselect"===n._type)return}n=this.getHighlightedResults();n.length<1||(null!=(n=n.data("data")).element&&n.element.selected||null==n.element&&n.selected||this.trigger("select",{data:n}))},e})),d.define("select2/dropdown/closeOnSelect",[],(function(){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("select",(function(e){i._selectTriggered(e)})),t.on("unselect",(function(e){i._selectTriggered(e)}))},e.prototype._selectTriggered=function(e,t){var n=t.originalEvent;n&&n.ctrlKey||this.trigger("close",{originalEvent:n,originalSelect2Event:t})},e})),d.define("select2/i18n/en",[],(function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum,e="Please delete "+t+" character";return 1!=t&&(e+="s"),e},inputTooShort:function(e){return"Please enter "+(e.minimum-e.input.length)+" or more characters"},loadingMore:function(){return"Loading more results"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return 1!=e.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching"}}})),d.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],(function(d,u,p,f,g,h,m,v,S,y,M,t,b,w,B,C,_,k,E,T,I,x,$,A,R,P,L,D,e){function n(){this.reset()}return n.prototype.apply=function(t){var e,n;if(null==(t=d.extend(!0,{},this.defaults,t)).dataAdapter&&(null!=t.ajax?t.dataAdapter=B:null!=t.data?t.dataAdapter=w:t.dataAdapter=b,0<t.minimumInputLength&&(t.dataAdapter=y.Decorate(t.dataAdapter,k)),0<t.maximumInputLength&&(t.dataAdapter=y.Decorate(t.dataAdapter,E)),0<t.maximumSelectionLength&&(t.dataAdapter=y.Decorate(t.dataAdapter,T)),t.tags&&(t.dataAdapter=y.Decorate(t.dataAdapter,C)),null==t.tokenSeparators&&null==t.tokenizer||(t.dataAdapter=y.Decorate(t.dataAdapter,_)),null!=t.query&&(e=u(t.amdBase+"compat/query"),t.dataAdapter=y.Decorate(t.dataAdapter,e)),null!=t.initSelection&&(e=u(t.amdBase+"compat/initSelection"),t.dataAdapter=y.Decorate(t.dataAdapter,e))),null==t.resultsAdapter&&(t.resultsAdapter=p,null!=t.ajax&&(t.resultsAdapter=y.Decorate(t.resultsAdapter,A)),null!=t.placeholder&&(t.resultsAdapter=y.Decorate(t.resultsAdapter,$)),t.selectOnClose&&(t.resultsAdapter=y.Decorate(t.resultsAdapter,L))),null==t.dropdownAdapter&&(t.multiple?t.dropdownAdapter=I:(n=y.Decorate(I,x),t.dropdownAdapter=n),0!==t.minimumResultsForSearch&&(t.dropdownAdapter=y.Decorate(t.dropdownAdapter,P)),t.closeOnSelect&&(t.dropdownAdapter=y.Decorate(t.dropdownAdapter,D)),null==t.dropdownCssClass&&null==t.dropdownCss&&null==t.adaptDropdownCssClass||(n=u(t.amdBase+"compat/dropdownCss"),t.dropdownAdapter=y.Decorate(t.dropdownAdapter,n)),t.dropdownAdapter=y.Decorate(t.dropdownAdapter,R)),null==t.selectionAdapter&&(t.multiple?t.selectionAdapter=g:t.selectionAdapter=f,null!=t.placeholder&&(t.selectionAdapter=y.Decorate(t.selectionAdapter,h)),t.allowClear&&(t.selectionAdapter=y.Decorate(t.selectionAdapter,m)),t.multiple&&(t.selectionAdapter=y.Decorate(t.selectionAdapter,v)),null==t.containerCssClass&&null==t.containerCss&&null==t.adaptContainerCssClass||(l=u(t.amdBase+"compat/containerCss"),t.selectionAdapter=y.Decorate(t.selectionAdapter,l)),t.selectionAdapter=y.Decorate(t.selectionAdapter,S)),"string"==typeof t.language&&(0<t.language.indexOf("-")?(c=t.language.split("-")[0],t.language=[t.language,c]):t.language=[t.language]),d.isArray(t.language)){var i=new M;t.language.push("en");for(var a=t.language,o=0;o<a.length;o++){var s=a[o],r={};try{r=M.loadPath(s)}catch(e){try{s=this.defaults.amdLanguageBase+s,r=M.loadPath(s)}catch(e){t.debug&&window.console&&console.warn&&void 0;continue}}i.extend(r)}t.translations=i}else{var l=M.loadPath(this.defaults.amdLanguageBase+"en"),c=new M(t.language);c.extend(l),t.translations=c}return t},n.prototype.reset=function(){function r(e){return e.replace(/[^\u0000-\u007E]/g,(function(e){return t[e]||e}))}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:y.escapeMarkup,language:e,matcher:function e(t,n){if(""===d.trim(t.term))return n;if(n.children&&0<n.children.length){for(var i=d.extend(!0,{},n),a=n.children.length-1;0<=a;a--)null==e(t,n.children[a])&&i.children.splice(a,1);return 0<i.children.length?i:e(t,i)}var o=r(n.text).toUpperCase(),s=r(t.term).toUpperCase();return-1<o.indexOf(s)?n:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},n.prototype.set=function(e,t){var n={};n[d.camelCase(e)]=t;n=y._convertData(n);d.extend(this.defaults,n)},new n})),d.define("select2/options",["require","jquery","./defaults","./utils"],(function(n,o,i,s){function e(e,t){this.options=e,null!=t&&this.fromElement(t),this.options=i.apply(this.options),t&&t.is("input")&&(t=n(this.get("amdBase")+"compat/inputData"),this.options.dataAdapter=s.Decorate(this.options.dataAdapter,t))}return e.prototype.fromElement=function(e){var t=["select2"];null==this.options.multiple&&(this.options.multiple=e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=e.prop("disabled")),null==this.options.language&&(e.prop("lang")?this.options.language=e.prop("lang").toLowerCase():e.closest("[lang]").prop("lang")&&(this.options.language=e.closest("[lang]").prop("lang"))),null==this.options.dir&&(e.prop("dir")?this.options.dir=e.prop("dir"):e.closest("[dir]").prop("dir")?this.options.dir=e.closest("[dir]").prop("dir"):this.options.dir="ltr"),e.prop("disabled",this.options.disabled),e.prop("multiple",this.options.multiple),e.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&void 0,e.data("data",e.data("select2Tags")),e.data("tags",!0)),e.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&void 0,e.attr("ajax--url",e.data("ajaxUrl")),e.data("ajax--url",e.data("ajaxUrl")));var n,i={},i=o.fn.jquery&&"1."==o.fn.jquery.substr(0,2)&&e[0].dataset?o.extend(!0,{},e[0].dataset,e.data()):e.data(),a=o.extend(!0,{},i);for(n in a=s._convertData(a))-1<o.inArray(n,t)||(o.isPlainObject(this.options[n])?o.extend(this.options[n],a[n]):this.options[n]=a[n]);return this},e.prototype.get=function(e){return this.options[e]},e.prototype.set=function(e,t){this.options[e]=t},e})),d.define("select2/core",["jquery","./options","./utils","./keys"],(function(a,o,n,i){var s=function(e,t){null!=e.data("select2")&&e.data("select2").destroy(),this.$element=e,this.id=this._generateId(e),this.options=new o(t=t||{},e),s.__super__.constructor.call(this);var n=e.attr("tabindex")||0;e.data("old-tabindex",n),e.attr("tabindex","-1");t=this.options.get("dataAdapter");this.dataAdapter=new t(e,this.options);n=this.render();this._placeContainer(n);t=this.options.get("selectionAdapter");this.selection=new t(e,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,n);t=this.options.get("dropdownAdapter");this.dropdown=new t(e,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,n);n=this.options.get("resultsAdapter");this.results=new n(e,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var i=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current((function(e){i.trigger("selection:update",{data:e})})),e.addClass("select2-hidden-accessible"),e.attr("aria-hidden","true"),this._syncAttributes(),e.data("select2",this)};return n.Extend(s,n.Observable),s.prototype._generateId=function(e){return"select2-"+(null!=e.attr("id")?e.attr("id"):null!=e.attr("name")?e.attr("name")+"-"+n.generateChars(2):n.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},s.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&e.css("width",t)},s.prototype._resolveWidth=function(e,t){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==t){var i=this._resolveWidth(e,"style");return null!=i?i:this._resolveWidth(e,"element")}if("element"==t){i=e.outerWidth(!1);return i<=0?"auto":i+"px"}if("style"!=t)return t;e=e.attr("style");if("string"!=typeof e)return null;for(var a=e.split(";"),o=0,s=a.length;o<s;o+=1){var r=a[o].replace(/\s/g,"").match(n);if(null!==r&&1<=r.length)return r[1]}return null},s.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},s.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",(function(){t.dataAdapter.current((function(e){t.trigger("selection:update",{data:e})}))})),this.$element.on("focus.select2",(function(e){t.trigger("focus",e)})),this._syncA=n.bind(this._syncAttributes,this),this._syncS=n.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=e?(this._observer=new e(function(e){a.each(e,t._syncA),a.each(e,t._syncS)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",t._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",t._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",t._syncS,!1))},s.prototype._registerDataEvents=function(){var n=this;this.dataAdapter.on("*",(function(e,t){n.trigger(e,t)}))},s.prototype._registerSelectionEvents=function(){var n=this,i=["toggle","focus"];this.selection.on("toggle",(function(){n.toggleDropdown()})),this.selection.on("focus",(function(e){n.focus(e)})),this.selection.on("*",(function(e,t){-1===a.inArray(e,i)&&n.trigger(e,t)}))},s.prototype._registerDropdownEvents=function(){var n=this;this.dropdown.on("*",(function(e,t){n.trigger(e,t)}))},s.prototype._registerResultsEvents=function(){var n=this;this.results.on("*",(function(e,t){n.trigger(e,t)}))},s.prototype._registerEvents=function(){var n=this;this.on("open",(function(){n.$container.addClass("select2-container--open")})),this.on("close",(function(){n.$container.removeClass("select2-container--open")})),this.on("enable",(function(){n.$container.removeClass("select2-container--disabled")})),this.on("disable",(function(){n.$container.addClass("select2-container--disabled")})),this.on("blur",(function(){n.$container.removeClass("select2-container--focus")})),this.on("query",(function(t){n.isOpen()||n.trigger("open",{}),this.dataAdapter.query(t,(function(e){n.trigger("results:all",{data:e,query:t})}))})),this.on("query:append",(function(t){this.dataAdapter.query(t,(function(e){n.trigger("results:append",{data:e,query:t})}))})),this.on("keypress",(function(e){var t=e.which;n.isOpen()?t===i.ESC||t===i.TAB||t===i.UP&&e.altKey?(n.close(),e.preventDefault()):t===i.ENTER?(n.trigger("results:select",{}),e.preventDefault()):t===i.SPACE&&e.ctrlKey?(n.trigger("results:toggle",{}),e.preventDefault()):t===i.UP?(n.trigger("results:previous",{}),e.preventDefault()):t===i.DOWN&&(n.trigger("results:next",{}),e.preventDefault()):(t===i.ENTER||t===i.SPACE||t===i.DOWN&&e.altKey)&&(n.open(),e.preventDefault())}))},s.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},s.prototype._syncSubtree=function(e,t){var n=!1,i=this;if(!e||!e.target||"OPTION"===e.target.nodeName||"OPTGROUP"===e.target.nodeName){if(t)if(t.addedNodes&&0<t.addedNodes.length)for(var a=0;a<t.addedNodes.length;a++)t.addedNodes[a].selected&&(n=!0);else t.removedNodes&&0<t.removedNodes.length&&(n=!0);else n=!0;n&&this.dataAdapter.current((function(e){i.trigger("selection:update",{data:e})}))}},s.prototype.trigger=function(e,t){var n=s.__super__.trigger,i={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(void 0===t&&(t={}),e in i){var a={prevented:!1,name:e,args:t};if(n.call(this,i[e],a),a.prevented)return void(t.prevented=!0)}n.call(this,e,t)},s.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},s.prototype.open=function(){this.isOpen()||this.trigger("query",{})},s.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},s.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},s.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},s.prototype.focus=function(e){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},s.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn&&void 0;e=!(e=null==e||0===e.length?[!0]:e)[0];this.$element.prop("disabled",e)},s.prototype.data=function(){this.options.get("debug")&&0<arguments.length&&window.console&&console.warn&&void 0;var t=[];return this.dataAdapter.current((function(e){t=e})),t},s.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&void 0,null==e||0===e.length)return this.$element.val();e=e[0];a.isArray(e)&&(e=a.map(e,(function(e){return e.toString()}))),this.$element.val(e).trigger("change")},s.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},s.prototype.render=function(){var e=a('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return e.attr("dir",this.options.get("dir")),this.$container=e,this.$container.addClass("select2-container--"+this.options.get("theme")),e.data("element",this.$element),e},s})),d.define("select2/compat/utils",["jquery"],(function(s){return{syncCssClasses:function(e,t,n){var i,a=[],o=s.trim(e.attr("class"));o&&s((o=""+o).split(/\s+/)).each((function(){0===this.indexOf("select2-")&&a.push(this)})),(o=s.trim(t.attr("class")))&&s((o=""+o).split(/\s+/)).each((function(){0!==this.indexOf("select2-")&&null!=(i=n(this))&&a.push(i)})),e.attr("class",a.join(" "))}}})),d.define("select2/compat/containerCss",["jquery","./utils"],(function(o,s){function r(e){return null}function e(){}return e.prototype.render=function(e){var t=e.call(this),n=this.options.get("containerCssClass")||"";o.isFunction(n)&&(n=n(this.$element));var i,a=this.options.get("adaptContainerCssClass");a=a||r,-1!==n.indexOf(":all:")&&(n=n.replace(":all:",""),i=a,a=function(e){var t=i(e);return null!=t?t+" "+e:e});e=this.options.get("containerCss")||{};return o.isFunction(e)&&(e=e(this.$element)),s.syncCssClasses(t,this.$element,a),t.css(e),t.addClass(n),t},e})),d.define("select2/compat/dropdownCss",["jquery","./utils"],(function(o,s){function r(e){return null}function e(){}return e.prototype.render=function(e){var t=e.call(this),n=this.options.get("dropdownCssClass")||"";o.isFunction(n)&&(n=n(this.$element));var i,a=this.options.get("adaptDropdownCssClass");a=a||r,-1!==n.indexOf(":all:")&&(n=n.replace(":all:",""),i=a,a=function(e){var t=i(e);return null!=t?t+" "+e:e});e=this.options.get("dropdownCss")||{};return o.isFunction(e)&&(e=e(this.$element)),s.syncCssClasses(t,this.$element,a),t.css(e),t.addClass(n),t},e})),d.define("select2/compat/initSelection",["jquery"],(function(i){function e(e,t,n){n.get("debug")&&window.console&&console.warn&&void 0,this.initSelection=n.get("initSelection"),this._isInitialized=!1,e.call(this,t,n)}return e.prototype.current=function(e,t){var n=this;this._isInitialized?e.call(this,t):this.initSelection.call(null,this.$element,(function(e){n._isInitialized=!0,i.isArray(e)||(e=[e]),t(e)}))},e})),d.define("select2/compat/inputData",["jquery"],(function(o){function e(e,t,n){this._currentData=[],this._valueSeparator=n.get("valueSeparator")||",","hidden"===t.prop("type")&&n.get("debug")&&console&&console.warn&&void 0,e.call(this,t,n)}return e.prototype.current=function(e,t){for(var n=[],i=0;i<this._currentData.length;i++){var a=this._currentData[i];n.push.apply(n,(function e(t,n){var i=[];return t.selected||-1!==o.inArray(t.id,n)?(t.selected=!0,i.push(t)):t.selected=!1,t.children&&i.push.apply(i,e(t.children,n)),i})(a,this.$element.val().split(this._valueSeparator)))}t(n)},e.prototype.select=function(e,t){var n;this.options.get("multiple")?(n=this.$element.val(),n+=this._valueSeparator+t.id,this.$element.val(n)):(this.current((function(e){o.map(e,(function(e){e.selected=!1}))})),this.$element.val(t.id)),this.$element.trigger("change")},e.prototype.unselect=function(e,a){var o=this;a.selected=!1,this.current((function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];a.id!=i.id&&t.push(i.id)}o.$element.val(t.join(o._valueSeparator)),o.$element.trigger("change")}))},e.prototype.query=function(e,t,n){for(var i=[],a=0;a<this._currentData.length;a++){var o=this._currentData[a],o=this.matches(t,o);null!==o&&i.push(o)}n({results:i})},e.prototype.addOptions=function(e,t){t=o.map(t,(function(e){return o.data(e[0],"data")}));this._currentData.push.apply(this._currentData,t)},e})),d.define("select2/compat/matcher",["jquery"],(function(s){return function(o){return function(e,t){var n=s.extend(!0,{},t);if(null==e.term||""===s.trim(e.term))return n;if(t.children){for(var i=t.children.length-1;0<=i;i--){var a=t.children[i];o(e.term,a.text,a)||n.children.splice(i,1)}if(0<n.children.length)return n}return o(e.term,t.text,t)?n:null}}})),d.define("select2/compat/query",[],(function(){function e(e,t,n){n.get("debug")&&window.console&&console.warn&&void 0,e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.callback=n,this.options.get("query").call(null,t)},e})),d.define("select2/dropdown/attachContainer",[],(function(){function e(e,t,n){e.call(this,t,n)}return e.prototype.position=function(e,t,n){n.find(".dropdown-wrapper").append(t),t.addClass("select2-dropdown--below"),n.addClass("select2-container--below")},e})),d.define("select2/dropdown/stopPropagation",[],(function(){function e(){}return e.prototype.bind=function(e,t,n){e.call(this,t,n);this.$dropdown.on(["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"].join(" "),(function(e){e.stopPropagation()}))},e})),d.define("select2/selection/stopPropagation",[],(function(){function e(){}return e.prototype.bind=function(e,t,n){e.call(this,t,n);this.$selection.on(["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"].join(" "),(function(e){e.stopPropagation()}))},e})),r=function(d){var u,p,e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],t="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],f=Array.prototype.slice;if(d.event.fixHooks)for(var n=e.length;n;)d.event.fixHooks[e[--n]]=d.event.mouseHooks;var g=d.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var e=t.length;e;)this.addEventListener(t[--e],i,!1);else this.onmousewheel=i;d.data(this,"mousewheel-line-height",g.getLineHeight(this)),d.data(this,"mousewheel-page-height",g.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=t.length;e;)this.removeEventListener(t[--e],i,!1);else this.onmousewheel=null;d.removeData(this,"mousewheel-line-height"),d.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var t=d(e),e=t["offsetParent"in d.fn?"offsetParent":"parent"]();return e.length||(e=d("body")),parseInt(e.css("fontSize"),10)||parseInt(t.css("fontSize"),10)||16},getPageHeight:function(e){return d(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function i(e){var t,n=e||window.event,i=f.call(arguments,1),a=0,o=0,s=0,r=0,l=0,c=0;if((e=d.event.fix(n)).type="mousewheel","detail"in n&&(s=-1*n.detail),"wheelDelta"in n&&(s=n.wheelDelta),"wheelDeltaY"in n&&(s=n.wheelDeltaY),"wheelDeltaX"in n&&(o=-1*n.wheelDeltaX),"axis"in n&&n.axis===n.HORIZONTAL_AXIS&&(o=-1*s,s=0),a=0===s?o:s,"deltaY"in n&&(a=s=-1*n.deltaY),"deltaX"in n&&(o=n.deltaX,0===s&&(a=-1*o)),0!==s||0!==o)return 1===n.deltaMode?(a*=t=d.data(this,"mousewheel-line-height"),s*=t,o*=t):2===n.deltaMode&&(a*=t=d.data(this,"mousewheel-page-height"),s*=t,o*=t),r=Math.max(Math.abs(s),Math.abs(o)),(!p||r<p)&&m(n,p=r)&&(p/=40),m(n,r)&&(a/=40,o/=40,s/=40),a=Math[1<=a?"floor":"ceil"](a/p),o=Math[1<=o?"floor":"ceil"](o/p),s=Math[1<=s?"floor":"ceil"](s/p),g.settings.normalizeOffset&&this.getBoundingClientRect&&(r=this.getBoundingClientRect(),l=e.clientX-r.left,c=e.clientY-r.top),e.deltaX=o,e.deltaY=s,e.deltaFactor=p,e.offsetX=l,e.offsetY=c,e.deltaMode=0,i.unshift(e,a,o,s),u&&clearTimeout(u),u=setTimeout(h,200),(d.event.dispatch||d.event.handle).apply(this,i)}function h(){p=null}function m(e,t){return g.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}d.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})},"function"==typeof d.define&&d.define.amd?d.define("jquery-mousewheel",["jquery"],r):"object"==typeof exports?module.exports=r:r(t),d.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],(function(a,e,o,t){var s;return null==a.fn.select2&&(s=["open","close","destroy"],a.fn.select2=function(t){if("object"==typeof(t=t||{}))return this.each((function(){var e=a.extend(!0,{},t);new o(a(this),e)})),this;if("string"!=typeof t)throw new Error("Invalid arguments for Select2: "+t);var n,i=Array.prototype.slice.call(arguments,1);return this.each((function(){var e=a(this).data("select2");null==e&&window.console&&console.error&&void 0,n=e[t].apply(e,i)})),-1<a.inArray(t,s)?this:n}),null==a.fn.select2.defaults&&(a.fn.select2.defaults=t),o})),{define:d.define,require:d.require});function y(e,t){return i.call(e,t)}function l(e,t){var n,i,a,o,s,r,l,c,d,u,p=t&&t.split("/"),f=m.map,g=f&&f["*"]||{};if(e&&"."===e.charAt(0))if(t){for(t=(e=e.split("/")).length-1,m.nodeIdCompat&&S.test(e[t])&&(e[t]=e[t].replace(S,"")),e=p.slice(0,p.length-1).concat(e),c=0;c<e.length;c+=1)if("."===(u=e[c]))e.splice(c,1),--c;else if(".."===u){if(1===c&&(".."===e[2]||".."===e[0]))break;0<c&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((p||g)&&f){for(c=(n=e.split("/")).length;0<c;--c){if(i=n.slice(0,c).join("/"),p)for(d=p.length;0<d;--d)if(a=(a=f[p.slice(0,d).join("/")])&&a[i]){o=a,s=c;break}if(o)break;!r&&g&&g[i]&&(r=g[i],l=c)}!o&&r&&(o=r,s=l),o&&(n.splice(0,s,o),e=n.join("/"))}return e}function M(t,n){return function(){var e=a.call(arguments,0);return"string"!=typeof e[0]&&1===e.length&&e.push(null),s.apply(u,e.concat([t,n]))}}function b(e){var t;if(y(h,e)&&(t=h[e],delete h[e],v[e]=!0,o.apply(u,t)),!y(g,e)&&!y(v,e))throw new Error("No "+e);return g[e]}function c(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}var d=r.require("jquery.select2");return t.fn.select2.amd=r,d}));var loyaltyGlobal=function(){this.data=[],this.premiereData=[],this.profileBadgesCookie=BMS.Storage.get({name:loyalty.config.PROFILE_COOKIE,storage:"C"}),this.logoBadgesCookie=BMS.Storage.get({name:loyalty.config.LOGO_COOKIE,storage:"C"}),this.dashboardBadgesCookie=BMS.Storage.get({name:loyalty.config.DASHBOARD_EVENTS_COOKIE,storage:"C"}),this.dashboardPremiereBadgesCookie=BMS.Storage.get({name:loyalty.config.DASHBOARD_PREMIERE_EVENTS_COOKIE,storage:"C"}),this.profileReadEvents=this.profileBadgesCookie?this.profileBadgesCookie.split(","):[],this.readEvents=this.logoBadgesCookie?this.logoBadgesCookie.split(","):[],this.dashboardReadEvents=this.dashboardBadgesCookie?this.dashboardBadgesCookie.split(","):[],this.dashboardPremiereReadEvents=this.dashboardPremiereBadgesCookie?this.dashboardPremiereBadgesCookie.split(","):[],this.dashboardUnreadEvents=[],this.profileUnReadEvents=[],this.unReadEvents=[],this.dashboardPremiereUnreadEvents=[]};function initBadges(e){try{var t=new loyaltyGlobal;t.data=e,t.unReadEvents=t.updateUnreadEvents(t.readEvents,t.data),t.profileUnReadEvents=t.updateUnreadEvents(t.profileReadEvents,t.data),t.showBadges();var n,i=document.getElementById("postSignIn");i&&(n=t,i.addEventListener("click",(function e(){n.profileClickHandler(),i.removeEventListener("click",e)}),!1))}catch(e){BMS.Misc.fnErr({fnName:"initBadges",err:e})}}function loadVariantsData(t){try{var e=BMS.Storage.get({name:"ld",key:"LOYALTYVARIANTID",defVal:""}),n=BMS.Storage.get({name:"ld",key:"MEMBEREMAIL",defVal:""}),i=BMS.Storage.get({name:"Rgn",key:"Code"}),a=BMS.Storage.get({name:"Rgn",key:"subregionDetails"}),o=""!=a?JSON.parse(a).SubRegionCode:"";BMS.Misc.fnAjax({url:global.getDataUrl+"?cmd=LOYALTYDATA",data:{variantId:e,emailId:n,regionCode:i,subRegionCode:o},type:"POST",success:function(e){if(!_.isEmpty(e)){e=JSON.parse(e);return e.data&&e.data.ssEventsDetails&&0<e.data.ssEventsDetails.length&&BMS.Storage.set({name:loyalty.config.EVENTS_DATA,storage:"C",value:e.data.ssEventsDetails,sess:!1,expires:"Thu, 31 Dec 2099 23:59:59 GMT"}),t(e)}},error:function(e,t,n){void 0}})}catch(e){BMS.Misc.fnErr({fnName:"loadVariantsData",err:e})}}function fnCleanUpBadges(){try{showAndHideElement("#logo-badge","none"),showAndHideElement("#profile-badge","none"),showAndHideElement("#profile-badge-signin","none")}catch(e){BMS.Misc.fnErr({fnName:"fnCleanUpBadges",err:e})}}function showAndHideElement(e,t,n){try{e=e||"",t=t||"block";var i=document.querySelector(e);i&&(i.style.display=t),i&&n&&(i.textContent=n)}catch(e){BMS.Misc.fnErr({name:"showAndHideElement",err:e})}}loyaltyGlobal.prototype={updateUnreadEvents:function(e,t){try{var n=[];if(0===e.length)n=t;else for(var i=0;i<t.length;i++){for(var a=!1,o=0;o<e.length;o++)t[i]===e[o]&&(a=!0);a||n.push(t[i])}return n}catch(e){void 0}},saveReadEvents:function(e,t){try{t.length&&BMS.Storage.set({name:e,value:t,storage:"C",sess:!1,expires:"Thu, 31 Dec 2099 23:59:59 GMT"})}catch(e){BMS.Misc.fnErr({fnName:"loyaltyGlobal.saveReadEvents",err:e})}},showBadges:function(){try{this.unReadEvents.length&&showAndHideElement("#logo-badge","block","1"),this.profileUnReadEvents.length&&(showAndHideElement("#profile-badge","block","1"),showAndHideElement("#profile-badge-signin","block"))}catch(e){return!1}},showDashboardBadges:function(){try{this.dashboardUnreadEvents.length&&showAndHideElement("[data-category=ET] .dashboard-notif","block","1"),this.dashboardPremiereUnreadEvents.length&&showAndHideElement("[data-category=PR] .dashboard-notif","block","1")}catch(e){BMS.Misc.fnErr({fnName:"loyaltyGlobal.showDashboardBadges",err:e})}},updateReadCount:function(e){try{for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t}catch(e){void 0}},markBadgesRead:function(){try{0===this.unReadEvents.length&&showAndHideElement("#logo-badge","none"),0===this.profileUnReadEvents.length&&(showAndHideElement("#profile-badge","none"),showAndHideElement("#profile-badge-signin","none"))}catch(e){void 0}},markDashboardBadgesRead:function(){try{0===this.dashboardUnreadEvents.length&&showAndHideElement("[data-category=ET] .dashboard-notif","none"),0===this.dashboardPremiereUnreadEvents.length&&showAndHideElement("[data-category=PR] .dashboard-notif","none")}catch(e){BMS.Misc.fnErr({fnName:"loyaltyGlobalObj.markDashboardBadgesRead",err:e})}},profileClickHandler:function(){try{this.profileUnReadEvents=[],this.markBadgesRead(),this.saveReadEvents(loyalty.config.PROFILE_COOKIE,this.data);BMS.Misc.fnGATracker({event:"SuperstarDashboard_tracking_SS_Dashboards_1",action:"SS Logo Click - My Profile",label:"Notification for PreSale - Yes"})}catch(e){BMS.Misc.fnErr({fnName:"loyaltyGlobalObj.profileClickHandler",err:e})}}},$(document).ready((function(){try{loyalty&&loyalty.fnIsSubscribed()&&pageName&&"home"!==pageName&&"loyalty-dashboard"!==pageName&&initBadges(BMS.Storage.get({name:loyalty.config.EVENTS_DATA,storage:"C"})?BMS.Storage.get({name:loyalty.config.EVENTS_DATA,storage:"C"}).split(","):[])}catch(e){BMS.Misc.fnErr({name:"loyaltyGlobalObj",err:e})}})),global.SignInCallBack.push((function(){loyalty&&(loyalty.isTargetted=BMS.Storage.get({name:"ld",key:"LOYALTYISTARGETTED",storage:"C"}),loyalty.isSubscribed=BMS.Storage.get({name:"ld",key:"LOYALTYISSUBSCRIBED",storage:"C"})),loyalty.fnIsTargetted()&&fnCleanUpBadges()})),global.SignOutCallBack.push((function(){BMS.Storage.del({name:loyalty.config.LOGO_COOKIE}),BMS.Storage.del({name:loyalty.config.PROFILE_COOKIE}),BMS.Storage.del({name:loyalty.config.EVENTS_DATA}),BMS.Storage.del({name:loyalty.config.DASHBOARD_EVENTS_COOKIE}),BMS.Storage.del({name:loyalty.config.DASHBOARD_PREMIERE_EVENTS_COOKIE}),fnCleanUpBadges()})),$(document).ready((function(){var t={};$(".gallery-img-contr,.layout-content").each((function(){var e=parseInt($(this).attr("data-group")||0,10);t[e]||(t[e]=[]),t[e].push(this)})),$.each(t,(function(){$(this).magnificPopup({type:"image",closeOnContentClick:!0,closeBtnInside:!1,gallery:{enabled:!0}})}))})),(function(c){function e(){}function d(e,t){g.ev.on("mfp"+e+n,t)}function u(e,t,n,i){var a=document.createElement("div");return a.className="mfp-"+e,n&&(a.innerHTML=n),i?t&&t.appendChild(a):(a=c(a),t&&a.appendTo(t)),a}function p(e,t){g.ev.triggerHandler("mfp"+e,t),g.st.callbacks&&(e=e.charAt(0).toLowerCase()+e.slice(1),g.st.callbacks[e]&&g.st.callbacks[e].apply(g,c.isArray(t)?t:[t]))}function f(e){return e===t&&g.currTemplate.closeBtn||(g.currTemplate.closeBtn=c(g.st.closeMarkup.replace("%title%",g.st.tClose)),t=e),g.currTemplate.closeBtn}function o(){c.magnificPopup.instance||((g=new e).init(),c.magnificPopup.instance=g)}var g,i,h,m,a,v,t,r="Close",l="BeforeClose",S="MarkupParse",n=".mfp",y="mfp-ready",s="mfp-removing",M="mfp-prevent-close",b=!!window.jQuery,w=c(window);e.prototype={constructor:e,init:function(){var e=navigator.appVersion;g.isIE7=-1!==e.indexOf("MSIE 7."),g.isIE8=-1!==e.indexOf("MSIE 8."),g.isLowIE=g.isIE7||g.isIE8,g.isAndroid=/android/gi.test(e),g.isIOS=/iphone|ipad|ipod/gi.test(e),g.supportsTransition=(function(){var e=document.createElement("p").style,t=["ms","O","Moz","Webkit"];if(void 0!==e.transition)return!0;for(;t.length;)if(t.pop()+"Transition"in e)return!0;return!1})(),g.probablyMobile=g.isAndroid||g.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),m=c(document),g.popupsCache={}},open:function(e){if(h=h||c(document.body),!1===e.isObj){g.items=e.items.toArray(),g.index=0;for(var t,n=e.items,i=0;n.length>i;i++)if((t=(t=n[i]).parsed?t.el[0]:t)===e.el[0]){g.index=i;break}}else g.items=c.isArray(e.items)?e.items:[e.items],g.index=e.index||0;if(!g.isOpen){g.types=[],v="",g.ev=e.mainEl&&e.mainEl.length?e.mainEl.eq(0):m,e.key?(g.popupsCache[e.key]||(g.popupsCache[e.key]={}),g.currTemplate=g.popupsCache[e.key]):g.currTemplate={},g.st=c.extend(!0,{},c.magnificPopup.defaults,e),g.fixedContentPos="auto"===g.st.fixedContentPos?!g.probablyMobile:g.st.fixedContentPos,g.st.modal&&(g.st.closeOnContentClick=!1,g.st.closeOnBgClick=!1,g.st.showCloseBtn=!1,g.st.enableEscapeKey=!1),g.bgOverlay||(g.bgOverlay=u("bg").on("click.mfp",(function(){g.close()})),g.wrap=u("wrap").attr("tabindex",-1).on("click.mfp",(function(e){g._checkIfClose(e.target)&&g.close()})),g.container=u("container",g.wrap)),g.contentContainer=u("content"),g.st.preloader&&(g.preloader=u("preloader",g.container,g.st.tLoading));var a=c.magnificPopup.modules;for(i=0;a.length>i;i++){var o=(o=a[i]).charAt(0).toUpperCase()+o.slice(1);g["init"+o].call(g)}p("BeforeOpen"),g.st.showCloseBtn&&(g.st.closeBtnInside?(d(S,(function(e,t,n,i){n.close_replaceWith=f(i.type)})),v+=" mfp-close-btn-in"):g.wrap.append(f())),g.st.alignTop&&(v+=" mfp-align-top"),g.fixedContentPos?g.wrap.css({overflow:g.st.overflowY,overflowX:"hidden",overflowY:g.st.overflowY}):g.wrap.css({top:w.scrollTop(),position:"absolute"}),!1!==g.st.fixedBgPos&&("auto"!==g.st.fixedBgPos||g.fixedContentPos)||g.bgOverlay.css({height:m.height(),position:"absolute"}),g.st.enableEscapeKey&&m.on("keyup.mfp",(function(e){27===e.keyCode&&g.close()})),w.on("resize.mfp",(function(){g.updateSize()})),g.st.closeOnContentClick||(v+=" mfp-auto-cursor"),v&&g.wrap.addClass(v);var s=g.wH=w.height(),r={};g.fixedContentPos&&g._hasScrollBar(s)&&((l=g._getScrollbarSize())&&(r.marginRight=l)),g.fixedContentPos&&(g.isIE7?c("body, html").css("overflow","hidden"):r.overflow="hidden");var l=g.st.mainClass;return g.isIE7&&(l+=" mfp-ie7"),l&&g._addClassToMFP(l),g.updateItemHTML(),p("BuildControls"),c("html").css(r),g.bgOverlay.add(g.wrap).prependTo(g.st.prependTo||h),g._lastFocusedEl=document.activeElement,setTimeout((function(){g.content?(g._addClassToMFP(y),g._setFocus()):g.bgOverlay.addClass(y),m.on("focusin.mfp",g._onFocusIn)}),16),g.isOpen=!0,g.updateSize(s),p("Open"),e}g.updateItemHTML()},close:function(){g.isOpen&&(p(l),g.isOpen=!1,g.st.removalDelay&&!g.isLowIE&&g.supportsTransition?(g._addClassToMFP(s),setTimeout((function(){g._close()}),g.st.removalDelay)):g._close())},_close:function(){p(r);var e=s+" "+y+" ";g.bgOverlay.detach(),g.wrap.detach(),g.container.empty(),g.st.mainClass&&(e+=g.st.mainClass+" "),g._removeClassFromMFP(e),g.fixedContentPos&&(e={marginRight:""},g.isIE7?c("body, html").css("overflow",""):e.overflow="",c("html").css(e)),m.off("keyup.mfp focusin.mfp"),g.ev.off(n),g.wrap.attr("class","mfp-wrap").removeAttr("style"),g.bgOverlay.attr("class","mfp-bg"),g.container.attr("class","mfp-container"),!g.st.showCloseBtn||g.st.closeBtnInside&&!0!==g.currTemplate[g.currItem.type]||g.currTemplate.closeBtn&&g.currTemplate.closeBtn.detach(),g._lastFocusedEl&&c(g._lastFocusedEl).focus(),g.currItem=null,g.content=null,g.currTemplate=null,g.prevHeight=0,p("AfterClose")},updateSize:function(e){var t;g.isIOS?(t=document.documentElement.clientWidth/window.innerWidth,t=window.innerHeight*t,g.wrap.css("height",t),g.wH=t):g.wH=e||w.height(),g.fixedContentPos||g.wrap.css("height",g.wH),p("Resize")},updateItemHTML:function(){var e=g.items[g.index];g.contentContainer.detach(),g.content&&g.content.detach();var t=(e=!e.parsed?g.parseEl(g.index):e).type;p("BeforeChange",[g.currItem?g.currItem.type:"",t]),g.currItem=e,g.currTemplate[t]||(n=!!g.st[t]&&g.st[t].markup,p("FirstMarkupParse",n),g.currTemplate[t]=!n||c(n)),a&&a!==e.type&&g.container.removeClass("mfp-"+a+"-holder");var n=g["get"+t.charAt(0).toUpperCase()+t.slice(1)](e,g.currTemplate[t]);g.appendContent(n,t),e.preloaded=!0,p("Change",e),a=e.type,g.container.prepend(g.contentContainer),p("AfterChange")},appendContent:function(e,t){(g.content=e)?g.st.showCloseBtn&&g.st.closeBtnInside&&!0===g.currTemplate[t]?g.content.find(".mfp-close").length||g.content.append(f()):g.content=e:g.content="",p("BeforeAppend"),g.container.addClass("mfp-"+t+"-holder"),g.contentContainer.append(g.content)},parseEl:function(e){var t,n=g.items[e];if((n=n.tagName?{el:c(n)}:(t=n.type,{data:n,src:n.src})).el){for(var i=g.types,a=0;i.length>a;a++)if(n.el.hasClass("mfp-"+i[a])){t=i[a];break}n.src=n.el.attr("data-mfp-src"),n.src||(n.src=n.el.attr("href"))}return n.type=t||g.st.type||"inline",n.index=e,n.parsed=!0,g.items[e]=n,p("ElementParse",n),g.items[e]},addGroup:function(t,n){function e(e){e.mfpEl=this,g._openClick(e,t,n)}var i="click.magnificPopup";(n=n||{}).mainEl=t,n.items?(n.isObj=!0,t.off(i).on(i,e)):(n.isObj=!1,n.delegate?t.off(i).on(i,n.delegate,e):(n.items=t).off(i).on(i,e))},_openClick:function(e,t,n){if((void 0!==n.midClick?n:c.magnificPopup.defaults).midClick||2!==e.which&&!e.ctrlKey&&!e.metaKey){var i=(void 0!==n.disableOn?n:c.magnificPopup.defaults).disableOn;if(i)if(c.isFunction(i)){if(!i.call(g))return!0}else if(i>w.width())return!0;e.type&&(e.preventDefault(),g.isOpen&&e.stopPropagation()),n.el=c(e.mfpEl),n.delegate&&(n.items=t.find(n.delegate)),g.open(n)}},updateStatus:function(e,t){var n;g.preloader&&(i!==e&&g.container.removeClass("mfp-s-"+i),n={status:e,text:t=!t&&"loading"===e?g.st.tLoading:t},p("UpdateStatus",n),e=n.status,g.preloader.html(t=n.text),g.preloader.find("a").on("click",(function(e){e.stopImmediatePropagation()})),g.container.addClass("mfp-s-"+e),i=e)},_checkIfClose:function(e){if(!c(e).hasClass(M)){var t=g.st.closeOnContentClick,n=g.st.closeOnBgClick;if(t&&n)return!0;if(!g.content||c(e).hasClass("mfp-close")||g.preloader&&e===g.preloader[0])return!0;if(e===g.content[0]||c.contains(g.content[0],e)){if(t)return!0}else if(n&&c.contains(document,e))return!0;return!1}},_addClassToMFP:function(e){g.bgOverlay.addClass(e),g.wrap.addClass(e)},_removeClassFromMFP:function(e){this.bgOverlay.removeClass(e),g.wrap.removeClass(e)},_hasScrollBar:function(e){return(g.isIE7?m.height():document.body.scrollHeight)>(e||w.height())},_setFocus:function(){(g.st.focus?g.content.find(g.st.focus).eq(0):g.wrap).focus()},_onFocusIn:function(e){return e.target===g.wrap[0]||c.contains(g.wrap[0],e.target)?void 0:(g._setFocus(),!1)},_parseMarkup:function(a,e,t){var o;t.data&&(e=c.extend(t.data,e)),p(S,[a,e,t]),c.each(e,(function(e,t){return void 0===t||!1===t||void(1<(o=e.split("_")).length?0<(n=a.find(".mfp-"+o[0])).length&&("replaceWith"===(i=o[1])?n[0]!==t[0]&&n.replaceWith(t):"img"===i?n.is("img")?n.attr("src",t):n.replaceWith('<img src="'+t+'" class="'+n.attr("class")+'" />'):n.attr(o[1],t)):a.find(".mfp-"+e).html(t));var n,i}))},_getScrollbarSize:function(){var e;return void 0===g.scrollbarSize&&((e=document.createElement("div")).id="mfp-sbm",e.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(e),g.scrollbarSize=e.offsetWidth-e.clientWidth,document.body.removeChild(e)),g.scrollbarSize}},c.magnificPopup={instance:null,proto:e.prototype,modules:[],open:function(e,t){return o(),(e=e?c.extend(!0,{},e):{}).isObj=!0,e.index=t||0,this.instance.open(e)},close:function(){return c.magnificPopup.instance&&c.magnificPopup.instance.close()},registerModule:function(e,t){t.options&&(c.magnificPopup.defaults[e]=t.options),c.extend(this.proto,t.proto),this.modules.push(e)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&times;</button>',tClose:"Close (Esc)",tLoading:"Loading..."}},c.fn.magnificPopup=function(e){o();var t,n,i,a=c(this);return"string"==typeof e?"open"===e?(t=b?a.data("magnificPopup"):a[0].magnificPopup,n=parseInt(arguments[1],10)||0,i=t.items?t.items[n]:(i=a,(i=t.delegate?i.find(t.delegate):i).eq(n)),g._openClick({mfpEl:i},a,t)):g.isOpen&&g[e].apply(g,Array.prototype.slice.call(arguments,1)):(e=c.extend(!0,{},e),b?a.data("magnificPopup",e):a[0].magnificPopup=e,g.addGroup(a,e)),a};function B(){k&&(_.after(k.addClass(C)).detach(),k=null)}var C,_,k,E="inline";c.magnificPopup.registerModule(E,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){g.types.push(E),d(r+"."+E,(function(){B()}))},getInline:function(e,t){if(B(),e.src){var n,i=g.st.inline,a=c(e.src);return a.length?((n=a[0].parentNode)&&n.tagName&&(_||(C=i.hiddenClass,_=u(C),C="mfp-"+C),k=a.after(_).detach().removeClass(C)),g.updateStatus("ready")):(g.updateStatus("error",i.tNotFound),a=c("<div>")),e.inlineElement=a}return g.updateStatus("ready"),g._parseMarkup(t,{},e),t}}});function T(){x&&h.removeClass(x)}function I(){T(),g.req&&g.req.abort()}var x,$="ajax";c.magnificPopup.registerModule($,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){g.types.push($),x=g.st.ajax.cursor,d(r+"."+$,I),d("BeforeChange.ajax",I)},getAjax:function(i){x&&h.addClass(x),g.updateStatus("loading");var e=c.extend({url:i.src,success:function(e,t,n){n={data:e,xhr:n};p("ParseAjax",n),g.appendContent(c(n.data),$),i.finished=!0,T(),g._setFocus(),setTimeout((function(){g.wrap.addClass(y)}),16),g.updateStatus("ready"),p("AjaxContentAdded")},error:function(){T(),i.finished=i.loadError=!0,g.updateStatus("error",g.st.ajax.tError.replace("%url%",i.src))}},g.st.ajax.settings);return g.req=c.ajax(e),""}}});var A;c.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var e=g.st.image,t=".image";g.types.push("image"),d("Open"+t,(function(){"image"===g.currItem.type&&e.cursor&&h.addClass(e.cursor)})),d(r+t,(function(){e.cursor&&h.removeClass(e.cursor),w.off("resize.mfp")})),d("Resize"+t,g.resizeImage),g.isLowIE&&d("AfterChange",g.resizeImage)},resizeImage:function(){var e,t=g.currItem;t&&t.img&&g.st.image.verticalFit&&(e=0,g.isLowIE&&(e=parseInt(t.img.css("padding-top"),10)+parseInt(t.img.css("padding-bottom"),10)),t.img.css("max-height",g.wH-e))},_onImageHasSize:function(e){e.img&&(e.hasSize=!0,A&&clearInterval(A),e.isCheckingImgSize=!1,p("ImageHasSize",e),e.imgHidden&&(g.content&&g.content.removeClass("mfp-loading"),e.imgHidden=!1))},findImageSize:function(t){var n=0,i=t.img[0],a=function(e){A&&clearInterval(A),A=setInterval((function(){return 0<i.naturalWidth?void g._onImageHasSize(t):(200<n&&clearInterval(A),void(3===++n?a(10):40===n?a(50):100===n&&a(500)))}),e)};a(1)},getImage:function(e,t){var n,i=0,a=function(){e&&(e.img[0].complete?(e.img.off(".mfploader"),e===g.currItem&&(g._onImageHasSize(e),g.updateStatus("ready")),e.hasSize=!0,e.loaded=!0,p("ImageLoadComplete")):++i<200?setTimeout(a,100):o())},o=function(){e&&(e.img.off(".mfploader"),e===g.currItem&&(g._onImageHasSize(e),g.updateStatus("error",s.tError.replace("%url%",e.src))),e.hasSize=!0,e.loaded=!0,e.loadError=!0)},s=g.st.image,r=t.find(".mfp-img");return r.length&&((n=document.createElement("img")).className="mfp-img",e.img=c(n).on("load.mfploader",a).on("error.mfploader",o),n.src=e.src,r.is("img")&&(e.img=e.img.clone()),0<(n=e.img[0]).naturalWidth?e.hasSize=!0:n.width||(e.hasSize=!1)),g._parseMarkup(t,{title:(function(e){if(e.data&&void 0!==e.data.title)return e.data.title;var t=g.st.image.titleSrc;if(t){if(c.isFunction(t))return t.call(g,e);if(e.el)return e.el.attr(t)||""}return""})(e),img_replaceWith:e.img},e),g.resizeImage(),e.hasSize?(A&&clearInterval(A),e.loadError?(t.addClass("mfp-loading"),g.updateStatus("error",s.tError.replace("%url%",e.src))):(t.removeClass("mfp-loading"),g.updateStatus("ready"))):(g.updateStatus("loading"),e.loading=!0,e.hasSize||(e.imgHidden=!0,t.addClass("mfp-loading"),g.findImageSize(e))),t}}});var R;c.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(e){return e.is("img")?e:e.find("img")}},proto:{initZoom:function(){var e,t,n,i,a,o,s=g.st.zoom;s.enabled&&g.supportsTransition&&(i=s.duration,a=function(e){var t=e.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),n="all "+s.duration/1e3+"s "+s.easing,i={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},e="transition";return i["-webkit-"+e]=i["-moz-"+e]=i["-o-"+e]=i[e]=n,t.css(i),t},o=function(){g.content.css("visibility","visible")},d("BuildControls.zoom",(function(){g._allowZoom()&&(clearTimeout(t),g.content.css("visibility","hidden"),(e=g._getItemToZoom())?((n=a(e)).css(g._getOffset()),g.wrap.append(n),t=setTimeout((function(){n.css(g._getOffset(!0)),t=setTimeout((function(){o(),setTimeout((function(){n.remove(),e=n=null,p("ZoomAnimationEnded")}),16)}),i)}),16)):o())})),d(l+".zoom",(function(){if(g._allowZoom()){if(clearTimeout(t),g.st.removalDelay=i,!e){if(!(e=g._getItemToZoom()))return;n=a(e)}n.css(g._getOffset(!0)),g.wrap.append(n),g.content.css("visibility","hidden"),setTimeout((function(){n.css(g._getOffset())}),16)}})),d(r+".zoom",(function(){g._allowZoom()&&(o(),n&&n.remove(),e=null)})))},_allowZoom:function(){return"image"===g.currItem.type},_getItemToZoom:function(){return!!g.currItem.hasSize&&g.currItem.img},_getOffset:function(e){var t=e?g.currItem.img:g.st.zoom.opener(g.currItem.el||g.currItem),n=t.offset(),i=parseInt(t.css("padding-top"),10),e=parseInt(t.css("padding-bottom"),10);n.top-=c(window).scrollTop()-i;i={width:t.width(),height:(b?t.innerHeight():t[0].offsetHeight)-e-i};return(R=void 0===R?void 0!==document.createElement("p").style.MozTransform:R)?i["-moz-transform"]=i.transform="translate("+n.left+"px,"+n.top+"px)":(i.left=n.left,i.top=n.top),i}}});function P(e){var t;!g.currTemplate[L]||(t=g.currTemplate[L].find("iframe")).length&&(e||(t[0].src="//about:blank"),g.isIE8&&t.css("display",e?"block":"none"))}var L="iframe";c.magnificPopup.registerModule(L,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){g.types.push(L),d("BeforeChange",(function(e,t,n){t!==n&&(t===L?P():n===L&&P(!0))})),d(r+"."+L,(function(){P()}))},getIframe:function(e,t){var n=e.src,i=g.st.iframe;c.each(i.patterns,(function(){return-1<n.indexOf(this.index)?(this.id&&(n="string"==typeof this.id?n.substr(n.lastIndexOf(this.id)+this.id.length,n.length):this.id.call(this,n)),n=this.src.replace("%id%",n),!1):void 0}));var a={};return i.srcAction&&(a[i.srcAction]=n),g._parseMarkup(t,a,e),g.updateStatus("ready"),t}}});function D(e){var t=g.items.length;return t-1<e?e-t:e<0?t+e:e}function O(e,t,n){return e.replace(/%curr%/gi,t+1).replace(/%total%/gi,n)}c.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var o=g.st.gallery,e=".mfp-gallery",i=Boolean(c.fn.mfpFastClick);return g.direction=!0,!(!o||!o.enabled)&&(v+=" mfp-gallery",d("Open"+e,(function(){o.navigateByImgClick&&g.wrap.on("click"+e,".mfp-img",(function(){return 1<g.items.length?(g.next(),!1):void 0})),m.on("keydown"+e,(function(e){37===e.keyCode?g.prev():39===e.keyCode&&g.next()}))})),d("UpdateStatus"+e,(function(e,t){t.text&&(t.text=O(t.text,g.currItem.index,g.items.length))})),d(S+e,(function(e,t,n,i){var a=g.items.length;n.counter=1<a?O(o.tCounter,i.index,a):""})),d("BuildControls"+e,(function(){var e,t,n;1<g.items.length&&o.arrows&&!g.arrowLeft&&(n=o.arrowMarkup,e=g.arrowLeft=c(n.replace(/%title%/gi,o.tPrev).replace(/%dir%/gi,"left")).addClass(M),t=g.arrowRight=c(n.replace(/%title%/gi,o.tNext).replace(/%dir%/gi,"right")).addClass(M),e[n=i?"mfpFastClick":"click"]((function(){g.prev()})),t[n]((function(){g.next()})),g.isIE7&&(u("b",e[0],!1,!0),u("a",e[0],!1,!0),u("b",t[0],!1,!0),u("a",t[0],!1,!0)),g.container.append(e.add(t)))})),d("Change"+e,(function(){g._preloadTimeout&&clearTimeout(g._preloadTimeout),g._preloadTimeout=setTimeout((function(){g.preloadNearbyImages(),g._preloadTimeout=null}),16)})),void d(r+e,(function(){m.off(e),g.wrap.off("click"+e),g.arrowLeft&&i&&g.arrowLeft.add(g.arrowRight).destroyMfpFastClick(),g.arrowRight=g.arrowLeft=null})))},next:function(){g.direction=!0,g.index=D(g.index+1),g.updateItemHTML()},prev:function(){g.direction=!1,g.index=D(g.index-1),g.updateItemHTML()},goTo:function(e){g.direction=e>=g.index,g.index=e,g.updateItemHTML()},preloadNearbyImages:function(){for(var e=g.st.gallery.preload,t=Math.min(e[0],g.items.length),n=Math.min(e[1],g.items.length),i=1;(g.direction?n:t)>=i;i++)g._preloadItem(g.index+i);for(i=1;(g.direction?t:n)>=i;i++)g._preloadItem(g.index-i)},_preloadItem:function(e){var t;e=D(e),g.items[e].preloaded||((t=g.items[e]).parsed||(t=g.parseEl(e)),p("LazyLoad",t),"image"===t.type&&(t.img=c('<img class="mfp-img" />').on("load.mfploader",(function(){t.hasSize=!0})).on("error.mfploader",(function(){t.hasSize=!0,t.loadError=!0,p("LazyLoadError",t)})).attr("src",t.src)),t.preloaded=!0)}}});var N,U,G="retina";function F(){w.off("touchmove"+U+" touchend"+U)}c.magnificPopup.registerModule(G,{options:{replaceSrc:function(e){return e.src.replace(/\.\w+$/,(function(e){return"@2x"+e}))},ratio:1},proto:{initRetina:function(){var n,i;1<window.devicePixelRatio&&(n=g.st.retina,i=n.ratio,1<(i=isNaN(i)?i():i)&&(d("ImageHasSize."+G,(function(e,t){t.img.css({"max-width":t.img[0].naturalWidth/i,width:"100%"})})),d("ElementParse."+G,(function(e,t){t.src=n.replaceSrc(t,i)}))))}}}),N="ontouchstart"in window,U=".mfpFastClick",c.fn.mfpFastClick=function(l){return c(this).each((function(){var t,n,i,a,o,s,r,e=c(this);N&&e.on("touchstart"+U,(function(e){o=!1,r=1,s=(e.originalEvent||e).touches[0],i=s.clientX,a=s.clientY,w.on("touchmove"+U,(function(e){s=(e.originalEvent||e).touches,r=s.length,s=s[0],(10<Math.abs(s.clientX-i)||10<Math.abs(s.clientY-a))&&(o=!0,F())})).on("touchend"+U,(function(e){F(),o||1<r||(t=!0,e.preventDefault(),clearTimeout(n),n=setTimeout((function(){t=!1}),1e3),l())}))})),e.on("click"+U,(function(){t||l()}))}))},c.fn.destroyMfpFastClick=function(){c(this).off("touchstart"+U+" click"+U),N&&w.off("touchmove"+U+" touchend"+U)},o()})(window.jQuery||window.Zepto),BMS.Analytics.ANALYTICS_SCHEMA_VERSION="3",BMS.Analytics.commonClickStreamParams=function(){return{schema_version:BMS.Analytics.ANALYTICS_SCHEMA_VERSION,bms_id:BMS.Storage.get({name:"bmsId"})?BMS.Storage.get({name:"bmsId"}).replace(/['"]+/g,""):"",member_id:BMS.Storage.get({name:"ld",key:"MEMBERID"}),region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",user_mode:""!==BMS.Storage.get({name:"ld"})?"logged_in":"guest",page_url:window.location.href}},BMS.Analytics.pushLanguageSelectionLotame=function(e){try{}catch(e){BMS.Misc.fnErr({fnName:"BMS.Analytics.pushLanguageSelectionLotame",err:e})}};