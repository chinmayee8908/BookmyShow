var initializeSvgForIE=function(){var f,e,g,m,v,t;"undefined"!=typeof window&&window.addEventListener&&(f=Object.create(null),g=function(){clearTimeout(e),e=setTimeout(t,100)},m=function(){},v="http://www.w3.org/1999/xlink",(t=function(){var e,t,r,n,a,i,o,s,l,c,d,u=0;function h(){var e;0==--u&&(m(),window.addEventListener("resize",g,!1),window.addEventListener("orientationchange",g,!1),m=window.MutationObserver?((e=new MutationObserver(g)).observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0}),function(){try{e.disconnect(),window.removeEventListener("resize",g,!1),window.removeEventListener("orientationchange",g,!1)}catch(e){}}):(document.documentElement.addEventListener("DOMSubtreeModified",g,!1),function(){document.documentElement.removeEventListener("DOMSubtreeModified",g,!1),window.removeEventListener("resize",g,!1),window.removeEventListener("orientationchange",g,!1)}))}function p(e){return function(){1!=f[e.base]&&(e.useEl.setAttributeNS(v,"xlink:href","#"+e.hash),e.useEl.hasAttribute("href")&&e.useEl.setAttribute("href","#"+e.hash))}}function y(e){return function(){e.onerror=null,e.ontimeout=null,h()}}for(m(),i=document.getElementsByTagName("use"),n=0;n<i.length;n+=1){try{t=i[n].getBoundingClientRect()}catch(e){t=!1}e=(c=(d=i[n].getAttribute("href")||i[n].getAttributeNS(v,"href")||i[n].getAttribute("xlink:href"))&&d.split?d.split("#"):["",""])[0],r=c[1],a=t&&0==t.left&&0==t.right&&0==t.top&&0==t.bottom,t&&0==t.width&&0==t.height&&!a?(i[n].hasAttribute("href")&&i[n].setAttributeNS(v,"xlink:href",d),e.length&&(1!=(o=f[e])&&setTimeout(p({useEl:i[n],base:e,hash:r}),0),null==o&&(s=e,l=function(e){var t;return null!=e.protocol?t=e:(t=document.createElement("a")).href=e,t.protocol.replace(/:/g,"")+t.host},d=c=void 0,window.XMLHttpRequest&&(c=new XMLHttpRequest,d=l(location),s=l(s),c=null==c.withCredentials&&""!=s&&s!=d?XDomainRequest||void 0:XMLHttpRequest),null!=c&&(o=new c,(f[e]=o).onload=(function(r){return function(){var e=document.body,t=document.createElement("x");r.onload=null,t.innerHTML=r.responseText,(t=t.getElementsByTagName("svg")[0])&&(t.setAttribute("aria-hidden","true"),t.style.position="absolute",t.style.width=0,t.style.height=0,t.style.overflow="hidden",e.insertBefore(t,e.firstChild)),h()}})(o),o.onerror=y(o),o.ontimeout=y(o),o.open("GET",e),o.send(),u+=1)))):a?e.length&&f[e]&&setTimeout(p({useEl:i[n],base:e,hash:r}),0):null==f[e]?f[e]=!0:f[e].onload&&(f[e].abort(),delete f[e].onload,f[e]=!0)}i="",u+=1,h()})())},venueShowcaseDetails={},isYoutubeIframeScriptReady=!1,venueShowcasePlayerInstances=[],loadYoutubeIframeScript=function(){try{window.YT&&(window.YT=void 0);var e=document.createElement("script");e.id="youtube-cinema-photo-showcase-iframe-api",e.src="https://www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),window.onYouTubeIframeAPIReady=function(){isYoutubeIframeScriptReady=!0}}catch(e){BMS.Misc.fnErr({fnName:"loadYoutubeIframeScript",err:e})}},fetchVenueShowcaseDetails=function(t){try{loadYoutubeIframeScript(),renderVenueShowcaseLoader(),$(".heading-container .heading").text(""),BMS.Misc.fnAjax({url:"/serv/getData",data:{cmd:"VENUESHOWCASE",venueCode:t},success:function(e){(venueShowcaseDetails=e)&&null!=e&&0<Object.keys(e).length?e.data&&0<Object.keys(e.data).length?(venueShowcaseDetails=e.data,renderVenueShowcaseDetails()):renderVenueShowcaseDetailsError(e,t):renderVenueShowcaseDetailsError({},t)},error:function(e){renderVenueShowcaseDetailsError(e,t)}})}catch(e){renderVenueShowcaseDetailsError(e,t)}},renderVenueShowcaseDetails=function(){try{updateVenueInfo();var e,t=1;"VN"==byWhat?(e="",t=1.5,renderAddressComponent(),e+=renderSafetyMeasuresComponent(),e+=renderVenueFacilities(),$(".cinema-photo-showcase-gallery")[0].innerHTML=renderGalleryComponent(),$(".cinema-photo-showcase-wrapper")[0].innerHTML=e):(e="",e+=renderGalleryComponent(),e+=renderMapComponent(),e+=renderAddressComponent(),e+=renderSafetyMeasuresComponent(),e+=renderVenueFacilities(),$(".photo-showcase-container")[0].innerHTML=e),$(".gallery-component-wrapper").slick({slidesToShow:t,centerMode:!1,infinite:!1,dots:!1,autoplay:!1,pauseOnHover:!1,swipeToSlide:!0}),$(".gallery-component-wrapper").on("afterChange",sliderOnChangeHandler),$(".gallery-component-wrapper").on("beforeChange",stopCurrentlyPlayingVideo),checkForSingleMultimedia(),isBrowserIE()&&initializeSvgForIE()}catch(e){BMS.Misc.fnErr({fnName:"renderVenueShowcaseDetails",err:e})}},checkForSingleMultimedia=function(){try{1==(BMS.Misc.Helpers.getIn(venueShowcaseDetails,["venueMultimedia","mediaCount"])||0)&&($(".slick-list").addClass("single-slide"),$(".gallery-category-pills-wrapper").hide())}catch(e){BMS.Misc.fnErr({fnName:"checkForSingleMultimedia",err:e})}},updateVenueInfo=function(){try{"VN"==byWhat?($(".venue-info-container .venue-heading").text(venueShowcaseDetails.venueName),$(".venue-info-container .venue-location").text(venueShowcaseDetails.venueAddress)):$(".heading-container .heading").text(venueShowcaseDetails.venueName)}catch(e){BMS.Misc.fnErr({fnName:"updateVenueInfo",err:e})}},renderAddressComponent=function(){try{var e=BMS.Misc.Helpers.getIn(venueShowcaseDetails,["venueAddress"])||"",t=BMS.Misc.Helpers.getIn(venueShowcaseDetails,["addressIcon"])||"";if(e){var r=venueShowcaseDetails.latitude,n=venueShowcaseDetails.longitude,a=venueShowcaseDetails.venueName;if("VN"!=byWhat){var i=$("#template-address-bar")[0].innerHTML;return BMS.Misc.Helpers.render(i,{addressIcon:t,venueAddress:e,mapURL:"https://maps.google.co.in/?q="+r+","+n+"("+a+")"})}var o,s="",l=$("#template-map-icon")[0].innerHTML,c=BMS.Misc.Helpers.getIn(venueShowcaseDetails,["detailsText"])||"";s+=BMS.Misc.Helpers.render(l,{mapURL:"https://maps.google.co.in/?q="+r+","+n+"("+a+")"}),c&&(o=$("#template-details-section")[0].innerHTML,s+=BMS.Misc.Helpers.render(o,{detailsText:c})),$(".address-wrapper").append(s)}}catch(e){BMS.Misc.fnErr({fnName:"renderAddressComponent",err:e})}},renderMapComponent=function(){try{var e=BMS.Misc.Helpers.getIn(venueShowcaseDetails,["venueMultimedia"])||{};if(venueShowcaseDetails.latitude&&venueShowcaseDetails.longitude&&!Object.keys(e).length){var t=venueShowcaseDetails.latitude,r=venueShowcaseDetails.longitude,n=$("#template-map-section")[0].innerHTML,a="https://maps.google.com/maps?q="+t+","+r+"&hl=es;z=14&output=embed";return BMS.Misc.Helpers.render(n,{mapSrc:a})}return""}catch(e){BMS.Misc.fnErr({fnName:"renderMapComponent",err:e})}},renderGalleryComponent=function(){try{var e=BMS.Misc.Helpers.getIn(venueShowcaseDetails,["venueMultimedia"])||{};if(Object.keys(e).length){for(var t=venueShowcaseDetails.venueMultimedia.categories||[],r="",n="",a=$("#template-gallery-pill")[0].innerHTML,i=0;i<t.length;i++){n+=BMS.Misc.Helpers.render(a,{categoryName:t[i].category,activeClass:0==i?"active":""});for(var o,s,l,c=0;c<t[i].categoryData.length;c++)"image"==t[i].categoryData[c].type?(o=$("#template-gallery-image-slide")[0].innerHTML,r+=BMS.Misc.Helpers.render(o,{imageURL:t[i].categoryData[c].url,categoryFrame:t[i].category,flow:"VN"==byWhat?"venue-flow":""})):"video"==t[i].categoryData[c].type&&(s=$("#template-gallery-video-placeholder")[0].innerHTML,l=extractVideoId(t[i].categoryData[c].url),r+=BMS.Misc.Helpers.render(s,{imageURL:"https://img.youtube.com/vi/"+l+"/sddefault.jpg",categoryFrame:t[i].category,videoId:l,flow:"VN"==byWhat?"venue-flow":""}))}var d=$("#template-gallery-wrapper")[0].innerHTML;return BMS.Misc.Helpers.render(d,{childSlides:r,categoryPills:n})}return""}catch(e){BMS.Misc.fnErr({fnName:"renderGalleryComponent",err:e})}},stopCurrentlyPlayingVideo=function(){try{for(var e=0;e<venueShowcasePlayerInstances.length;e++){var t=venueShowcasePlayerInstances[e];t&&t.getPlayerState&&t.getPlayerState()==YT.PlayerState.PLAYING&&t.stopVideo&&t.stopVideo()}}catch(e){BMS.Misc.fnErr({fnName:"stopCurrentlyPlayingVideo",err:e})}},sliderOnChangeHandler=function(){try{var e,t=$(".gallery-component-wrapper .slick-slide.slick-active");t.length&&((e=t[0].getAttribute("data-category-frame"))!=$(".gallery-category-pills-wrapper .category-pill.active")[0].getAttribute("data-category-pill")&&($(".category-pill.active").removeClass("active"),$('.category-pill[data-category-pill="'+e+'"]').addClass("active")),"VN"!=byWhat&&$(".category-pill.active")[0].scrollIntoView(!1,{behavior:isBrowserIE()?"auto":"smooth",block:"end",inline:"nearest"}))}catch(e){BMS.Misc.fnErr({fnName:"sliderOnChangeHandler",err:e})}},extractVideoId=function(e){try{return e?new RegExp("[?&]v=([^&#]*)").exec(e)[1]||0:""}catch(e){BMS.Misc.fnErr({fnName:"extractVideoId",err:e})}},isBrowserIE=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE "),e=e.indexOf("Trident/");return 0<t||0<e},isGalleryInViewport=function(){var e=$(".gallery-component-wrapper").offset().top,t=e+$(".gallery-component-wrapper").outerHeight(),r=$(window).scrollTop(),n=r+$(window).height();return r<t&&e<n},bindVideoFrameScrollListner=function(){$(window).on("resize scroll",(function(){isGalleryInViewport()||(stopCurrentlyPlayingVideo(),unbindVideoFrameScrollListner());var e=$(".showtime-filters").offset().top;$(window).scroll((function(){$(window).scrollTop()>e+5?($(".filters-container").addClass("sticky-filter _primary_hide"),$(".top-section-container > .__img").hide()):($(".filters-container").removeClass("sticky-filter _primary_show _primary_hide"),$(".top-section-container > .__img").show())}))}))},unbindVideoFrameScrollListner=function(){$(window).off("resize scroll")},replaceVideoPlaceholder=function(e){try{var t,r=e.getAttribute("data-slick-index"),n=e.getAttribute("data-video-id");"VN"!=byWhat||(t=$(".gallery-component-wrapper .slick-slide.slick-active")).length&&r!=t[0].getAttribute("data-slick-index")&&$(".gallery-component-wrapper").slick("slickNext");var a,i=$("#template-video-slide")[0].innerHTML;$('.gallery-component-wrapper [data-slick-index="'+r+'"]')[0].innerHTML=BMS.Misc.Helpers.render(i,{divID:"yt-player-"+r}),window.YT&&isYoutubeIframeScriptReady&&(a=0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor"),venueShowcasePlayerInstances[r]=new YT.Player("yt-player-"+r,{height:"100%",width:"100%",videoId:n,playerVars:{enablejsapi:1,modestbranding:1,origin:window.location.hostname,playsinline:1,mute:a?1:0},events:{onReady:handleOnPlayerReady,onStateChange:handleOnPlayerStateChange}}))}catch(e){BMS.Misc.fnErr({fnName:"replaceVideoPlaceholder",err:e})}},handleOnPlayerStateChange=function(e){try{var t=BMS.Misc.Helpers.getIn(e,["target"])||"";if(t&&t.getPlayerState&&t.getPlayerState()==YT.PlayerState.PLAYING){var r=BMS.Misc.Helpers.getIn(t,["playerInfo","videoData","video_id"])||"";if(r)for(var n=0;n<venueShowcasePlayerInstances.length;n++){var a=venueShowcasePlayerInstances[n];(BMS.Misc.Helpers.getIn(a,["playerInfo","videoData","video_id"])||"")!=r&&a.getPlayerState&&a.getPlayerState()==YT.PlayerState.PLAYING&&a.stopVideo&&a.stopVideo()}bindVideoFrameScrollListner()}}catch(e){BMS.Misc.fnErr({fnName:"handleOnPlayerStateChange",err:e})}},handleOnPlayerReady=function(e){e.target.playVideo()},updateGalleryCategory=function(e){try{var t=e.getAttribute("data-category-pill"),r=$('.gallery-component-wrapper .slick-slide[data-category-frame="'+t+'"]')[0].getAttribute("data-slick-index");$(".category-pill.active").removeClass("active"),$(e).addClass("active"),$(".gallery-component-wrapper").slick("slickGoTo",r)}catch(e){BMS.Misc.fnErr({fnName:"updateGalleryCategory",err:e})}},renderVenueShowcaseDetailsError=function(e,t){try{if("VN"==byWhat)return;var r={icon:"https://in.bmscdn.com/moviemode/cinemaphotoshowcase/error.png",title:"Oops!",code:"",description:"There is some issue loading Cinema details. Please try again",ctaText:"Retry"};e&&e.error&&e.error.icon&&(r=e.error);var n=$("#venue-showcase-error")[0].innerHTML,a=BMS.Misc.Helpers.render(n,{imageURL:r.icon,heading:r.title,buttonText:r.ctaText,message:r.description,venueCode:t});$(".photo-showcase-container")[0].innerHTML=a}catch(e){BMS.Misc.fnErr({fnName:"renderVenueShowcaseLoader",err:e})}},renderVenueShowcaseLoader=function(){try{if("VN"==byWhat)return;var e=$("#venue-showcase-loader")[0].innerHTML;$(".photo-showcase-container")[0].innerHTML=e}catch(e){BMS.Misc.fnErr({fnName:"renderVenueShowcaseLoader",err:e})}},renderSafetyMeasuresComponent=function(){try{var e=BMS.Misc.Helpers.getIn(venueShowcaseDetails,["venueProperties"])||{},t=e.propertyTags,r="",n="",a=$("#venue-safety-measures")[0].innerHTML,i=$("#venue-safety-measure-item")[0].innerHTML,o=e.propertyIcon?"block":"none";if(Object.keys(e).length){for(var s=0;s<t.length;s++)n+=BMS.Misc.Helpers.render(i,{safetyTag:t[s]});r=BMS.Misc.Helpers.render(a,{imageURL:e.propertyIcon,safetyTitle:e.propertyText,safetyItems:n,showSafetyIcon:o,flow:"VN"==byWhat?"venue-flow":""})}return r}catch(e){BMS.Misc.fnErr({fnName:"renderSafetyMeasuresComponent",err:e})}},renderVenueFacilities=function(){try{var e=BMS.Misc.Helpers.getIn(venueShowcaseDetails,["venueFacilities"])||{},t=e.facilities,r="",n="",a=$("#venue-facilities")[0].innerHTML,i=$("#venue-facility-item")[0].innerHTML;if(Object.keys(e).length){for(var o=0;o<t.length;o++)n+=BMS.Misc.Helpers.render(i,{imageURL:t[o].icon,facilityText:t[o].text});r=BMS.Misc.Helpers.render(a,{title:e.displayText,flow:"VN"==byWhat?"venue-flow":"",facilities:n})}return r}catch(e){BMS.Misc.fnErr({fnName:"renderVenueFacilities",err:e})}},toggleCinemaShowcaseModal=function(e){try{var t=e.getAttribute("data-venue-code");fetchVenueShowcaseDetails(t),BMS.Misc.modal("photo-showcase-modal",!0);var r=$(".__overlay");r.length&&r[0].addEventListener("click",handlerVenueShowCaseCrossIconClick)}catch(e){BMS.Misc.fnErr({fnName:"toggleCinemaShowcaseModal",err:e})}},handlerVenueShowCaseCrossIconClick=function(){var e=$(".__overlay");e.length&&e.off("click"),stopCurrentlyPlayingVideo(),BMS.Modal.fnHideModal(),$(".filters-container").removeClass("sticky-filter _primary_show _primary_hide")},toggleCinemaPhotoShowcaseDetailsSection=function(){try{var e=$(".cinema-photo-showcase-panel")[0];e.style.height?e.style.height=null:e.style.height=e.scrollHeight+"px",$(".details-wrapper .chevron-icon")[0].classList.toggle("is-open")}catch(e){BMS.Misc.fnErr({fnName:"toggleCinemaPhotoShowcaseDetailsSection",err:e})}};$(document).ready((function(){var e;"VN"==byWhat&&(venueCode||Cinema_id)&&(e=venueCode||Cinema_id,fetchVenueShowcaseDetails(e))}));